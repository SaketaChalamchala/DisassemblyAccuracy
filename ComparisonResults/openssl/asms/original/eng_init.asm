; Listing generated by Microsoft (R) Optimizing Compiler Version 19.00.23918.0 

	TITLE	C:\workpace\openssl\openssl-1.0.2h\crypto\engine\eng_init.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	_ENGINE_init
PUBLIC	_ENGINE_finish
PUBLIC	_engine_unlocked_init
PUBLIC	_engine_unlocked_finish
PUBLIC	??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@ ; `string'
EXTRN	_CRYPTO_lock:PROC
EXTRN	_ERR_put_error:PROC
EXTRN	_engine_free_util:PROC
;	COMDAT ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
CONST	SEGMENT
??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@ DB '.\crypto\engin'
	DB	'e\eng_init.c', 00H				; `string'
CONST	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _engine_unlocked_finish
_TEXT	SEGMENT
_e$ = 8							; size = 4
_unlock_for_handlers$ = 12				; size = 4
_engine_unlocked_finish PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\engine\eng_init.c
; Line 90
	push	esi
; Line 101
	mov	esi, DWORD PTR _e$[esp]
	push	edi
	mov	edi, 1
	add	DWORD PTR [esi+92], -1
; Line 103
	jne	SHORT $LN5@engine_unl
	cmp	DWORD PTR [esi+60], 0
	je	SHORT $LN5@engine_unl
; Line 104
	cmp	DWORD PTR _unlock_for_handlers$[esp+4], 0
	je	SHORT $LN3@engine_unl
; Line 105
	push	105					; 00000069H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	30					; 0000001eH
	push	10					; 0000000aH
	call	_CRYPTO_lock
	add	esp, 16					; 00000010H
$LN3@engine_unl:
; Line 106
	mov	eax, DWORD PTR [esi+60]
	push	esi
	call	eax
	add	esp, 4
	mov	edi, eax
; Line 107
	cmp	DWORD PTR _unlock_for_handlers$[esp+4], 0
	je	SHORT $LN4@engine_unl
; Line 108
	push	108					; 0000006cH
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	30					; 0000001eH
	push	9
	call	_CRYPTO_lock
	add	esp, 16					; 00000010H
$LN4@engine_unl:
; Line 109
	test	edi, edi
	je	SHORT $LN8@engine_unl
$LN5@engine_unl:
; Line 119
	push	0
	push	esi
	call	_engine_free_util
	add	esp, 8
	test	eax, eax
	jne	SHORT $LN6@engine_unl
; Line 120
	push	120					; 00000078H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	106					; 0000006aH
	push	191					; 000000bfH
	push	38					; 00000026H
	call	_ERR_put_error
	add	esp, 20					; 00000014H
$LN8@engine_unl:
; Line 121
	pop	edi
	xor	eax, eax
	pop	esi
; Line 124
	ret	0
$LN6@engine_unl:
; Line 123
	mov	eax, edi
	pop	edi
	pop	esi
; Line 124
	ret	0
_engine_unlocked_finish ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _engine_unlocked_init
_TEXT	SEGMENT
_e$ = 8							; size = 4
_engine_unlocked_init PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\engine\eng_init.c
; Line 63
	push	esi
; Line 66
	mov	esi, DWORD PTR _e$[esp]
	mov	eax, 1
	cmp	DWORD PTR [esi+92], 0
	jne	SHORT $LN5@engine_unl
	mov	ecx, DWORD PTR [esi+56]
	test	ecx, ecx
	je	SHORT $LN5@engine_unl
; Line 71
	push	esi
	call	ecx
	add	esp, 4
; Line 72
	test	eax, eax
	je	SHORT $LN3@engine_unl
$LN5@engine_unl:
; Line 77
	inc	DWORD PTR [esi+88]
; Line 78
	inc	DWORD PTR [esi+92]
$LN3@engine_unl:
	pop	esi
; Line 83
	ret	0
_engine_unlocked_init ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _ENGINE_finish
_TEXT	SEGMENT
_e$ = 8							; size = 4
_ENGINE_finish PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\engine\eng_init.c
; Line 142
	push	esi
; Line 145
	mov	esi, DWORD PTR _e$[esp]
	test	esi, esi
	jne	SHORT $LN2@ENGINE_fin
; Line 146
	push	146					; 00000092H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	67					; 00000043H
	push	107					; 0000006bH
	push	38					; 00000026H
	call	_ERR_put_error
	add	esp, 20					; 00000014H
; Line 147
	xor	eax, eax
	pop	esi
; Line 157
	ret	0
$LN2@ENGINE_fin:
	push	edi
; Line 149
	push	149					; 00000095H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	30					; 0000001eH
	push	9
	call	_CRYPTO_lock
	add	esp, 16					; 00000010H
; Line 91
	mov	edi, 1
; Line 101
	add	DWORD PTR [esi+92], -1
; Line 103
	jne	SHORT $LN9@ENGINE_fin
	cmp	DWORD PTR [esi+60], 0
	je	SHORT $LN9@ENGINE_fin
; Line 105
	push	105					; 00000069H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	30					; 0000001eH
	push	10					; 0000000aH
	call	_CRYPTO_lock
; Line 106
	mov	eax, DWORD PTR [esi+60]
	push	esi
	call	eax
; Line 108
	push	108					; 0000006cH
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	30					; 0000001eH
	push	9
	mov	edi, eax
	call	_CRYPTO_lock
	add	esp, 36					; 00000024H
; Line 109
	test	edi, edi
	je	SHORT $LN13@ENGINE_fin
$LN9@ENGINE_fin:
; Line 119
	push	0
	push	esi
	call	_engine_free_util
	add	esp, 8
	test	eax, eax
	jne	SHORT $LN10@ENGINE_fin
; Line 120
	push	120					; 00000078H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	106					; 0000006aH
	push	191					; 000000bfH
	push	38					; 00000026H
	call	_ERR_put_error
	add	esp, 20					; 00000014H
$LN13@ENGINE_fin:
; Line 121
	xor	edi, edi
$LN10@ENGINE_fin:
; Line 151
	push	151					; 00000097H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	30					; 0000001eH
	push	10					; 0000000aH
	call	_CRYPTO_lock
	add	esp, 16					; 00000010H
; Line 152
	test	edi, edi
	jne	SHORT $LN3@ENGINE_fin
; Line 153
	push	153					; 00000099H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	106					; 0000006aH
	push	107					; 0000006bH
	push	38					; 00000026H
	call	_ERR_put_error
	add	esp, 20					; 00000014H
; Line 154
	xor	eax, eax
	pop	edi
	pop	esi
; Line 157
	ret	0
$LN3@ENGINE_fin:
; Line 156
	mov	eax, edi
	pop	edi
	pop	esi
; Line 157
	ret	0
_ENGINE_finish ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _ENGINE_init
_TEXT	SEGMENT
_e$ = 8							; size = 4
_ENGINE_init PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\engine\eng_init.c
; Line 128
	push	esi
; Line 130
	mov	esi, DWORD PTR _e$[esp]
	test	esi, esi
	jne	SHORT $LN2@ENGINE_ini
; Line 131
	push	131					; 00000083H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	67					; 00000043H
	push	119					; 00000077H
	push	38					; 00000026H
	call	_ERR_put_error
	add	esp, 20					; 00000014H
; Line 132
	xor	eax, eax
	pop	esi
; Line 138
	ret	0
$LN2@ENGINE_ini:
	push	edi
; Line 134
	push	134					; 00000086H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	30					; 0000001eH
	push	9
	call	_CRYPTO_lock
	add	esp, 16					; 00000010H
; Line 64
	mov	edi, 1
; Line 66
	cmp	DWORD PTR [esi+92], 0
	jne	SHORT $LN8@ENGINE_ini
	mov	eax, DWORD PTR [esi+56]
	test	eax, eax
	je	SHORT $LN8@ENGINE_ini
; Line 71
	push	esi
	call	eax
	mov	edi, eax
	add	esp, 4
; Line 72
	test	edi, edi
	je	SHORT $LN6@ENGINE_ini
$LN8@ENGINE_ini:
; Line 77
	inc	DWORD PTR [esi+88]
; Line 78
	inc	DWORD PTR [esi+92]
$LN6@ENGINE_ini:
; Line 136
	push	136					; 00000088H
	push	OFFSET ??_C@_0BL@BEBELKO@?4?2crypto?2engine?2eng_init?4c?$AA@
	push	30					; 0000001eH
	push	10					; 0000000aH
	call	_CRYPTO_lock
	add	esp, 16					; 00000010H
; Line 137
	mov	eax, edi
	pop	edi
	pop	esi
; Line 138
	ret	0
_ENGINE_init ENDP
_TEXT	ENDS
END
