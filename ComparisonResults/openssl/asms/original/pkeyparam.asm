; Listing generated by Microsoft (R) Optimizing Compiler Version 19.00.23918.0 

	TITLE	C:\workpace\openssl\openssl-1.0.2h\apps\pkeyparam.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	_pkeyparam_main
PUBLIC	??_C@_03DAJLOBIG@?9in?$AA@			; `string'
PUBLIC	??_C@_04HKKABCEL@?9out?$AA@			; `string'
PUBLIC	??_C@_07CECBDAGF@?9engine?$AA@			; `string'
PUBLIC	??_C@_05OEBEIMJA@?9text?$AA@			; `string'
PUBLIC	??_C@_06JPEJAHHH@?9noout?$AA@			; `string'
PUBLIC	??_C@_0BL@JPHIEEFF@Usage?5pkeyparam?5?$FLoptions?$FN?6?$AA@ ; `string'
PUBLIC	??_C@_0BD@KHANLAHK@where?5options?5are?6?$AA@	; `string'
PUBLIC	??_C@_0BM@OAPGFGAE@?9in?5file?5?5?5?5?5?5?5?5input?5file?6?$AA@ ; `string'
PUBLIC	??_C@_0BN@IBKDGIDA@?9out?5file?5?5?5?5?5?5?5output?5file?6?$AA@ ; `string'
PUBLIC	??_C@_0CK@JDIOBHGL@?9text?5?5?5?5?5?5?5?5?5?5?5print?5parameters@ ; `string'
PUBLIC	??_C@_0DB@CEIGEDBJ@?9noout?5?5?5?5?5?5?5?5?5?5don?8t?5output?5enc@ ; `string'
PUBLIC	??_C@_0DL@NDFIJIDB@?9engine?5e?5?5?5?5?5?5?5use?5engine?5e?0?5po@ ; `string'
PUBLIC	??_C@_01KDCPPGHE@r?$AA@				; `string'
PUBLIC	??_C@_0BK@FBJDPEEG@Can?8t?5open?5input?5file?5?$CFs?6?$AA@ ; `string'
PUBLIC	??_C@_01NOFIACDB@w?$AA@				; `string'
PUBLIC	??_C@_0BL@EIBBPFMA@Can?8t?5open?5output?5file?5?$CFs?6?$AA@ ; `string'
PUBLIC	??_C@_0BK@LMEFBHPI@Error?5reading?5parameters?6?$AA@ ; `string'
EXTRN	__imp____acrt_iob_func:PROC
EXTRN	_BIO_new_file:PROC
EXTRN	_BIO_new_fp:PROC
EXTRN	_BIO_free:PROC
EXTRN	_BIO_free_all:PROC
EXTRN	_BIO_printf:PROC
EXTRN	_OPENSSL_add_all_algorithms_noconf:PROC
EXTRN	_EVP_PKEY_free:PROC
EXTRN	_EVP_PKEY_print_params:PROC
EXTRN	_ERR_print_errors:PROC
EXTRN	_ERR_load_crypto_strings:PROC
EXTRN	_setup_engine:PROC
EXTRN	_load_config:PROC
EXTRN	_PEM_read_bio_Parameters:PROC
EXTRN	_PEM_write_bio_Parameters:PROC
EXTRN	__chkstk:PROC
EXTRN	_bio_err:DWORD
;	COMDAT ??_C@_0BK@LMEFBHPI@Error?5reading?5parameters?6?$AA@
CONST	SEGMENT
??_C@_0BK@LMEFBHPI@Error?5reading?5parameters?6?$AA@ DB 'Error reading pa'
	DB	'rameters', 0aH, 00H				; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@EIBBPFMA@Can?8t?5open?5output?5file?5?$CFs?6?$AA@
CONST	SEGMENT
??_C@_0BL@EIBBPFMA@Can?8t?5open?5output?5file?5?$CFs?6?$AA@ DB 'Can''t op'
	DB	'en output file %s', 0aH, 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_01NOFIACDB@w?$AA@
CONST	SEGMENT
??_C@_01NOFIACDB@w?$AA@ DB 'w', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0BK@FBJDPEEG@Can?8t?5open?5input?5file?5?$CFs?6?$AA@
CONST	SEGMENT
??_C@_0BK@FBJDPEEG@Can?8t?5open?5input?5file?5?$CFs?6?$AA@ DB 'Can''t ope'
	DB	'n input file %s', 0aH, 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_01KDCPPGHE@r?$AA@
CONST	SEGMENT
??_C@_01KDCPPGHE@r?$AA@ DB 'r', 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_0DL@NDFIJIDB@?9engine?5e?5?5?5?5?5?5?5use?5engine?5e?0?5po@
CONST	SEGMENT
??_C@_0DL@NDFIJIDB@?9engine?5e?5?5?5?5?5?5?5use?5engine?5e?0?5po@ DB '-en'
	DB	'gine e       use engine e, possibly a hardware device.', 0aH, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0DB@CEIGEDBJ@?9noout?5?5?5?5?5?5?5?5?5?5don?8t?5output?5enc@
CONST	SEGMENT
??_C@_0DB@CEIGEDBJ@?9noout?5?5?5?5?5?5?5?5?5?5don?8t?5output?5enc@ DB '-n'
	DB	'oout          don''t output encoded parameters', 0aH, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0CK@JDIOBHGL@?9text?5?5?5?5?5?5?5?5?5?5?5print?5parameters@
CONST	SEGMENT
??_C@_0CK@JDIOBHGL@?9text?5?5?5?5?5?5?5?5?5?5?5print?5parameters@ DB '-te'
	DB	'xt           print parameters as text', 0aH, 00H ; `string'
CONST	ENDS
;	COMDAT ??_C@_0BN@IBKDGIDA@?9out?5file?5?5?5?5?5?5?5output?5file?6?$AA@
CONST	SEGMENT
??_C@_0BN@IBKDGIDA@?9out?5file?5?5?5?5?5?5?5output?5file?6?$AA@ DB '-out '
	DB	'file       output file', 0aH, 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BM@OAPGFGAE@?9in?5file?5?5?5?5?5?5?5?5input?5file?6?$AA@
CONST	SEGMENT
??_C@_0BM@OAPGFGAE@?9in?5file?5?5?5?5?5?5?5?5input?5file?6?$AA@ DB '-in f'
	DB	'ile        input file', 0aH, 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BD@KHANLAHK@where?5options?5are?6?$AA@
CONST	SEGMENT
??_C@_0BD@KHANLAHK@where?5options?5are?6?$AA@ DB 'where options are', 0aH
	DB	00H						; `string'
CONST	ENDS
;	COMDAT ??_C@_0BL@JPHIEEFF@Usage?5pkeyparam?5?$FLoptions?$FN?6?$AA@
CONST	SEGMENT
??_C@_0BL@JPHIEEFF@Usage?5pkeyparam?5?$FLoptions?$FN?6?$AA@ DB 'Usage pke'
	DB	'yparam [options]', 0aH, 00H			; `string'
CONST	ENDS
;	COMDAT ??_C@_06JPEJAHHH@?9noout?$AA@
CONST	SEGMENT
??_C@_06JPEJAHHH@?9noout?$AA@ DB '-noout', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_05OEBEIMJA@?9text?$AA@
CONST	SEGMENT
??_C@_05OEBEIMJA@?9text?$AA@ DB '-text', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_07CECBDAGF@?9engine?$AA@
CONST	SEGMENT
??_C@_07CECBDAGF@?9engine?$AA@ DB '-engine', 00H	; `string'
CONST	ENDS
;	COMDAT ??_C@_04HKKABCEL@?9out?$AA@
CONST	SEGMENT
??_C@_04HKKABCEL@?9out?$AA@ DB '-out', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_03DAJLOBIG@?9in?$AA@
CONST	SEGMENT
??_C@_03DAJLOBIG@?9in?$AA@ DB '-in', 00H		; `string'
CONST	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _pkeyparam_main
_TEXT	SEGMENT
_pkey$1$ = -28						; size = 4
_out$1$ = -24						; size = 4
_engine$1$ = -20					; size = 4
_infile$1$ = -16					; size = 4
_outfile$1$ = -12					; size = 4
_text$1$ = -8						; size = 4
_ret$1$ = -4						; size = 4
_argc$ = 8						; size = 4
_argv$ = 12						; size = 4
_pkeyparam_main PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\apps\pkeyparam.c
; Line 71
	mov	eax, 28					; 0000001cH
	call	__chkstk
	push	ebx
	push	ebp
; Line 78
	xor	eax, eax
; Line 80
	mov	DWORD PTR _ret$1$[esp+36], 1
	push	esi
	xor	ecx, ecx
	mov	DWORD PTR _engine$1$[esp+40], eax
; Line 82
	mov	eax, DWORD PTR _bio_err
	xor	esi, esi
	push	edi
	xor	edi, edi
	mov	DWORD PTR _out$1$[esp+44], esi
	xor	ebp, ebp
	mov	DWORD PTR _infile$1$[esp+44], edi
	xor	ebx, ebx
	mov	DWORD PTR _outfile$1$[esp+44], edi
	mov	DWORD PTR _text$1$[esp+44], ecx
	mov	DWORD PTR _pkey$1$[esp+44], ecx
	test	eax, eax
	jne	SHORT $LN4@pkeyparam_
; Line 83
	push	eax
	push	2
	call	DWORD PTR __imp____acrt_iob_func
	add	esp, 4
	push	eax
	call	_BIO_new_fp
	add	esp, 8
	mov	DWORD PTR _bio_err, eax
$LN4@pkeyparam_:
; Line 85
	push	0
	push	eax
	call	_load_config
	add	esp, 8
	test	eax, eax
	je	$end$58
; Line 88
	call	_ERR_load_crypto_strings
; Line 89
	call	_OPENSSL_add_all_algorithms_noconf
; Line 90
	mov	edi, DWORD PTR _argv$[esp+40]
	add	edi, 4
$LL2@pkeyparam_:
; Line 91
	mov	esi, DWORD PTR [edi]
	test	esi, esi
	je	$LN3@pkeyparam_
	cmp	BYTE PTR [esi], 45			; 0000002dH
	jne	$LN3@pkeyparam_
; Line 92
	mov	ecx, OFFSET ??_C@_03DAJLOBIG@?9in?$AA@
	mov	eax, esi
	npad	5
$LL36@pkeyparam_:
	mov	dl, BYTE PTR [eax]
	cmp	dl, BYTE PTR [ecx]
	jne	SHORT $LN37@pkeyparam_
	test	dl, dl
	je	SHORT $LN38@pkeyparam_
	mov	dl, BYTE PTR [eax+1]
	cmp	dl, BYTE PTR [ecx+1]
	jne	SHORT $LN37@pkeyparam_
	add	eax, 2
	add	ecx, 2
	test	dl, dl
	jne	SHORT $LL36@pkeyparam_
$LN38@pkeyparam_:
	xor	eax, eax
	jmp	SHORT $LN39@pkeyparam_
$LN37@pkeyparam_:
	sbb	eax, eax
	or	eax, 1
$LN39@pkeyparam_:
	test	eax, eax
	jne	SHORT $LN6@pkeyparam_
; Line 93
	cmp	DWORD PTR [edi+4], eax
	je	SHORT $LN12@pkeyparam_
; Line 95
	mov	eax, DWORD PTR [edi+4]
	add	edi, 4
	mov	DWORD PTR _infile$1$[esp+44], eax
; Line 96
	jmp	$LN19@pkeyparam_
$LN6@pkeyparam_:
; Line 98
	mov	ecx, OFFSET ??_C@_04HKKABCEL@?9out?$AA@
	mov	eax, esi
$LL40@pkeyparam_:
	mov	dl, BYTE PTR [eax]
	cmp	dl, BYTE PTR [ecx]
	jne	SHORT $LN41@pkeyparam_
	test	dl, dl
	je	SHORT $LN42@pkeyparam_
	mov	dl, BYTE PTR [eax+1]
	cmp	dl, BYTE PTR [ecx+1]
	jne	SHORT $LN41@pkeyparam_
	add	eax, 2
	add	ecx, 2
	test	dl, dl
	jne	SHORT $LL40@pkeyparam_
$LN42@pkeyparam_:
	xor	eax, eax
	jmp	SHORT $LN43@pkeyparam_
$LN41@pkeyparam_:
	sbb	eax, eax
	or	eax, 1
$LN43@pkeyparam_:
	test	eax, eax
	jne	SHORT $LN10@pkeyparam_
; Line 99
	cmp	DWORD PTR [edi+4], eax
	je	SHORT $LN12@pkeyparam_
; Line 101
	mov	eax, DWORD PTR [edi+4]
	add	edi, 4
	mov	DWORD PTR _outfile$1$[esp+44], eax
; Line 102
	jmp	$LN19@pkeyparam_
$LN12@pkeyparam_:
; Line 103
	mov	ebx, 1
; Line 104
	jmp	$LN19@pkeyparam_
$LN10@pkeyparam_:
; Line 106
	mov	ecx, OFFSET ??_C@_07CECBDAGF@?9engine?$AA@
	mov	eax, esi
$LL44@pkeyparam_:
	mov	dl, BYTE PTR [eax]
	cmp	dl, BYTE PTR [ecx]
	jne	SHORT $LN45@pkeyparam_
	test	dl, dl
	je	SHORT $LN46@pkeyparam_
	mov	dl, BYTE PTR [eax+1]
	cmp	dl, BYTE PTR [ecx+1]
	jne	SHORT $LN45@pkeyparam_
	add	eax, 2
	add	ecx, 2
	test	dl, dl
	jne	SHORT $LL44@pkeyparam_
$LN46@pkeyparam_:
	xor	eax, eax
	jmp	SHORT $LN47@pkeyparam_
$LN45@pkeyparam_:
	sbb	eax, eax
	or	eax, 1
$LN47@pkeyparam_:
	test	eax, eax
	jne	SHORT $LN14@pkeyparam_
; Line 107
	add	edi, 4
	cmp	DWORD PTR [edi], eax
	je	$bad$59
; Line 109
	mov	eax, DWORD PTR [edi]
	mov	DWORD PTR _engine$1$[esp+44], eax
; Line 110
	jmp	SHORT $LN19@pkeyparam_
$LN14@pkeyparam_:
; Line 113
	mov	ecx, OFFSET ??_C@_05OEBEIMJA@?9text?$AA@
	mov	eax, esi
$LL48@pkeyparam_:
	mov	dl, BYTE PTR [eax]
	cmp	dl, BYTE PTR [ecx]
	jne	SHORT $LN49@pkeyparam_
	test	dl, dl
	je	SHORT $LN50@pkeyparam_
	mov	dl, BYTE PTR [eax+1]
	cmp	dl, BYTE PTR [ecx+1]
	jne	SHORT $LN49@pkeyparam_
	add	eax, 2
	add	ecx, 2
	test	dl, dl
	jne	SHORT $LL48@pkeyparam_
$LN50@pkeyparam_:
	xor	eax, eax
	jmp	SHORT $LN51@pkeyparam_
$LN49@pkeyparam_:
	sbb	eax, eax
	or	eax, 1
$LN51@pkeyparam_:
	test	eax, eax
	jne	SHORT $LN17@pkeyparam_
; Line 114
	mov	DWORD PTR _text$1$[esp+44], 1
	jmp	SHORT $LN19@pkeyparam_
$LN17@pkeyparam_:
; Line 115
	mov	eax, OFFSET ??_C@_06JPEJAHHH@?9noout?$AA@
	npad	3
$LL52@pkeyparam_:
	mov	cl, BYTE PTR [esi]
	cmp	cl, BYTE PTR [eax]
	jne	SHORT $LN53@pkeyparam_
	test	cl, cl
	je	SHORT $LN54@pkeyparam_
	mov	cl, BYTE PTR [esi+1]
	cmp	cl, BYTE PTR [eax+1]
	jne	SHORT $LN53@pkeyparam_
	add	esi, 2
	add	eax, 2
	test	cl, cl
	jne	SHORT $LL52@pkeyparam_
$LN54@pkeyparam_:
	xor	eax, eax
	jmp	SHORT $LN55@pkeyparam_
$LN53@pkeyparam_:
	sbb	eax, eax
	or	eax, 1
$LN55@pkeyparam_:
	test	eax, eax
	mov	eax, 1
	cmove	ebp, eax
$LN19@pkeyparam_:
; Line 117
	add	edi, 4
	test	ebx, ebx
	je	$LL2@pkeyparam_
; Line 107
	jmp	SHORT $bad$59
$LN3@pkeyparam_:
; Line 120
	test	ebx, ebx
	je	$LN20@pkeyparam_
$bad$59:
; Line 124
	push	OFFSET ??_C@_0BL@JPHIEEFF@Usage?5pkeyparam?5?$FLoptions?$FN?6?$AA@
	push	DWORD PTR _bio_err
	call	_BIO_printf
; Line 125
	push	OFFSET ??_C@_0BD@KHANLAHK@where?5options?5are?6?$AA@
	push	DWORD PTR _bio_err
	call	_BIO_printf
; Line 126
	push	OFFSET ??_C@_0BM@OAPGFGAE@?9in?5file?5?5?5?5?5?5?5?5input?5file?6?$AA@
	push	DWORD PTR _bio_err
	call	_BIO_printf
; Line 127
	push	OFFSET ??_C@_0BN@IBKDGIDA@?9out?5file?5?5?5?5?5?5?5output?5file?6?$AA@
	push	DWORD PTR _bio_err
	call	_BIO_printf
; Line 128
	push	OFFSET ??_C@_0CK@JDIOBHGL@?9text?5?5?5?5?5?5?5?5?5?5?5print?5parameters@
	push	DWORD PTR _bio_err
	call	_BIO_printf
; Line 129
	push	OFFSET ??_C@_0DB@CEIGEDBJ@?9noout?5?5?5?5?5?5?5?5?5?5don?8t?5output?5enc@
	push	DWORD PTR _bio_err
	call	_BIO_printf
; Line 132
	push	OFFSET ??_C@_0DL@NDFIJIDB@?9engine?5e?5?5?5?5?5?5?5use?5engine?5e?0?5po@
	push	DWORD PTR _bio_err
	call	_BIO_printf
	add	esp, 56					; 00000038H
; Line 135
	mov	eax, 1
	pop	edi
	pop	esi
	pop	ebp
	pop	ebx
; Line 185
	add	esp, 28					; 0000001cH
	ret	0
$LN20@pkeyparam_:
; Line 138
	mov	eax, DWORD PTR _engine$1$[esp+44]
	push	0
	push	eax
	push	DWORD PTR _bio_err
	call	_setup_engine
; Line 141
	mov	edi, DWORD PTR _infile$1$[esp+56]
	add	esp, 12					; 0000000cH
	test	edi, edi
	je	SHORT $LN21@pkeyparam_
; Line 142
	push	OFFSET ??_C@_01KDCPPGHE@r?$AA@
	push	edi
	call	_BIO_new_file
	mov	esi, eax
	add	esp, 8
	test	esi, esi
	jne	SHORT $LN56@pkeyparam_
; Line 143
	push	edi
	push	OFFSET ??_C@_0BK@FBJDPEEG@Can?8t?5open?5input?5file?5?$CFs?6?$AA@
	push	DWORD PTR _bio_err
	call	_BIO_printf
	add	esp, 12					; 0000000cH
; Line 144
	jmp	$end$58
$LN21@pkeyparam_:
; Line 147
	mov	ebx, DWORD PTR __imp____acrt_iob_func
	push	0
	push	0
	call	ebx
	add	esp, 4
	push	eax
	call	_BIO_new_fp
	add	esp, 8
	mov	esi, eax
	jmp	SHORT $LN22@pkeyparam_
$LN56@pkeyparam_:
	mov	ebx, DWORD PTR __imp____acrt_iob_func
$LN22@pkeyparam_:
; Line 149
	mov	edi, DWORD PTR _outfile$1$[esp+44]
	test	edi, edi
	je	SHORT $LN24@pkeyparam_
; Line 150
	push	OFFSET ??_C@_01NOFIACDB@w?$AA@
	push	edi
	call	_BIO_new_file
	mov	ebx, eax
	add	esp, 8
	mov	DWORD PTR _out$1$[esp+44], ebx
	test	ebx, ebx
	jne	SHORT $LN25@pkeyparam_
; Line 151
	push	edi
	push	OFFSET ??_C@_0BL@EIBBPFMA@Can?8t?5open?5output?5file?5?$CFs?6?$AA@
	push	DWORD PTR _bio_err
	call	_BIO_printf
	add	esp, 12					; 0000000cH
; Line 152
	jmp	SHORT $end$58
$LN24@pkeyparam_:
; Line 155
	push	0
	push	1
	call	ebx
	add	esp, 4
	push	eax
	call	_BIO_new_fp
	add	esp, 8
	mov	DWORD PTR _out$1$[esp+44], eax
	mov	ebx, eax
$LN25@pkeyparam_:
; Line 164
	push	0
	push	esi
	call	_PEM_read_bio_Parameters
	add	esp, 8
	mov	DWORD PTR _pkey$1$[esp+44], eax
; Line 165
	test	eax, eax
	jne	SHORT $LN27@pkeyparam_
; Line 166
	push	OFFSET ??_C@_0BK@LMEFBHPI@Error?5reading?5parameters?6?$AA@
	push	DWORD PTR _bio_err
	call	_BIO_printf
; Line 167
	push	DWORD PTR _bio_err
	call	_ERR_print_errors
	add	esp, 12					; 0000000cH
; Line 168
	jmp	SHORT $end$58
$LN27@pkeyparam_:
; Line 171
	test	ebp, ebp
	jne	SHORT $LN28@pkeyparam_
; Line 172
	push	eax
	push	ebx
	call	_PEM_write_bio_Parameters
	mov	eax, DWORD PTR _pkey$1$[esp+52]
	add	esp, 8
$LN28@pkeyparam_:
; Line 174
	mov	ecx, DWORD PTR _text$1$[esp+44]
	test	ecx, ecx
	je	SHORT $LN29@pkeyparam_
; Line 175
	push	0
	push	0
	push	eax
	push	ebx
	call	_EVP_PKEY_print_params
	add	esp, 16					; 00000010H
$LN29@pkeyparam_:
; Line 177
	mov	DWORD PTR _ret$1$[esp+44], 0
$end$58:
; Line 180
	push	DWORD PTR _pkey$1$[esp+44]
	call	_EVP_PKEY_free
; Line 181
	push	DWORD PTR _out$1$[esp+48]
	call	_BIO_free_all
; Line 182
	push	esi
	call	_BIO_free
; Line 184
	mov	eax, DWORD PTR _ret$1$[esp+56]
	add	esp, 12					; 0000000cH
	pop	edi
	pop	esi
	pop	ebp
	pop	ebx
; Line 185
	add	esp, 28					; 0000001cH
	ret	0
_pkeyparam_main ENDP
_TEXT	ENDS
END
