; Listing generated by Microsoft (R) Optimizing Compiler Version 19.00.23918.0 

	TITLE	C:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	_EVP_PKEY_get_attr_count
PUBLIC	_EVP_PKEY_get_attr_by_NID
PUBLIC	_EVP_PKEY_get_attr_by_OBJ
PUBLIC	_EVP_PKEY_get_attr
PUBLIC	_EVP_PKEY_delete_attr
PUBLIC	_EVP_PKEY_add1_attr
PUBLIC	_EVP_PKEY_add1_attr_by_OBJ
PUBLIC	_EVP_PKEY_add1_attr_by_NID
PUBLIC	_EVP_PKEY_add1_attr_by_txt
PUBLIC	_EVP_PKCS82PKEY
PUBLIC	_EVP_PKEY2PKCS8
PUBLIC	_EVP_PKEY2PKCS8_broken
PUBLIC	_PKCS8_set_broken
PUBLIC	??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@ ; `string'
PUBLIC	??_C@_05DLJFLBDA@TYPE?$DN?$AA@			; `string'
EXTRN	_ERR_put_error:PROC
EXTRN	_ERR_add_error_data:PROC
EXTRN	_i2t_ASN1_OBJECT:PROC
EXTRN	_OBJ_obj2nid:PROC
EXTRN	_EVP_PKEY_set_type:PROC
EXTRN	_EVP_PKEY_new:PROC
EXTRN	_EVP_PKEY_free:PROC
EXTRN	_X509at_get_attr_count:PROC
EXTRN	_X509at_get_attr_by_NID:PROC
EXTRN	_X509at_get_attr_by_OBJ:PROC
EXTRN	_X509at_get_attr:PROC
EXTRN	_X509at_delete_attr:PROC
EXTRN	_X509at_add1_attr:PROC
EXTRN	_X509at_add1_attr_by_OBJ:PROC
EXTRN	_X509at_add1_attr_by_NID:PROC
EXTRN	_X509at_add1_attr_by_txt:PROC
EXTRN	_PKCS8_PRIV_KEY_INFO_new:PROC
EXTRN	_PKCS8_PRIV_KEY_INFO_free:PROC
EXTRN	_PKCS8_pkey_get0:PROC
EXTRN	_RAND_add:PROC
EXTRN	@__security_check_cookie@4:PROC
EXTRN	__chkstk:PROC
EXTRN	___security_cookie:DWORD
EXTRN	__fltused:DWORD
;	COMDAT ??_C@_05DLJFLBDA@TYPE?$DN?$AA@
CONST	SEGMENT
??_C@_05DLJFLBDA@TYPE?$DN?$AA@ DB 'TYPE=', 00H		; `string'
CONST	ENDS
;	COMDAT ??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@
CONST	SEGMENT
??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@ DB '.\crypto\evp\evp'
	DB	'_pkey.c', 00H				; `string'
CONST	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _PKCS8_set_broken
_TEXT	SEGMENT
_p8$ = 8						; size = 4
_broken$ = 12						; size = 4
_PKCS8_set_broken PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 150
	mov	eax, DWORD PTR _broken$[esp-4]
	sub	eax, 0
	je	SHORT $LN4@PKCS8_set_
	sub	eax, 1
	je	SHORT $LN5@PKCS8_set_
; Line 164
	push	164					; 000000a4H
	push	OFFSET ??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@
	push	117					; 00000075H
	push	112					; 00000070H
	push	6
	call	_ERR_put_error
	add	esp, 20					; 00000014H
; Line 165
	xor	eax, eax
; Line 167
	ret	0
$LN5@PKCS8_set_:
; Line 158
	mov	eax, DWORD PTR _p8$[esp-4]
; Line 159
	mov	ecx, DWORD PTR [eax+12]
	mov	DWORD PTR [eax], 1
	mov	DWORD PTR [ecx], 16			; 00000010H
; Line 167
	ret	0
$LN4@PKCS8_set_:
; Line 153
	mov	eax, DWORD PTR _p8$[esp-4]
	mov	DWORD PTR [eax], 0
; Line 167
	ret	0
_PKCS8_set_broken ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY2PKCS8_broken
_TEXT	SEGMENT
_pkey$ = 8						; size = 4
_broken$ = 12						; size = 4
_EVP_PKEY2PKCS8_broken PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 115
	push	esi
; Line 118
	call	_PKCS8_PRIV_KEY_INFO_new
	mov	esi, eax
	test	esi, esi
	jne	SHORT $LN2@EVP_PKEY2P
; Line 119
	push	119					; 00000077H
	push	OFFSET ??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@
	push	65					; 00000041H
	push	113					; 00000071H
	push	6
	call	_ERR_put_error
	add	esp, 20					; 00000014H
; Line 145
	xor	eax, eax
	pop	esi
; Line 146
	ret	0
$LN2@EVP_PKEY2P:
; Line 124
	mov	ecx, DWORD PTR _pkey$[esp]
	mov	eax, DWORD PTR _broken$[esp]
	mov	DWORD PTR [esi], eax
	mov	eax, DWORD PTR [ecx+12]
	test	eax, eax
	je	SHORT $LN3@EVP_PKEY2P
; Line 125
	mov	eax, DWORD PTR [eax+40]
	test	eax, eax
	je	SHORT $LN5@EVP_PKEY2P
; Line 126
	push	ecx
	push	esi
	call	eax
	add	esp, 8
	test	eax, eax
	jne	SHORT $LN7@EVP_PKEY2P
; Line 127
	push	128					; 00000080H
	push	OFFSET ??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@
	push	146					; 00000092H
; Line 129
	jmp	SHORT $LN10@EVP_PKEY2P
$LN7@EVP_PKEY2P:
; Line 140
	mov	eax, DWORD PTR [esi+12]
	mov	ecx, DWORD PTR [eax+4]
	mov	eax, 8
	call	__chkstk
	xorps	xmm0, xmm0
	movsd	QWORD PTR [esp], xmm0
	push	DWORD PTR [ecx]
	push	DWORD PTR [ecx+8]
	call	_RAND_add
	add	esp, 16					; 00000010H
; Line 142
	mov	eax, esi
	pop	esi
; Line 146
	ret	0
$LN5@EVP_PKEY2P:
; Line 132
	push	132					; 00000084H
	push	OFFSET ??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@
	push	144					; 00000090H
; Line 133
	jmp	SHORT $LN10@EVP_PKEY2P
$LN3@EVP_PKEY2P:
; Line 136
	push	137					; 00000089H
	push	OFFSET ??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@
	push	118					; 00000076H
$LN10@EVP_PKEY2P:
	push	113					; 00000071H
	push	6
	call	_ERR_put_error
	add	esp, 20					; 00000014H
$error$12:
; Line 144
	push	esi
	call	_PKCS8_PRIV_KEY_INFO_free
	add	esp, 4
; Line 145
	xor	eax, eax
	pop	esi
; Line 146
	ret	0
_EVP_PKEY2PKCS8_broken ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY2PKCS8
_TEXT	SEGMENT
_pkey$ = 8						; size = 4
_EVP_PKEY2PKCS8 PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 109
	push	0
	push	DWORD PTR _pkey$[esp]
	call	_EVP_PKEY2PKCS8_broken
	add	esp, 8
; Line 110
	ret	0
_EVP_PKEY2PKCS8 ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKCS82PKEY
_TEXT	SEGMENT
_algoid$ = -88						; size = 4
_obj_tmp$ = -84						; size = 80
__$ArrayPad$ = -4					; size = 4
_p8$ = 8						; size = 4
_EVP_PKCS82PKEY PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 70
	mov	eax, 88					; 00000058H
	call	__chkstk
	mov	eax, DWORD PTR ___security_cookie
	xor	eax, esp
	mov	DWORD PTR __$ArrayPad$[esp+88], eax
	push	edi
	mov	edi, DWORD PTR _p8$[esp+88]
; Line 75
	lea	eax, DWORD PTR _algoid$[esp+92]
	push	edi
	push	0
	push	0
	push	0
	push	eax
	call	_PKCS8_pkey_get0
	add	esp, 20					; 00000014H
	test	eax, eax
	jne	SHORT $LN2@EVP_PKCS82
	pop	edi
; Line 105
	mov	ecx, DWORD PTR __$ArrayPad$[esp+88]
	xor	ecx, esp
	call	@__security_check_cookie@4
	add	esp, 88					; 00000058H
	ret	0
$LN2@EVP_PKCS82:
	push	esi
; Line 78
	call	_EVP_PKEY_new
	mov	esi, eax
	test	esi, esi
	jne	SHORT $LN3@EVP_PKCS82
; Line 79
	push	79					; 0000004fH
	push	OFFSET ??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@
	push	65					; 00000041H
	push	111					; 0000006fH
	push	6
	call	_ERR_put_error
	add	esp, 20					; 00000014H
; Line 104
	xor	eax, eax
	pop	esi
	pop	edi
; Line 105
	mov	ecx, DWORD PTR __$ArrayPad$[esp+88]
	xor	ecx, esp
	call	@__security_check_cookie@4
	add	esp, 88					; 00000058H
	ret	0
$LN3@EVP_PKCS82:
; Line 83
	push	DWORD PTR _algoid$[esp+96]
	call	_OBJ_obj2nid
	push	eax
	push	esi
	call	_EVP_PKEY_set_type
	add	esp, 12					; 0000000cH
	test	eax, eax
	jne	SHORT $LN4@EVP_PKCS82
; Line 84
	push	84					; 00000054H
	push	OFFSET ??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@
	push	118					; 00000076H
	push	111					; 0000006fH
	push	6
	call	_ERR_put_error
; Line 85
	push	DWORD PTR _algoid$[esp+116]
	lea	eax, DWORD PTR _obj_tmp$[esp+120]
	push	80					; 00000050H
	push	eax
	call	_i2t_ASN1_OBJECT
; Line 86
	lea	eax, DWORD PTR _obj_tmp$[esp+128]
	push	eax
	push	OFFSET ??_C@_05DLJFLBDA@TYPE?$DN?$AA@
	push	2
	call	_ERR_add_error_data
	add	esp, 44					; 0000002cH
; Line 87
	jmp	SHORT $error$13
$LN4@EVP_PKCS82:
; Line 90
	mov	eax, DWORD PTR [esi+12]
	mov	eax, DWORD PTR [eax+36]
	test	eax, eax
	je	SHORT $LN5@EVP_PKCS82
; Line 91
	push	edi
	push	esi
	call	eax
	add	esp, 8
	test	eax, eax
	jne	SHORT $LN7@EVP_PKCS82
; Line 92
	push	92					; 0000005cH
	push	OFFSET ??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@
	push	145					; 00000091H
; Line 93
	jmp	SHORT $LN11@EVP_PKCS82
$LN7@EVP_PKCS82:
; Line 100
	mov	eax, esi
	pop	esi
	pop	edi
; Line 105
	mov	ecx, DWORD PTR __$ArrayPad$[esp+88]
	xor	ecx, esp
	call	@__security_check_cookie@4
	add	esp, 88					; 00000058H
	ret	0
$LN5@EVP_PKCS82:
; Line 96
	push	96					; 00000060H
	push	OFFSET ??_C@_0BI@NHBEHKCC@?4?2crypto?2evp?2evp_pkey?4c?$AA@
	push	144					; 00000090H
$LN11@EVP_PKCS82:
	push	111					; 0000006fH
	push	6
	call	_ERR_put_error
	add	esp, 20					; 00000014H
$error$13:
; Line 103
	push	esi
	call	_EVP_PKEY_free
; Line 105
	mov	ecx, DWORD PTR __$ArrayPad$[esp+100]
	add	esp, 4
	xor	eax, eax
	pop	esi
	pop	edi
	xor	ecx, esp
	call	@__security_check_cookie@4
	add	esp, 88					; 00000058H
	ret	0
_EVP_PKCS82PKEY ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY_add1_attr_by_txt
_TEXT	SEGMENT
_key$ = 8						; size = 4
_attrname$ = 12						; size = 4
_type$ = 16						; size = 4
_bytes$ = 20						; size = 4
_len$ = 24						; size = 4
_EVP_PKEY_add1_attr_by_txt PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 226
	push	DWORD PTR _len$[esp-4]
	mov	eax, DWORD PTR _key$[esp]
	push	DWORD PTR _bytes$[esp]
	add	eax, 28					; 0000001cH
	push	DWORD PTR _type$[esp+4]
	push	DWORD PTR _attrname$[esp+8]
	push	eax
	call	_X509at_add1_attr_by_txt
	add	esp, 20					; 00000014H
	neg	eax
	sbb	eax, eax
	neg	eax
; Line 229
	ret	0
_EVP_PKEY_add1_attr_by_txt ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY_add1_attr_by_NID
_TEXT	SEGMENT
_key$ = 8						; size = 4
_nid$ = 12						; size = 4
_type$ = 16						; size = 4
_bytes$ = 20						; size = 4
_len$ = 24						; size = 4
_EVP_PKEY_add1_attr_by_NID PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 217
	push	DWORD PTR _len$[esp-4]
	mov	eax, DWORD PTR _key$[esp]
	push	DWORD PTR _bytes$[esp]
	add	eax, 28					; 0000001cH
	push	DWORD PTR _type$[esp+4]
	push	DWORD PTR _nid$[esp+8]
	push	eax
	call	_X509at_add1_attr_by_NID
	add	esp, 20					; 00000014H
	neg	eax
	sbb	eax, eax
	neg	eax
; Line 220
	ret	0
_EVP_PKEY_add1_attr_by_NID ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY_add1_attr_by_OBJ
_TEXT	SEGMENT
_key$ = 8						; size = 4
_obj$ = 12						; size = 4
_type$ = 16						; size = 4
_bytes$ = 20						; size = 4
_len$ = 24						; size = 4
_EVP_PKEY_add1_attr_by_OBJ PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 208
	push	DWORD PTR _len$[esp-4]
	mov	eax, DWORD PTR _key$[esp]
	push	DWORD PTR _bytes$[esp]
	add	eax, 28					; 0000001cH
	push	DWORD PTR _type$[esp+4]
	push	DWORD PTR _obj$[esp+8]
	push	eax
	call	_X509at_add1_attr_by_OBJ
	add	esp, 20					; 00000014H
	neg	eax
	sbb	eax, eax
	neg	eax
; Line 211
	ret	0
_EVP_PKEY_add1_attr_by_OBJ ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY_add1_attr
_TEXT	SEGMENT
_key$ = 8						; size = 4
_attr$ = 12						; size = 4
_EVP_PKEY_add1_attr PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 199
	mov	eax, DWORD PTR _key$[esp-4]
	push	DWORD PTR _attr$[esp-4]
	add	eax, 28					; 0000001cH
	push	eax
	call	_X509at_add1_attr
	add	esp, 8
	neg	eax
	sbb	eax, eax
	neg	eax
; Line 202
	ret	0
_EVP_PKEY_add1_attr ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY_delete_attr
_TEXT	SEGMENT
_key$ = 8						; size = 4
_loc$ = 12						; size = 4
_EVP_PKEY_delete_attr PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 194
	mov	eax, DWORD PTR _key$[esp-4]
	push	DWORD PTR _loc$[esp-4]
	push	DWORD PTR [eax+28]
	call	_X509at_delete_attr
	add	esp, 8
; Line 195
	ret	0
_EVP_PKEY_delete_attr ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY_get_attr
_TEXT	SEGMENT
_key$ = 8						; size = 4
_loc$ = 12						; size = 4
_EVP_PKEY_get_attr PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 189
	mov	eax, DWORD PTR _key$[esp-4]
	push	DWORD PTR _loc$[esp-4]
	push	DWORD PTR [eax+28]
	call	_X509at_get_attr
	add	esp, 8
; Line 190
	ret	0
_EVP_PKEY_get_attr ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY_get_attr_by_OBJ
_TEXT	SEGMENT
_key$ = 8						; size = 4
_obj$ = 12						; size = 4
_lastpos$ = 16						; size = 4
_EVP_PKEY_get_attr_by_OBJ PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 184
	push	DWORD PTR _lastpos$[esp-4]
	mov	eax, DWORD PTR _key$[esp]
	push	DWORD PTR _obj$[esp]
	push	DWORD PTR [eax+28]
	call	_X509at_get_attr_by_OBJ
	add	esp, 12					; 0000000cH
; Line 185
	ret	0
_EVP_PKEY_get_attr_by_OBJ ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY_get_attr_by_NID
_TEXT	SEGMENT
_key$ = 8						; size = 4
_nid$ = 12						; size = 4
_lastpos$ = 16						; size = 4
_EVP_PKEY_get_attr_by_NID PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 178
	push	DWORD PTR _lastpos$[esp-4]
	mov	eax, DWORD PTR _key$[esp]
	push	DWORD PTR _nid$[esp]
	push	DWORD PTR [eax+28]
	call	_X509at_get_attr_by_NID
	add	esp, 12					; 0000000cH
; Line 179
	ret	0
_EVP_PKEY_get_attr_by_NID ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _EVP_PKEY_get_attr_count
_TEXT	SEGMENT
_key$ = 8						; size = 4
_EVP_PKEY_get_attr_count PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\evp\evp_pkey.c
; Line 173
	mov	eax, DWORD PTR _key$[esp-4]
	push	DWORD PTR [eax+28]
	call	_X509at_get_attr_count
	add	esp, 4
; Line 174
	ret	0
_EVP_PKEY_get_attr_count ENDP
_TEXT	ENDS
END
