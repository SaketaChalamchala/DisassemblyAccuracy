; Listing generated by Microsoft (R) Optimizing Compiler Version 19.00.23918.0 

	TITLE	C:\workpace\openssl\openssl-1.0.2h\crypto\o_time.c
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRT
INCLUDELIB OLDNAMES

PUBLIC	_OPENSSL_gmtime
PUBLIC	_OPENSSL_gmtime_adj
PUBLIC	_OPENSSL_gmtime_diff
EXTRN	__imp___gmtime64:PROC
EXTRN	__chkstk:PROC
; Function compile flags: /Ogtpy
;	COMDAT _julian_adj
_TEXT	SEGMENT
_tm$ = 8						; size = 4
_off_day$ = 12						; size = 4
_offset_sec$ = 16					; size = 4
_pday$ = 20						; size = 4
_psec$ = 24						; size = 4
_julian_adj PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\o_time.c
; Line 315
	push	esi
; Line 320
	mov	esi, DWORD PTR _offset_sec$[esp]
	mov	eax, -1037155065			; c22e4507H
	imul	esi
	push	edi
	add	edx, esi
	sar	edx, 16					; 00000010H
	mov	edi, edx
	shr	edi, 31					; 0000001fH
	add	edi, edx
; Line 325
	mov	edx, DWORD PTR _tm$[esp+4]
	imul	eax, edi, 86400
	add	edi, DWORD PTR _off_day$[esp+4]
	mov	ecx, DWORD PTR [edx+8]
	shl	ecx, 4
	sub	ecx, DWORD PTR [edx+8]
	sub	esi, eax
	mov	eax, DWORD PTR [edx+4]
	lea	eax, DWORD PTR [eax+ecx*4]
	mov	ecx, eax
	shl	ecx, 4
	sub	ecx, eax
	mov	eax, DWORD PTR [edx]
	lea	eax, DWORD PTR [eax+ecx*4]
	add	esi, eax
; Line 327
	cmp	esi, 86400				; 00015180H
	jl	SHORT $LN2@julian_adj
; Line 328
	inc	edi
; Line 329
	sub	esi, 86400				; 00015180H
	jmp	SHORT $LN4@julian_adj
$LN2@julian_adj:
; Line 330
	test	esi, esi
	jns	SHORT $LN4@julian_adj
; Line 331
	dec	edi
; Line 332
	add	esi, 86400				; 00015180H
$LN4@julian_adj:
; Line 343
	push	DWORD PTR [edx+12]
	mov	eax, DWORD PTR [edx+16]
	inc	eax
	push	eax
	mov	eax, DWORD PTR [edx+20]
	add	eax, 1900				; 0000076cH
	push	eax
	call	_date_to_julian
	mov	ecx, eax
	add	esp, 12					; 0000000cH
; Line 346
	add	ecx, edi
; Line 348
	jns	SHORT $LN5@julian_adj
; Line 349
	pop	edi
	xor	eax, eax
	pop	esi
; Line 354
	ret	0
$LN5@julian_adj:
; Line 351
	mov	eax, DWORD PTR _pday$[esp+4]
	pop	edi
	mov	DWORD PTR [eax], ecx
; Line 352
	mov	eax, DWORD PTR _psec$[esp]
	mov	DWORD PTR [eax], esi
; Line 353
	mov	eax, 1
	pop	esi
; Line 354
	ret	0
_julian_adj ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _julian_to_date
_TEXT	SEGMENT
_jd$ = 8						; size = 4
_y$ = 12						; size = 4
_m$ = 16						; size = 4
_d$ = 20						; size = 4
_julian_to_date PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\o_time.c
; Line 367
	push	ebx
	push	ebp
	push	esi
; Line 368
	mov	esi, DWORD PTR _jd$[esp+8]
; Line 369
	mov	eax, 963315389				; 396b06bdH
	add	esi, 68569				; 00010bd9H
	push	edi
	lea	ecx, DWORD PTR [esi*4]
	imul	ecx
	sar	edx, 15					; 0000000fH
	mov	ebp, edx
	shr	ebp, 31					; 0000001fH
	add	ebp, edx
; Line 372
	imul	eax, ebp, 146097
	add	eax, 3
	cdq
	and	edx, 3
	add	eax, edx
	sar	eax, 2
	neg	eax
	add	esi, eax
; Line 373
	lea	eax, DWORD PTR [esi+1]
	imul	ecx, eax, 4000
	mov	eax, -1212423459			; b7bbe2ddH
	imul	ecx
	add	edx, ecx
; Line 374
	mov	ecx, 31					; 0000001fH
	sar	edx, 20					; 00000014H
	mov	ebx, edx
	shr	ebx, 31					; 0000001fH
	add	ebx, edx
	imul	eax, ebx, 1461
	cdq
	and	edx, 3
	add	eax, edx
	sar	eax, 2
	sub	ecx, eax
; Line 375
	mov	eax, 449330457				; 1ac83d19H
	add	esi, ecx
	lea	ecx, DWORD PTR [esi+esi*4]
	shl	ecx, 4
	imul	ecx
; Line 376
	mov	eax, 1717986919				; 66666667H
	sar	edx, 8
	mov	edi, edx
	shr	edi, 31					; 0000001fH
	add	edi, edx
	imul	ecx, edi, 2447
	imul	ecx
	sar	edx, 5
	mov	eax, edx
	shr	eax, 31					; 0000001fH
	add	eax, edx
	sub	esi, eax
	mov	eax, DWORD PTR _d$[esp+12]
	mov	DWORD PTR [eax], esi
; Line 377
	mov	eax, 780903145				; 2e8ba2e9H
	imul	edi
	sar	edx, 1
	mov	esi, edx
	shr	esi, 31					; 0000001fH
	add	esi, edx
; Line 378
	lea	eax, DWORD PTR [esi+esi*2]
	shl	eax, 2
	sub	edi, eax
	mov	eax, DWORD PTR _m$[esp+12]
	add	edi, 2
	mov	DWORD PTR [eax], edi
; Line 379
	lea	eax, DWORD PTR [ebp-49]
	imul	ecx, eax, 100
	mov	eax, DWORD PTR _y$[esp+12]
	pop	edi
	add	ecx, ebx
	add	ecx, esi
	pop	esi
	pop	ebp
	mov	DWORD PTR [eax], ecx
	pop	ebx
; Line 380
	ret	0
_julian_to_date ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _date_to_julian
_TEXT	SEGMENT
_y$ = 8							; size = 4
_m$ = 12						; size = 4
_d$ = 16						; size = 4
_date_to_julian PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\o_time.c
; Line 360
	push	ebx
	push	esi
	push	edi
; Line 361
	mov	edi, DWORD PTR _m$[esp+8]
	mov	eax, 715827883				; 2aaaaaabH
	mov	ebx, DWORD PTR _y$[esp+8]
	lea	ecx, DWORD PTR [edi-14]
	imul	ecx
	mov	eax, 715827883				; 2aaaaaabH
	sar	edx, 1
	mov	esi, edx
	shr	esi, 31					; 0000001fH
	add	esi, edx
	add	ebx, esi
	lea	ecx, DWORD PTR [esi+esi*2]
	shl	ecx, 2
	sub	edi, ecx
	sub	edi, 2
	imul	ecx, edi, 367
	pop	edi
	imul	ecx
	lea	ecx, DWORD PTR [ebx+4900]
	mov	eax, 1374389535				; 51eb851fH
	sar	edx, 1
	mov	esi, edx
	shr	esi, 31					; 0000001fH
	add	esi, edx
	imul	ecx
	sar	edx, 5
	mov	eax, edx
	shr	eax, 31					; 0000001fH
	add	eax, edx
	lea	eax, DWORD PTR [eax+eax*2]
	cdq
	and	edx, 3
	add	eax, edx
	sar	eax, 2
	sub	esi, eax
	lea	eax, DWORD PTR [ebx+4800]
	imul	eax, eax, 1461
	add	esi, -32075				; ffff82b5H
	add	esi, DWORD PTR _d$[esp+4]
	cdq
	and	edx, 3
	add	eax, edx
	sar	eax, 2
	add	eax, esi
	pop	esi
	pop	ebx
; Line 364
	ret	0
_date_to_julian ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _OPENSSL_gmtime_diff
_TEXT	SEGMENT
_to_jd$ = -16						; size = 4
_from_jd$ = -12						; size = 4
_to_sec$ = -8						; size = 4
_from_sec$ = -4						; size = 4
_pday$ = 8						; size = 4
_psec$ = 12						; size = 4
_from$ = 16						; size = 4
_to$ = 20						; size = 4
_OPENSSL_gmtime_diff PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\o_time.c
; Line 284
	mov	eax, 16					; 00000010H
	call	__chkstk
; Line 287
	lea	eax, DWORD PTR _from_sec$[esp+16]
	push	eax
	lea	eax, DWORD PTR _from_jd$[esp+20]
	push	eax
	push	0
	push	0
	push	DWORD PTR _from$[esp+28]
	call	_julian_adj
	add	esp, 20					; 00000014H
	test	eax, eax
	jne	SHORT $LN2@OPENSSL_gm
$LN10@OPENSSL_gm:
; Line 288
	xor	eax, eax
; Line 310
	add	esp, 16					; 00000010H
	ret	0
$LN2@OPENSSL_gm:
; Line 289
	lea	eax, DWORD PTR _to_sec$[esp+16]
	push	eax
	lea	eax, DWORD PTR _to_jd$[esp+20]
	push	eax
	push	0
	push	0
	push	DWORD PTR _to$[esp+28]
	call	_julian_adj
	add	esp, 20					; 00000014H
	test	eax, eax
	je	SHORT $LN10@OPENSSL_gm
; Line 291
	mov	ecx, DWORD PTR _to_jd$[esp+16]
; Line 292
	mov	eax, DWORD PTR _to_sec$[esp+16]
	sub	ecx, DWORD PTR _from_jd$[esp+16]
	sub	eax, DWORD PTR _from_sec$[esp+16]
; Line 294
	test	ecx, ecx
	jle	SHORT $LN9@OPENSSL_gm
	test	eax, eax
	jns	SHORT $LN4@OPENSSL_gm
; Line 295
	dec	ecx
; Line 296
	add	eax, 86400				; 00015180H
$LN4@OPENSSL_gm:
; Line 298
	test	ecx, ecx
$LN9@OPENSSL_gm:
	jns	SHORT $LN5@OPENSSL_gm
	test	eax, eax
	jle	SHORT $LN5@OPENSSL_gm
; Line 299
	inc	ecx
; Line 300
	sub	eax, 86400				; 00015180H
$LN5@OPENSSL_gm:
; Line 303
	mov	edx, DWORD PTR _pday$[esp+12]
	test	edx, edx
	je	SHORT $LN6@OPENSSL_gm
; Line 304
	mov	DWORD PTR [edx], ecx
$LN6@OPENSSL_gm:
; Line 305
	mov	ecx, DWORD PTR _psec$[esp+12]
	test	ecx, ecx
	je	SHORT $LN7@OPENSSL_gm
; Line 306
	mov	DWORD PTR [ecx], eax
$LN7@OPENSSL_gm:
; Line 308
	mov	eax, 1
; Line 310
	add	esp, 16					; 00000010H
	ret	0
_OPENSSL_gmtime_diff ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _OPENSSL_gmtime_adj
_TEXT	SEGMENT
_time_jd$ = -20						; size = 4
_time_year$ = -16					; size = 4
_time_month$ = -12					; size = 4
_time_day$ = -8						; size = 4
_time_sec$ = -4						; size = 4
_tm$ = 8						; size = 4
_off_day$ = 12						; size = 4
_offset_sec$ = 16					; size = 4
_OPENSSL_gmtime_adj PROC				; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\o_time.c
; Line 253
	mov	eax, 20					; 00000014H
	call	__chkstk
	push	edi
; Line 258
	mov	edi, DWORD PTR _tm$[esp+20]
	lea	eax, DWORD PTR _time_sec$[esp+24]
	push	eax
	lea	eax, DWORD PTR _time_jd$[esp+28]
	push	eax
	push	DWORD PTR _offset_sec$[esp+28]
	push	DWORD PTR _off_day$[esp+32]
	push	edi
	call	_julian_adj
	add	esp, 20					; 00000014H
	test	eax, eax
	je	$LN4@OPENSSL_gm
; Line 263
	lea	eax, DWORD PTR _time_day$[esp+24]
	push	eax
	lea	eax, DWORD PTR _time_month$[esp+28]
	push	eax
	lea	eax, DWORD PTR _time_year$[esp+32]
	push	eax
	push	DWORD PTR _time_jd$[esp+36]
	call	_julian_to_date
; Line 265
	mov	ecx, DWORD PTR _time_year$[esp+40]
	add	esp, 16					; 00000010H
	lea	eax, DWORD PTR [ecx-1900]
	cmp	eax, 8099				; 00001fa3H
	ja	SHORT $LN4@OPENSSL_gm
; Line 270
	lea	eax, DWORD PTR [ecx-1900]
	mov	DWORD PTR [edi+20], eax
; Line 271
	mov	eax, DWORD PTR _time_month$[esp+24]
	dec	eax
	mov	DWORD PTR [edi+16], eax
; Line 272
	mov	eax, DWORD PTR _time_day$[esp+24]
	mov	DWORD PTR [edi+12], eax
; Line 274
	mov	eax, -1851608123			; 91a2b3c5H
	push	ebx
	push	esi
	mov	esi, DWORD PTR _time_sec$[esp+32]
; Line 275
	mov	ebx, 60					; 0000003cH
	imul	esi
	add	edx, esi
	sar	edx, 11					; 0000000bH
	mov	eax, edx
	shr	eax, 31					; 0000001fH
	add	eax, edx
	mov	DWORD PTR [edi+8], eax
	mov	eax, -2004318071			; 88888889H
	imul	esi
	add	edx, esi
	sar	edx, 5
	mov	ecx, edx
	shr	ecx, 31					; 0000001fH
	add	ecx, edx
	mov	eax, ecx
	cdq
	idiv	ebx
; Line 276
	mov	eax, ecx
	shl	eax, 4
	sub	eax, ecx
	mov	DWORD PTR [edi+4], edx
	shl	eax, 2
	sub	esi, eax
; Line 278
	lea	eax, DWORD PTR [ebx-59]
	mov	DWORD PTR [edi], esi
	pop	esi
	pop	ebx
	pop	edi
; Line 280
	add	esp, 20					; 00000014H
	ret	0
$LN4@OPENSSL_gm:
; Line 266
	xor	eax, eax
	pop	edi
; Line 280
	add	esp, 20					; 00000014H
	ret	0
_OPENSSL_gmtime_adj ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _OPENSSL_gmtime
_TEXT	SEGMENT
_timer$ = 8						; size = 4
_result$ = 12						; size = 4
_OPENSSL_gmtime PROC					; COMDAT
; File c:\workpace\openssl\openssl-1.0.2h\crypto\o_time.c
; File c:\program files\windows kits\10\include\10.0.10586.0\ucrt\time.h
; Line 500
	push	DWORD PTR _timer$[esp-4]
	call	DWORD PTR __imp___gmtime64
; File c:\workpace\openssl\openssl-1.0.2h\crypto\o_time.c
; Line 95
	mov	ecx, eax
; File c:\program files\windows kits\10\include\10.0.10586.0\ucrt\time.h
; Line 500
	add	esp, 4
; File c:\workpace\openssl\openssl-1.0.2h\crypto\o_time.c
; Line 96
	test	ecx, ecx
	jne	SHORT $LN2@OPENSSL_gm
; Line 237
	ret	0
$LN2@OPENSSL_gm:
; Line 99
	movups	xmm0, XMMWORD PTR [ecx]
	mov	eax, DWORD PTR _result$[esp-4]
	movups	XMMWORD PTR [eax], xmm0
	movups	xmm0, XMMWORD PTR [ecx+16]
	movups	XMMWORD PTR [eax+16], xmm0
	mov	ecx, DWORD PTR [ecx+32]
	mov	DWORD PTR [eax+32], ecx
; Line 237
	ret	0
_OPENSSL_gmtime ENDP
_TEXT	ENDS
; Function compile flags: /Ogtpy
;	COMDAT _gmtime
_TEXT	SEGMENT
__Time$ = 8						; size = 4
_gmtime	PROC						; COMDAT
; File c:\program files\windows kits\10\include\10.0.10586.0\ucrt\time.h
; Line 500
	jmp	DWORD PTR __imp___gmtime64
_gmtime	ENDP
_TEXT	ENDS
END
