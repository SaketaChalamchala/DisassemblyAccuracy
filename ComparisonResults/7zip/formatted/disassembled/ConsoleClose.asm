??0CCtrlHandlerSetter@NConsoleClose@@QAE@XZ proc near
push ['ebp']
mov ['ebp,', 'esp']
sub ['esp,', '8']
push ['esi']
mov ['[ebp+var_8],', '0CCCCCCCCh']
mov ['[ebp+var_4],', '0CCCCCCCCh']
mov ['[ebp+var_4],', 'ecx']
mov ['eax,', '[ebp+var_4]']
mov ['dword', 'ptr', '[eax],', 'offset', '??_7CCtrlHandlerSetter@NConsoleClose@@6B@']
mov ['esi,', 'esp']
push ['1']
push ['offset', '?HandlerRoutine@NConsoleClose@@YGHK@Z']
call ['dword', 'ptr', 'ds:__imp__SetConsoleCtrlHandler@8']
cmp ['esi,', 'esp']
call ['__RTC_CheckEsp']
test ['eax,', 'eax']
jnz ['short', 'loc_8C']
mov ['[ebp+var_8],', 'offset', '$SG65597']
push ['offset', '__TI2PAD']
lea ['ecx,', '[ebp+var_8]']
push ['ecx']
call ['__CxxThrowException@8']
mov ['eax,', '[ebp+var_4]']
pop ['esi']
add ['esp,', '8']
cmp ['ebp,', 'esp']
call ['__RTC_CheckEsp']
mov ['esp,', 'ebp']
pop ['ebp']
retn
endp
?HandlerRoutine@NConsoleClose@@YGHK@Z proc near
push ['ebp']
mov ['ebp,', 'esp']
cmp ['[ebp+CtrlType],', '5']
jnz ['short', 'loc_BC']
mov ['eax,', '1']
jmp ['short', 'loc_DB']
mov ['eax,', 'ds:?g_BreakCounter@NConsoleClose@@3IA']
add ['eax,', '1']
mov ['ds:?g_BreakCounter@NConsoleClose@@3IA,', 'eax']
cmp ['ds:?g_BreakCounter@NConsoleClose@@3IA,', '2']
jnb ['short', 'loc_D9']
mov ['eax,', '1']
jmp ['short', 'loc_DB']
xor ['eax,', 'eax']
pop ['ebp']
retn ['4']
endp
??1CCtrlHandlerSetter@NConsoleClose@@UAE@XZ proc near
push ['ebp']
mov ['ebp,', 'esp']
sub ['esp,', '8']
push ['esi']
mov ['[ebp+var_8],', '0CCCCCCCCh']
mov ['[ebp+var_4],', '0CCCCCCCCh']
mov ['[ebp+var_4],', 'ecx']
mov ['eax,', '[ebp+var_4]']
mov ['dword', 'ptr', '[eax],', 'offset', '??_7CCtrlHandlerSetter@NConsoleClose@@6B@']
mov ['esi,', 'esp']
push ['0']
push ['offset', '?HandlerRoutine@NConsoleClose@@YGHK@Z']
call ['dword', 'ptr', 'ds:__imp__SetConsoleCtrlHandler@8']
cmp ['esi,', 'esp']
call ['__RTC_CheckEsp']
test ['eax,', 'eax']
jnz ['short', 'loc_13C']
mov ['[ebp+var_8],', 'offset', '$SG65608']
push ['offset', '__TI2PAD']
lea ['ecx,', '[ebp+var_8]']
push ['ecx']
call ['__CxxThrowException@8']
pop ['esi']
add ['esp,', '8']
cmp ['ebp,', 'esp']
call ['__RTC_CheckEsp']
mov ['esp,', 'ebp']
pop ['ebp']
retn
endp
??_GCCtrlHandlerSetter@NConsoleClose@@UAEPAXI@Z proc near
push ['ebp']
mov ['ebp,', 'esp']
push ['ecx']
mov ['[ebp+var_4],', '0CCCCCCCCh']
mov ['[ebp+var_4],', 'ecx']
mov ['ecx,', '[ebp+var_4]']
call ['??1CCtrlHandlerSetter@NConsoleClose@@UAE@XZ']
mov ['eax,', '[ebp+arg_0]']
and ['eax,', '1']
jz ['short', 'loc_272']
mov ['ecx,', '[ebp+var_4]']
push ['ecx']
call ['??3@YAXPAX@Z']
add ['esp,', '4']
mov ['eax,', '[ebp+var_4]']
add ['esp,', '4']
cmp ['ebp,', 'esp']
call ['__RTC_CheckEsp']
mov ['esp,', 'ebp']
pop ['ebp']
retn ['4']
endp
