; Listing generated by Microsoft (R) Optimizing Compiler Version 16.00.40219.01 

	TITLE	C:\workspace\7z1505-src\CPP\7zip\UI\Console\ConsoleClose.cpp
	.686P
	.XMM
	include listing.inc
	.model	flat

INCLUDELIB MSVCRTD
INCLUDELIB OLDNAMES

PUBLIC	?g_BreakCounter@NConsoleClose@@3IA		; NConsoleClose::g_BreakCounter
_BSS	SEGMENT
?g_BreakCounter@NConsoleClose@@3IA DD 01H DUP (?)	; NConsoleClose::g_BreakCounter
_BSS	ENDS
CONST	SEGMENT
$SG65597 DB	'SetConsoleCtrlHandler fails', 00H
$SG65608 DB	'SetConsoleCtrlHandler fails', 00H
CONST	ENDS
PUBLIC	__TI2PAD
PUBLIC	??_7CCtrlHandlerSetter@NConsoleClose@@6B@	; NConsoleClose::CCtrlHandlerSetter::`vftable'
PUBLIC	??0CCtrlHandlerSetter@NConsoleClose@@QAE@XZ	; NConsoleClose::CCtrlHandlerSetter::CCtrlHandlerSetter
PUBLIC	??_R4CCtrlHandlerSetter@NConsoleClose@@6B@	; NConsoleClose::CCtrlHandlerSetter::`RTTI Complete Object Locator'
PUBLIC	??_R0?AVCCtrlHandlerSetter@NConsoleClose@@@8	; NConsoleClose::CCtrlHandlerSetter `RTTI Type Descriptor'
PUBLIC	??_R3CCtrlHandlerSetter@NConsoleClose@@8	; NConsoleClose::CCtrlHandlerSetter::`RTTI Class Hierarchy Descriptor'
PUBLIC	??_R2CCtrlHandlerSetter@NConsoleClose@@8	; NConsoleClose::CCtrlHandlerSetter::`RTTI Base Class Array'
PUBLIC	??_R1A@?0A@EA@CCtrlHandlerSetter@NConsoleClose@@8 ; NConsoleClose::CCtrlHandlerSetter::`RTTI Base Class Descriptor at (0,-1,0,64)'
PUBLIC	__CTA2PAD
PUBLIC	__CT??_R0PAD@84
PUBLIC	??_R0PAD@8					; char * `RTTI Type Descriptor'
PUBLIC	__CT??_R0PAX@84
PUBLIC	??_R0PAX@8					; void * `RTTI Type Descriptor'
EXTRN	__imp__SetConsoleCtrlHandler@8:PROC
EXTRN	__RTC_CheckEsp:PROC
EXTRN	__RTC_Shutdown:PROC
EXTRN	__RTC_InitBase:PROC
EXTRN	__CxxThrowException@8:PROC
EXTRN	??_7type_info@@6B@:QWORD			; type_info::`vftable'
EXTRN	??_ECCtrlHandlerSetter@NConsoleClose@@UAEPAXI@Z:PROC ; NConsoleClose::CCtrlHandlerSetter::`vector deleting destructor'
;	COMDAT ??_R0PAX@8
; File c:\workspace\7z1505-src\cpp\7zip\ui\console\consoleclose.cpp
_DATA	SEGMENT
??_R0PAX@8 DD	FLAT:??_7type_info@@6B@			; void * `RTTI Type Descriptor'
	DD	00H
	DB	'.PAX', 00H
_DATA	ENDS
;	COMDAT __CT??_R0PAX@84
xdata$x	SEGMENT
__CT??_R0PAX@84 DD 01H
	DD	FLAT:??_R0PAX@8
	DD	00H
	DD	0ffffffffH
	ORG $+4
	DD	04H
	DD	00H
xdata$x	ENDS
;	COMDAT ??_R0PAD@8
_DATA	SEGMENT
??_R0PAD@8 DD	FLAT:??_7type_info@@6B@			; char * `RTTI Type Descriptor'
	DD	00H
	DB	'.PAD', 00H
_DATA	ENDS
;	COMDAT __CT??_R0PAD@84
xdata$x	SEGMENT
__CT??_R0PAD@84 DD 01H
	DD	FLAT:??_R0PAD@8
	DD	00H
	DD	0ffffffffH
	ORG $+4
	DD	04H
	DD	00H
xdata$x	ENDS
;	COMDAT __CTA2PAD
xdata$x	SEGMENT
__CTA2PAD DD	02H
	DD	FLAT:__CT??_R0PAD@84
	DD	FLAT:__CT??_R0PAX@84
xdata$x	ENDS
;	COMDAT ??_R1A@?0A@EA@CCtrlHandlerSetter@NConsoleClose@@8
rdata$r	SEGMENT
??_R1A@?0A@EA@CCtrlHandlerSetter@NConsoleClose@@8 DD FLAT:??_R0?AVCCtrlHandlerSetter@NConsoleClose@@@8 ; NConsoleClose::CCtrlHandlerSetter::`RTTI Base Class Descriptor at (0,-1,0,64)'
	DD	00H
	DD	00H
	DD	0ffffffffH
	DD	00H
	DD	040H
	DD	FLAT:??_R3CCtrlHandlerSetter@NConsoleClose@@8
rdata$r	ENDS
;	COMDAT ??_R2CCtrlHandlerSetter@NConsoleClose@@8
rdata$r	SEGMENT
??_R2CCtrlHandlerSetter@NConsoleClose@@8 DD FLAT:??_R1A@?0A@EA@CCtrlHandlerSetter@NConsoleClose@@8 ; NConsoleClose::CCtrlHandlerSetter::`RTTI Base Class Array'
rdata$r	ENDS
;	COMDAT ??_R3CCtrlHandlerSetter@NConsoleClose@@8
rdata$r	SEGMENT
??_R3CCtrlHandlerSetter@NConsoleClose@@8 DD 00H		; NConsoleClose::CCtrlHandlerSetter::`RTTI Class Hierarchy Descriptor'
	DD	00H
	DD	01H
	DD	FLAT:??_R2CCtrlHandlerSetter@NConsoleClose@@8
rdata$r	ENDS
;	COMDAT ??_R0?AVCCtrlHandlerSetter@NConsoleClose@@@8
_DATA	SEGMENT
??_R0?AVCCtrlHandlerSetter@NConsoleClose@@@8 DD FLAT:??_7type_info@@6B@ ; NConsoleClose::CCtrlHandlerSetter `RTTI Type Descriptor'
	DD	00H
	DB	'.?AVCCtrlHandlerSetter@NConsoleClose@@', 00H
_DATA	ENDS
;	COMDAT ??_R4CCtrlHandlerSetter@NConsoleClose@@6B@
rdata$r	SEGMENT
??_R4CCtrlHandlerSetter@NConsoleClose@@6B@ DD 00H	; NConsoleClose::CCtrlHandlerSetter::`RTTI Complete Object Locator'
	DD	00H
	DD	00H
	DD	FLAT:??_R0?AVCCtrlHandlerSetter@NConsoleClose@@@8
	DD	FLAT:??_R3CCtrlHandlerSetter@NConsoleClose@@8
rdata$r	ENDS
;	COMDAT __TI2PAD
xdata$x	SEGMENT
__TI2PAD DD	00H
	DD	00H
	DD	00H
	DD	FLAT:__CTA2PAD
xdata$x	ENDS
;	COMDAT ??_7CCtrlHandlerSetter@NConsoleClose@@6B@
CONST	SEGMENT
??_7CCtrlHandlerSetter@NConsoleClose@@6B@ DD FLAT:??_R4CCtrlHandlerSetter@NConsoleClose@@6B@ ; NConsoleClose::CCtrlHandlerSetter::`vftable'
	DD	FLAT:??_ECCtrlHandlerSetter@NConsoleClose@@UAEPAXI@Z
CONST	ENDS
;	COMDAT rtc$TMZ
rtc$TMZ	SEGMENT
__RTC_Shutdown.rtc$TMZ DD FLAT:__RTC_Shutdown
rtc$TMZ	ENDS
;	COMDAT rtc$IMZ
rtc$IMZ	SEGMENT
__RTC_InitBase.rtc$IMZ DD FLAT:__RTC_InitBase
; Function compile flags: /Odtp /RTCsu
rtc$IMZ	ENDS
_TEXT	SEGMENT
$T65635 = -8						; size = 4
_this$ = -4						; size = 4
??0CCtrlHandlerSetter@NConsoleClose@@QAE@XZ PROC	; NConsoleClose::CCtrlHandlerSetter::CCtrlHandlerSetter
; _this$ = ecx
; Line 47
	push	ebp
	mov	ebp, esp
	sub	esp, 8
	push	esi
	mov	DWORD PTR [ebp-8], -858993460		; ccccccccH
	mov	DWORD PTR [ebp-4], -858993460		; ccccccccH
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax], OFFSET ??_7CCtrlHandlerSetter@NConsoleClose@@6B@
; Line 49
	mov	esi, esp
	push	1
	push	OFFSET ?HandlerRoutine@NConsoleClose@@YGHK@Z ; NConsoleClose::HandlerRoutine
	call	DWORD PTR __imp__SetConsoleCtrlHandler@8
	cmp	esi, esp
	call	__RTC_CheckEsp
	test	eax, eax
	jne	SHORT $LN2@CCtrlHandl
; Line 50
	mov	DWORD PTR $T65635[ebp], OFFSET $SG65597
	push	OFFSET __TI2PAD
	lea	ecx, DWORD PTR $T65635[ebp]
	push	ecx
	call	__CxxThrowException@8
$LN2@CCtrlHandl:
; Line 52
	mov	eax, DWORD PTR _this$[ebp]
$LN3@CCtrlHandl:
	pop	esi
	add	esp, 8
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
??0CCtrlHandlerSetter@NConsoleClose@@QAE@XZ ENDP	; NConsoleClose::CCtrlHandlerSetter::CCtrlHandlerSetter
; Function compile flags: /Odtp /RTCsu
_ctrlType$ = 8						; size = 4
?HandlerRoutine@NConsoleClose@@YGHK@Z PROC		; NConsoleClose::HandlerRoutine
; Line 14
	push	ebp
	mov	ebp, esp
; Line 15
	cmp	DWORD PTR _ctrlType$[ebp], 5
	jne	SHORT $LN2@HandlerRou
; Line 18
	mov	eax, 1
	jmp	SHORT $LN3@HandlerRou
$LN2@HandlerRou:
; Line 21
	mov	eax, DWORD PTR ?g_BreakCounter@NConsoleClose@@3IA ; NConsoleClose::g_BreakCounter
	add	eax, 1
	mov	DWORD PTR ?g_BreakCounter@NConsoleClose@@3IA, eax ; NConsoleClose::g_BreakCounter
; Line 22
	cmp	DWORD PTR ?g_BreakCounter@NConsoleClose@@3IA, 2 ; NConsoleClose::g_BreakCounter
	jae	SHORT $LN1@HandlerRou
; Line 23
	mov	eax, 1
	jmp	SHORT $LN3@HandlerRou
$LN1@HandlerRou:
; Line 24
	xor	eax, eax
$LN3@HandlerRou:
; Line 35
	pop	ebp
	ret	4
?HandlerRoutine@NConsoleClose@@YGHK@Z ENDP		; NConsoleClose::HandlerRoutine
_TEXT	ENDS
PUBLIC	??1CCtrlHandlerSetter@NConsoleClose@@UAE@XZ	; NConsoleClose::CCtrlHandlerSetter::~CCtrlHandlerSetter
EXTRN	??3@YAXPAX@Z:PROC				; operator delete
; Function compile flags: /Odtp /RTCsu
;	COMDAT ??_GCCtrlHandlerSetter@NConsoleClose@@UAEPAXI@Z
_TEXT	SEGMENT
_this$ = -4						; size = 4
___flags$ = 8						; size = 4
??_GCCtrlHandlerSetter@NConsoleClose@@UAEPAXI@Z PROC	; NConsoleClose::CCtrlHandlerSetter::`scalar deleting destructor', COMDAT
; _this$ = ecx
	push	ebp
	mov	ebp, esp
	push	ecx
	mov	DWORD PTR [ebp-4], -858993460		; ccccccccH
	mov	DWORD PTR _this$[ebp], ecx
	mov	ecx, DWORD PTR _this$[ebp]
	call	??1CCtrlHandlerSetter@NConsoleClose@@UAE@XZ ; NConsoleClose::CCtrlHandlerSetter::~CCtrlHandlerSetter
	mov	eax, DWORD PTR ___flags$[ebp]
	and	eax, 1
	je	SHORT $LN1@scalar
	mov	ecx, DWORD PTR _this$[ebp]
	push	ecx
	call	??3@YAXPAX@Z				; operator delete
	add	esp, 4
$LN1@scalar:
	mov	eax, DWORD PTR _this$[ebp]
	add	esp, 4
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	4
??_GCCtrlHandlerSetter@NConsoleClose@@UAEPAXI@Z ENDP	; NConsoleClose::CCtrlHandlerSetter::`scalar deleting destructor'
; Function compile flags: /Odtp /RTCsu
_TEXT	ENDS
_TEXT	SEGMENT
$T65648 = -8						; size = 4
_this$ = -4						; size = 4
??1CCtrlHandlerSetter@NConsoleClose@@UAE@XZ PROC	; NConsoleClose::CCtrlHandlerSetter::~CCtrlHandlerSetter
; _this$ = ecx
; Line 55
	push	ebp
	mov	ebp, esp
	sub	esp, 8
	push	esi
	mov	DWORD PTR [ebp-8], -858993460		; ccccccccH
	mov	DWORD PTR [ebp-4], -858993460		; ccccccccH
	mov	DWORD PTR _this$[ebp], ecx
	mov	eax, DWORD PTR _this$[ebp]
	mov	DWORD PTR [eax], OFFSET ??_7CCtrlHandlerSetter@NConsoleClose@@6B@
; Line 57
	mov	esi, esp
	push	0
	push	OFFSET ?HandlerRoutine@NConsoleClose@@YGHK@Z ; NConsoleClose::HandlerRoutine
	call	DWORD PTR __imp__SetConsoleCtrlHandler@8
	cmp	esi, esp
	call	__RTC_CheckEsp
	test	eax, eax
	jne	SHORT $LN3@CCtrlHandl@2
; Line 58
	mov	DWORD PTR $T65648[ebp], OFFSET $SG65608
	push	OFFSET __TI2PAD
	lea	ecx, DWORD PTR $T65648[ebp]
	push	ecx
	call	__CxxThrowException@8
$LN3@CCtrlHandl@2:
; Line 60
	pop	esi
	add	esp, 8
	cmp	ebp, esp
	call	__RTC_CheckEsp
	mov	esp, ebp
	pop	ebp
	ret	0
??1CCtrlHandlerSetter@NConsoleClose@@UAE@XZ ENDP	; NConsoleClose::CCtrlHandlerSetter::~CCtrlHandlerSetter
_TEXT	ENDS
END
