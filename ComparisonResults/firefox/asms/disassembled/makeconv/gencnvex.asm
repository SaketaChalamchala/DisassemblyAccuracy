;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2015 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-3677-7074-51			    |
; |		Michalis Polychronakis,	Stony Brook University		    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	3059716F8C0D163F5944EBA372E94FAB
; Input	CRC32 :	17E866B2

; File Name   :	D:\compspace\objfiles\firefox\makeconv\gencnvex.obj
; Format      :	COFF (X386MAGIC)
; includelib "msvcprtd"
; includelib "MSVCRTD"
; includelib "OLDNAMES"

		.686p
		.mmx
		.model flat

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _CnvExtOpen
_CnvExtOpen	proc near

var_CC		= byte ptr -0CCh
Dst		= dword	ptr -8
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		push	0E0054h
		call	_uprv_malloc_56
		add	esp, 4
		mov	[ebp+Dst], eax
		cmp	[ebp+Dst], 0
		jnz	short loc_5C
		mov	esi, esp
		push	offset ??_C@_0P@PCJPAHLM@out?5of?5memory?6?$AA@	; "out of memory\n"
		call	dword ptr ds:__imp__printf
		add	esp, 4
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	esi, esp
		push	7		; Code
		call	dword ptr ds:__imp__exit
; ---------------------------------------------------------------------------
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_5C:					; CODE XREF: _CnvExtOpen+32j
		push	0E0054h		; Size
		push	0		; Val
		mov	eax, [ebp+Dst]
		push	eax		; Dst
		call	_memset
		add	esp, 0Ch
		mov	eax, [ebp+Dst]
		mov	ecx, [ebp+arg_0]
		mov	[eax+10h], ecx
		mov	eax, [ebp+Dst]
		mov	dword ptr [eax], offset	_CnvExtClose
		mov	eax, [ebp+Dst]
		mov	dword ptr [eax+4], offset _CnvExtIsValid
		mov	eax, [ebp+Dst]
		mov	dword ptr [eax+8], offset _CnvExtAddTable
		mov	eax, [ebp+Dst]
		mov	dword ptr [eax+0Ch], offset _CnvExtWrite
		mov	eax, [ebp+Dst]
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0CCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_CnvExtOpen	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 0B8h
		public ??_C@_0P@PCJPAHLM@out?5of?5memory?6?$AA@
; char `string'[]
??_C@_0P@PCJPAHLM@out?5of?5memory?6?$AA@ db 'out of memory',0Ah,0
					; DATA XREF: _CnvExtOpen+36o
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$TMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$TMZ
		;org 0C8h
__RTC_Shutdown_rtc$TMZ dd offset __RTC_Shutdown
_rtc$TMZ	ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$IMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$IMZ
		;org 0CCh
__RTC_InitBase_rtc$IMZ dd offset __RTC_InitBase
_rtc$IMZ	ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 0D0h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_CnvExtClose	proc near		; DATA XREF: _CnvExtOpen+7Bo

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	[ebp+var_8], eax
		cmp	[ebp+var_8], 0
		jz	short loc_151
		mov	eax, [ebp+var_8]
		mov	ecx, [eax+14h]
		push	ecx
		call	_utm_close
		add	esp, 4
		mov	eax, [ebp+var_8]
		mov	ecx, [eax+18h]
		push	ecx
		call	_utm_close
		add	esp, 4
		mov	eax, [ebp+var_8]
		mov	ecx, [eax+1Ch]
		push	ecx
		call	_utm_close
		add	esp, 4
		mov	eax, [ebp+var_8]
		mov	ecx, [eax+20h]
		push	ecx
		call	_utm_close
		add	esp, 4
		mov	eax, [ebp+var_8]
		mov	ecx, [eax+24h]
		push	ecx
		call	_utm_close
		add	esp, 4
		mov	eax, [ebp+var_8]
		push	eax
		call	_uprv_free_56
		add	esp, 4

loc_151:				; CODE XREF: _CnvExtClose+28j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0CCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_CnvExtClose	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 168h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_CnvExtIsValid	proc near		; DATA XREF: _CnvExtOpen+84o

var_C0		= byte ptr -0C0h

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		xor	al, al
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_CnvExtIsValid	endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 190h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_CnvExtWrite	proc near		; DATA XREF: _CnvExtOpen+98o

var_1AC		= byte ptr -1ACh
var_E8		= byte ptr -0E8h
var_E7		= byte ptr -0E7h
var_E6		= byte ptr -0E6h
var_E5		= byte ptr -0E5h
var_E4		= dword	ptr -0E4h
var_E0		= dword	ptr -0E0h
var_DC		= dword	ptr -0DCh
var_D8		= dword	ptr -0D8h
var_D4		= dword	ptr -0D4h
var_D0		= dword	ptr -0D0h
var_CC		= dword	ptr -0CCh
var_C8		= dword	ptr -0C8h
var_C4		= dword	ptr -0C4h
var_B8		= dword	ptr -0B8h
Dst		= dword	ptr -0B4h
var_B0		= dword	ptr -0B0h
var_AC		= dword	ptr -0ACh
var_A8		= dword	ptr -0A8h
var_A4		= dword	ptr -0A4h
var_A0		= dword	ptr -0A0h
var_9C		= dword	ptr -9Ch
var_98		= dword	ptr -98h
var_94		= dword	ptr -94h
var_90		= dword	ptr -90h
var_8C		= dword	ptr -8Ch
var_88		= dword	ptr -88h
var_84		= dword	ptr -84h
var_80		= dword	ptr -80h
var_7C		= dword	ptr -7Ch
var_78		= dword	ptr -78h
var_74		= dword	ptr -74h
var_70		= dword	ptr -70h
var_6C		= dword	ptr -6Ch
var_3C		= dword	ptr -3Ch
var_30		= dword	ptr -30h
var_24		= dword	ptr -24h
var_18		= dword	ptr -18h
var_C		= dword	ptr -0Ch
var_4		= dword	ptr -4
arg_0		= dword	ptr  8
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h

		push	ebp
		mov	ebp, esp
		sub	esp, 1ACh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_1AC]
		mov	ecx, 6Bh ; 'k'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, dword ptr ds:___security_cookie
		xor	eax, ebp
		mov	[ebp+var_4], eax
		mov	eax, [ebp+arg_0]
		mov	[ebp+var_C], eax
		mov	[ebp+var_B8], 0
		push	7Ch ; '|'       ; Size
		push	0		; Val
		lea	eax, [ebp+Dst]
		push	eax		; Dst
		call	_memset_0
		add	esp, 0Ch
		mov	eax, [ebp+arg_C]
		and	eax, 1
		jz	short loc_1EF
		mov	[ebp+var_30], 0
		jmp	loc_2F6
; ---------------------------------------------------------------------------

loc_1EF:				; CODE XREF: _CnvExtWrite+51j
		mov	[ebp+var_E8], 0
		mov	[ebp+var_E7], 0
		mov	[ebp+var_E6], 0
		mov	[ebp+var_E5], 0
		mov	[ebp+var_E4], 0
		mov	[ebp+var_E0], 0
		mov	[ebp+var_DC], 0
		mov	[ebp+var_D8], 0
		mov	[ebp+var_D4], 0
		mov	[ebp+var_D0], 0
		mov	[ebp+var_CC], 0
		xor	eax, eax
		mov	[ebp+var_C8], eax
		mov	[ebp+var_C4], eax
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+10h]
		add	ecx, 2041Ch
		push	ecx		; Str
		call	_strlen
		add	esp, 4
		add	eax, 1
		mov	[ebp+var_18], eax

loc_27A:				; CODE XREF: _CnvExtWrite+10Cj
		mov	eax, [ebp+var_18]
		and	eax, 3
		jz	short loc_29E
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+10h]
		mov	edx, [ebp+var_18]
		mov	byte ptr [ecx+edx+2041Ch], 0
		mov	eax, [ebp+var_18]
		add	eax, 1
		mov	[ebp+var_18], eax
		jmp	short loc_27A
; ---------------------------------------------------------------------------

loc_29E:				; CODE XREF: _CnvExtWrite+F0j
		mov	eax, [ebp+var_18]
		add	eax, 20h ; ' '
		mov	[ebp+var_30], eax
		mov	[ebp+var_E8], 4
		mov	[ebp+var_E7], 2
		mov	eax, [ebp+var_30]
		shl	eax, 8
		or	eax, 0Eh
		mov	[ebp+var_D0], eax
		push	20h ; ' '
		lea	eax, [ebp+var_E8]
		push	eax
		mov	ecx, [ebp+arg_8]
		push	ecx
		call	_udata_writeBlock
		add	esp, 0Ch
		mov	eax, [ebp+var_18]
		push	eax
		mov	ecx, [ebp+var_C]
		mov	edx, [ecx+10h]
		add	edx, 2041Ch
		push	edx
		mov	eax, [ebp+arg_8]
		push	eax
		call	_udata_writeBlock
		add	esp, 0Ch

loc_2F6:				; CODE XREF: _CnvExtWrite+5Aj
		mov	[ebp+var_24], 0
		mov	[ebp+var_18], 20h ; ' '
		mov	eax, [ebp+var_18]
		mov	[ebp+var_B8], eax
		mov	eax, [ebp+var_18]
		mov	ecx, [ebp+var_24]
		lea	edx, [ecx+eax*4]
		mov	[ebp+var_24], edx
		mov	eax, [ebp+var_24]
		mov	[ebp+Dst], eax
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+14h]
		push	ecx
		call	_utm_countItems
		add	esp, 4
		mov	[ebp+var_18], eax
		mov	edx, [ebp+var_18]
		mov	[ebp+var_B0], edx
		mov	eax, [ebp+var_18]
		mov	ecx, [ebp+var_24]
		lea	edx, [ecx+eax*4]
		mov	[ebp+var_24], edx
		mov	eax, [ebp+var_24]
		mov	[ebp+var_AC], eax
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+18h]
		push	ecx
		call	_utm_countItems
		add	esp, 4
		mov	[ebp+var_18], eax
		mov	edx, [ebp+var_18]
		mov	[ebp+var_A8], edx
		mov	eax, [ebp+var_18]
		mov	ecx, [ebp+var_24]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_24], edx
		mov	eax, [ebp+var_24]
		mov	[ebp+var_A4], eax
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+1Ch]
		push	ecx
		call	_utm_countItems
		add	esp, 4
		mov	[ebp+var_18], eax
		mov	eax, [ebp+var_18]
		mov	ecx, [ebp+var_24]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_24], edx
		mov	eax, [ebp+var_24]
		and	eax, 3
		jz	short loc_3E3
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+1Ch]
		push	ecx
		call	_utm_alloc
		add	esp, 4
		xor	edx, edx
		mov	[eax], dx
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+20h]
		push	ecx
		call	_utm_alloc
		add	esp, 4
		mov	dword ptr [eax], 0
		mov	eax, [ebp+var_18]
		add	eax, 1
		mov	[ebp+var_18], eax
		mov	eax, [ebp+var_24]
		add	eax, 2
		mov	[ebp+var_24], eax

loc_3E3:				; CODE XREF: _CnvExtWrite+216j
		mov	eax, [ebp+var_18]
		mov	[ebp+var_9C], eax
		mov	eax, [ebp+var_24]
		mov	[ebp+var_A0], eax
		mov	eax, [ebp+var_18]
		mov	ecx, [ebp+var_24]
		lea	edx, [ecx+eax*4]
		mov	[ebp+var_24], edx
		mov	eax, [ebp+var_24]
		mov	[ebp+var_98], eax
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+24h]
		push	ecx
		call	_utm_countItems
		add	esp, 4
		mov	[ebp+var_18], eax
		mov	eax, [ebp+var_24]
		add	eax, [ebp+var_18]
		mov	[ebp+var_24], eax
		mov	eax, [ebp+var_24]
		and	eax, 1
		jz	short loc_451
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+24h]
		push	ecx
		call	_utm_alloc
		add	esp, 4
		mov	byte ptr [eax],	0
		mov	eax, [ebp+var_18]
		add	eax, 1
		mov	[ebp+var_18], eax
		mov	eax, [ebp+var_24]
		add	eax, 1
		mov	[ebp+var_24], eax

loc_451:				; CODE XREF: _CnvExtWrite+29Bj
		mov	eax, [ebp+var_18]
		mov	[ebp+var_94], eax
		mov	eax, [ebp+var_24]
		mov	[ebp+var_90], eax
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+0E0028h]
		mov	[ebp+var_18], ecx
		mov	edx, [ebp+var_18]
		mov	[ebp+var_8C], edx
		mov	eax, [ebp+var_C]
		mov	ecx, [ebp+var_18]
		add	ecx, [eax+0E002Ch]
		mov	[ebp+var_18], ecx
		mov	edx, [ebp+var_18]
		mov	[ebp+var_88], edx
		mov	eax, [ebp+var_18]
		mov	ecx, [ebp+var_24]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_24], edx
		mov	eax, [ebp+var_24]
		mov	[ebp+var_84], eax
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+0E0030h]
		mov	[ebp+var_18], ecx
		mov	eax, [ebp+var_18]
		mov	ecx, [ebp+var_24]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_24], edx
		mov	eax, [ebp+var_24]
		and	eax, 3
		jz	short loc_502
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+0E0030h]
		xor	edx, edx
		mov	eax, [ebp+var_C]
		mov	[eax+ecx*2+20028h], dx
		mov	ecx, [ebp+var_C]
		mov	edx, [ecx+0E0030h]
		add	edx, 1
		mov	eax, [ebp+var_C]
		mov	[eax+0E0030h], edx
		mov	eax, [ebp+var_18]
		add	eax, 1
		mov	[ebp+var_18], eax
		mov	eax, [ebp+var_24]
		add	eax, 2
		mov	[ebp+var_24], eax

loc_502:				; CODE XREF: _CnvExtWrite+333j
		mov	eax, [ebp+var_18]
		mov	[ebp+var_80], eax
		mov	eax, [ebp+var_24]
		mov	[ebp+var_7C], eax
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+0E0034h]
		mov	[ebp+var_18], ecx
		mov	edx, [ebp+var_18]
		mov	[ebp+var_78], edx
		mov	eax, [ebp+var_18]
		mov	ecx, [ebp+var_24]
		lea	edx, [ecx+eax*4]
		mov	[ebp+var_24], edx
		mov	eax, [ebp+var_24]
		mov	[ebp+var_3C], eax
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+0E003Ch]
		shl	ecx, 10h
		mov	edx, [ebp+var_C]
		mov	eax, [edx+0E0040h]
		shl	eax, 8
		or	ecx, eax
		mov	edx, [ebp+var_C]
		or	ecx, [edx+0E0044h]
		mov	[ebp+var_74], ecx
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+0E0048h]
		shl	ecx, 10h
		mov	edx, [ebp+var_C]
		mov	eax, [edx+0E004Ch]
		shl	eax, 8
		or	ecx, eax
		mov	edx, [ebp+var_C]
		or	ecx, [edx+0E0050h]
		mov	[ebp+var_70], ecx
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+10h]
		mov	edx, [ecx+4]
		movzx	eax, byte ptr [edx+28h]
		mov	[ebp+var_6C], eax
		push	80h ; '€'
		lea	eax, [ebp+var_B8]
		push	eax
		mov	ecx, [ebp+arg_8]
		push	ecx
		call	_udata_writeBlock
		add	esp, 0Ch
		mov	eax, [ebp+var_B0]
		shl	eax, 2
		push	eax
		mov	ecx, [ebp+var_C]
		mov	edx, [ecx+14h]
		push	edx
		call	_utm_getStart
		add	esp, 4
		push	eax
		mov	eax, [ebp+arg_8]
		push	eax
		call	_udata_writeBlock
		add	esp, 0Ch
		mov	eax, [ebp+var_A8]
		shl	eax, 1
		push	eax
		mov	ecx, [ebp+var_C]
		mov	edx, [ecx+18h]
		push	edx
		call	_utm_getStart
		add	esp, 4
		push	eax
		mov	eax, [ebp+arg_8]
		push	eax
		call	_udata_writeBlock
		add	esp, 0Ch
		mov	eax, [ebp+var_9C]
		shl	eax, 1
		push	eax
		mov	ecx, [ebp+var_C]
		mov	edx, [ecx+1Ch]
		push	edx
		call	_utm_getStart
		add	esp, 4
		push	eax
		mov	eax, [ebp+arg_8]
		push	eax
		call	_udata_writeBlock
		add	esp, 0Ch
		mov	eax, [ebp+var_9C]
		shl	eax, 2
		push	eax
		mov	ecx, [ebp+var_C]
		mov	edx, [ecx+20h]
		push	edx
		call	_utm_getStart
		add	esp, 4
		push	eax
		mov	eax, [ebp+arg_8]
		push	eax
		call	_udata_writeBlock
		add	esp, 0Ch
		mov	eax, [ebp+var_94]
		push	eax
		mov	ecx, [ebp+var_C]
		mov	edx, [ecx+24h]
		push	edx
		call	_utm_getStart
		add	esp, 4
		push	eax
		mov	eax, [ebp+arg_8]
		push	eax
		call	_udata_writeBlock
		add	esp, 0Ch
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+0E0028h]
		shl	ecx, 1
		push	ecx
		mov	edx, [ebp+var_C]
		add	edx, 28h ; '('
		push	edx
		mov	eax, [ebp+arg_8]
		push	eax
		call	_udata_writeBlock
		add	esp, 0Ch
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+0E002Ch]
		shl	ecx, 1
		push	ecx
		mov	edx, [ebp+var_C]
		add	edx, 8A8h
		push	edx
		mov	eax, [ebp+arg_8]
		push	eax
		call	_udata_writeBlock
		add	esp, 0Ch
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+0E0030h]
		shl	ecx, 1
		push	ecx
		mov	edx, [ebp+var_C]
		add	edx, 20028h
		push	edx
		mov	eax, [ebp+arg_8]
		push	eax
		call	_udata_writeBlock
		add	esp, 0Ch
		mov	eax, [ebp+var_C]
		mov	ecx, [eax+0E0034h]
		shl	ecx, 2
		push	ecx
		mov	edx, [ebp+var_C]
		add	edx, 0A0028h
		push	edx
		mov	eax, [ebp+arg_8]
		push	eax
		call	_udata_writeBlock
		add	esp, 0Ch
		movsx	eax, byte ptr ds:_VERBOSE
		test	eax, eax
		jz	short loc_70B
		mov	esi, esp
		mov	eax, [ebp+var_24]
		push	eax
		push	offset ??_C@_0BN@FBDKGFID@size?5of?5extension?5data?3?5?$CFld?6?$AA@ ; "size of	extension data:	%ld\n"
		call	dword ptr ds:__imp__printf
		add	esp, 8
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_70B:				; CODE XREF: _CnvExtWrite+55Ej
		mov	eax, [ebp+var_30]
		add	eax, [ebp+var_24]
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN14
		call	@_RTC_CheckStackVars@8 ; _RTC_CheckStackVars(x,x)
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		mov	ecx, [ebp+var_4]
		xor	ecx, ebp
		call	@__security_check_cookie@4 ; __security_check_cookie(x)
		add	esp, 1ACh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_CnvExtWrite	endp

; ---------------------------------------------------------------------------
$LN14		dd 2			; DATA XREF: _CnvExtWrite+585o
		dd offset $LN13
$LN13		dd 0FFFFFF48h, 80h	; DATA XREF: .text:00000744o
		dd offset $LN11		; "indexes"
		dd 0FFFFFF18h, 28h
		dd offset $LN12		; "header"
$LN12		db 'header',0           ; DATA XREF: .text:0000075Co
$LN11		db 'indexes',0          ; DATA XREF: .text:00000750o
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 770h
		public ??_C@_0BN@FBDKGFID@size?5of?5extension?5data?3?5?$CFld?6?$AA@
; char `string'[]
??_C@_0BN@FBDKGFID@size?5of?5extension?5data?3?5?$CFld?6?$AA@ db 'size of extension data: %ld',0Ah,0
					; DATA XREF: _CnvExtWrite+566o
		align 10h
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 790h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_CnvExtAddTable	proc near		; DATA XREF: _CnvExtOpen+8Eo

var_D0		= dword	ptr -0D0h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 0D0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_D0]
		mov	ecx, 34h ; '4'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_4]
		movzx	ecx, byte ptr [eax+28h]
		and	ecx, 2
		jz	short loc_7E8
		mov	esi, esp
		push	offset ??_C@_0DE@ODGLNIIO@error?3?5contains?5mappings?5for?5sur@ ; "error: contains mappings for surrogate "...
		mov	edi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	edi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax		; File
		call	dword ptr ds:__imp__fprintf
		add	esp, 8
		cmp	esi, esp
		call	__RTC_CheckEsp
		xor	al, al
		jmp	short loc_83F
; ---------------------------------------------------------------------------

loc_7E8:				; CODE XREF: _CnvExtAddTable+28j
		mov	eax, [ebp+arg_8]
		mov	byte ptr [eax+45h], 2
		mov	eax, [ebp+arg_0]
		mov	[ebp+var_8], eax
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+var_8]
		push	ecx
		call	_makeToUTable
		add	esp, 8
		movsx	edx, al
		test	edx, edx
		jz	short loc_82F
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+var_8]
		push	ecx
		call	_makeFromUTable
		add	esp, 8
		movsx	edx, al
		test	edx, edx
		jz	short loc_82F
		mov	[ebp+var_D0], 1
		jmp	short loc_839
; ---------------------------------------------------------------------------

loc_82F:				; CODE XREF: _CnvExtAddTable+7Aj
					; _CnvExtAddTable+91j
		mov	[ebp+var_D0], 0

loc_839:				; CODE XREF: _CnvExtAddTable+9Dj
		mov	al, byte ptr [ebp+var_D0]

loc_83F:				; CODE XREF: _CnvExtAddTable+56j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0D0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_CnvExtAddTable	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 854h
		public ??_C@_0DE@ODGLNIIO@error?3?5contains?5mappings?5for?5sur@
; char `string'[]
??_C@_0DE@ODGLNIIO@error?3?5contains?5mappings?5for?5sur@ db 'error: contains mappings for surrogate code points',0Ah,0
					; DATA XREF: _CnvExtAddTable+2Co
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 888h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_makeToUTable	proc near		; CODE XREF: _CnvExtAddTable+6Dp

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_4]
		push	eax
		call	_reduceToUMappings
		add	esp, 4
		mov	[ebp+var_8], eax
		push	4
		push	1F0000h
		push	10000h
		push	offset ??_C@_0BH@OHDBLHII@cnv?5extension?5toUTable?$AA@	; "cnv extension toUTable"
		call	_utm_open
		add	esp, 10h
		mov	ecx, [ebp+arg_0]
		mov	[ecx+14h], eax
		push	2
		push	40000h
		push	10000h
		push	offset ??_C@_0BI@KKDGMKJA@cnv?5extension?5toUUChars?$AA@ ; "cnv	extension toUUChars"
		call	_utm_open
		add	esp, 10h
		mov	ecx, [ebp+arg_0]
		mov	[ecx+18h], eax
		push	0
		push	0
		mov	eax, [ebp+var_8]
		push	eax
		push	0
		mov	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	_generateToUTable
		add	esp, 18h
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0CCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_makeToUTable	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 924h
		public ??_C@_0BI@KKDGMKJA@cnv?5extension?5toUUChars?$AA@
; `string'
??_C@_0BI@KKDGMKJA@cnv?5extension?5toUUChars?$AA@ db 'cnv extension toUUChars',0
					; DATA XREF: _makeToUTable+58o
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 93Ch
		public ??_C@_0BH@OHDBLHII@cnv?5extension?5toUTable?$AA@
; `string'
??_C@_0BH@OHDBLHII@cnv?5extension?5toUTable?$AA@ db 'cnv extension toUTable',0
					; DATA XREF: _makeToUTable+39o
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 954h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_reduceToUMappings proc	near		; CODE XREF: _makeToUTable+22p

var_108		= byte ptr -108h
var_41		= byte ptr -41h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 108h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_108]
		mov	ecx, 42h ; 'B'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+24h]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_38], ecx
		mov	[ebp+var_2C], 0
		mov	eax, [ebp+var_2C]
		mov	[ebp+var_20], eax
		jmp	short loc_9A4
; ---------------------------------------------------------------------------

loc_99B:				; CODE XREF: _reduceToUMappings:loc_9D5j
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax

loc_9A4:				; CODE XREF: _reduceToUMappings+45j
		mov	eax, [ebp+var_20]
		cmp	eax, [ebp+var_38]
		jge	short loc_9D7
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_14]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		mov	eax, [ebp+var_8]
		mov	cl, [eax+edx+0Ah]
		mov	[ebp+var_41], cl
		movsx	eax, [ebp+var_41]
		test	eax, eax
		jz	short loc_9D5
		movsx	eax, [ebp+var_41]
		cmp	eax, 3
		jz	short loc_9D5
		jmp	short loc_9D7
; ---------------------------------------------------------------------------

loc_9D5:				; CODE XREF: _reduceToUMappings+74j
					; _reduceToUMappings+7Dj
		jmp	short loc_99B
; ---------------------------------------------------------------------------

loc_9D7:				; CODE XREF: _reduceToUMappings+56j
					; _reduceToUMappings+7Fj
		mov	eax, [ebp+var_20]
		mov	[ebp+var_2C], eax
		jmp	short loc_9E8
; ---------------------------------------------------------------------------

loc_9DF:				; CODE XREF: _reduceToUMappings:loc_A32j
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax

loc_9E8:				; CODE XREF: _reduceToUMappings+89j
		mov	eax, [ebp+var_20]
		cmp	eax, [ebp+var_38]
		jge	short loc_A34
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_14]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		mov	eax, [ebp+var_8]
		mov	cl, [eax+edx+0Ah]
		mov	[ebp+var_41], cl
		movsx	eax, [ebp+var_41]
		test	eax, eax
		jz	short loc_A17
		movsx	eax, [ebp+var_41]
		cmp	eax, 3
		jnz	short loc_A32

loc_A17:				; CODE XREF: _reduceToUMappings+B8j
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_14]
		mov	edx, [ebp+var_20]
		mov	esi, [ebp+var_14]
		mov	edx, [esi+edx*4]
		mov	[ecx+eax*4], edx
		mov	eax, [ebp+var_2C]
		add	eax, 1
		mov	[ebp+var_2C], eax

loc_A32:				; CODE XREF: _reduceToUMappings+C1j
		jmp	short loc_9DF
; ---------------------------------------------------------------------------

loc_A34:				; CODE XREF: _reduceToUMappings+9Aj
		mov	eax, [ebp+var_2C]
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_reduceToUMappings endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 0A40h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_generateToUTable proc near		; CODE XREF: _makeToUTable+7Dp
					; _generateToUTable+4F6p

var_16C		= dword	ptr -16Ch
var_A4		= dword	ptr -0A4h
var_98		= dword	ptr -98h
var_8C		= dword	ptr -8Ch
var_80		= dword	ptr -80h
var_74		= dword	ptr -74h
var_68		= dword	ptr -68h
var_5C		= dword	ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h
arg_14		= dword	ptr  1Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 16Ch
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_16C]
		mov	ecx, 5Bh ; '['
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+24h]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_8]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+9]
		cmp	ecx, 4
		jg	short loc_A9B
		mov	edx, [ebp+var_14]
		add	edx, 4
		mov	[ebp+var_16C], edx
		jmp	short loc_AAD
; ---------------------------------------------------------------------------

loc_A9B:				; CODE XREF: _generateToUTable+4Bj
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+18h]
		mov	edx, [ebp+var_14]
		add	ecx, [edx+4]
		mov	[ebp+var_16C], ecx

loc_AAD:				; CODE XREF: _generateToUTable+59j
		mov	eax, [ebp+var_16C]
		mov	[ebp+var_74], eax
		mov	eax, [ebp+var_74]
		add	eax, [ebp+arg_10]
		movzx	ecx, byte ptr [eax]
		mov	[ebp+var_80], ecx
		mov	[ebp+var_44], 1
		mov	eax, [ebp+var_80]
		mov	[ebp+var_8C], eax
		mov	ecx, [ebp+var_8C]
		mov	[ebp+var_98], ecx
		mov	eax, [ebp+arg_8]
		add	eax, 1
		mov	[ebp+var_2C], eax
		jmp	short loc_AF2
; ---------------------------------------------------------------------------

loc_AE9:				; CODE XREF: _generateToUTable:loc_B73j
		mov	eax, [ebp+var_2C]
		add	eax, 1
		mov	[ebp+var_2C], eax

loc_AF2:				; CODE XREF: _generateToUTable+A7j
		mov	eax, [ebp+var_2C]
		cmp	eax, [ebp+arg_C]
		jge	short loc_B78
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+9]
		cmp	ecx, 4
		jg	short loc_B26
		mov	edx, [ebp+var_14]
		add	edx, 4
		mov	[ebp+var_16C], edx
		jmp	short loc_B38
; ---------------------------------------------------------------------------

loc_B26:				; CODE XREF: _generateToUTable+D6j
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+18h]
		mov	edx, [ebp+var_14]
		add	ecx, [edx+4]
		mov	[ebp+var_16C], ecx

loc_B38:				; CODE XREF: _generateToUTable+E4j
		mov	eax, [ebp+var_16C]
		mov	[ebp+var_74], eax
		mov	eax, [ebp+var_74]
		add	eax, [ebp+arg_10]
		movzx	ecx, byte ptr [eax]
		mov	[ebp+var_8C], ecx
		mov	eax, [ebp+var_8C]
		cmp	eax, [ebp+var_98]
		jz	short loc_B73
		mov	eax, [ebp+var_8C]
		mov	[ebp+var_98], eax
		mov	eax, [ebp+var_44]
		add	eax, 1
		mov	[ebp+var_44], eax

loc_B73:				; CODE XREF: _generateToUTable+11Cj
		jmp	loc_AE9
; ---------------------------------------------------------------------------

loc_B78:				; CODE XREF: _generateToUTable+B8j
		mov	eax, [ebp+var_8C]
		sub	eax, [ebp+var_80]
		add	eax, 1
		mov	[ebp+var_50], eax
		cmp	[ebp+var_50], 100h
		jge	short loc_BAC
		cmp	[ebp+arg_10], 0
		jz	short loc_BAA
		mov	eax, [ebp+var_50]
		imul	eax, 3
		cdq
		and	edx, 3
		add	eax, edx
		sar	eax, 2
		cmp	[ebp+var_44], eax
		jl	short loc_BAC

loc_BAA:				; CODE XREF: _generateToUTable+154j
		jmp	short loc_BB2
; ---------------------------------------------------------------------------

loc_BAC:				; CODE XREF: _generateToUTable+14Ej
					; _generateToUTable+168j
		mov	eax, [ebp+var_44]
		mov	[ebp+var_50], eax

loc_BB2:				; CODE XREF: _generateToUTable:loc_BAAj
		cmp	[ebp+var_50], 100h
		jl	short loc_BF0
		mov	esi, esp
		mov	eax, [ebp+var_50]
		push	eax
		push	offset ??_C@_0EI@HMFAJFBO@error?3?5toUnicode?5extension?5table@	; "error: toUnicode extension table sectio"...
		mov	edi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	edi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax		; File
		call	dword ptr ds:__imp__fprintf
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp
		xor	al, al
		jmp	loc_F50
; ---------------------------------------------------------------------------

loc_BF0:				; CODE XREF: _generateToUTable+179j
		mov	eax, [ebp+var_50]
		add	eax, 1
		push	eax
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+14h]
		push	edx
		call	_utm_allocN
		add	esp, 8
		mov	[ebp+var_A4], eax
		mov	eax, [ebp+var_50]
		shl	eax, 18h
		or	eax, [ebp+arg_14]
		mov	ecx, [ebp+var_A4]
		mov	[ecx], eax
		mov	edx, [ebp+var_A4]
		add	edx, 4
		mov	[ebp+var_A4], edx
		mov	eax, [ebp+var_80]
		sub	eax, 1
		mov	[ebp+var_98], eax
		mov	[ebp+var_38], 0
		mov	eax, [ebp+arg_8]
		mov	[ebp+var_2C], eax
		jmp	short loc_C50
; ---------------------------------------------------------------------------

loc_C47:				; CODE XREF: _generateToUTable:loc_D37j
		mov	eax, [ebp+var_2C]
		add	eax, 1
		mov	[ebp+var_2C], eax

loc_C50:				; CODE XREF: _generateToUTable+205j
		mov	eax, [ebp+var_2C]
		cmp	eax, [ebp+arg_C]
		jge	loc_D3C
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+9]
		cmp	ecx, 4
		jg	short loc_C88
		mov	edx, [ebp+var_14]
		add	edx, 4
		mov	[ebp+var_16C], edx
		jmp	short loc_C9A
; ---------------------------------------------------------------------------

loc_C88:				; CODE XREF: _generateToUTable+238j
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+18h]
		mov	edx, [ebp+var_14]
		add	ecx, [edx+4]
		mov	[ebp+var_16C], ecx

loc_C9A:				; CODE XREF: _generateToUTable+246j
		mov	eax, [ebp+var_16C]
		mov	[ebp+var_74], eax
		mov	eax, [ebp+var_74]
		add	eax, [ebp+arg_10]
		movzx	ecx, byte ptr [eax]
		mov	[ebp+var_8C], ecx
		mov	eax, [ebp+var_8C]
		cmp	eax, [ebp+var_98]
		jz	short loc_D37
		mov	eax, [ebp+var_50]
		cmp	eax, [ebp+var_44]
		jle	short loc_D0A

loc_CC8:				; CODE XREF: _generateToUTable+2C6j
		mov	eax, [ebp+var_98]
		add	eax, 1
		mov	[ebp+var_98], eax
		mov	ecx, [ebp+var_98]
		cmp	ecx, [ebp+var_8C]
		jge	short loc_D08
		mov	eax, [ebp+var_98]
		shl	eax, 18h
		or	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_38]
		mov	edx, [ebp+var_A4]
		mov	[edx+ecx*4], eax
		mov	eax, [ebp+var_38]
		add	eax, 1
		mov	[ebp+var_38], eax
		jmp	short loc_CC8
; ---------------------------------------------------------------------------

loc_D08:				; CODE XREF: _generateToUTable+2A3j
		jmp	short loc_D16
; ---------------------------------------------------------------------------

loc_D0A:				; CODE XREF: _generateToUTable+286j
		mov	eax, [ebp+var_8C]
		mov	[ebp+var_98], eax

loc_D16:				; CODE XREF: _generateToUTable:loc_D08j
		mov	eax, [ebp+var_8C]
		shl	eax, 18h
		or	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_38]
		mov	edx, [ebp+var_A4]
		mov	[edx+ecx*4], eax
		mov	eax, [ebp+var_38]
		add	eax, 1
		mov	[ebp+var_38], eax

loc_D37:				; CODE XREF: _generateToUTable+27Ej
		jmp	loc_C47
; ---------------------------------------------------------------------------

loc_D3C:				; CODE XREF: _generateToUTable+216j
		mov	eax, [ebp+var_A4]
		mov	ecx, [eax]
		and	ecx, 0FFFFFFh
		mov	[ebp+var_68], ecx
		mov	[ebp+var_38], 0
		jmp	short loc_D5F
; ---------------------------------------------------------------------------

loc_D56:				; CODE XREF: _generateToUTable+38Ej
					; _generateToUTable:loc_F49j
		mov	eax, [ebp+var_38]
		add	eax, 1
		mov	[ebp+var_38], eax

loc_D5F:				; CODE XREF: _generateToUTable+314j
		mov	eax, [ebp+var_38]
		cmp	eax, [ebp+var_50]
		jge	loc_F4E
		mov	eax, [ebp+var_68]
		mov	[ebp+var_5C], eax
		mov	eax, [ebp+var_38]
		add	eax, 1
		cmp	eax, [ebp+var_50]
		jge	short loc_D96
		mov	ecx, [ebp+var_38]
		mov	edx, [ebp+var_A4]
		mov	eax, [edx+ecx*4+4]
		and	eax, 0FFFFFFh
		mov	[ebp+var_16C], eax
		jmp	short loc_D9F
; ---------------------------------------------------------------------------

loc_D96:				; CODE XREF: _generateToUTable+33Aj
		mov	ecx, [ebp+arg_C]
		mov	[ebp+var_16C], ecx

loc_D9F:				; CODE XREF: _generateToUTable+354j
		mov	edx, [ebp+var_16C]
		mov	[ebp+var_68], edx
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_A4]
		mov	edx, [ecx+eax*4]
		and	edx, 0FF000000h
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_A4]
		mov	[ecx+eax*4], edx
		mov	eax, [ebp+var_5C]
		cmp	eax, [ebp+var_68]
		jnz	short loc_DD0
		jmp	short loc_D56
; ---------------------------------------------------------------------------

loc_DD0:				; CODE XREF: _generateToUTable+38Cj
		mov	[ebp+arg_14], 0
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+9]
		mov	edx, [ebp+arg_10]
		add	edx, 1
		cmp	ecx, edx
		jnz	loc_ECF
		mov	eax, [ebp+var_5C]
		add	eax, 1
		mov	[ebp+var_5C], eax
		mov	eax, [ebp+var_5C]
		cmp	eax, [ebp+var_68]
		jge	loc_EB8
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		mov	eax, [ebp+var_8]
		movsx	ecx, byte ptr [eax+edx+9]
		mov	edx, [ebp+arg_10]
		add	edx, 1
		cmp	ecx, edx
		jnz	loc_EB8
		mov	esi, esp
		push	offset ??_C@_0CK@JFIGFLCM@error?3?5multiple?5mappings?5from?5sa@ ; "error: multiple mappings from same byte"...
		mov	edi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	edi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax		; File
		call	dword ptr ds:__imp__fprintf
		add	esp, 8
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	esi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	esi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax
		mov	eax, [ebp+var_14]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		call	_ucm_printMapping
		add	esp, 0Ch
		mov	esi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	esi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		push	edx
		mov	eax, [ebp+arg_4]
		push	eax
		call	_ucm_printMapping
		add	esp, 0Ch
		xor	al, al
		jmp	loc_F50
; ---------------------------------------------------------------------------

loc_EB8:				; CODE XREF: _generateToUTable+3CDj
					; _generateToUTable+3EFj
		mov	eax, [ebp+var_14]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	_getToUnicodeValue
		add	esp, 0Ch
		mov	[ebp+arg_14], eax

loc_ECF:				; CODE XREF: _generateToUTable+3B8j
		mov	eax, [ebp+var_5C]
		cmp	eax, [ebp+var_68]
		jnz	short loc_EF4
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_A4]
		mov	edx, [ecx+eax*4]
		or	edx, [ebp+arg_14]
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_A4]
		mov	[ecx+eax*4], edx
		jmp	short loc_F49
; ---------------------------------------------------------------------------

loc_EF4:				; CODE XREF: _generateToUTable+495j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+14h]
		push	ecx
		call	_utm_countItems
		add	esp, 4
		mov	edx, [ebp+var_38]
		mov	ecx, [ebp+var_A4]
		or	eax, [ecx+edx*4]
		mov	edx, [ebp+var_38]
		mov	ecx, [ebp+var_A4]
		mov	[ecx+edx*4], eax
		mov	eax, [ebp+arg_14]
		push	eax
		mov	ecx, [ebp+arg_10]
		add	ecx, 1
		push	ecx
		mov	edx, [ebp+var_68]
		push	edx
		mov	eax, [ebp+var_5C]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	_generateToUTable
		add	esp, 18h
		movsx	eax, al
		test	eax, eax
		jnz	short loc_F49
		xor	al, al
		jmp	short loc_F50
; ---------------------------------------------------------------------------

loc_F49:				; CODE XREF: _generateToUTable+4B2j
					; _generateToUTable+503j
		jmp	loc_D56
; ---------------------------------------------------------------------------

loc_F4E:				; CODE XREF: _generateToUTable+325j
		mov	al, 1

loc_F50:				; CODE XREF: _generateToUTable+1ABj
					; _generateToUTable+473j ...
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 16Ch
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_generateToUTable endp

_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 0F64h
		public ??_C@_0CK@JFIGFLCM@error?3?5multiple?5mappings?5from?5sa@
; char `string'[]
??_C@_0CK@JFIGFLCM@error?3?5multiple?5mappings?5from?5sa@ db 'error: multiple mappings from same bytes',0Ah,0
					; DATA XREF: _generateToUTable+3F7o
		align 10h
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
; Segment alignment 'qword' can not be represented in assembly
_rdata		segment	para public 'DATA' use32
		assume cs:_rdata
		;org 0F90h
		public ??_C@_0EI@HMFAJFBO@error?3?5toUnicode?5extension?5table@
; char `string'[]
??_C@_0EI@HMFAJFBO@error?3?5toUnicode?5extension?5table@ db 'error: toUnicode extension table section overflow: %ld section en'
					; DATA XREF: _generateToUTable+181o
		db 'tries',0Ah,0
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 0FD8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_getToUnicodeValue proc	near		; CODE XREF: _generateToUTable+484p

var_10C		= dword	ptr -10Ch
Code		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 10Ch
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_10C]
		mov	ecx, 43h ; 'C'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_1029
		mov	eax, [ebp+arg_8]
		mov	ecx, 0FFFFh
		cmp	ecx, [eax]
		sbb	edx, edx
		neg	edx
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+arg_8]
		mov	ecx, [eax]
		add	ecx, 1F0000h
		mov	[ebp+var_20], ecx
		jmp	loc_111E
; ---------------------------------------------------------------------------

loc_1029:				; CODE XREF: _getToUnicodeValue+28j
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_1040
		mov	edx, [ebp+arg_8]
		mov	[ebp+var_10C], edx
		jmp	short loc_1054
; ---------------------------------------------------------------------------

loc_1040:				; CODE XREF: _getToUnicodeValue+5Bj
		mov	eax, [ebp+arg_8]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+0Ch]
		lea	ecx, [eax+ecx*4]
		mov	[ebp+var_10C], ecx

loc_1054:				; CODE XREF: _getToUnicodeValue+66j
		mov	edx, [ebp+var_10C]
		mov	[ebp+var_8], edx
		mov	[ebp+Code], 0
		lea	eax, [ebp+Code]
		push	eax
		mov	ecx, [ebp+arg_8]
		movsx	edx, byte ptr [ecx+8]
		push	edx
		mov	eax, [ebp+var_8]
		push	eax
		lea	ecx, [ebp+var_2C]
		push	ecx
		push	0
		push	0
		call	_u_strFromUTF32_56
		add	esp, 18h
		cmp	[ebp+Code], 0
		jle	short loc_10A3
		cmp	[ebp+Code], 0Fh
		jz	short loc_10A3
		mov	esi, esp
		mov	eax, [ebp+Code]
		push	eax		; Code
		call	dword ptr ds:__imp__exit
; ---------------------------------------------------------------------------
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_10A3:				; CODE XREF: _getToUnicodeValue+B0j
					; _getToUnicodeValue+B6j
		mov	esi, [ebp+var_2C]
		add	esi, 0Ch
		shl	esi, 12h
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+18h]
		push	ecx
		call	_utm_countItems
		add	esp, 4
		or	esi, eax
		mov	[ebp+var_20], esi
		mov	eax, [ebp+var_2C]
		push	eax
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+18h]
		push	edx
		call	_utm_allocN
		add	esp, 8
		mov	[ebp+var_14], eax
		mov	[ebp+Code], 0
		lea	eax, [ebp+Code]
		push	eax
		mov	ecx, [ebp+arg_8]
		movsx	edx, byte ptr [ecx+8]
		push	edx
		mov	eax, [ebp+var_8]
		push	eax
		push	0
		mov	ecx, [ebp+var_2C]
		push	ecx
		mov	edx, [ebp+var_14]
		push	edx
		call	_u_strFromUTF32_56
		add	esp, 18h
		cmp	[ebp+Code], 0
		jle	short loc_111E
		cmp	[ebp+Code], 0Fh
		jz	short loc_111E
		mov	esi, esp
		mov	eax, [ebp+Code]
		push	eax		; Code
		call	dword ptr ds:__imp__exit
; ---------------------------------------------------------------------------
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_111E:				; CODE XREF: _getToUnicodeValue+4Cj
					; _getToUnicodeValue+12Bj ...
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+0Ah]
		test	ecx, ecx
		jnz	short loc_1134
		mov	eax, [ebp+var_20]
		or	eax, 800000h
		mov	[ebp+var_20], eax

loc_1134:				; CODE XREF: _getToUnicodeValue+14Fj
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+9]
		mov	edx, [ebp+arg_0]
		cmp	ecx, [edx+0E003Ch]
		jle	short loc_1156
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+9]
		mov	edx, [ebp+arg_0]
		mov	[edx+0E003Ch], ecx

loc_1156:				; CODE XREF: _getToUnicodeValue+16Cj
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		cmp	ecx, [eax+0E004Ch]
		jle	short loc_1170
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+0E004Ch], ecx

loc_1170:				; CODE XREF: _getToUnicodeValue+18Aj
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+9]
		mov	edx, [ebp+var_2C]
		lea	eax, [edx+ecx-1]
		mov	ecx, [ebp+arg_8]
		movsx	ecx, byte ptr [ecx+9]
		cdq
		idiv	ecx
		mov	[ebp+var_38], eax
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_38]
		cmp	ecx, [eax+0E0050h]
		jle	short loc_11A5
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_38]
		mov	[eax+0E0050h], ecx

loc_11A5:				; CODE XREF: _getToUnicodeValue+1BFj
		mov	eax, [ebp+var_20]
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN16
		call	@_RTC_CheckStackVars@8 ; _RTC_CheckStackVars(x,x)
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 10Ch
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_getToUnicodeValue endp

; ---------------------------------------------------------------------------
		align 10h
$LN16		dd 2			; DATA XREF: _getToUnicodeValue+1D4o
		dd offset $LN15
$LN15		dd 0FFFFFFD4h, 4	; DATA XREF: .text:000011D4o
		dd offset $LN13_0	; "u16Length"
		dd 0FFFFFFBCh, 4
		dd offset $LN14_0	; "errorCode"
$LN14_0		db 'errorCode',0        ; DATA XREF: .text:000011ECo
$LN13_0		db 'u16Length',0        ; DATA XREF: .text:000011E0o
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1204h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_makeFromUTable	proc near		; CODE XREF: _CnvExtAddTable+84p

var_F0		= byte ptr -0F0h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0F0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_F0]
		mov	ecx, 3Ch ; '<'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_4]
		push	eax
		call	_prepareFromUMappings
		add	esp, 4
		mov	[ebp+var_2C], eax
		push	2
		push	1000000h
		push	10000h
		push	offset ??_C@_0BP@EKICILH@cnv?5extension?5fromUTableUChars?$AA@ ; "cnv extension	fromUTableUChars"
		call	_utm_open
		add	esp, 10h
		mov	ecx, [ebp+arg_0]
		mov	[ecx+1Ch], eax
		push	4
		push	1000000h
		push	10000h
		push	offset ??_C@_0BP@EMLGEFOK@cnv?5extension?5fromUTableValues?$AA@	; "cnv extension fromUTableValues"
		call	_utm_open
		add	esp, 10h
		mov	ecx, [ebp+arg_0]
		mov	[ecx+20h], eax
		push	1
		push	1000000h
		push	10000h
		push	offset ??_C@_0BJ@PCCDCJJE@cnv?5extension?5fromUBytes?$AA@ ; "cnv extension fromUBytes"
		call	_utm_open
		add	esp, 10h
		mov	ecx, [ebp+arg_0]
		mov	[ecx+24h], eax
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+0E002Ch], 40h ; '@'
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+0E0030h], 10h
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+0A002Ch], 80000001h
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+0E0034h], 2
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		push	ecx
		call	_utm_alloc
		add	esp, 4
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+20h]
		push	ecx
		call	_utm_alloc
		add	esp, 4
		mov	eax, [ebp+var_2C]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	_generateFromUTrie
		add	esp, 0Ch
		movsx	eax, al
		test	eax, eax
		jnz	short loc_12FF
		xor	al, al
		jmp	short loc_1349
; ---------------------------------------------------------------------------

loc_12FF:				; CODE XREF: _makeFromUTable+F5j
		mov	eax, [ebp+arg_0]
		add	eax, 28h ; '('
		mov	[ebp+var_8], eax
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0E0028h]
		mov	[ebp+var_20], ecx
		mov	[ebp+var_14], 0
		jmp	short loc_1326
; ---------------------------------------------------------------------------

loc_131D:				; CODE XREF: _makeFromUTable+141j
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax

loc_1326:				; CODE XREF: _makeFromUTable+117j
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+var_20]
		jge	short loc_1347
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+var_8]
		movzx	edx, word ptr [ecx+eax*2]
		add	edx, [ebp+var_20]
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+var_8]
		mov	[ecx+eax*2], dx
		jmp	short loc_131D
; ---------------------------------------------------------------------------

loc_1347:				; CODE XREF: _makeFromUTable+128j
		mov	al, 1

loc_1349:				; CODE XREF: _makeFromUTable+F9j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0F0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_makeFromUTable	endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 1360h
		public ??_C@_0BJ@PCCDCJJE@cnv?5extension?5fromUBytes?$AA@
; `string'
??_C@_0BJ@PCCDCJJE@cnv?5extension?5fromUBytes?$AA@ db 'cnv extension fromUBytes',0
					; DATA XREF: _makeFromUTable+77o
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 137Ch
		public ??_C@_0BP@EMLGEFOK@cnv?5extension?5fromUTableValues?$AA@
; `string'
??_C@_0BP@EMLGEFOK@cnv?5extension?5fromUTableValues?$AA@ db 'cnv extension fromUTableValues',0
					; DATA XREF: _makeFromUTable+58o
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 139Ch
		public ??_C@_0BP@EKICILH@cnv?5extension?5fromUTableUChars?$AA@
; `string'
??_C@_0BP@EKICILH@cnv?5extension?5fromUTableUChars?$AA@	db 'cnv extension fromUTableUChars',0
					; DATA XREF: _makeFromUTable+39o
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 13BCh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_prepareFromUMappings proc near		; CODE XREF: _makeFromUTable+22p

var_154		= dword	ptr -154h
var_8C		= dword	ptr -8Ch
var_80		= dword	ptr -80h
var_74		= dword	ptr -74h
var_68		= dword	ptr -68h
var_5C		= dword	ptr -5Ch
var_4D		= byte ptr -4Dh
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 154h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_154]
		mov	ecx, 55h ; 'U'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+24h]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_44], ecx
		mov	eax, [ebp+var_8]
		mov	[ebp+var_14], eax
		mov	[ebp+var_38], 0
		mov	eax, [ebp+var_38]
		mov	[ebp+var_2C], eax
		jmp	short loc_141B
; ---------------------------------------------------------------------------

loc_1409:				; CODE XREF: _prepareFromUMappings:loc_15A1j
		mov	eax, [ebp+var_14]
		add	eax, 0Ch
		mov	[ebp+var_14], eax
		mov	ecx, [ebp+var_2C]
		add	ecx, 1
		mov	[ebp+var_2C], ecx

loc_141B:				; CODE XREF: _prepareFromUMappings+4Bj
		mov	eax, [ebp+var_2C]
		cmp	eax, [ebp+var_44]
		jge	loc_15A6
		mov	eax, [ebp+var_14]
		mov	cl, [eax+0Ah]
		mov	[ebp+var_4D], cl
		movsx	eax, [ebp+var_4D]
		test	eax, eax
		jl	short loc_144B
		movsx	eax, [ebp+var_4D]
		and	eax, 0Fh
		mov	[ebp+var_4D], al
		mov	eax, [ebp+var_14]
		mov	cl, [ebp+var_4D]
		mov	[eax+0Ah], cl

loc_144B:				; CODE XREF: _prepareFromUMappings+7Aj
		movsx	eax, [ebp+var_4D]
		test	eax, eax
		jz	short loc_147E
		movsx	eax, [ebp+var_4D]
		cmp	eax, 1
		jz	short loc_147E
		movsx	eax, [ebp+var_4D]
		cmp	eax, 2
		jnz	short loc_1471
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+9]
		cmp	ecx, 1
		jz	short loc_147E

loc_1471:				; CODE XREF: _prepareFromUMappings+A7j
		movsx	eax, [ebp+var_4D]
		cmp	eax, 4
		jnz	loc_15A1

loc_147E:				; CODE XREF: _prepareFromUMappings+95j
					; _prepareFromUMappings+9Ej ...
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_20]
		mov	edx, [ebp+var_2C]
		mov	[ecx+eax*4], edx
		mov	eax, [ebp+var_38]
		add	eax, 1
		mov	[ebp+var_38], eax
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jle	loc_15A1
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_14BA
		mov	edx, [ebp+var_14]
		mov	[ebp+var_154], edx
		jmp	short loc_14CE
; ---------------------------------------------------------------------------

loc_14BA:				; CODE XREF: _prepareFromUMappings+F1j
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+0Ch]
		lea	ecx, [eax+ecx*4]
		mov	[ebp+var_154], ecx

loc_14CE:				; CODE XREF: _prepareFromUMappings+FCj
		mov	edx, [ebp+var_154]
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_5C]
		mov	[ebp+var_68], eax
		mov	[ebp+var_8C], 2
		mov	[ebp+var_80], 1
		jmp	short loc_14F9
; ---------------------------------------------------------------------------

loc_14F0:				; CODE XREF: _prepareFromUMappings:loc_1590j
		mov	eax, [ebp+var_80]
		add	eax, 1
		mov	[ebp+var_80], eax

loc_14F9:				; CODE XREF: _prepareFromUMappings+132j
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		cmp	[ebp+var_80], ecx
		jge	loc_1595
		mov	eax, [ebp+var_80]
		mov	ecx, [ebp+var_5C]
		mov	edx, [ecx+eax*4]
		mov	[ebp+var_74], edx
		cmp	[ebp+var_74], 0FFFFh
		ja	short loc_1540
		mov	eax, [ebp+var_8C]
		mov	ecx, [ebp+var_68]
		mov	dx, word ptr [ebp+var_74]
		mov	[ecx+eax*2], dx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		jmp	short loc_1590
; ---------------------------------------------------------------------------

loc_1540:				; CODE XREF: _prepareFromUMappings+160j
		mov	eax, [ebp+var_74]
		sar	eax, 0Ah
		add	eax, 0D7C0h
		mov	ecx, [ebp+var_8C]
		mov	edx, [ebp+var_68]
		mov	[edx+ecx*2], ax
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_74]
		and	eax, 3FFh
		or	eax, 0DC00h
		mov	ecx, [ebp+var_8C]
		mov	edx, [ebp+var_68]
		mov	[edx+ecx*2], ax
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax

loc_1590:				; CODE XREF: _prepareFromUMappings+182j
		jmp	loc_14F0
; ---------------------------------------------------------------------------

loc_1595:				; CODE XREF: _prepareFromUMappings+147j
		mov	eax, [ebp+var_14]
		mov	cl, byte ptr [ebp+var_8C]
		mov	[eax+8], cl

loc_15A1:				; CODE XREF: _prepareFromUMappings+BCj
					; _prepareFromUMappings+E1j
		jmp	loc_1409
; ---------------------------------------------------------------------------

loc_15A6:				; CODE XREF: _prepareFromUMappings+65j
		mov	eax, [ebp+var_38]
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_prepareFromUMappings endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 15B0h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_generateFromUTrie proc	near		; CODE XREF: _makeFromUTable+E8p

var_130		= dword	ptr -130h
var_68		= dword	ptr -68h
var_5C		= dword	ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 130h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_130]
		mov	ecx, 4Ch ; 'L'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_8], 0
		jnz	short loc_15DB
		mov	al, 1
		jmp	loc_1855
; ---------------------------------------------------------------------------

loc_15DB:				; CODE XREF: _generateFromUTrie+22j
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+24h]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [eax]
		imul	ecx, 0Ch
		add	ecx, [ebp+var_8]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_1611
		mov	edx, [ebp+var_14]
		mov	[ebp+var_130], edx
		jmp	short loc_1625
; ---------------------------------------------------------------------------

loc_1611:				; CODE XREF: _generateFromUTrie+54j
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+0Ch]
		lea	ecx, [eax+ecx*4]
		mov	[ebp+var_130], ecx

loc_1625:				; CODE XREF: _generateFromUTrie+5Fj
		mov	edx, [ebp+var_130]
		mov	[ebp+var_50], edx
		mov	eax, [ebp+var_50]
		mov	ecx, [eax]
		mov	[ebp+var_68], ecx
		mov	[ebp+var_44], 0

loc_163D:				; CODE XREF: _generateFromUTrie:loc_184Ej
		mov	eax, [ebp+var_44]
		cmp	eax, [ebp+arg_8]
		jge	loc_1853
		mov	eax, [ebp+var_44]
		mov	[ebp+var_38], eax
		mov	eax, [ebp+var_68]
		mov	[ebp+var_5C], eax

loc_1655:				; CODE XREF: _generateFromUTrie+10Cj
		mov	eax, [ebp+var_68]
		cmp	eax, [ebp+var_5C]
		jnz	short loc_16BE
		mov	eax, [ebp+var_44]
		add	eax, 1
		mov	[ebp+var_44], eax
		mov	ecx, [ebp+var_44]
		cmp	ecx, [ebp+arg_8]
		jge	short loc_16BE
		mov	eax, [ebp+var_44]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_1697
		mov	edx, [ebp+var_14]
		mov	[ebp+var_130], edx
		jmp	short loc_16AB
; ---------------------------------------------------------------------------

loc_1697:				; CODE XREF: _generateFromUTrie+DAj
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+0Ch]
		lea	ecx, [eax+ecx*4]
		mov	[ebp+var_130], ecx

loc_16AB:				; CODE XREF: _generateFromUTrie+E5j
		mov	edx, [ebp+var_130]
		mov	[ebp+var_50], edx
		mov	eax, [ebp+var_50]
		mov	ecx, [eax]
		mov	[ebp+var_68], ecx
		jmp	short loc_1655
; ---------------------------------------------------------------------------

loc_16BE:				; CODE XREF: _generateFromUTrie+ABj
					; _generateFromUTrie+BCj
		mov	[ebp+var_2C], 0
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_16EE
		mov	edx, [ebp+var_14]
		mov	[ebp+var_130], edx
		jmp	short loc_1702
; ---------------------------------------------------------------------------

loc_16EE:				; CODE XREF: _generateFromUTrie+131j
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+0Ch]
		lea	ecx, [eax+ecx*4]
		mov	[ebp+var_130], ecx

loc_1702:				; CODE XREF: _generateFromUTrie+13Cj
		mov	edx, [ebp+var_130]
		mov	[ebp+var_50], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	loc_17E7
		mov	eax, [ebp+var_38]
		add	eax, 1
		mov	[ebp+var_38], eax
		mov	eax, [ebp+var_38]
		cmp	eax, [ebp+var_44]
		jge	loc_17D0
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		mov	eax, [ebp+var_8]
		movsx	ecx, byte ptr [eax+edx+8]
		cmp	ecx, 1
		jnz	loc_17D0
		mov	esi, esp
		push	offset ??_C@_0DI@LLPMIKEF@error?3?5multiple?5mappings?5from?5sa@ ; "error: multiple mappings from same Unic"...
		mov	edi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	edi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax		; File
		call	dword ptr ds:__imp__fprintf
		add	esp, 8
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	esi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	esi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax
		mov	eax, [ebp+var_14]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		call	_ucm_printMapping
		add	esp, 0Ch
		mov	esi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	esi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		push	edx
		mov	eax, [ebp+arg_4]
		push	eax
		call	_ucm_printMapping
		add	esp, 0Ch
		xor	al, al
		jmp	loc_1855
; ---------------------------------------------------------------------------

loc_17D0:				; CODE XREF: _generateFromUTrie+17Aj
					; _generateFromUTrie+197j
		mov	eax, [ebp+var_14]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	_getFromUBytesValue
		add	esp, 0Ch
		mov	[ebp+var_2C], eax

loc_17E7:				; CODE XREF: _generateFromUTrie+165j
		mov	eax, [ebp+var_38]
		cmp	eax, [ebp+var_44]
		jnz	short loc_1805
		mov	eax, [ebp+var_2C]
		push	eax
		mov	ecx, [ebp+var_5C]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	_addFromUTrieEntry
		add	esp, 0Ch
		jmp	short loc_184E
; ---------------------------------------------------------------------------

loc_1805:				; CODE XREF: _generateFromUTrie+23Dj
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+20h]
		push	ecx
		call	_utm_countItems
		add	esp, 4
		push	eax
		mov	edx, [ebp+var_5C]
		push	edx
		mov	eax, [ebp+arg_0]
		push	eax
		call	_addFromUTrieEntry
		add	esp, 0Ch
		mov	eax, [ebp+var_2C]
		push	eax
		push	2
		mov	ecx, [ebp+var_44]
		push	ecx
		mov	edx, [ebp+var_38]
		push	edx
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	_generateFromUTable
		add	esp, 18h
		movsx	edx, al
		test	edx, edx
		jnz	short loc_184E
		xor	al, al
		jmp	short loc_1855
; ---------------------------------------------------------------------------

loc_184E:				; CODE XREF: _generateFromUTrie+253j
					; _generateFromUTrie+298j
		jmp	loc_163D
; ---------------------------------------------------------------------------

loc_1853:				; CODE XREF: _generateFromUTrie+93j
		mov	al, 1

loc_1855:				; CODE XREF: _generateFromUTrie+26j
					; _generateFromUTrie+21Bj ...
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 130h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_generateFromUTrie endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 186Ch
		public ??_C@_0DI@LLPMIKEF@error?3?5multiple?5mappings?5from?5sa@
; char `string'[]
??_C@_0DI@LLPMIKEF@error?3?5multiple?5mappings?5from?5sa@ db 'error: multiple mappings from same Unicode code points',0Ah,0
					; DATA XREF: _generateFromUTrie+19Fo
					; _generateFromUTable+345o
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 18A4h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_getFromUBytesValue proc near		; CODE XREF: _generateFromUTrie+22Cp
					; _generateFromUTable+3D2p

var_100		= dword	ptr -100h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
Dst		= dword	ptr -14h
Src		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 100h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_100]
		mov	ecx, 40h ; '@'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+0Ah]
		cmp	ecx, 2
		jnz	short loc_18D8
		mov	eax, 80000001h
		jmp	loc_1AE6
; ---------------------------------------------------------------------------

loc_18D8:				; CODE XREF: _getFromUBytesValue+28j
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+9]
		cmp	ecx, 4
		jg	short loc_18F2
		mov	edx, [ebp+arg_8]
		add	edx, 4
		mov	[ebp+var_100], edx
		jmp	short loc_1904
; ---------------------------------------------------------------------------

loc_18F2:				; CODE XREF: _getFromUBytesValue+3Ej
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+18h]
		mov	edx, [ebp+arg_8]
		add	ecx, [edx+4]
		mov	[ebp+var_100], ecx

loc_1904:				; CODE XREF: _getFromUBytesValue+4Cj
		mov	eax, [ebp+var_100]
		mov	[ebp+Src], eax
		mov	[ebp+var_20], 0
		mov	eax, [ebp+arg_8]
		mov	cl, [eax+9]
		mov	byte ptr [ebp+var_100],	cl
		cmp	byte ptr [ebp+var_100],	1
		jz	short loc_196A
		cmp	byte ptr [ebp+var_100],	2
		jz	short loc_1952
		cmp	byte ptr [ebp+var_100],	3
		jz	short loc_193D
		jmp	short loc_1978
; ---------------------------------------------------------------------------

loc_193D:				; CODE XREF: _getFromUBytesValue+95j
		mov	eax, [ebp+Src]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 10h
		mov	[ebp+var_20], ecx
		mov	edx, [ebp+Src]
		add	edx, 1
		mov	[ebp+Src], edx

loc_1952:				; CODE XREF: _getFromUBytesValue+8Cj
		mov	eax, [ebp+Src]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 8
		or	ecx, [ebp+var_20]
		mov	[ebp+var_20], ecx
		mov	edx, [ebp+Src]
		add	edx, 1
		mov	[ebp+Src], edx

loc_196A:				; CODE XREF: _getFromUBytesValue+83j
		mov	eax, [ebp+Src]
		movzx	ecx, byte ptr [eax]
		or	ecx, [ebp+var_20]
		mov	[ebp+var_20], ecx
		jmp	short loc_19CA
; ---------------------------------------------------------------------------

loc_1978:				; CODE XREF: _getFromUBytesValue+97j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+24h]
		push	ecx
		call	_utm_countItems
		add	esp, 4
		mov	[ebp+var_20], eax
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+9]
		push	ecx
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+24h]
		push	eax
		call	_utm_allocN
		add	esp, 8
		mov	[ebp+Dst], eax
		push	1
		mov	eax, [ebp+Src]
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	ecx, [ebp+arg_8]
		movsx	edx, byte ptr [ecx+9]
		push	edx		; Size
		mov	eax, [ebp+Src]
		push	eax		; Src
		mov	ecx, [ebp+Dst]
		push	ecx		; Dst
		call	_memcpy
		add	esp, 0Ch

loc_19CA:				; CODE XREF: _getFromUBytesValue+D2j
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+9]
		shl	ecx, 18h
		or	ecx, [ebp+var_20]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+0Ah]
		test	ecx, ecx
		jnz	short loc_19F2
		mov	eax, [ebp+var_20]
		or	eax, 80000000h
		mov	[ebp+var_20], eax
		jmp	short loc_1A09
; ---------------------------------------------------------------------------

loc_19F2:				; CODE XREF: _getFromUBytesValue+13Fj
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+0Ah]
		cmp	ecx, 4
		jnz	short loc_1A09
		mov	eax, [ebp+var_20]
		or	eax, 40000000h
		mov	[ebp+var_20], eax

loc_1A09:				; CODE XREF: _getFromUBytesValue+14Cj
					; _getFromUBytesValue+158j
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_1A2B
		mov	eax, [ebp+arg_8]
		mov	ecx, 0FFFFh
		cmp	ecx, [eax]
		sbb	edx, edx
		neg	edx
		add	edx, 1
		mov	[ebp+var_2C], edx
		jmp	short loc_1A78
; ---------------------------------------------------------------------------

loc_1A2B:				; CODE XREF: _getFromUBytesValue+16Fj
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_1A42
		mov	edx, [ebp+arg_8]
		mov	[ebp+var_100], edx
		jmp	short loc_1A56
; ---------------------------------------------------------------------------

loc_1A42:				; CODE XREF: _getFromUBytesValue+191j
		mov	eax, [ebp+arg_8]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+0Ch]
		lea	ecx, [eax+ecx*4]
		mov	[ebp+var_100], ecx

loc_1A56:				; CODE XREF: _getFromUBytesValue+19Cj
		mov	edx, [ebp+var_100]
		mov	eax, 0FFFFh
		cmp	eax, [edx]
		sbb	ecx, ecx
		neg	ecx
		add	ecx, 1
		mov	edx, [ebp+arg_8]
		movsx	eax, byte ptr [edx+8]
		lea	ecx, [ecx+eax-2]
		mov	[ebp+var_2C], ecx

loc_1A78:				; CODE XREF: _getFromUBytesValue+185j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		cmp	ecx, [eax+0E0048h]
		jle	short loc_1A92
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+0E0048h], ecx

loc_1A92:				; CODE XREF: _getFromUBytesValue+1E0j
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+9]
		mov	edx, [ebp+arg_0]
		cmp	ecx, [edx+0E0040h]
		jle	short loc_1AB4
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+9]
		mov	edx, [ebp+arg_0]
		mov	[edx+0E0040h], ecx

loc_1AB4:				; CODE XREF: _getFromUBytesValue+1FEj
		mov	eax, [ebp+arg_8]
		movsx	ecx, byte ptr [eax+9]
		mov	edx, [ebp+var_2C]
		lea	eax, [ecx+edx-1]
		cdq
		idiv	[ebp+var_2C]
		mov	[ebp+var_38], eax
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_38]
		cmp	ecx, [eax+0E0044h]
		jle	short loc_1AE3
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_38]
		mov	[eax+0E0044h], ecx

loc_1AE3:				; CODE XREF: _getFromUBytesValue+231j
		mov	eax, [ebp+var_20]

loc_1AE6:				; CODE XREF: _getFromUBytesValue+2Fj
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 100h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_getFromUBytesValue endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1AFCh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_generateFromUTable proc near		; CODE XREF: _generateFromUTrie+28Bp
					; _generateFromUTable+42Cp

var_178		= dword	ptr -178h
var_B0		= dword	ptr -0B0h
var_A4		= dword	ptr -0A4h
var_98		= dword	ptr -98h
var_8C		= dword	ptr -8Ch
var_80		= dword	ptr -80h
var_74		= dword	ptr -74h
var_68		= dword	ptr -68h
var_5C		= dword	ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h
arg_14		= dword	ptr  1Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 178h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_178]
		mov	ecx, 5Eh ; '^'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+24h]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_8]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_1B54
		mov	edx, [ebp+var_14]
		mov	[ebp+var_178], edx
		jmp	short loc_1B68
; ---------------------------------------------------------------------------

loc_1B54:				; CODE XREF: _generateFromUTable+4Bj
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+0Ch]
		lea	ecx, [eax+ecx*4]
		mov	[ebp+var_178], ecx

loc_1B68:				; CODE XREF: _generateFromUTable+56j
		mov	edx, [ebp+var_178]
		mov	[ebp+var_74], edx
		mov	eax, [ebp+arg_10]
		mov	ecx, [ebp+var_74]
		movzx	edx, word ptr [ecx+eax*2]
		mov	[ebp+var_80], edx
		mov	[ebp+var_44], 1
		mov	eax, [ebp+var_80]
		mov	[ebp+var_8C], eax
		mov	ecx, [ebp+var_8C]
		mov	[ebp+var_98], ecx
		mov	eax, [ebp+arg_8]
		add	eax, 1
		mov	[ebp+var_2C], eax
		jmp	short loc_1BAE
; ---------------------------------------------------------------------------

loc_1BA5:				; CODE XREF: _generateFromUTable:loc_1C2Fj
		mov	eax, [ebp+var_2C]
		add	eax, 1
		mov	[ebp+var_2C], eax

loc_1BAE:				; CODE XREF: _generateFromUTable+A7j
		mov	eax, [ebp+var_2C]
		cmp	eax, [ebp+arg_C]
		jge	short loc_1C34
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_1BDF
		mov	edx, [ebp+var_14]
		mov	[ebp+var_178], edx
		jmp	short loc_1BF3
; ---------------------------------------------------------------------------

loc_1BDF:				; CODE XREF: _generateFromUTable+D6j
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+0Ch]
		lea	ecx, [eax+ecx*4]
		mov	[ebp+var_178], ecx

loc_1BF3:				; CODE XREF: _generateFromUTable+E1j
		mov	edx, [ebp+var_178]
		mov	[ebp+var_74], edx
		mov	eax, [ebp+arg_10]
		mov	ecx, [ebp+var_74]
		movzx	edx, word ptr [ecx+eax*2]
		mov	[ebp+var_8C], edx
		mov	eax, [ebp+var_8C]
		cmp	eax, [ebp+var_98]
		jz	short loc_1C2F
		mov	eax, [ebp+var_8C]
		mov	[ebp+var_98], eax
		mov	eax, [ebp+var_44]
		add	eax, 1
		mov	[ebp+var_44], eax

loc_1C2F:				; CODE XREF: _generateFromUTable+11Cj
		jmp	loc_1BA5
; ---------------------------------------------------------------------------

loc_1C34:				; CODE XREF: _generateFromUTable+B8j
		mov	eax, [ebp+var_44]
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_50]
		add	eax, 1
		push	eax
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+1Ch]
		push	edx
		call	_utm_allocN
		add	esp, 8
		mov	[ebp+var_A4], eax
		mov	eax, [ebp+var_50]
		add	eax, 1
		push	eax
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+20h]
		push	edx
		call	_utm_allocN
		add	esp, 8
		mov	[ebp+var_B0], eax
		mov	eax, [ebp+var_A4]
		mov	cx, word ptr [ebp+var_50]
		mov	[eax], cx
		mov	edx, [ebp+var_A4]
		add	edx, 2
		mov	[ebp+var_A4], edx
		mov	eax, [ebp+var_B0]
		mov	ecx, [ebp+arg_14]
		mov	[eax], ecx
		mov	edx, [ebp+var_B0]
		add	edx, 4
		mov	[ebp+var_B0], edx
		mov	eax, [ebp+var_80]
		sub	eax, 1
		mov	[ebp+var_98], eax
		mov	[ebp+var_38], 0
		mov	eax, [ebp+arg_8]
		mov	[ebp+var_2C], eax
		jmp	short loc_1CCC
; ---------------------------------------------------------------------------

loc_1CC3:				; CODE XREF: _generateFromUTable:loc_1D74j
		mov	eax, [ebp+var_2C]
		add	eax, 1
		mov	[ebp+var_2C], eax

loc_1CCC:				; CODE XREF: _generateFromUTable+1C5j
		mov	eax, [ebp+var_2C]
		cmp	eax, [ebp+arg_C]
		jge	loc_1D79
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		cmp	ecx, 1
		jnz	short loc_1D01
		mov	edx, [ebp+var_14]
		mov	[ebp+var_178], edx
		jmp	short loc_1D15
; ---------------------------------------------------------------------------

loc_1D01:				; CODE XREF: _generateFromUTable+1F8j
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+0Ch]
		lea	ecx, [eax+ecx*4]
		mov	[ebp+var_178], ecx

loc_1D15:				; CODE XREF: _generateFromUTable+203j
		mov	edx, [ebp+var_178]
		mov	[ebp+var_74], edx
		mov	eax, [ebp+arg_10]
		mov	ecx, [ebp+var_74]
		movzx	edx, word ptr [ecx+eax*2]
		mov	[ebp+var_8C], edx
		mov	eax, [ebp+var_8C]
		cmp	eax, [ebp+var_98]
		jz	short loc_1D74
		mov	eax, [ebp+var_8C]
		mov	[ebp+var_98], eax
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_A4]
		mov	dx, word ptr [ebp+var_8C]
		mov	[ecx+eax*2], dx
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_B0]
		mov	edx, [ebp+var_2C]
		mov	[ecx+eax*4], edx
		mov	eax, [ebp+var_38]
		add	eax, 1
		mov	[ebp+var_38], eax

loc_1D74:				; CODE XREF: _generateFromUTable+23Ej
		jmp	loc_1CC3
; ---------------------------------------------------------------------------

loc_1D79:				; CODE XREF: _generateFromUTable+1D6j
		mov	eax, [ebp+var_B0]
		mov	ecx, [eax]
		mov	[ebp+var_68], ecx
		mov	[ebp+var_38], 0
		jmp	short loc_1D96
; ---------------------------------------------------------------------------

loc_1D8D:				; CODE XREF: _generateFromUTable:loc_1F3Bj
		mov	eax, [ebp+var_38]
		add	eax, 1
		mov	[ebp+var_38], eax

loc_1D96:				; CODE XREF: _generateFromUTable+28Fj
		mov	eax, [ebp+var_38]
		cmp	eax, [ebp+var_50]
		jge	loc_1F40
		mov	eax, [ebp+var_68]
		mov	[ebp+var_5C], eax
		mov	eax, [ebp+var_38]
		add	eax, 1
		cmp	eax, [ebp+var_50]
		jge	short loc_1DC8
		mov	ecx, [ebp+var_38]
		mov	edx, [ebp+var_B0]
		mov	eax, [edx+ecx*4+4]
		mov	[ebp+var_178], eax
		jmp	short loc_1DD1
; ---------------------------------------------------------------------------

loc_1DC8:				; CODE XREF: _generateFromUTable+2B5j
		mov	ecx, [ebp+arg_C]
		mov	[ebp+var_178], ecx

loc_1DD1:				; CODE XREF: _generateFromUTable+2CAj
		mov	edx, [ebp+var_178]
		mov	[ebp+var_68], edx
		mov	[ebp+arg_14], 0
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_14]
		movsx	ecx, byte ptr [eax+8]
		mov	edx, [ebp+arg_10]
		add	edx, 1
		cmp	ecx, edx
		jnz	loc_1ED9
		mov	eax, [ebp+var_5C]
		add	eax, 1
		mov	[ebp+var_5C], eax
		mov	eax, [ebp+var_5C]
		cmp	eax, [ebp+var_68]
		jge	loc_1EC2
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		mov	eax, [ebp+var_8]
		movsx	ecx, byte ptr [eax+edx+8]
		mov	edx, [ebp+arg_10]
		add	edx, 1
		cmp	ecx, edx
		jnz	loc_1EC2
		mov	esi, esp
		push	offset ??_C@_0DI@LLPMIKEF@error?3?5multiple?5mappings?5from?5sa@ ; "error: multiple mappings from same Unic"...
		mov	edi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	edi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax		; File
		call	dword ptr ds:__imp__fprintf
		add	esp, 8
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	esi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	esi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax
		mov	eax, [ebp+var_14]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		call	_ucm_printMapping
		add	esp, 0Ch
		mov	esi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	esi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx+eax*4]
		imul	edx, 0Ch
		add	edx, [ebp+var_8]
		push	edx
		mov	eax, [ebp+arg_4]
		push	eax
		call	_ucm_printMapping
		add	esp, 0Ch
		xor	al, al
		jmp	loc_1F42
; ---------------------------------------------------------------------------

loc_1EC2:				; CODE XREF: _generateFromUTable+31Bj
					; _generateFromUTable+33Dj
		mov	eax, [ebp+var_14]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	_getFromUBytesValue
		add	esp, 0Ch
		mov	[ebp+arg_14], eax

loc_1ED9:				; CODE XREF: _generateFromUTable+306j
		mov	eax, [ebp+var_5C]
		cmp	eax, [ebp+var_68]
		jnz	short loc_1EF2
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_B0]
		mov	edx, [ebp+arg_14]
		mov	[ecx+eax*4], edx
		jmp	short loc_1F3B
; ---------------------------------------------------------------------------

loc_1EF2:				; CODE XREF: _generateFromUTable+3E3j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+20h]
		push	ecx
		call	_utm_countItems
		add	esp, 4
		mov	edx, [ebp+var_38]
		mov	ecx, [ebp+var_B0]
		mov	[ecx+edx*4], eax
		mov	eax, [ebp+arg_14]
		push	eax
		mov	ecx, [ebp+arg_10]
		add	ecx, 1
		push	ecx
		mov	edx, [ebp+var_68]
		push	edx
		mov	eax, [ebp+var_5C]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	_generateFromUTable
		add	esp, 18h
		movsx	eax, al
		test	eax, eax
		jnz	short loc_1F3B
		xor	al, al
		jmp	short loc_1F42
; ---------------------------------------------------------------------------

loc_1F3B:				; CODE XREF: _generateFromUTable+3F4j
					; _generateFromUTable+439j
		jmp	loc_1D8D
; ---------------------------------------------------------------------------

loc_1F40:				; CODE XREF: _generateFromUTable+2A0j
		mov	al, 1

loc_1F42:				; CODE XREF: _generateFromUTable+3C1j
					; _generateFromUTable+43Dj
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 178h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_generateFromUTable endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1F58h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_addFromUTrieEntry proc	near		; CODE XREF: _generateFromUTrie+24Bp
					; _generateFromUTrie+26Dp

var_118		= dword	ptr -118h
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 118h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_118]
		mov	ecx, 46h ; 'F'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_8], 0
		jnz	short loc_1F81
		jmp	loc_22F3
; ---------------------------------------------------------------------------

loc_1F81:				; CODE XREF: _addFromUTrieEntry+22j
		mov	eax, [ebp+arg_4]
		sar	eax, 0Ah
		mov	[ebp+var_8], eax
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_8]
		cmp	ecx, [eax+0E0028h]
		jl	short loc_1FA7
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	ecx, [ebp+arg_0]
		mov	[ecx+0E0028h], eax

loc_1FA7:				; CODE XREF: _addFromUTrieEntry+3Ej
		mov	eax, [ebp+arg_4]
		sar	eax, 4
		and	eax, 3Fh
		mov	[ebp+var_38], eax
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+28h]
		test	edx, edx
		jnz	loc_206C
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0E002Ch]
		mov	[ebp+var_50], ecx
		mov	eax, [ebp+var_50]
		sub	eax, [ebp+var_38]
		mov	[ebp+var_44], eax

loc_1FDB:				; CODE XREF: _addFromUTrieEntry+A6j
		mov	eax, [ebp+var_44]
		cmp	eax, [ebp+var_50]
		jge	short loc_2000
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+8A6h]
		test	edx, edx
		jnz	short loc_2000
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		jmp	short loc_1FDB
; ---------------------------------------------------------------------------

loc_2000:				; CODE XREF: _addFromUTrieEntry+89j
					; _addFromUTrieEntry+9Bj
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	dx, word ptr [ebp+var_50]
		mov	[ecx+eax*2+28h], dx
		mov	eax, [ebp+var_50]
		add	eax, 40h ; '@'
		mov	ecx, [ebp+arg_0]
		mov	[ecx+0E002Ch], eax
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+0E002Ch], 0FBC0h
		jle	short loc_206C
		mov	esi, esp
		mov	eax, [ebp+arg_4]
		push	eax
		push	offset ??_C@_0CL@MPJKOCBA@error?3?5too?5many?5stage?52?5entries?5@ ; "error: too many stage 2 entries at U+%0"...
		mov	edi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	edi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax		; File
		call	dword ptr ds:__imp__fprintf
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	esi, esp
		push	7		; Code
		call	dword ptr ds:__imp__exit
; ---------------------------------------------------------------------------
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_206C:				; CODE XREF: _addFromUTrieEntry+68j
					; _addFromUTrieEntry+D3j
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+28h]
		add	edx, [ebp+var_38]
		mov	[ebp+var_14], edx
		mov	eax, [ebp+arg_4]
		and	eax, 0Fh
		mov	[ebp+var_38], eax
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+8A8h]
		test	edx, edx
		jnz	loc_2153
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0E0030h]
		mov	[ebp+var_50], ecx
		mov	eax, [ebp+var_50]
		sub	eax, [ebp+var_38]
		mov	[ebp+var_44], eax

loc_20B1:				; CODE XREF: _addFromUTrieEntry+17Cj
		mov	eax, [ebp+var_44]
		cmp	eax, [ebp+var_50]
		jge	short loc_20D6
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+20026h]
		test	edx, edx
		jnz	short loc_20D6
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		jmp	short loc_20B1
; ---------------------------------------------------------------------------

loc_20D6:				; CODE XREF: _addFromUTrieEntry+15Fj
					; _addFromUTrieEntry+171j
		mov	eax, [ebp+var_50]
		add	eax, 3
		and	eax, 0FFFFFFFCh
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_50]
		sar	eax, 2
		mov	ecx, [ebp+var_14]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2+8A8h], ax
		mov	eax, [ebp+var_50]
		add	eax, 10h
		mov	ecx, [ebp+arg_0]
		mov	[ecx+0E0030h], eax
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+0E0030h], 40000h
		jle	short loc_2153
		mov	esi, esp
		mov	eax, [ebp+arg_4]
		push	eax
		push	offset ??_C@_0CL@FAEAGBIO@error?3?5too?5many?5stage?53?5entries?5@ ; "error: too many stage 3 entries at U+%0"...
		mov	edi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	edi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax		; File
		call	dword ptr ds:__imp__fprintf
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	esi, esp
		push	7		; Code
		call	dword ptr ds:__imp__exit
; ---------------------------------------------------------------------------
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_2153:				; CODE XREF: _addFromUTrieEntry+13Ej
					; _addFromUTrieEntry+1BAj
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+8A8h]
		mov	eax, [ebp+var_38]
		lea	ecx, [eax+edx*4]
		mov	[ebp+var_20], ecx
		cmp	[ebp+arg_8], 80000001h
		jnz	loc_2247
		mov	eax, 1
		mov	ecx, [ebp+var_20]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2+20028h], ax
		cmp	[ebp+var_38], 0Fh
		jnz	loc_2242
		mov	eax, [ebp+var_20]
		sub	eax, [ebp+var_38]
		mov	[ebp+var_44], eax
		jmp	short loc_21A8
; ---------------------------------------------------------------------------

loc_219F:				; CODE XREF: _addFromUTrieEntry+26Bj
		mov	eax, [ebp+var_44]
		add	eax, 1
		mov	[ebp+var_44], eax

loc_21A8:				; CODE XREF: _addFromUTrieEntry+245j
		mov	eax, [ebp+var_44]
		cmp	eax, [ebp+var_20]
		jge	short loc_21C5
		mov	eax, [ebp+var_44]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+20028h]
		cmp	edx, 1
		jnz	short loc_21C5
		jmp	short loc_219F
; ---------------------------------------------------------------------------

loc_21C5:				; CODE XREF: _addFromUTrieEntry+256j
					; _addFromUTrieEntry+269j
		mov	eax, [ebp+var_44]
		cmp	eax, [ebp+var_20]
		jnz	short loc_2242
		mov	eax, [ebp+arg_0]
		movzx	ecx, word ptr [eax+0E0038h]
		test	ecx, ecx
		jz	short loc_222A
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ebp+arg_0]
		mov	dx, [edx+0E0038h]
		mov	[ecx+eax*2+8A8h], dx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0E0030h]
		sub	ecx, 10h
		mov	edx, [ebp+arg_0]
		mov	[edx+0E0030h], ecx
		push	20h ; ' '       ; Size
		push	0		; Val
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0E0030h]
		mov	edx, [ebp+arg_0]
		lea	eax, [edx+ecx*2+20028h]
		push	eax		; Dst
		call	_memset
		add	esp, 0Ch
		jmp	short loc_2242
; ---------------------------------------------------------------------------

loc_222A:				; CODE XREF: _addFromUTrieEntry+281j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		mov	edx, [ebp+arg_0]
		mov	cx, [edx+ecx*2+8A8h]
		mov	[eax+0E0038h], cx

loc_2242:				; CODE XREF: _addFromUTrieEntry+236j
					; _addFromUTrieEntry+273j ...
		jmp	loc_22F3
; ---------------------------------------------------------------------------

loc_2247:				; CODE XREF: _addFromUTrieEntry+219j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0E0034h]
		mov	[ebp+var_2C], ecx
		mov	edx, [ebp+var_2C]
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0E0034h]
		add	ecx, 1
		mov	eax, [ebp+arg_0]
		mov	[eax+0E0034h], ecx
		cmp	edx, 10000h
		jl	short loc_227F
		mov	[ebp+var_118], 1
		jmp	short loc_2289
; ---------------------------------------------------------------------------

loc_227F:				; CODE XREF: _addFromUTrieEntry+319j
		mov	[ebp+var_118], 0

loc_2289:				; CODE XREF: _addFromUTrieEntry+325j
		cmp	[ebp+var_118], 0
		jz	short loc_22D1
		mov	esi, esp
		mov	eax, [ebp+arg_4]
		push	eax
		push	offset ??_C@_0CM@KLFBLKEK@error?3?5too?5many?5stage?53b?5entries@ ; "error: too	many stage 3b entries at U+%"...
		mov	edi, esp
		call	dword ptr ds:__imp____iob_func
		cmp	edi, esp
		call	__RTC_CheckEsp
		add	eax, 40h ; '@'
		push	eax		; File
		call	dword ptr ds:__imp__fprintf
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	esi, esp
		push	7		; Code
		call	dword ptr ds:__imp__exit
; ---------------------------------------------------------------------------
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_22D1:				; CODE XREF: _addFromUTrieEntry+338j
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+arg_0]
		mov	dx, word ptr [ebp+var_2C]
		mov	[ecx+eax*2+20028h], dx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ebp+arg_8]
		mov	[ecx+eax*4+0A0028h], edx

loc_22F3:				; CODE XREF: _addFromUTrieEntry+24j
					; _addFromUTrieEntry:loc_2242j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 118h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_addFromUTrieEntry endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 2308h
		public ??_C@_0CM@KLFBLKEK@error?3?5too?5many?5stage?53b?5entries@
; char `string'[]
??_C@_0CM@KLFBLKEK@error?3?5too?5many?5stage?53b?5entries@ db 'error: too many stage 3b entries at U+%04x',0Ah,0
					; DATA XREF: _addFromUTrieEntry+340o
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 2334h
		public ??_C@_0CL@FAEAGBIO@error?3?5too?5many?5stage?53?5entries?5@
; char `string'[]
??_C@_0CL@FAEAGBIO@error?3?5too?5many?5stage?53?5entries?5@ db 'error: too many stage 3 entries at U+%04x',0Ah,0
					; DATA XREF: _addFromUTrieEntry+1C2o
		align 10h
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 2360h
		public ??_C@_0CL@MPJKOCBA@error?3?5too?5many?5stage?52?5entries?5@
; char `string'[]
??_C@_0CL@MPJKOCBA@error?3?5too?5many?5stage?52?5entries?5@ db 'error: too many stage 2 entries at U+%04x',0Ah,0
					; DATA XREF: _addFromUTrieEntry+DBo
_rdata		ends

; ===========================================================================

; Segment type:	Externs
; UNDEF
; void *__cdecl	memset(void *Dst, int Val, size_t Size)
		extrn _memset:near	; CODE XREF: _CnvExtOpen+67p
					; _addFromUTrieEntry+2C8p
; void __cdecl __noreturn _exit(int Code)
		extrn __imp__exit:near	; CODE XREF: _CnvExtOpen+4Fp
					; _getToUnicodeValue+BEp ...
; int _printf(const char *Format, ...)
		extrn __imp__printf:near ; CODE	XREF: _CnvExtOpen+3Bp
					; _CnvExtWrite+56Bp
					; DATA XREF: ...
		extrn _uprv_malloc_56:near ; CODE XREF:	_CnvExtOpen+23p
		extrn __RTC_CheckEsp:near ; CODE XREF: _CnvExtOpen+46p
					; _CnvExtOpen+57p ...
		extrn __RTC_Shutdown:near ; DATA XREF: .rtc$TMZ:__RTC_Shutdown_rtc$TMZo
		extrn __RTC_InitBase:near ; DATA XREF: .rtc$IMZ:__RTC_InitBase_rtc$IMZo
		extrn _uprv_free_56:near ; CODE	XREF: _CnvExtClose+79p
		extrn _utm_close:near	; CODE XREF: _CnvExtClose+31p
					; _CnvExtClose+40p ...
		extrn _VERBOSE:near	; DATA XREF: _CnvExtWrite+555r
		extrn _utm_getStart:near ; CODE	XREF: _CnvExtWrite+427p
					; _CnvExtWrite+44Cp ...
		extrn _utm_alloc:near	; CODE XREF: _CnvExtWrite+21Fp
					; _CnvExtWrite+233p ...
		extrn _utm_countItems:near ; CODE XREF:	_CnvExtWrite+199p
					; _CnvExtWrite+1C9p ...
		extrn _udata_writeBlock:near ; CODE XREF: _CnvExtWrite+141p
					; _CnvExtWrite+15Ep ...
; size_t __cdecl strlen(const char *Str)
		extrn _strlen:near	; CODE XREF: _CnvExtWrite+DCp
		extrn ___security_cookie:near ;	DATA XREF: _CnvExtWrite+1Er
; __fastcall __security_check_cookie(x)
		extrn @__security_check_cookie@4:near ;	CODE XREF: _CnvExtWrite+59Ap
; __fastcall _RTC_CheckStackVars(x, x)
		extrn @_RTC_CheckStackVars@8:near ; CODE XREF: _CnvExtWrite+58Bp
					; _getToUnicodeValue+1DAp
; void *__cdecl	memset_0(void *Dst, int	Val, size_t Size)
		extrn _memset_0:near	; CODE XREF: _CnvExtWrite+43p
; int _fprintf(FILE *File, const char *Format, ...)
		extrn __imp__fprintf:near ; CODE XREF: _CnvExtAddTable+44p
					; _generateToUTable+199p ...
; FILE *__cdecl	___iob_func()
		extrn __imp____iob_func:near ; CODE XREF: _CnvExtAddTable+33p
					; _generateToUTable+188p ...
		extrn _utm_open:near	; CODE XREF: _makeToUTable+3Ep
					; _makeToUTable+5Dp ...
		extrn _ucm_printMapping:near ; CODE XREF: _generateToUTable+43Ap
					; _generateToUTable+469p ...
		extrn _utm_allocN:near	; CODE XREF: _generateToUTable+1BEp
					; _getToUnicodeValue+F3p ...
		extrn _u_strFromUTF32_56:near ;	CODE XREF: _getToUnicodeValue+A4p
					; _getToUnicodeValue+11Fp
; void *__cdecl	memcpy(void *Dst, const	void *Src, size_t Size)
		extrn _memcpy:near	; CODE XREF: _getFromUBytesValue+11Ep
		extrn _uprv_checkValidMemory:near ; CODE XREF: _getFromUBytesValue+106p


		end
