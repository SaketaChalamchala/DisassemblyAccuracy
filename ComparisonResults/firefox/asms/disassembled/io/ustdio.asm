;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2015 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-3677-7074-51			    |
; |		Michalis Polychronakis,	Stony Brook University		    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	2F519E584D9DB278AA400A295942FA27
; Input	CRC32 :	BF9AF5AF

; File Name   :	D:\compspace\objfiles\firefox\io\ustdio.obj
; Format      :	COFF (X386MAGIC)
; includelib "msvcprtd"
; includelib "MSVCRTD"
; includelib "OLDNAMES"

		include	uni.inc	; see unicode subdir of	ida for	info on	unicode

		.686p
		.mmx
		.model flat
.intel_syntax noprefix

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
_DELIMITERS:				; DATA XREF: _u_fputs_56+49o
		dw 0Dh,	0Ah, 0
		align 4
_DELIMITERS_LEN	dd 2			; DATA XREF: _u_fputs_56+42r
_rdata		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 0Ch
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _u_fsettransliterator_56
_u_fsettransliterator_56 proc near

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	eax, [ebp+arg_C]
		cmp	dword ptr [eax], 0
		jle	short loc_41
		mov	eax, [ebp+arg_8]
		jmp	loc_144
; ---------------------------------------------------------------------------

loc_41:					; CODE XREF: _u_fsettransliterator_56+2Bj
		cmp	[ebp+arg_0], 0
		jnz	short loc_58
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 1
		mov	eax, [ebp+arg_8]
		jmp	loc_144
; ---------------------------------------------------------------------------

loc_58:					; CODE XREF: _u_fsettransliterator_56+39j
		mov	eax, [ebp+arg_4]
		and	eax, 1
		jz	short loc_71
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 10h
		mov	eax, [ebp+arg_8]
		jmp	loc_144
; ---------------------------------------------------------------------------

loc_71:					; CODE XREF: _u_fsettransliterator_56+52j
		cmp	[ebp+arg_8], 0
		jnz	short loc_C1
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax], 0
		jz	short loc_BC
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx+10h]
		mov	[ebp+var_8], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx]
		push	edx
		call	_uprv_free_56
		add	esp, 4
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	dword ptr [ecx], 0
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		push	ecx
		call	_uprv_free_56
		add	esp, 4
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax], 0

loc_BC:					; CODE XREF: _u_fsettransliterator_56+71j
		jmp	loc_141
; ---------------------------------------------------------------------------

loc_C1:					; CODE XREF: _u_fsettransliterator_56+69j
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax], 0
		jnz	short loc_11F
		push	14h
		call	_uprv_malloc_56
		add	esp, 4
		mov	ecx, [ebp+arg_0]
		mov	[ecx], eax
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax], 0
		jnz	short loc_EE
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 7
		mov	eax, [ebp+arg_8]
		jmp	short loc_144
; ---------------------------------------------------------------------------

loc_EE:					; CODE XREF: _u_fsettransliterator_56+D2j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	dword ptr [ecx+4], 0
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	dword ptr [ecx+0Ch], 0
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	dword ptr [ecx+8], 0
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	dword ptr [ecx], 0
		jmp	short loc_136
; ---------------------------------------------------------------------------

loc_11F:				; CODE XREF: _u_fsettransliterator_56+BBj
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx+10h]
		mov	[ebp+var_8], edx
		mov	eax, [ebp+arg_0]
		push	eax
		call	_ufile_flush_translit_56
		add	esp, 4

loc_136:				; CODE XREF: _u_fsettransliterator_56+111j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_8]
		mov	[ecx+10h], edx

loc_141:				; CODE XREF: _u_fsettransliterator_56:loc_BCj
		mov	eax, [ebp+var_8]

loc_144:				; CODE XREF: _u_fsettransliterator_56+30j
					; _u_fsettransliterator_56+47j	...
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0CCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_fsettransliterator_56 endp

_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$TMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$TMZ
		;org 158h
__RTC_Shutdown_rtc$TMZ dd offset __RTC_Shutdown
_rtc$TMZ	ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$IMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$IMZ
		;org 15Ch
__RTC_InitBase_rtc$IMZ dd offset __RTC_InitBase
_rtc$IMZ	ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 160h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _ufile_flush_translit_56
_ufile_flush_translit_56 proc near	; CODE XREF: _u_fsettransliterator_56+122p
					; _ufile_close_translit_56+32p

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_0], 0
		jz	short loc_18C
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax], 0
		jnz	short loc_18E

loc_18C:				; CODE XREF: _ufile_flush_translit_56+22j
		jmp	short loc_1A2
; ---------------------------------------------------------------------------

loc_18E:				; CODE XREF: _ufile_flush_translit_56+2Aj
		push	1
		push	0
		mov	eax, [ebp+arg_0]
		push	eax
		push	0
		push	0
		call	_u_file_write_flush_56
		add	esp, 14h

loc_1A2:				; CODE XREF: _ufile_flush_translit_56:loc_18Cj
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_ufile_flush_translit_56 endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1B8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _ufile_flush_io_56
_ufile_flush_io_56 proc	near

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_0], 0
		jz	short loc_1E5
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+4], 0
		jnz	short loc_1E7

loc_1E5:				; CODE XREF: _ufile_flush_io_56+22j
		jmp	short loc_1FB
; ---------------------------------------------------------------------------

loc_1E7:				; CODE XREF: _ufile_flush_io_56+2Bj
		push	0
		push	1
		mov	eax, [ebp+arg_0]
		push	eax
		push	0
		push	0
		call	_u_file_write_flush_56
		add	esp, 14h

loc_1FB:				; CODE XREF: _ufile_flush_io_56:loc_1E5j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_ufile_flush_io_56 endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 210h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _ufile_close_translit_56
_ufile_close_translit_56 proc near

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_0], 0
		jz	short loc_23C
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax], 0
		jnz	short loc_23E

loc_23C:				; CODE XREF: _ufile_close_translit_56+22j
		jmp	short loc_297
; ---------------------------------------------------------------------------

loc_23E:				; CODE XREF: _ufile_close_translit_56+2Aj
		mov	eax, [ebp+arg_0]
		push	eax
		call	_ufile_flush_translit_56
		add	esp, 4
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		cmp	dword ptr [ecx+10h], 0
		jz	short loc_266
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx+10h]
		push	edx
		call	_utrans_close_56
		add	esp, 4

loc_266:				; CODE XREF: _ufile_close_translit_56+43j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		cmp	dword ptr [ecx], 0
		jz	short loc_280
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx]
		push	edx
		call	_uprv_free_56
		add	esp, 4

loc_280:				; CODE XREF: _ufile_close_translit_56+5Ej
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		push	ecx
		call	_uprv_free_56
		add	esp, 4
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax], 0

loc_297:				; CODE XREF: _ufile_close_translit_56:loc_23Cj
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_ufile_close_translit_56 endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 2ACh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _u_fputs_56
_u_fputs_56	proc near

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	_u_strlen_56
		add	esp, 4
		push	eax
		mov	edx, [ebp+arg_0]
		push	edx
		call	_u_file_write_56
		add	esp, 0Ch
		mov	[ebp+var_8], eax
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, _DELIMITERS_LEN
		push	ecx
		push	offset _DELIMITERS ; "\r\n"
		call	_u_file_write_56
		add	esp, 0Ch
		add	eax, [ebp+var_8]
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_8]
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0CCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_fputs_56	endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 320h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _u_fputc_56
_u_fputc_56	proc near

var_E8		= dword	ptr -0E8h
var_1D		= byte ptr -1Dh
var_14		= dword	ptr -14h
var_8		= word ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0E8h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_E8]
		mov	ecx, 3Ah ; ':'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_14], 0
		mov	[ebp+var_1D], 0
		cmp	[ebp+arg_0], 0FFFFh
		ja	short loc_369
		mov	eax, [ebp+var_14]
		mov	cx, word ptr [ebp+arg_0]
		mov	[ebp+eax*2+var_8], cx
		mov	edx, [ebp+var_14]
		add	edx, 1
		mov	[ebp+var_14], edx
		jmp	short loc_3BD
; ---------------------------------------------------------------------------

loc_369:				; CODE XREF: _u_fputc_56+30j
		cmp	[ebp+arg_0], 10FFFFh
		ja	short loc_3B9
		mov	eax, [ebp+var_14]
		add	eax, 1
		cmp	eax, 2
		jnb	short loc_3B9
		mov	eax, [ebp+arg_0]
		sar	eax, 0Ah
		add	eax, 0D7C0h
		mov	ecx, [ebp+var_14]
		mov	[ebp+ecx*2+var_8], ax
		mov	edx, [ebp+var_14]
		add	edx, 1
		mov	[ebp+var_14], edx
		mov	eax, [ebp+arg_0]
		and	eax, 3FFh
		or	eax, 0DC00h
		mov	ecx, [ebp+var_14]
		mov	[ebp+ecx*2+var_8], ax
		mov	edx, [ebp+var_14]
		add	edx, 1
		mov	[ebp+var_14], edx
		jmp	short loc_3BD
; ---------------------------------------------------------------------------

loc_3B9:				; CODE XREF: _u_fputc_56+50j
					; _u_fputc_56+5Bj
		mov	[ebp+var_1D], 1

loc_3BD:				; CODE XREF: _u_fputc_56+47j
					; _u_fputc_56+97j
		movsx	eax, [ebp+var_1D]
		test	eax, eax
		jz	short loc_3CC
		mov	eax, 0FFFFh
		jmp	short loc_400
; ---------------------------------------------------------------------------

loc_3CC:				; CODE XREF: _u_fputc_56+A3j
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+var_14]
		push	ecx
		lea	edx, [ebp+var_8]
		push	edx
		call	_u_file_write_56
		add	esp, 0Ch
		cmp	eax, [ebp+var_14]
		jnz	short loc_3F0
		mov	eax, [ebp+arg_0]
		mov	[ebp+var_E8], eax
		jmp	short loc_3FA
; ---------------------------------------------------------------------------

loc_3F0:				; CODE XREF: _u_fputc_56+C3j
		mov	[ebp+var_E8], 0FFFFh

loc_3FA:				; CODE XREF: _u_fputc_56+CEj
		mov	eax, [ebp+var_E8]

loc_400:				; CODE XREF: _u_fputc_56+AAj
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN12
		call	@_RTC_CheckStackVars@8
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0E8h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_fputc_56	endp

; ---------------------------------------------------------------------------
		align 4
$LN12		dd 1			; DATA XREF: _u_fputc_56+E4o
		dd offset $LN11
$LN11		dd 0FFFFFFF8h, 4	; DATA XREF: .text:0000042Co
		dd offset $LN10
$LN10		dd 667562h		; DATA XREF: .text:00000438o
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 440h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _u_file_write_flush_56
_u_file_write_flush_56 proc near	; CODE XREF: _ufile_flush_translit_56+3Ap
					; _ufile_flush_io_56+3Bp ...

var_53C		= dword	ptr -53Ch
var_474		= dword	ptr -474h
var_468		= dword	ptr -468h
var_45C		= dword	ptr -45Ch
var_450		= dword	ptr -450h
var_444		= dword	ptr -444h
var_438		= byte ptr -438h
var_38		= byte ptr -38h
var_30		= dword	ptr -30h
var_24		= dword	ptr -24h
var_18		= dword	ptr -18h
var_C		= dword	ptr -0Ch
var_4		= dword	ptr -4
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= byte ptr  14h
arg_10		= byte ptr  18h

		push	ebp
		mov	ebp, esp
		sub	esp, 53Ch
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_53C]
		mov	ecx, 14Fh
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, dword ptr ds:___security_cookie
		xor	eax, ebp
		mov	[ebp+var_4], eax
		mov	[ebp+var_C], 0
		mov	eax, [ebp+arg_0]
		mov	[ebp+var_18], eax
		lea	eax, [ebp+var_438]
		mov	[ebp+var_444], eax
		mov	[ebp+var_450], 0
		mov	[ebp+var_45C], 0
		cmp	[ebp+arg_4], 0
		jge	short loc_4AA
		mov	eax, [ebp+arg_0]
		push	eax
		call	_u_strlen_56
		add	esp, 4
		mov	[ebp+arg_4], eax

loc_4AA:				; CODE XREF: _u_file_write_flush_56+59j
		mov	eax, [ebp+arg_8]
		cmp	dword ptr [eax], 0
		jz	short loc_4D9
		mov	eax, [ebp+arg_8]
		mov	ecx, [eax]
		cmp	dword ptr [ecx+10h], 0
		jz	short loc_4D9
		movzx	eax, [ebp+arg_10]
		push	eax
		lea	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		mov	eax, [ebp+arg_8]
		push	eax
		call	_u_file_translit
		add	esp, 10h
		mov	[ebp+var_18], eax

loc_4D9:				; CODE XREF: _u_file_write_flush_56+70j
					; _u_file_write_flush_56+7Bj
		mov	eax, [ebp+arg_8]
		cmp	dword ptr [eax+4], 0
		jnz	loc_57E
		mov	eax, [ebp+arg_8]
		mov	ecx, [ebp+arg_8]
		mov	edx, [eax+10h]
		sub	edx, [ecx+0Ch]
		sar	edx, 1
		mov	[ebp+var_468], edx
		movsx	eax, [ebp+arg_C]
		test	eax, eax
		jz	short loc_516
		mov	eax, [ebp+var_468]
		cmp	eax, [ebp+arg_4]
		jle	short loc_516
		mov	eax, [ebp+arg_4]
		add	eax, 1
		mov	[ebp+arg_4], eax

loc_516:				; CODE XREF: _u_file_write_flush_56+C0j
					; _u_file_write_flush_56+CBj
		mov	eax, [ebp+arg_4]
		cmp	eax, [ebp+var_468]
		jge	short loc_52C
		mov	ecx, [ebp+arg_4]
		mov	[ebp+var_53C], ecx
		jmp	short loc_538
; ---------------------------------------------------------------------------

loc_52C:				; CODE XREF: _u_file_write_flush_56+DFj
		mov	edx, [ebp+var_468]
		mov	[ebp+var_53C], edx

loc_538:				; CODE XREF: _u_file_write_flush_56+EAj
		mov	eax, [ebp+var_53C]
		mov	[ebp+var_450], eax
		mov	eax, [ebp+var_450]
		push	eax
		mov	ecx, [ebp+var_18]
		push	ecx
		mov	edx, [ebp+arg_8]
		mov	eax, [edx+0Ch]
		push	eax
		call	_u_strncpy_56
		add	esp, 0Ch
		mov	eax, [ebp+arg_8]
		mov	ecx, [eax+0Ch]
		mov	edx, [ebp+var_450]
		lea	eax, [ecx+edx*2]
		mov	ecx, [ebp+arg_8]
		mov	[ecx+0Ch], eax
		mov	eax, [ebp+var_450]
		jmp	loc_6AB
; ---------------------------------------------------------------------------

loc_57E:				; CODE XREF: _u_file_write_flush_56+A0j
		mov	eax, [ebp+arg_4]
		mov	ecx, [ebp+var_18]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_30], edx

loc_58A:				; CODE XREF: _u_file_write_flush_56+25Fj
		mov	eax, [ebp+var_18]
		mov	[ebp+var_24], eax
		mov	[ebp+var_C], 0
		mov	eax, [ebp+arg_8]
		cmp	dword ptr [eax+8], 0
		jz	short loc_5CF
		lea	eax, [ebp+var_C]
		push	eax
		movzx	ecx, [ebp+arg_C]
		push	ecx
		push	0
		mov	edx, [ebp+var_30]
		push	edx
		lea	eax, [ebp+var_18]
		push	eax
		lea	ecx, [ebp+var_38]
		push	ecx
		lea	edx, [ebp+var_444]
		push	edx
		mov	eax, [ebp+arg_8]
		mov	ecx, [eax+8]
		push	ecx
		call	_ucnv_fromUnicode_56
		add	esp, 20h
		jmp	short loc_635
; ---------------------------------------------------------------------------

loc_5CF:				; CODE XREF: _u_file_write_flush_56+15Ej
		mov	eax, [ebp+var_30]
		sub	eax, [ebp+var_18]
		sar	eax, 1
		mov	[ebp+var_474], eax
		cmp	[ebp+var_474], 400h
		jle	short loc_5FA
		mov	[ebp+var_474], 400h
		mov	[ebp+var_C], 0Fh

loc_5FA:				; CODE XREF: _u_file_write_flush_56+1A7j
		mov	eax, [ebp+var_474]
		push	eax
		mov	ecx, [ebp+var_444]
		push	ecx
		mov	edx, [ebp+var_18]
		push	edx
		call	_u_UCharsToChars_56
		add	esp, 0Ch
		mov	eax, [ebp+var_474]
		mov	ecx, [ebp+var_18]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_18], edx
		mov	eax, [ebp+var_444]
		add	eax, [ebp+var_474]
		mov	[ebp+var_444], eax

loc_635:				; CODE XREF: _u_file_write_flush_56+18Dj
		mov	eax, [ebp+var_444]
		lea	ecx, [ebp+var_438]
		sub	eax, ecx
		mov	[ebp+var_45C], eax
		cmp	[ebp+var_45C], 0
		jle	short loc_68F
		mov	esi, esp
		mov	eax, [ebp+arg_8]
		mov	ecx, [eax+4]
		push	ecx		; FILE *
		mov	edx, [ebp+var_45C]
		push	edx		; size_t
		push	1		; size_t
		lea	eax, [ebp+var_438]
		push	eax		; void *
		call	dword ptr ds:__imp__fwrite
		add	esp, 10h
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	eax, [ebp+var_18]
		sub	eax, [ebp+var_24]
		sar	eax, 1
		add	eax, [ebp+var_450]
		mov	[ebp+var_450], eax

loc_68F:				; CODE XREF: _u_file_write_flush_56+210j
		lea	eax, [ebp+var_438]
		mov	[ebp+var_444], eax
		cmp	[ebp+var_C], 0Fh
		jz	loc_58A
		mov	eax, [ebp+var_450]

loc_6AB:				; CODE XREF: _u_file_write_flush_56+139j
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN21
		call	@_RTC_CheckStackVars@8
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		mov	ecx, [ebp+var_4]
		xor	ecx, ebp
		call	@__security_check_cookie@4
		add	esp, 53Ch
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_file_write_flush_56 endp

; ---------------------------------------------------------------------------
		align 4
$LN21		dd 4			; DATA XREF: _u_file_write_flush_56+26Fo
		dd offset $LN20
$LN20		dd 0FFFFFFF4h, 4	; DATA XREF: .text:000006E0o
		dd offset $LN16		; "status"
		dd 0FFFFFFE8h, 4
		dd offset $LN17		; "mySource"
		dd 0FFFFFBC8h, 400h
		dd offset $LN18		; "charBuffer"
		dd 0FFFFFBBCh, 4
		dd offset $LN19		; "myTarget"
$LN19		db 'myTarget',0         ; DATA XREF: .text:00000710o
$LN18		db 'charBuffer',0       ; DATA XREF: .text:00000704o
$LN17		db 'mySource',0         ; DATA XREF: .text:000006F8o
$LN16		db 'status',0           ; DATA XREF: .text:000006ECo
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 738h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_u_file_translit proc near		; CODE XREF: _u_file_write_flush_56+8Ep

var_118		= byte ptr -118h
var_54		= dword	ptr -54h
var_48		= dword	ptr -48h
var_44		= dword	ptr -44h
var_40		= dword	ptr -40h
var_3C		= dword	ptr -3Ch
var_30		= dword	ptr -30h
var_24		= dword	ptr -24h
var_18		= dword	ptr -18h
var_C		= dword	ptr -0Ch
var_4		= dword	ptr -4
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= byte ptr  14h

		push	ebp
		mov	ebp, esp
		sub	esp, 118h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_118]
		mov	ecx, 46h ; 'F'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, dword ptr ds:___security_cookie
		xor	eax, ebp
		mov	[ebp+var_4], eax
		mov	[ebp+var_18], 0
		mov	[ebp+var_54], 0
		cmp	[ebp+arg_8], 0
		jnz	short loc_77A
		lea	eax, [ebp+var_18]
		mov	[ebp+arg_8], eax

loc_77A:				; CODE XREF: _u_file_translit+3Aj
		cmp	[ebp+arg_0], 0
		jz	short loc_793
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax], 0
		jz	short loc_793
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		cmp	dword ptr [ecx+10h], 0
		jnz	short loc_79B

loc_793:				; CODE XREF: _u_file_translit+46j
					; _u_file_translit+4Ej
		mov	eax, [ebp+arg_4]
		jmp	loc_9B6
; ---------------------------------------------------------------------------

loc_79B:				; CODE XREF: _u_file_translit+59j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx]
		mov	ecx, [ecx+0Ch]
		cmp	ecx, [eax+8]
		jle	short loc_7ED
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx]
		mov	ecx, [ecx+0Ch]
		sub	ecx, [eax+8]
		shl	ecx, 1
		mov	esi, esp
		push	ecx		; size_t
		mov	edx, [ebp+arg_0]
		mov	eax, [edx]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx]
		mov	ecx, [edx+8]
		mov	edx, [eax]
		lea	eax, [edx+ecx*2]
		push	eax		; void *
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx]
		mov	eax, [edx]
		push	eax		; void *
		call	dword ptr ds:__imp__memmove
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_7ED:				; CODE XREF: _u_file_translit+73j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx]
		mov	ecx, [ecx+0Ch]
		sub	ecx, [eax+8]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx]
		mov	[eax+0Ch], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	dword ptr [ecx+8], 0
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_8]
		mov	eax, [edx]
		add	eax, [ecx+0Ch]
		shl	eax, 2
		mov	[ebp+var_C], eax
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ebp+var_C]
		cmp	edx, [ecx+4]
		jle	short loc_88B
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		cmp	dword ptr [ecx], 0
		jnz	short loc_852
		mov	eax, [ebp+var_C]
		shl	eax, 1
		push	eax
		call	_uprv_malloc_56
		add	esp, 4
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx]
		mov	[edx], eax
		jmp	short loc_86F
; ---------------------------------------------------------------------------

loc_852:				; CODE XREF: _u_file_translit+101j
		mov	eax, [ebp+var_C]
		shl	eax, 1
		push	eax
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx]
		mov	eax, [edx]
		push	eax
		call	_uprv_realloc_56
		add	esp, 8
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx]
		mov	[edx], eax

loc_86F:				; CODE XREF: _u_file_translit+118j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		cmp	dword ptr [ecx], 0
		jnz	short loc_880
		xor	eax, eax
		jmp	loc_9B6
; ---------------------------------------------------------------------------

loc_880:				; CODE XREF: _u_file_translit+13Fj
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ebp+var_C]
		mov	[ecx+4], edx

loc_88B:				; CODE XREF: _u_file_translit+F7j
		mov	eax, [ebp+arg_8]
		mov	ecx, [eax]
		push	ecx
		mov	edx, [ebp+arg_4]
		push	edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx]
		mov	edx, [eax+0Ch]
		mov	eax, [ecx]
		lea	ecx, [eax+edx*2]
		push	ecx
		call	_u_strncpy_56
		add	esp, 0Ch
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx+0Ch]
		mov	eax, [ebp+arg_8]
		add	edx, [eax]
		mov	ecx, [ebp+arg_0]
		mov	eax, [ecx]
		mov	[eax+0Ch], edx
		movsx	eax, [ebp+arg_C]
		test	eax, eax
		jnz	short loc_949
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx+0Ch]
		mov	[ebp+var_24], edx
		mov	[ebp+var_48], 0
		mov	eax, [ebp+var_24]
		mov	[ebp+var_44], eax
		mov	[ebp+var_40], 0
		mov	eax, [ebp+var_24]
		mov	[ebp+var_3C], eax
		lea	eax, [ebp+var_54]
		push	eax
		lea	ecx, [ebp+var_48]
		push	ecx
		mov	edx, [ebp+arg_0]
		mov	eax, [edx]
		mov	ecx, [eax+4]
		push	ecx
		lea	edx, [ebp+var_24]
		push	edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx]
		push	edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx+10h]
		push	edx
		call	_utrans_transIncrementalUChars_56
		add	esp, 18h
		mov	eax, [ebp+arg_8]
		mov	ecx, [ebp+var_40]
		mov	[eax], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ebp+var_40]
		mov	[ecx+8], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ebp+var_3C]
		mov	[ecx+0Ch], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	eax, [ecx]
		jmp	short loc_9B6
; ---------------------------------------------------------------------------
		jmp	short loc_9B6
; ---------------------------------------------------------------------------

loc_949:				; CODE XREF: _u_file_translit+193j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx+0Ch]
		mov	[ebp+var_24], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx+0Ch]
		mov	[ebp+var_30], edx
		lea	eax, [ebp+var_54]
		push	eax
		lea	ecx, [ebp+var_30]
		push	ecx
		push	0
		mov	edx, [ebp+arg_0]
		mov	eax, [edx]
		mov	ecx, [eax+4]
		push	ecx
		lea	edx, [ebp+var_24]
		push	edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx]
		push	edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	edx, [ecx+10h]
		push	edx
		call	_utrans_transUChars_56
		add	esp, 1Ch
		mov	eax, [ebp+arg_8]
		mov	ecx, [ebp+var_30]
		mov	[eax], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	dword ptr [ecx+8], 0
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	dword ptr [ecx+0Ch], 0
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		mov	eax, [ecx]

loc_9B6:				; CODE XREF: _u_file_translit+5Ej
					; _u_file_translit+143j ...
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN19_0
		call	@_RTC_CheckStackVars@8
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		mov	ecx, [ebp+var_4]
		xor	ecx, ebp
		call	@__security_check_cookie@4
		add	esp, 118h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_file_translit endp

; ---------------------------------------------------------------------------
		align 4
$LN19_0		dd 5			; DATA XREF: _u_file_translit+282o
		dd offset $LN18_0
$LN18_0		dd 0FFFFFFE8h, 4	; DATA XREF: .text:000009ECo
		dd offset $LN13		; "junkCount"
		dd 0FFFFFFDCh, 4
		dd offset $LN14		; "textLength"
		dd 0FFFFFFD0h, 4
		dd offset $LN15		; "textLimit"
		dd 0FFFFFFB8h, 10h
		dd offset $LN16_0	; "pos"
		dd 0FFFFFFACh, 4
		dd offset $LN17_0	; "status"
$LN17_0		db 'status',0           ; DATA XREF: .text:00000A28o
$LN16_0		db 'pos',0              ; DATA XREF: .text:00000A1Co
$LN15		db 'textLimit',0        ; DATA XREF: .text:00000A10o
$LN14		db 'textLength',0       ; DATA XREF: .text:00000A04o
$LN13		db 'junkCount',0        ; DATA XREF: .text:000009F8o
		align 4
_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 0A58h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _u_file_write_56
_u_file_write_56 proc near		; CODE XREF: _u_fputs_56+33p
					; _u_fputs_56+4Ep ...

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		push	0
		push	0
		mov	eax, [ebp+arg_8]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	_u_file_write_flush_56
		add	esp, 14h
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_file_write_56 endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 0AA4h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _ufile_fill_uchar_buffer_56
_ufile_fill_uchar_buffer_56 proc near	; CODE XREF: _u_fgets_56+4Bp
					; _u_fgets_56+2A4p ...

var_554		= dword	ptr -554h
var_48C		= dword	ptr -48Ch
var_480		= dword	ptr -480h
var_474		= byte ptr -474h
var_6C		= dword	ptr -6Ch
var_60		= dword	ptr -60h
var_54		= dword	ptr -54h
var_48		= dword	ptr -48h
var_3C		= dword	ptr -3Ch
var_30		= dword	ptr -30h
var_24		= dword	ptr -24h
var_18		= dword	ptr -18h
var_C		= dword	ptr -0Ch
var_4		= dword	ptr -4
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 554h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_554]
		mov	ecx, 155h
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, dword ptr ds:___security_cookie
		xor	eax, ebp
		mov	[ebp+var_4], eax
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+4], 0
		jnz	short loc_ADA
		jmp	loc_D3C
; ---------------------------------------------------------------------------

loc_ADA:				; CODE XREF: _ufile_fill_uchar_buffer_56+2Fj
		mov	eax, [ebp+arg_0]
		add	eax, 0Ch
		mov	[ebp+var_480], eax
		mov	eax, [ebp+var_480]
		mov	ecx, [ebp+var_480]
		mov	edx, [eax+4]
		sub	edx, [ecx]
		sar	edx, 1
		mov	[ebp+var_6C], edx
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+838h], 0
		jnz	short loc_B13
		cmp	[ebp+var_6C], 0
		jle	short loc_B13
		jmp	loc_D3C
; ---------------------------------------------------------------------------

loc_B13:				; CODE XREF: _ufile_fill_uchar_buffer_56+62j
					; _ufile_fill_uchar_buffer_56+68j
		cmp	[ebp+var_6C], 0
		jz	short loc_B54
		push	1
		mov	eax, [ebp+var_480]
		mov	ecx, [eax]
		push	ecx
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	edx, [ebp+var_6C]
		shl	edx, 1
		mov	esi, esp
		push	edx		; size_t
		mov	eax, [ebp+var_480]
		mov	ecx, [eax]
		push	ecx		; void *
		mov	edx, [ebp+arg_0]
		add	edx, 34h ; '4'
		push	edx		; void *
		call	dword ptr ds:__imp__memmove
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_B54:				; CODE XREF: _ufile_fill_uchar_buffer_56+73j
		mov	eax, 400h
		sub	eax, [ebp+var_6C]
		mov	[ebp+var_60], eax
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+8], 0
		jz	short loc_B84
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+8]
		push	edx
		call	_ucnv_getMinCharSize_56
		add	esp, 4
		movsx	eax, al
		shl	eax, 1
		mov	[ebp+var_554], eax
		jmp	short loc_B8E
; ---------------------------------------------------------------------------

loc_B84:				; CODE XREF: _ufile_fill_uchar_buffer_56+C2j
		mov	[ebp+var_554], 1

loc_B8E:				; CODE XREF: _ufile_fill_uchar_buffer_56+DEj
		mov	eax, [ebp+var_60]
		cdq
		idiv	[ebp+var_554]
		mov	[ebp+var_48], eax
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+838h], 0
		jnz	loc_C2B
		cmp	[ebp+var_48], 400h
		jge	short loc_BBF
		mov	eax, [ebp+var_48]
		mov	[ebp+var_554], eax
		jmp	short loc_BC9
; ---------------------------------------------------------------------------

loc_BBF:				; CODE XREF: _ufile_fill_uchar_buffer_56+10Ej
		mov	[ebp+var_554], 400h

loc_BC9:				; CODE XREF: _ufile_fill_uchar_buffer_56+119j
		mov	esi, esp
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+4]
		push	edx		; FILE *
		mov	eax, [ebp+var_554]
		push	eax		; int
		lea	ecx, [ebp+var_474]
		push	ecx		; char *
		call	dword ptr ds:__imp__fgets
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	[ebp+var_48C], eax
		cmp	[ebp+var_48C], 0
		jz	short loc_C16
		lea	eax, [ebp+var_474]
		push	eax		; char *
		call	_strlen
		add	esp, 4
		mov	[ebp+var_554], eax
		jmp	short loc_C20
; ---------------------------------------------------------------------------

loc_C16:				; CODE XREF: _ufile_fill_uchar_buffer_56+159j
		mov	[ebp+var_554], 0

loc_C20:				; CODE XREF: _ufile_fill_uchar_buffer_56+170j
		mov	ecx, [ebp+var_554]
		mov	[ebp+var_54], ecx
		jmp	short loc_C75
; ---------------------------------------------------------------------------

loc_C2B:				; CODE XREF: _ufile_fill_uchar_buffer_56+101j
		cmp	[ebp+var_48], 400h
		jge	short loc_C3F
		mov	eax, [ebp+var_48]
		mov	[ebp+var_554], eax
		jmp	short loc_C49
; ---------------------------------------------------------------------------

loc_C3F:				; CODE XREF: _ufile_fill_uchar_buffer_56+18Ej
		mov	[ebp+var_554], 400h

loc_C49:				; CODE XREF: _ufile_fill_uchar_buffer_56+199j
		mov	esi, esp
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+4]
		push	edx		; FILE *
		mov	eax, [ebp+var_554]
		push	eax		; size_t
		push	1		; size_t
		lea	ecx, [ebp+var_474]
		push	ecx		; void *
		call	dword ptr ds:__imp__fread
		add	esp, 10h
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	[ebp+var_54], eax

loc_C75:				; CODE XREF: _ufile_fill_uchar_buffer_56+185j
		mov	[ebp+var_C], 0
		lea	eax, [ebp+var_474]
		mov	[ebp+var_18], eax
		mov	eax, [ebp+var_54]
		lea	ecx, [ebp+eax+var_474]
		mov	[ebp+var_24], ecx
		mov	eax, [ebp+var_6C]
		mov	ecx, [ebp+arg_0]
		lea	edx, [ecx+eax*2+34h]
		mov	[ebp+var_30], edx
		mov	[ebp+var_3C], 400h
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+8], 0
		jz	short loc_CFF
		lea	eax, [ebp+var_C]
		push	eax
		mov	esi, esp
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+4]
		push	edx		; FILE *
		call	dword ptr ds:__imp__feof
		add	esp, 4
		cmp	esi, esp
		call	__RTC_CheckEsp
		test	eax, eax
		setnz	al
		movzx	ecx, al
		push	ecx
		push	0
		mov	edx, [ebp+var_24]
		push	edx
		lea	eax, [ebp+var_18]
		push	eax
		mov	ecx, [ebp+var_3C]
		mov	edx, [ebp+arg_0]
		lea	eax, [edx+ecx*2+34h]
		push	eax
		lea	ecx, [ebp+var_30]
		push	ecx
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+8]
		push	eax
		call	_ucnv_toUnicode_56
		add	esp, 20h
		jmp	short loc_D1F
; ---------------------------------------------------------------------------

loc_CFF:				; CODE XREF: _ufile_fill_uchar_buffer_56+209j
		mov	eax, [ebp+var_54]
		push	eax
		mov	ecx, [ebp+var_30]
		push	ecx
		mov	edx, [ebp+var_18]
		push	edx
		call	_u_charsToUChars_56
		add	esp, 0Ch
		mov	eax, [ebp+var_54]
		mov	ecx, [ebp+var_30]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_30], edx

loc_D1F:				; CODE XREF: _ufile_fill_uchar_buffer_56+259j
		mov	eax, [ebp+var_480]
		mov	ecx, [ebp+var_480]
		mov	edx, [ecx+8]
		mov	[eax], edx
		mov	eax, [ebp+var_480]
		mov	ecx, [ebp+var_30]
		mov	[eax+4], ecx

loc_D3C:				; CODE XREF: _ufile_fill_uchar_buffer_56+31j
					; _ufile_fill_uchar_buffer_56+6Aj
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN23
		call	@_RTC_CheckStackVars@8
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		mov	ecx, [ebp+var_4]
		xor	ecx, ebp
		call	@__security_check_cookie@4
		add	esp, 554h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_ufile_fill_uchar_buffer_56 endp

; ---------------------------------------------------------------------------
		align 4
$LN23		dd 4			; DATA XREF: _ufile_fill_uchar_buffer_56+29Co
		dd offset $LN22
$LN22		dd 0FFFFFFF4h, 4	; DATA XREF: .text:00000D70o
		dd offset $LN18_1	; "status"
		dd 0FFFFFFE8h, 4
		dd offset $LN19_1	; "mySource"
		dd 0FFFFFFD0h, 4
		dd offset $LN20_0	; "myTarget"
		dd 0FFFFFB8Ch, 400h
		dd offset $LN21_0	; "charBuffer"
$LN21_0		db 'charBuffer',0       ; DATA XREF: .text:00000DA0o
$LN20_0		db 'myTarget',0         ; DATA XREF: .text:00000D94o
$LN19_1		db 'mySource',0         ; DATA XREF: .text:00000D88o
$LN18_1		db 'status',0           ; DATA XREF: .text:00000D7Co
_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 0DC8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _u_fgets_56
_u_fgets_56	proc near

var_118		= byte ptr -118h
var_115		= byte ptr -115h
var_50		= dword	ptr -50h
var_44		= word ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 118h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_118]
		mov	ecx, 46h ; 'F'
		mov	eax, 0CCCCCCCCh
		rep stosd
		xor	eax, eax
		mov	[ebp+var_44], ax
		cmp	[ebp+arg_4], 0
		jg	short loc_DF9
		xor	eax, eax
		jmp	loc_1094
; ---------------------------------------------------------------------------

loc_DF9:				; CODE XREF: _u_fgets_56+28j
		mov	eax, [ebp+arg_8]
		add	eax, 0Ch
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_50]
		mov	edx, [eax]
		cmp	edx, [ecx+4]
		jb	short loc_E1B
		mov	eax, [ebp+arg_8]
		push	eax
		call	_ufile_fill_uchar_buffer_56
		add	esp, 4

loc_E1B:				; CODE XREF: _u_fgets_56+45j
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		mov	[ebp+arg_4], eax
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_50]
		mov	edx, [eax+4]
		sub	edx, [ecx]
		sar	edx, 1
		mov	[ebp+var_8], edx
		jnz	short loc_E3D
		xor	eax, eax
		jmp	loc_1094
; ---------------------------------------------------------------------------

loc_E3D:				; CODE XREF: _u_fgets_56+6Cj
		mov	[ebp+var_14], 0
		mov	eax, [ebp+arg_0]
		mov	[ebp+var_38], eax
		xor	eax, eax
		mov	[ebp+var_44], ax

loc_E50:				; CODE XREF: _u_fgets_56+2BCj
		cmp	[ebp+var_8], 0
		jle	loc_1089
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+arg_4]
		jge	loc_1089
		mov	eax, [ebp+var_50]
		mov	ecx, [eax]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_4]
		sub	eax, [ebp+var_14]
		cmp	[ebp+var_8], eax
		jge	short loc_E84
		mov	eax, [ebp+var_50]
		mov	ecx, [eax+4]
		mov	[ebp+var_2C], ecx
		jmp	short loc_E93
; ---------------------------------------------------------------------------

loc_E84:				; CODE XREF: _u_fgets_56+AFj
		mov	eax, [ebp+arg_4]
		sub	eax, [ebp+var_14]
		mov	ecx, [ebp+var_20]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_2C], edx

loc_E93:				; CODE XREF: _u_fgets_56+BAj
		movzx	eax, [ebp+var_44]
		test	eax, eax
		jnz	loc_FE6

loc_E9F:				; CODE XREF: _u_fgets_56+164j
		mov	eax, [ebp+var_20]
		cmp	eax, [ebp+var_2C]
		jnb	loc_F31
		mov	eax, [ebp+var_20]
		movzx	ecx, word ptr [eax]
		cmp	ecx, 0Ah
		jl	short loc_EC1
		mov	edx, [ebp+var_20]
		movzx	eax, word ptr [edx]
		cmp	eax, 0Dh
		jle	short loc_EF3

loc_EC1:				; CODE XREF: _u_fgets_56+ECj
		mov	ecx, [ebp+var_20]
		movzx	edx, word ptr [ecx]
		cmp	edx, 85h ; '…'
		jz	short loc_EF3
		mov	eax, [ebp+var_20]
		movzx	ecx, word ptr [eax]
		cmp	ecx, 2028h
		jz	short loc_EF3
		mov	edx, [ebp+var_20]
		movzx	eax, word ptr [edx]
		cmp	eax, 2029h
		jz	short loc_EF3
		mov	[ebp+var_115], 0
		jmp	short loc_EFA
; ---------------------------------------------------------------------------

loc_EF3:				; CODE XREF: _u_fgets_56+F7j
					; _u_fgets_56+105j ...
		mov	[ebp+var_115], 1

loc_EFA:				; CODE XREF: _u_fgets_56+129j
		movsx	ecx, [ebp+var_115]
		test	ecx, ecx
		jnz	short loc_F31
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_20]
		mov	dx, [ecx]
		mov	[eax], dx
		mov	eax, [ebp+var_38]
		add	eax, 2
		mov	[ebp+var_38], eax
		mov	ecx, [ebp+var_20]
		add	ecx, 2
		mov	[ebp+var_20], ecx
		jmp	loc_E9F
; ---------------------------------------------------------------------------

loc_F31:				; CODE XREF: _u_fgets_56+DDj
					; _u_fgets_56+13Bj
		mov	eax, [ebp+var_20]
		cmp	eax, [ebp+var_2C]
		jnb	loc_FE6
		mov	eax, [ebp+var_20]
		movzx	ecx, word ptr [eax]
		cmp	ecx, 0Ah
		jl	short loc_F53
		mov	edx, [ebp+var_20]
		movzx	eax, word ptr [edx]
		cmp	eax, 0Dh
		jle	short loc_F85

loc_F53:				; CODE XREF: _u_fgets_56+17Ej
		mov	ecx, [ebp+var_20]
		movzx	edx, word ptr [ecx]
		cmp	edx, 85h ; '…'
		jz	short loc_F85
		mov	eax, [ebp+var_20]
		movzx	ecx, word ptr [eax]
		cmp	ecx, 2028h
		jz	short loc_F85
		mov	edx, [ebp+var_20]
		movzx	eax, word ptr [edx]
		cmp	eax, 2029h
		jz	short loc_F85
		mov	[ebp+var_115], 0
		jmp	short loc_F8C
; ---------------------------------------------------------------------------

loc_F85:				; CODE XREF: _u_fgets_56+189j
					; _u_fgets_56+197j ...
		mov	[ebp+var_115], 1

loc_F8C:				; CODE XREF: _u_fgets_56+1BBj
		movsx	ecx, [ebp+var_115]
		test	ecx, ecx
		jz	short loc_FE6
		mov	eax, [ebp+var_20]
		movzx	ecx, word ptr [eax]
		cmp	ecx, 0Dh
		setz	dl
		movsx	eax, dl
		test	eax, eax
		jz	short loc_FB6
		mov	eax, [ebp+var_20]
		mov	cx, [eax]
		mov	[ebp+var_44], cx
		jmp	short loc_FBF
; ---------------------------------------------------------------------------

loc_FB6:				; CODE XREF: _u_fgets_56+1E0j
		mov	eax, 1
		mov	[ebp+var_44], ax

loc_FBF:				; CODE XREF: _u_fgets_56+1ECj
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_20]
		mov	dx, [ecx]
		mov	[eax], dx
		mov	eax, [ebp+var_38]
		add	eax, 2
		mov	[ebp+var_38], eax
		mov	ecx, [ebp+var_20]
		add	ecx, 2
		mov	[ebp+var_20], ecx

loc_FE6:				; CODE XREF: _u_fgets_56+D1j
					; _u_fgets_56+16Fj ...
		mov	eax, [ebp+var_20]
		cmp	eax, [ebp+var_2C]
		jnb	short loc_1055
		movzx	eax, [ebp+var_44]
		test	eax, eax
		jz	short loc_104C
		movzx	eax, [ebp+var_44]
		cmp	eax, 0Dh
		jnz	short loc_1013
		mov	ecx, [ebp+var_20]
		movzx	edx, word ptr [ecx]
		cmp	edx, 0Ah
		jnz	short loc_1013
		mov	[ebp+var_115], 1
		jmp	short loc_101A
; ---------------------------------------------------------------------------

loc_1013:				; CODE XREF: _u_fgets_56+235j
					; _u_fgets_56+240j
		mov	[ebp+var_115], 0

loc_101A:				; CODE XREF: _u_fgets_56+249j
		movsx	eax, [ebp+var_115]
		test	eax, eax
		jz	short loc_104C
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_20]
		mov	dx, [ecx]
		mov	[eax], dx
		mov	eax, [ebp+var_38]
		add	eax, 2
		mov	[ebp+var_38], eax
		mov	ecx, [ebp+var_20]
		add	ecx, 2
		mov	[ebp+var_20], ecx

loc_104C:				; CODE XREF: _u_fgets_56+22Cj
					; _u_fgets_56+25Bj
		mov	eax, 1
		mov	[ebp+var_44], ax

loc_1055:				; CODE XREF: _u_fgets_56+224j
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_20]
		mov	[eax], ecx
		movzx	eax, [ebp+var_44]
		cmp	eax, 1
		jnz	short loc_1068
		jmp	short loc_1089
; ---------------------------------------------------------------------------

loc_1068:				; CODE XREF: _u_fgets_56+29Cj
		mov	eax, [ebp+arg_8]
		push	eax
		call	_ufile_fill_uchar_buffer_56
		add	esp, 4
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_50]
		mov	edx, [eax+4]
		sub	edx, [ecx]
		sar	edx, 1
		mov	[ebp+var_8], edx
		jmp	loc_E50
; ---------------------------------------------------------------------------

loc_1089:				; CODE XREF: _u_fgets_56+8Cj
					; _u_fgets_56+98j ...
		xor	eax, eax
		mov	ecx, [ebp+var_38]
		mov	[ecx], ax
		mov	eax, [ebp+arg_0]

loc_1094:				; CODE XREF: _u_fgets_56+2Cj
					; _u_fgets_56+70j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 118h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_fgets_56	endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 10A8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _ufile_getch_56
_ufile_getch_56	proc near		; CODE XREF: _u_fgetc_56+26p

var_CC		= byte ptr -0CCh
var_5		= byte ptr -5
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_5], 0
		mov	eax, 0FFFFh
		mov	ecx, [ebp+arg_4]
		mov	[ecx], ax
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+0Ch]
		cmp	edx, [ecx+10h]
		jnb	short loc_1107
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		mov	edx, [ebp+arg_4]
		mov	ax, [ecx]
		mov	[edx], ax
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+0Ch]
		add	edx, 2
		mov	eax, [ebp+arg_0]
		mov	[eax+0Ch], edx
		mov	[ebp+var_5], 1
		jmp	short loc_1151
; ---------------------------------------------------------------------------

loc_1107:				; CODE XREF: _ufile_getch_56+39j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+0Ch]
		cmp	edx, [ecx+10h]
		jb	short loc_1121
		mov	eax, [ebp+arg_0]
		push	eax
		call	_ufile_fill_uchar_buffer_56
		add	esp, 4

loc_1121:				; CODE XREF: _ufile_getch_56+6Bj
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+0Ch]
		cmp	edx, [ecx+10h]
		jnb	short loc_1151
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		mov	edx, [ebp+arg_4]
		mov	ax, [ecx]
		mov	[edx], ax
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+0Ch]
		add	edx, 2
		mov	eax, [ebp+arg_0]
		mov	[eax+0Ch], edx
		mov	[ebp+var_5], 1

loc_1151:				; CODE XREF: _ufile_getch_56+5Dj
					; _ufile_getch_56+85j
		mov	al, [ebp+var_5]
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0CCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_ufile_getch_56	endp

_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1168h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _u_fgetc_56
_u_fgetc_56	proc near

var_CC		= byte ptr -0CCh
var_8		= word ptr -8
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		lea	eax, [ebp+var_8]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	_ufile_getch_56
		add	esp, 8
		mov	ax, [ebp+var_8]
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN5
		call	@_RTC_CheckStackVars@8
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0CCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_fgetc_56	endp

; ---------------------------------------------------------------------------
		align 10h
$LN5		dd 1			; DATA XREF: _u_fgetc_56+36o
		dd offset $LN4
$LN4		dd 0FFFFFFF8h, 2	; DATA XREF: .text:000011C4o
		dd offset $LN3
$LN3		db 63h,	68h, 0		; DATA XREF: .text:000011D0o
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 11D8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _ufile_getch32_56
_ufile_getch32_56 proc near		; CODE XREF: _u_fgetcx_56+26p

var_E4		= byte ptr -0E4h
var_20		= word ptr -20h
var_14		= dword	ptr -14h
var_5		= byte ptr -5
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0E4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_E4]
		mov	ecx, 39h ; '9'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_5], 0
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0FFFFh
		mov	eax, [ebp+arg_0]
		add	eax, 0Ch
		mov	[ebp+var_14], eax
		cmp	[ebp+arg_0], 0
		jz	short loc_122E
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		add	ecx, 2
		mov	edx, [ebp+var_14]
		cmp	ecx, [edx+4]
		jb	short loc_122E
		mov	eax, [ebp+arg_0]
		push	eax
		call	_ufile_fill_uchar_buffer_56
		add	esp, 4

loc_122E:				; CODE XREF: _ufile_getch32_56+38j
					; _ufile_getch32_56+48j
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+var_14]
		mov	edx, [eax]
		cmp	edx, [ecx+4]
		jnb	loc_12BF
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		movzx	edx, word ptr [ecx]
		mov	eax, [ebp+arg_4]
		mov	[eax], edx
		mov	ecx, [ebp+var_14]
		mov	edx, [ecx]
		add	edx, 2
		mov	eax, [ebp+var_14]
		mov	[eax], edx
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax]
		and	ecx, 0FFFFFC00h
		cmp	ecx, 0D800h
		jnz	short loc_12BB
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+var_14]
		mov	edx, [eax]
		cmp	edx, [ecx+4]
		jnb	short loc_12B0
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		mov	dx, [ecx]
		mov	[ebp+var_20], dx
		mov	eax, [ebp+var_14]
		mov	ecx, [eax]
		add	ecx, 2
		mov	edx, [ebp+var_14]
		mov	[edx], ecx
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax]
		shl	ecx, 0Ah
		movzx	edx, [ebp+var_20]
		lea	eax, [ecx+edx-35FDC00h]
		mov	ecx, [ebp+arg_4]
		mov	[ecx], eax
		mov	[ebp+var_5], 1
		jmp	short loc_12B9
; ---------------------------------------------------------------------------

loc_12B0:				; CODE XREF: _ufile_getch32_56+9Fj
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0FFFFh

loc_12B9:				; CODE XREF: _ufile_getch32_56+D6j
		jmp	short loc_12BF
; ---------------------------------------------------------------------------

loc_12BB:				; CODE XREF: _ufile_getch32_56+92j
		mov	[ebp+var_5], 1

loc_12BF:				; CODE XREF: _ufile_getch32_56+61j
					; _ufile_getch32_56:loc_12B9j
		mov	al, [ebp+var_5]
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0E4h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_ufile_getch32_56 endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 12D8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _u_fgetcx_56
_u_fgetcx_56	proc near

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		lea	eax, [ebp+var_8]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	_ufile_getch32_56
		add	esp, 8
		mov	eax, [ebp+var_8]
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN5_0
		call	@_RTC_CheckStackVars@8
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0CCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_fgetcx_56	endp

; ---------------------------------------------------------------------------
		align 10h
$LN5_0		dd 1			; DATA XREF: _u_fgetcx_56+35o
		dd offset $LN4_0
$LN4_0		dd 0FFFFFFF8h, 4	; DATA XREF: .text:00001334o
		dd offset $LN3_0
$LN3_0		db 63h,	68h, 0		; DATA XREF: .text:00001340o
		align 4
_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1348h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _u_fungetc_56
_u_fungetc_56	proc near

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_4]
		add	eax, 0Ch
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+var_8]
		mov	edx, [eax]
		cmp	edx, [ecx+8]
		jz	short loc_139B
		mov	eax, [ebp+arg_0]
		and	eax, 0FFFFFC00h
		cmp	eax, 0D800h
		jnz	short loc_13A7
		mov	eax, [ebp+var_8]
		mov	ecx, [eax]
		sub	ecx, 2
		mov	edx, [ebp+var_8]
		cmp	ecx, [edx+8]
		jnz	short loc_13A7

loc_139B:				; CODE XREF: _u_fungetc_56+32j
		mov	[ebp+arg_0], 0FFFFh
		jmp	loc_1430
; ---------------------------------------------------------------------------

loc_13A7:				; CODE XREF: _u_fungetc_56+41j
					; _u_fungetc_56+51j
		mov	eax, [ebp+arg_0]
		and	eax, 0FFFFFC00h
		cmp	eax, 0D800h
		jnz	short loc_140F
		mov	eax, [ebp+var_8]
		mov	ecx, [eax]
		sub	ecx, 2
		mov	edx, [ebp+var_8]
		mov	[edx], ecx
		mov	eax, [ebp+var_8]
		mov	ecx, [eax]
		movzx	edx, word ptr [ecx]
		mov	eax, [ebp+arg_0]
		and	eax, 3FFh
		or	eax, 0DC00h
		movzx	ecx, ax
		cmp	edx, ecx
		jnz	short loc_1406
		mov	eax, [ebp+var_8]
		mov	ecx, [eax]
		sub	ecx, 2
		mov	edx, [ebp+var_8]
		mov	[edx], ecx
		mov	eax, [ebp+var_8]
		mov	ecx, [eax]
		movzx	edx, word ptr [ecx]
		mov	eax, [ebp+arg_0]
		sar	eax, 0Ah
		add	eax, 0D7C0h
		movzx	ecx, ax
		cmp	edx, ecx
		jz	short loc_140D

loc_1406:				; CODE XREF: _u_fungetc_56+95j
		mov	[ebp+arg_0], 0FFFFh

loc_140D:				; CODE XREF: _u_fungetc_56+BCj
		jmp	short loc_1430
; ---------------------------------------------------------------------------

loc_140F:				; CODE XREF: _u_fungetc_56+6Cj
		mov	eax, [ebp+var_8]
		mov	ecx, [eax]
		sub	ecx, 2
		mov	edx, [ebp+var_8]
		mov	[edx], ecx
		mov	eax, [ebp+var_8]
		mov	ecx, [eax]
		movzx	edx, word ptr [ecx]
		cmp	edx, [ebp+arg_0]
		jz	short loc_1430
		mov	[ebp+arg_0], 0FFFFh

loc_1430:				; CODE XREF: _u_fungetc_56+5Aj
					; _u_fungetc_56:loc_140Dj ...
		mov	eax, [ebp+arg_0]
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_u_fungetc_56	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 143Ch
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _u_file_read_56
_u_file_read_56	proc near

var_E4		= byte ptr -0E4h
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 0E4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_E4]
		mov	ecx, 39h ; '9'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_14], 0
		mov	eax, [ebp+arg_8]
		add	eax, 0Ch
		mov	[ebp+var_20], eax

loc_146A:				; CODE XREF: _u_file_read_56+B7j
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_20]
		mov	edx, [eax+4]
		sub	edx, [ecx]
		sar	edx, 1
		mov	[ebp+var_8], edx
		cmp	[ebp+var_8], 0
		jg	short loc_149C
		mov	eax, [ebp+arg_8]
		push	eax
		call	_ufile_fill_uchar_buffer_56
		add	esp, 4
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_20]
		mov	edx, [eax+4]
		sub	edx, [ecx]
		sar	edx, 1
		mov	[ebp+var_8], edx

loc_149C:				; CODE XREF: _u_file_read_56+42j
		mov	eax, [ebp+arg_4]
		sub	eax, [ebp+var_14]
		cmp	[ebp+var_8], eax
		jle	short loc_14B0
		mov	eax, [ebp+arg_4]
		sub	eax, [ebp+var_14]
		mov	[ebp+var_8], eax

loc_14B0:				; CODE XREF: _u_file_read_56+69j
		mov	eax, [ebp+var_8]
		shl	eax, 1
		push	eax		; size_t
		mov	ecx, [ebp+var_20]
		mov	edx, [ecx]
		push	edx		; void *
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+arg_0]
		lea	edx, [ecx+eax*2]
		push	edx		; void *
		call	_memcpy
		add	esp, 0Ch
		mov	eax, [ebp+var_14]
		add	eax, [ebp+var_8]
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_20]
		mov	ecx, [eax]
		mov	edx, [ebp+var_8]
		lea	eax, [ecx+edx*2]
		mov	ecx, [ebp+var_20]
		mov	[ecx], eax
		cmp	[ebp+var_8], 0
		jz	short loc_14F9
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+arg_4]
		jl	loc_146A

loc_14F9:				; CODE XREF: _u_file_read_56+AFj
		mov	eax, [ebp+var_14]
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0E4h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_file_read_56	endp

_text		ends

; ===========================================================================

; Segment type:	Externs
; UNDEF
		extrn _uprv_malloc_56:near ; CODE XREF:	_u_fsettransliterator_56+BFp
					; _u_file_translit+109p
		extrn _uprv_free_56:near ; CODE	XREF: _u_fsettransliterator_56+86p
					; _u_fsettransliterator_56+9Fp	...
		extrn __RTC_CheckEsp:near ; CODE XREF: _u_fsettransliterator_56+143p
					; _ufile_flush_translit_56+4Dp	...
		extrn __RTC_Shutdown:near ; DATA XREF: .rtc$TMZ:__RTC_Shutdown_rtc$TMZo
		extrn __RTC_InitBase:near ; DATA XREF: .rtc$IMZ:__RTC_InitBase_rtc$IMZo
		extrn _utrans_close_56:near ; CODE XREF: _ufile_close_translit_56+4Ep
		extrn _u_strlen_56:near	; CODE XREF: _u_fputs_56+26p
					; _u_file_write_flush_56+5Fp
		extrn @_RTC_CheckStackVars@8:near ; CODE XREF: _u_fputc_56+EAp
					; _u_file_write_flush_56+275p ...
; size_t __cdecl _fwrite(const void *, size_t, size_t, FILE *)
		extrn __imp__fwrite:near ; CODE	XREF: _u_file_write_flush_56+22Bp
					; DATA XREF: _u_file_write_flush_56+22Br
		extrn _u_UCharsToChars_56:near ; CODE XREF: _u_file_write_flush_56+1CCp
		extrn _ucnv_fromUnicode_56:near	; CODE XREF: _u_file_write_flush_56+185p
		extrn _u_strncpy_56:near ; CODE	XREF: _u_file_write_flush_56+116p
					; _u_file_translit+170p
		extrn ___security_cookie:near ;	DATA XREF: _u_file_write_flush_56+1Er
					; _u_file_translit+1Er	...
		extrn @__security_check_cookie@4:near
					; CODE XREF: _u_file_write_flush_56+284p
					; _u_file_translit+297p ...
		extrn _utrans_transUChars_56:near ; CODE XREF: _u_file_translit+24Fp
		extrn _utrans_transIncrementalUChars_56:near
					; CODE XREF: _u_file_translit+1E0p
		extrn _uprv_realloc_56:near ; CODE XREF: _u_file_translit+128p
; void *__cdecl	_memmove(void *, const void *, size_t)
		extrn __imp__memmove:near ; CODE XREF: _u_file_translit+A5p
					; _ufile_fill_uchar_buffer_56+A0p
					; DATA XREF: ...
		extrn _u_charsToUChars_56:near ; CODE XREF: _ufile_fill_uchar_buffer_56+267p
		extrn _ucnv_toUnicode_56:near ;	CODE XREF: _ufile_fill_uchar_buffer_56+251p
; int __cdecl _feof(FILE *)
		extrn __imp__feof:near	; CODE XREF: _ufile_fill_uchar_buffer_56+218p
					; DATA XREF: _ufile_fill_uchar_buffer_56+218r
; size_t __cdecl _fread(void *,	size_t,	size_t,	FILE *)
		extrn __imp__fread:near	; CODE XREF: _ufile_fill_uchar_buffer_56+1BEp
					; DATA XREF: _ufile_fill_uchar_buffer_56+1BEr
; size_t __cdecl strlen(const char *)
		extrn _strlen:near	; CODE XREF: _ufile_fill_uchar_buffer_56+162p
; char *__cdecl	_fgets(char *, int, FILE *)
		extrn __imp__fgets:near	; CODE XREF: _ufile_fill_uchar_buffer_56+13Cp
					; DATA XREF: _ufile_fill_uchar_buffer_56+13Cr
		extrn _ucnv_getMinCharSize_56:near
					; CODE XREF: _ufile_fill_uchar_buffer_56+CBp
		extrn _uprv_checkValidMemory:near
					; CODE XREF: _ufile_fill_uchar_buffer_56+80p
; void *__cdecl	memcpy(void *, const void *, size_t)
		extrn _memcpy:near	; CODE XREF: _u_file_read_56+8Ap


		end
