;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2015 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-3677-7074-51			    |
; |		Michalis Polychronakis,	Stony Brook University		    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	FF129C536CCB87AADD0D051D5F635ADD
; Input	CRC32 :	5274CDF0

; File Name   :	D:\compspace\objfiles\firefox\common\ucnv_u16.obj
; Format      :	COFF (X386MAGIC)
; includelib "msvcprtd"
; includelib "MSVCRTD"
; includelib "OLDNAMES"

		.686p
		.mmx
		.model flat

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
; Segment alignment 'qword' can not be represented in assembly
_rdata		segment	para public 'DATA' use32
		assume cs:_rdata
; `_UTF16BEFromUnicodeWithOffsets'::`4'::bom
?bom@?3??_UTF16BEFromUnicodeWithOffsets@@9@9 dd	0FFFEh,	0
					; DATA XREF: __UTF16BEFromUnicodeWithOffsets+6Bo
__UTF16BEImpl	dd 5, 2	dup(0)		; DATA XREF: .rdata:000000CCo
		dd offset __UTF16BEOpen
		dd 0
		dd offset __UTF16BEReset
		dd offset __UTF16BEToUnicodeWithOffsets
		dd offset __UTF16BEToUnicodeWithOffsets
		dd offset __UTF16BEFromUnicodeWithOffsets
		dd offset __UTF16BEFromUnicodeWithOffsets
		dd offset __UTF16BEGetNextUChar
		align 8
		dd offset __UTF16BEGetName
		dd 2 dup(0)
		dd offset _ucnv_getNonSurrogateUnicodeSet_56
		align 10h
__UTF16BEStaticData dd offset dword_64	; DATA XREF: .rdata:000000C4o
aUtf16be	db 'UTF-16BE',0
		align 10h
		dd 0
dword_64	dd 0Bh dup(0)		; DATA XREF: .rdata:__UTF16BEStaticDatao
					; .rdata:__UTF16LEStaticDatao ...
		dd offset byte_4B0
		dd 2020500h, 0FDFFh, 2,	5 dup(0)
; `_UTF16LEFromUnicodeWithOffsets'::`4'::bom
?bom@?3??_UTF16LEFromUnicodeWithOffsets@@9@9 dd	0FEFFh
					; DATA XREF: __UTF16LEFromUnicodeWithOffsets+6Bo
		public __UTF16BEData_56
__UTF16BEData_56 dd offset dword_E4	; DATA XREF: __UTF16ToUnicodeWithOffsets+118o
		dd 0FFFFFFFFh, 0
		dd offset __UTF16BEStaticData
		dd 0
		dd offset __UTF16BEImpl
		dd 5 dup(0)
dword_E4	dd 2Fh dup(0)		; DATA XREF: .rdata:__UTF16BEData_56o
					; .rdata:__UTF16LEData_56o ...
__UTF16LEImpl	dd 6, 2	dup(0)		; DATA XREF: .rdata:00000264o
		dd offset __UTF16LEOpen
		dd 0
		dd offset __UTF16LEReset
		dd offset __UTF16LEToUnicodeWithOffsets
		dd offset __UTF16LEToUnicodeWithOffsets
		dd offset __UTF16LEFromUnicodeWithOffsets
		dd offset __UTF16LEFromUnicodeWithOffsets
		dd offset __UTF16LEGetNextUChar
		align 10h
		dd offset __UTF16LEGetName
		dd 2 dup(0)
		dd offset _ucnv_getNonSurrogateUnicodeSet_56
		dd 2 dup(0)
__UTF16LEStaticData dd offset dword_64	; DATA XREF: .rdata:0000025Co
aUtf16le	db 'UTF-16LE',0
		align 4
		dd 0Ch dup(0)
		dd offset word_4B2
		dd 2020600h, 0FFFDh, 2,	6 dup(0)
		public __UTF16LEData_56
__UTF16LEData_56 dd offset dword_E4	; DATA XREF: __UTF16ToUnicodeWithOffsets+E0o
					; __UTF16ToUnicodeWithOffsets+1A8o
		dd 0FFFFFFFFh, 0
		dd offset __UTF16LEStaticData
		dd 0
		dd offset __UTF16LEImpl
		dd 34h dup(0)
__UTF16Impl	dd 1Dh,	2 dup(0)	; DATA XREF: .rdata:000003FCo
		dd offset __UTF16Open
		dd 0
		dd offset __UTF16Reset
		dd offset __UTF16ToUnicodeWithOffsets
		dd offset __UTF16ToUnicodeWithOffsets
		dd offset __UTF16LEFromUnicodeWithOffsets
		dd offset __UTF16LEFromUnicodeWithOffsets
		dd offset __UTF16GetNextUChar
		align 8
		dd offset __UTF16GetName
		dd 2 dup(0)
		dd offset _ucnv_getNonSurrogateUnicodeSet_56
		align 10h
__UTF16StaticData dd offset dword_64	; DATA XREF: .rdata:000003F4o
aUtf16		db 'UTF-16',0
		align 40h
		dd offset dword_4B4
		dd 2021D00h, 0FFFDh, 2,	6 dup(0)
		public __UTF16Data_56
__UTF16Data_56	dd offset dword_E4	; DATA XREF: __UTF16ToUnicodeWithOffsets+136o
		dd 0FFFFFFFFh, 0
		dd offset __UTF16StaticData
		dd 0
		dd offset __UTF16Impl
		dd 2Ch dup(0)
byte_4B0	db 2 dup(0)		; DATA XREF: .rdata:00000090o
word_4B2	dw 0			; DATA XREF: .rdata:00000228o
dword_4B4	dd 7 dup(0)		; DATA XREF: .rdata:000003C0o
					; .rdata:00000558o
__UTF16v2Impl	dd 1Dh,	2 dup(0)	; DATA XREF: .rdata:00000594o
		dd offset __UTF16Open
		dd 0
		dd offset __UTF16Reset
		dd offset __UTF16ToUnicodeWithOffsets
		dd offset __UTF16ToUnicodeWithOffsets
		dd offset __UTF16BEFromUnicodeWithOffsets
		dd offset __UTF16BEFromUnicodeWithOffsets
		dd offset __UTF16GetNextUChar
		align 10h
		dd offset __UTF16GetName
		dd 2 dup(0)
		dd offset _ucnv_getNonSurrogateUnicodeSet_56
		dd 2 dup(0)
__UTF16v2StaticData dd offset dword_64	; DATA XREF: .rdata:off_58Co
aUtf16Version2	db 'UTF-16,version=2',0
		align 10h
		dd 0Ah dup(0)
		dd offset dword_4B4
		dd 2021D00h, 0FDFFh, 2,	6 dup(0)
__UTF16v2Data	dd offset dword_E4	; DATA XREF: __UTF16Open+48o
					; __UTF16ToUnicodeWithOffsets+142o
		dd 0FFFFFFFFh, 0
off_58C		dd offset __UTF16v2StaticData ;	DATA XREF: __UTF16Open+51r
					; __UTF16Open+64r
		dd 0
		dd offset __UTF16v2Impl
		dd 33h dup(0)
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 664h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16BEFromUnicodeWithOffsets	proc near ; DATA XREF: .rdata:00000028o
					; .rdata:0000002Co ...

var_148		= dword	ptr -148h
var_80		= dword	ptr -80h
var_74		= byte ptr -74h
var_73		= byte ptr -73h
var_72		= byte ptr -72h
var_71		= byte ptr -71h
var_68		= word ptr -68h
var_5C		= word ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 148h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_148]
		mov	ecx, 52h ; 'R'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		sub	ecx, [ebp+var_14]
		sar	ecx, 1
		mov	[ebp+var_44], ecx
		jnz	short loc_6A0
		jmp	loc_C44
; ---------------------------------------------------------------------------

loc_6A0:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+35j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+34h], 1
		jnz	short loc_6EA
		mov	eax, [ebp+arg_4]
		push	eax
		push	0FFFFFFFFh
		mov	ecx, [ebp+arg_0]
		add	ecx, 18h
		push	ecx
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+14h]
		push	eax
		mov	ecx, [ebp+arg_0]
		add	ecx, 10h
		push	ecx
		push	2
		push	offset ?bom@?3??_UTF16BEFromUnicodeWithOffsets@@9@9 ; `_UTF16BEFromUnicodeWithOffsets'::`4'::bom
		mov	edx, [ebp+var_8]
		push	edx
		call	_ucnv_fromUWriteBytes_56
		add	esp, 20h
		mov	eax, [ebp+var_8]
		mov	dword ptr [eax+34h], 0

loc_6EA:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+4Cj
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		cmp	ecx, [eax+14h]
		jb	short loc_70C
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh
		jmp	loc_C44
; ---------------------------------------------------------------------------

loc_70C:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+98j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+14h]
		sub	ecx, [ebp+var_20]
		mov	[ebp+var_38], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+18h]
		mov	[ebp+var_2C], ecx
		mov	[ebp+var_50], 0
		mov	eax, [ebp+var_8]
		mov	cx, [eax+38h]
		mov	[ebp+var_5C], cx
		movzx	edx, [ebp+var_5C]
		test	edx, edx
		jz	loc_81D
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_68], cx
		movzx	edx, [ebp+var_68]
		and	edx, 0FFFFFC00h
		cmp	edx, 0DC00h
		jnz	loc_81D
		cmp	[ebp+var_38], 4
		jb	loc_81D
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_44]
		sub	eax, 1
		mov	[ebp+var_44], eax
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_5C]
		mov	[eax+1], cl
		movzx	eax, [ebp+var_68]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+2], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_68]
		mov	[eax+3], cl
		mov	eax, [ebp+var_20]
		add	eax, 4
		mov	[ebp+var_20], eax
		mov	eax, [ebp+var_38]
		sub	eax, 4
		mov	[ebp+var_38], eax
		cmp	[ebp+var_2C], 0
		jz	short loc_806
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx

loc_806:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+158j
		mov	[ebp+var_50], 1
		xor	eax, eax
		mov	[ebp+var_5C], ax
		movzx	ecx, [ebp+var_5C]
		mov	edx, [ebp+var_8]
		mov	[edx+38h], ecx

loc_81D:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+D5j
					; __UTF16BEFromUnicodeWithOffsets+F5j ...
		movzx	eax, [ebp+var_5C]
		test	eax, eax
		jnz	loc_B28
		mov	eax, [ebp+var_44]
		shl	eax, 1
		mov	[ebp+var_80], eax
		mov	eax, [ebp+var_80]
		cmp	eax, [ebp+var_38]
		jbe	short loc_842
		mov	eax, [ebp+var_38]
		and	eax, 0FFFFFFFEh
		mov	[ebp+var_80], eax

loc_842:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+1D3j
		mov	eax, [ebp+var_38]
		sub	eax, [ebp+var_80]
		mov	[ebp+var_38], eax
		mov	eax, [ebp+var_80]
		shr	eax, 1
		mov	[ebp+var_80], eax
		mov	eax, [ebp+var_44]
		sub	eax, [ebp+var_80]
		mov	[ebp+var_44], eax
		cmp	[ebp+var_2C], 0
		jnz	loc_93D

loc_866:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+2CFj
		cmp	[ebp+var_80], 0
		jbe	loc_938
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_5C], cx
		mov	edx, [ebp+var_14]
		add	edx, 2
		mov	[ebp+var_14], edx
		movzx	eax, [ebp+var_5C]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_8B3
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_5C]
		mov	[eax+1], cl
		mov	eax, [ebp+var_20]
		add	eax, 2
		mov	[ebp+var_20], eax
		jmp	short loc_92A
; ---------------------------------------------------------------------------

loc_8B3:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+22Dj
		movzx	eax, [ebp+var_5C]
		and	eax, 400h
		jnz	short loc_928
		cmp	[ebp+var_80], 2
		jb	short loc_928
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_68], cx
		movzx	edx, [ebp+var_68]
		and	edx, 0FFFFFC00h
		cmp	edx, 0DC00h
		jnz	short loc_928
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_80]
		sub	eax, 1
		mov	[ebp+var_80], eax
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_5C]
		mov	[eax+1], cl
		movzx	eax, [ebp+var_68]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+2], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_68]
		mov	[eax+3], cl
		mov	eax, [ebp+var_20]
		add	eax, 4
		mov	[ebp+var_20], eax
		jmp	short loc_92A
; ---------------------------------------------------------------------------

loc_928:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+258j
					; __UTF16BEFromUnicodeWithOffsets+25Ej	...
		jmp	short loc_938
; ---------------------------------------------------------------------------

loc_92A:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+24Dj
					; __UTF16BEFromUnicodeWithOffsets+2C2j
		mov	eax, [ebp+var_80]
		sub	eax, 1
		mov	[ebp+var_80], eax
		jmp	loc_866
; ---------------------------------------------------------------------------

loc_938:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+206j
					; __UTF16BEFromUnicodeWithOffsets:loc_928j
		jmp	loc_A96
; ---------------------------------------------------------------------------

loc_93D:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+1FCj
					; __UTF16BEFromUnicodeWithOffsets+42Dj
		cmp	[ebp+var_80], 0
		jbe	loc_A96
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_5C], cx
		mov	edx, [ebp+var_14]
		add	edx, 2
		mov	[ebp+var_14], edx
		movzx	eax, [ebp+var_5C]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_9B8
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_5C]
		mov	[eax+1], cl
		mov	eax, [ebp+var_20]
		add	eax, 2
		mov	[ebp+var_20], eax
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_50]
		add	eax, 1
		mov	[ebp+var_50], eax
		jmp	loc_A88
; ---------------------------------------------------------------------------

loc_9B8:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+304j
		movzx	eax, [ebp+var_5C]
		and	eax, 400h
		jnz	loc_A86
		cmp	[ebp+var_80], 2
		jb	loc_A86
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_68], cx
		movzx	edx, [ebp+var_68]
		and	edx, 0FFFFFC00h
		cmp	edx, 0DC00h
		jnz	loc_A86
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_80]
		sub	eax, 1
		mov	[ebp+var_80], eax
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_5C]
		mov	[eax+1], cl
		movzx	eax, [ebp+var_68]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+2], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_68]
		mov	[eax+3], cl
		mov	eax, [ebp+var_20]
		add	eax, 4
		mov	[ebp+var_20], eax
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_50]
		add	eax, 2
		mov	[ebp+var_50], eax
		jmp	short loc_A88
; ---------------------------------------------------------------------------

loc_A86:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+35Dj
					; __UTF16BEFromUnicodeWithOffsets+367j	...
		jmp	short loc_A96
; ---------------------------------------------------------------------------

loc_A88:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+34Fj
					; __UTF16BEFromUnicodeWithOffsets+420j
		mov	eax, [ebp+var_80]
		sub	eax, 1
		mov	[ebp+var_80], eax
		jmp	loc_93D
; ---------------------------------------------------------------------------

loc_A96:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets:loc_938j
					; __UTF16BEFromUnicodeWithOffsets+2DDj	...
		cmp	[ebp+var_80], 0
		jnz	short loc_B1A
		cmp	[ebp+var_44], 0
		jbe	short loc_B0B
		cmp	[ebp+var_38], 0
		jbe	short loc_B0B
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_5C], cx
		movzx	edx, [ebp+var_5C]
		and	edx, 0FFFFF800h
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		cmp	edx, 0D800h
		jnz	short loc_AD9
		mov	[ebp+var_148], 1
		jmp	short loc_AE3
; ---------------------------------------------------------------------------

loc_AD9:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+467j
		mov	[ebp+var_148], 0

loc_AE3:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+473j
		cmp	[ebp+var_148], 0
		jnz	short loc_B09
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	[ebp+var_74], al
		mov	al, byte ptr [ebp+var_5C]
		mov	[ebp+var_73], al
		mov	[ebp+var_44], 2
		xor	eax, eax
		mov	[ebp+var_5C], ax

loc_B09:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+486j
		jmp	short loc_B18
; ---------------------------------------------------------------------------

loc_B0B:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+43Cj
					; __UTF16BEFromUnicodeWithOffsets+442j
		mov	[ebp+var_44], 0
		xor	eax, eax
		mov	[ebp+var_5C], ax

loc_B18:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets:loc_B09j
		jmp	short loc_B26
; ---------------------------------------------------------------------------

loc_B1A:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+436j
		mov	eax, [ebp+var_80]
		mov	ecx, [ebp+var_38]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_38], edx

loc_B26:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets:loc_B18j
		jmp	short loc_B2F
; ---------------------------------------------------------------------------

loc_B28:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+1BFj
		mov	[ebp+var_44], 0

loc_B2F:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets:loc_B26j
		movzx	eax, [ebp+var_5C]
		test	eax, eax
		jz	loc_BCA
		mov	[ebp+var_44], 0
		movzx	eax, [ebp+var_5C]
		and	eax, 400h
		jnz	short loc_BB7
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		cmp	ecx, [eax+0Ch]
		jnb	short loc_BB5
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_68], cx
		movzx	edx, [ebp+var_68]
		and	edx, 0FFFFFC00h
		cmp	edx, 0DC00h
		jnz	short loc_BAC
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	[ebp+var_74], al
		mov	al, byte ptr [ebp+var_5C]
		mov	[ebp+var_73], al
		movzx	eax, [ebp+var_68]
		sar	eax, 8
		mov	[ebp+var_72], al
		mov	al, byte ptr [ebp+var_68]
		mov	[ebp+var_71], al
		mov	[ebp+var_44], 4
		xor	eax, eax
		mov	[ebp+var_5C], ax
		jmp	short loc_BB5
; ---------------------------------------------------------------------------

loc_BAC:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+50Ej
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch

loc_BB5:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+4F2j
					; __UTF16BEFromUnicodeWithOffsets+546j
		jmp	short loc_BC0
; ---------------------------------------------------------------------------

loc_BB7:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+4E7j
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch

loc_BC0:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets:loc_BB5j
		movzx	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8]
		mov	[ecx+38h], eax

loc_BCA:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+4D1j
		cmp	[ebp+var_44], 0
		jbe	short loc_C07
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+var_50]
		push	ecx
		lea	edx, [ebp+var_2C]
		push	edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+14h]
		push	ecx
		lea	edx, [ebp+var_20]
		push	edx
		mov	eax, [ebp+var_44]
		push	eax
		lea	ecx, [ebp+var_74]
		push	ecx
		mov	edx, [ebp+var_8]
		push	edx
		call	_ucnv_fromUWriteBytes_56
		add	esp, 20h
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+14h]
		sub	ecx, [ebp+var_20]
		mov	[ebp+var_38], ecx

loc_C07:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+56Aj
		mov	eax, [ebp+arg_4]
		cmp	dword ptr [eax], 0
		jg	short loc_C29
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		cmp	ecx, [eax+0Ch]
		jnb	short loc_C29
		cmp	[ebp+var_38], 0
		jnz	short loc_C29
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh

loc_C29:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+5A9j
					; __UTF16BEFromUnicodeWithOffsets+5B4j	...
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		mov	[eax+10h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+18h], ecx

loc_C44:				; CODE XREF: __UTF16BEFromUnicodeWithOffsets+37j
					; __UTF16BEFromUnicodeWithOffsets+A3j
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN45
		call	@_RTC_CheckStackVars@8 ; _RTC_CheckStackVars(x,x)
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 148h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__UTF16BEFromUnicodeWithOffsets	endp

; ---------------------------------------------------------------------------
		align 4
$LN45		dd 3			; DATA XREF: __UTF16BEFromUnicodeWithOffsets+5E4o
		dd offset $LN44
$LN44		dd 0FFFFFFE0h, 4	; DATA XREF: .text:00000C70o
		dd offset $LN41		; "target"
		dd 0FFFFFFD4h, 4
		dd offset $LN42		; "offsets"
		dd 0FFFFFF8Ch, 4
		dd offset $LN43		; "overflow"
$LN43		db 'overflow',0         ; DATA XREF: .text:00000C94o
$LN42		db 'offsets',0          ; DATA XREF: .text:00000C88o
$LN41		db 'target',0           ; DATA XREF: .text:00000C7Co
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$TMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$TMZ
		;org 0CB0h
__RTC_Shutdown_rtc$TMZ dd offset __RTC_Shutdown
_rtc$TMZ	ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$IMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$IMZ
		;org 0CB4h
__RTC_InitBase_rtc$IMZ dd offset __RTC_InitBase
_rtc$IMZ	ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 0CB8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16BEToUnicodeWithOffsets proc near	; CODE XREF: __UTF16ToUnicodeWithOffsets+218p
					; __UTF16ToUnicodeWithOffsets+2CAp
					; DATA XREF: ...

var_144		= byte ptr -144h
var_80		= dword	ptr -80h
var_74		= word ptr -74h
var_68		= word ptr -68h
var_5C		= dword	ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 144h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_144]
		mov	ecx, 51h ; 'Q'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		cmp	dword ptr [ecx+30h], 8
		jge	short loc_CF7
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	__UTF16ToUnicodeWithOffsets
		add	esp, 8
		jmp	loc_136A
; ---------------------------------------------------------------------------

loc_CF7:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+28j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		sub	ecx, [ebp+var_14]
		mov	[ebp+var_44], ecx
		jnz	short loc_D25
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+2Ch], 0
		jnz	short loc_D25
		jmp	loc_136A
; ---------------------------------------------------------------------------

loc_D25:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+5Dj
					; __UTF16BEToUnicodeWithOffsets+66j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		cmp	ecx, [eax+14h]
		jb	short loc_D47
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh
		jmp	loc_136A
; ---------------------------------------------------------------------------

loc_D47:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+7Fj
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+14h]
		sub	ecx, [ebp+var_20]
		sar	ecx, 1
		mov	[ebp+var_38], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+18h]
		mov	[ebp+var_2C], ecx
		mov	[ebp+var_5C], 0
		xor	eax, eax
		mov	[ebp+var_68], ax
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+2Ch], 0
		jz	short loc_D91
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx+2Ch]
		mov	[eax+25h], dl
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 1
		mov	eax, [ebp+var_8]
		mov	dword ptr [eax+2Ch], 0

loc_D91:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+BAj
		mov	eax, [ebp+var_8]
		movsx	ecx, byte ptr [eax+24h]
		mov	[ebp+var_50], ecx
		cmp	[ebp+var_50], 0
		jz	loc_FCB
		mov	eax, [ebp+var_8]
		add	eax, 25h ; '%'
		mov	[ebp+var_80], eax

loc_DAE:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+304j
		mov	eax, [ebp+var_80]
		add	eax, [ebp+var_50]
		mov	ecx, [ebp+var_14]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_50]
		add	eax, 1
		mov	[ebp+var_50], eax
		mov	ecx, [ebp+var_14]
		add	ecx, 1
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_5C]
		add	eax, 1
		mov	[ebp+var_5C], eax
		mov	eax, [ebp+var_44]
		sub	eax, 1
		mov	[ebp+var_44], eax
		cmp	[ebp+var_50], 2
		jnz	loc_E74
		mov	eax, [ebp+var_80]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 8
		mov	edx, [ebp+var_80]
		movzx	eax, byte ptr [edx+1]
		or	ecx, eax
		mov	[ebp+var_68], cx
		movzx	eax, [ebp+var_68]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_E57
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		cmp	[ebp+var_2C], 0
		jz	short loc_E3A
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx

loc_E3A:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+16Ej
		mov	eax, [ebp+var_38]
		sub	eax, 1
		mov	[ebp+var_38], eax
		mov	[ebp+var_50], 0
		xor	eax, eax
		mov	[ebp+var_68], ax
		jmp	loc_FC2
; ---------------------------------------------------------------------------
		jmp	short loc_E6F
; ---------------------------------------------------------------------------

loc_E57:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+155j
		movzx	eax, [ebp+var_68]
		and	eax, 400h
		jnz	short loc_E6A
		xor	eax, eax
		mov	[ebp+var_68], ax
		jmp	short loc_E6F
; ---------------------------------------------------------------------------

loc_E6A:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+1A8j
		jmp	loc_FC2
; ---------------------------------------------------------------------------

loc_E6F:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+19Dj
					; __UTF16BEToUnicodeWithOffsets+1B0j
		jmp	loc_FB8
; ---------------------------------------------------------------------------

loc_E74:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+12Bj
		cmp	[ebp+var_50], 4
		jnz	loc_FB8
		mov	eax, [ebp+var_80]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 8
		mov	edx, [ebp+var_80]
		movzx	eax, byte ptr [edx+1]
		or	ecx, eax
		mov	[ebp+var_68], cx
		mov	eax, [ebp+var_80]
		movzx	ecx, byte ptr [eax+2]
		shl	ecx, 8
		mov	edx, [ebp+var_80]
		movzx	eax, byte ptr [edx+3]
		or	ecx, eax
		mov	[ebp+var_74], cx
		movzx	eax, [ebp+var_74]
		and	eax, 0FFFFFC00h
		cmp	eax, 0DC00h
		jnz	loc_F53
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		cmp	[ebp+var_38], 2
		jb	short loc_F20
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_74]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		cmp	[ebp+var_2C], 0
		jz	short loc_F15
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx

loc_F15:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+237j
		mov	eax, [ebp+var_38]
		sub	eax, 2
		mov	[ebp+var_38], eax
		jmp	short loc_F42
; ---------------------------------------------------------------------------

loc_F20:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+21Ej
		mov	[ebp+var_38], 0
		mov	eax, [ebp+var_8]
		mov	cx, [ebp+var_74]
		mov	[eax+74h], cx
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+41h], 1
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh

loc_F42:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+266j
		mov	[ebp+var_50], 0
		xor	eax, eax
		mov	[ebp+var_68], ax
		jmp	short loc_FC2
; ---------------------------------------------------------------------------
		jmp	short loc_FB8
; ---------------------------------------------------------------------------

loc_F53:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+201j
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		sub	ecx, [ebp+var_14]
		cmp	ecx, 2
		jl	short loc_F75
		mov	eax, [ebp+var_14]
		sub	eax, 2
		mov	[ebp+var_14], eax
		jmp	short loc_F91
; ---------------------------------------------------------------------------

loc_F75:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+2B0j
		mov	eax, [ebp+var_80]
		movzx	ecx, byte ptr [eax+2]
		or	ecx, 100h
		mov	edx, [ebp+var_8]
		mov	[edx+2Ch], ecx
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	[ebp+var_14], eax

loc_F91:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+2BBj
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 2
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		mov	[eax+10h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+18h], ecx
		jmp	loc_136A
; ---------------------------------------------------------------------------

loc_FB8:				; CODE XREF: __UTF16BEToUnicodeWithOffsets:loc_E6Fj
					; __UTF16BEToUnicodeWithOffsets+1C0j ...
		cmp	[ebp+var_44], 0
		ja	loc_DAE

loc_FC2:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+198j
					; __UTF16BEToUnicodeWithOffsets:loc_E6Aj ...
		mov	eax, [ebp+var_8]
		mov	cl, byte ptr [ebp+var_50]
		mov	[eax+24h], cl

loc_FCB:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+E7j
		mov	eax, [ebp+var_38]
		shl	eax, 1
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_50]
		cmp	eax, [ebp+var_44]
		jbe	short loc_FE4
		mov	eax, [ebp+var_44]
		and	eax, 0FFFFFFFEh
		mov	[ebp+var_50], eax

loc_FE4:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+321j
		movzx	eax, [ebp+var_68]
		test	eax, eax
		jnz	loc_1227
		cmp	[ebp+var_50], 0
		jbe	loc_1227
		mov	eax, [ebp+var_44]
		sub	eax, [ebp+var_50]
		mov	[ebp+var_44], eax
		mov	eax, [ebp+var_50]
		shr	eax, 1
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_38]
		sub	eax, [ebp+var_50]
		mov	[ebp+var_38], eax
		cmp	[ebp+var_2C], 0
		jnz	loc_10EB

loc_101E:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+428j
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 8
		mov	edx, [ebp+var_14]
		movzx	eax, byte ptr [edx+1]
		or	ecx, eax
		mov	[ebp+var_68], cx
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		movzx	eax, [ebp+var_68]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_1062
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		jmp	short loc_10D7
; ---------------------------------------------------------------------------

loc_1062:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+393j
		movzx	eax, [ebp+var_68]
		and	eax, 400h
		jnz	short loc_10D5
		cmp	[ebp+var_50], 2
		jb	short loc_10D5
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 8
		mov	edx, [ebp+var_14]
		movzx	eax, byte ptr [edx+1]
		or	ecx, eax
		mov	[ebp+var_74], cx
		movzx	ecx, [ebp+var_74]
		and	ecx, 0FFFFFC00h
		cmp	ecx, 0DC00h
		jnz	short loc_10D5
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_74]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		jmp	short loc_10D7
; ---------------------------------------------------------------------------

loc_10D5:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+3B3j
					; __UTF16BEToUnicodeWithOffsets+3B9j ...
		jmp	short loc_10E6
; ---------------------------------------------------------------------------

loc_10D7:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+3A8j
					; __UTF16BEToUnicodeWithOffsets+41Bj
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		jnz	loc_101E

loc_10E6:				; CODE XREF: __UTF16BEToUnicodeWithOffsets:loc_10D5j
		jmp	loc_1203
; ---------------------------------------------------------------------------

loc_10EB:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+360j
					; __UTF16BEToUnicodeWithOffsets+545j
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 8
		mov	edx, [ebp+var_14]
		movzx	eax, byte ptr [edx+1]
		or	ecx, eax
		mov	[ebp+var_68], cx
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		movzx	eax, [ebp+var_68]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_114C
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_5C]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_5C]
		add	eax, 2
		mov	[ebp+var_5C], eax
		jmp	loc_11F4
; ---------------------------------------------------------------------------

loc_114C:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+460j
		movzx	eax, [ebp+var_68]
		and	eax, 400h
		jnz	loc_11F2
		cmp	[ebp+var_50], 2
		jb	loc_11F2
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 8
		mov	edx, [ebp+var_14]
		movzx	eax, byte ptr [edx+1]
		or	ecx, eax
		mov	[ebp+var_74], cx
		movzx	ecx, [ebp+var_74]
		and	ecx, 0FFFFFC00h
		cmp	ecx, 0DC00h
		jnz	short loc_11F2
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_74]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_5C]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_5C]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_5C]
		add	eax, 4
		mov	[ebp+var_5C], eax
		jmp	short loc_11F4
; ---------------------------------------------------------------------------

loc_11F2:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+49Dj
					; __UTF16BEToUnicodeWithOffsets+4A7j ...
		jmp	short loc_1203
; ---------------------------------------------------------------------------

loc_11F4:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+48Fj
					; __UTF16BEToUnicodeWithOffsets+538j
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		jnz	loc_10EB

loc_1203:				; CODE XREF: __UTF16BEToUnicodeWithOffsets:loc_10E6j
					; __UTF16BEToUnicodeWithOffsets:loc_11F2j
		cmp	[ebp+var_50], 0
		jnz	short loc_1211
		xor	eax, eax
		mov	[ebp+var_68], ax
		jmp	short loc_1227
; ---------------------------------------------------------------------------

loc_1211:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+54Fj
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_44]
		lea	edx, [ecx+eax*2-2]
		mov	[ebp+var_44], edx
		mov	eax, [ebp+var_38]
		add	eax, [ebp+var_50]
		mov	[ebp+var_38], eax

loc_1227:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+332j
					; __UTF16BEToUnicodeWithOffsets+33Cj ...
		movzx	eax, [ebp+var_68]
		test	eax, eax
		jz	loc_1305
		movzx	eax, [ebp+var_68]
		sar	eax, 8
		mov	ecx, [ebp+var_8]
		mov	[ecx+25h], al
		mov	eax, [ebp+var_8]
		mov	cl, byte ptr [ebp+var_68]
		mov	[eax+26h], cl
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 2
		movzx	eax, [ebp+var_68]
		and	eax, 400h
		jnz	loc_12FC
		cmp	[ebp+var_44], 2
		jb	loc_12FA
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 8
		mov	edx, [ebp+var_14]
		movzx	eax, byte ptr [edx+1]
		or	ecx, eax
		mov	[ebp+var_74], cx
		movzx	ecx, [ebp+var_74]
		and	ecx, 0FFFFFC00h
		cmp	ecx, 0DC00h
		jnz	short loc_12F1
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_44]
		sub	eax, 2
		mov	[ebp+var_44], eax
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		cmp	[ebp+var_2C], 0
		jz	short loc_12CD
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_5C]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx

loc_12CD:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+602j
		mov	eax, [ebp+var_8]
		mov	cx, [ebp+var_74]
		mov	[eax+74h], cx
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+41h], 1
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 0
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh
		jmp	short loc_12FA
; ---------------------------------------------------------------------------

loc_12F1:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+5D7j
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch

loc_12FA:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+5ABj
					; __UTF16BEToUnicodeWithOffsets+637j
		jmp	short loc_1305
; ---------------------------------------------------------------------------

loc_12FC:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+5A1j
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch

loc_1305:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+575j
					; __UTF16BEToUnicodeWithOffsets:loc_12FAj
		mov	eax, [ebp+arg_4]
		cmp	dword ptr [eax], 0
		jg	short loc_134F
		cmp	[ebp+var_44], 0
		jbe	short loc_134F
		cmp	[ebp+var_38], 0
		jnz	short loc_1324
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh
		jmp	short loc_134F
; ---------------------------------------------------------------------------

loc_1324:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+65Fj
		mov	eax, [ebp+var_8]
		movsx	ecx, byte ptr [eax+24h]
		mov	edx, [ebp+var_8]
		mov	eax, [ebp+var_14]
		mov	al, [eax]
		mov	[edx+ecx+25h], al
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx+24h]
		add	dl, 1
		mov	eax, [ebp+var_8]
		mov	[eax+24h], dl
		mov	ecx, [ebp+var_14]
		add	ecx, 1
		mov	[ebp+var_14], ecx

loc_134F:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+653j
					; __UTF16BEToUnicodeWithOffsets+659j ...
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		mov	[eax+10h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+18h], ecx

loc_136A:				; CODE XREF: __UTF16BEToUnicodeWithOffsets+3Aj
					; __UTF16BEToUnicodeWithOffsets+68j ...
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 144h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__UTF16BEToUnicodeWithOffsets endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1380h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16BEGetNextUChar proc near		; CODE XREF: __UTF16GetNextUChar+49p
					; DATA XREF: .rdata:00000030o

var_108		= byte ptr -108h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= word ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 108h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_108]
		mov	ecx, 42h ; 'B'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		cmp	dword ptr [ecx+30h], 8
		jge	short loc_13B4
		mov	eax, 0FFFFFFF7h
		jmp	loc_1571
; ---------------------------------------------------------------------------

loc_13B4:				; CODE XREF: __UTF16BEGetNextUChar+28j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+var_14]
		jb	short loc_13E1
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 8
		mov	eax, 0FFFFh
		jmp	loc_1571
; ---------------------------------------------------------------------------

loc_13E1:				; CODE XREF: __UTF16BEGetNextUChar+4Cj
		mov	eax, [ebp+var_8]
		add	eax, 2
		cmp	eax, [ebp+var_14]
		jbe	short loc_1429
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	edx, [ebp+var_8]
		mov	al, [edx]
		mov	[ecx+25h], al
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	byte ptr [ecx+24h], 1
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_8]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Bh
		mov	eax, 0FFFFh
		jmp	loc_1571
; ---------------------------------------------------------------------------

loc_1429:				; CODE XREF: __UTF16BEGetNextUChar+6Aj
		mov	eax, [ebp+var_8]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 8
		mov	edx, [ebp+var_8]
		movzx	eax, byte ptr [edx+1]
		or	ecx, eax
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+var_8]
		add	eax, 2
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_20]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jnz	loc_1565
		mov	eax, [ebp+var_20]
		and	eax, 400h
		jnz	loc_151B
		mov	eax, [ebp+var_8]
		add	eax, 2
		cmp	eax, [ebp+var_14]
		ja	short loc_14C1
		mov	eax, [ebp+var_8]
		movzx	ecx, byte ptr [eax]
		shl	ecx, 8
		mov	edx, [ebp+var_8]
		movzx	eax, byte ptr [edx+1]
		or	ecx, eax
		mov	[ebp+var_2C], cx
		movzx	eax, [ebp+var_2C]
		and	eax, 0FFFFFC00h
		cmp	eax, 0DC00h
		jnz	short loc_14B8
		mov	eax, [ebp+var_20]
		shl	eax, 0Ah
		movzx	ecx, [ebp+var_2C]
		lea	edx, [eax+ecx-35FDC00h]
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_8]
		add	eax, 2
		mov	[ebp+var_8], eax
		jmp	short loc_14BF
; ---------------------------------------------------------------------------

loc_14B8:				; CODE XREF: __UTF16BEGetNextUChar+117j
		mov	[ebp+var_20], 0FFFFFFFEh

loc_14BF:				; CODE XREF: __UTF16BEGetNextUChar+136j
		jmp	short loc_1519
; ---------------------------------------------------------------------------

loc_14C1:				; CODE XREF: __UTF16BEGetNextUChar+F1j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		add	ecx, 25h ; '%'
		mov	[ebp+var_38], ecx
		mov	eax, [ebp+var_8]
		sub	eax, 2
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_14]
		sub	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+4]
		mov	[edx+24h], al

loc_14E5:				; CODE XREF: __UTF16BEGetNextUChar+187j
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_38]
		add	eax, 1
		mov	[ebp+var_38], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+var_14]
		jb	short loc_14E5
		mov	[ebp+var_20], 0FFFFh
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Bh

loc_1519:				; CODE XREF: __UTF16BEGetNextUChar:loc_14BFj
		jmp	short loc_1522
; ---------------------------------------------------------------------------

loc_151B:				; CODE XREF: __UTF16BEGetNextUChar+E2j
		mov	[ebp+var_20], 0FFFFFFFEh

loc_1522:				; CODE XREF: __UTF16BEGetNextUChar:loc_1519j
		cmp	[ebp+var_20], 0
		jge	short loc_1565
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		add	ecx, 25h ; '%'
		mov	[ebp+var_44], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	byte ptr [ecx+24h], 2
		mov	eax, [ebp+var_44]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx-2]
		mov	[eax], dl
		mov	eax, [ebp+var_44]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx-1]
		mov	[eax+1], dl
		mov	[ebp+var_20], 0FFFFh
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch

loc_1565:				; CODE XREF: __UTF16BEGetNextUChar+D4j
					; __UTF16BEGetNextUChar+1A6j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_8]
		mov	[eax+8], ecx
		mov	eax, [ebp+var_20]

loc_1571:				; CODE XREF: __UTF16BEGetNextUChar+2Fj
					; __UTF16BEGetNextUChar+5Cj ...
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__UTF16BEGetNextUChar endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1578h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16BEReset	proc near		; CODE XREF: __UTF16BEOpen+32p
					; DATA XREF: .rdata:0000001Co

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_4], 1
		jg	short loc_15BD
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		jnz	short loc_15B3
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+30h], 8
		jmp	short loc_15BD
; ---------------------------------------------------------------------------

loc_15B3:				; CODE XREF: __UTF16BEReset+2Dj
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+30h], 0

loc_15BD:				; CODE XREF: __UTF16BEReset+22j
					; __UTF16BEReset+39j
		cmp	[ebp+arg_4], 1
		jz	short loc_15DB
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		cmp	ecx, 1
		jnz	short loc_15DB
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+34h], 1

loc_15DB:				; CODE XREF: __UTF16BEReset+49j
					; __UTF16BEReset+57j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__UTF16BEReset	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 15E4h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16BEOpen	proc near		; DATA XREF: .rdata:00000014o

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		cmp	ecx, 1
		ja	short loc_1620
		push	0
		mov	eax, [ebp+arg_0]
		push	eax
		call	__UTF16BEReset
		add	esp, 8
		jmp	short loc_1629
; ---------------------------------------------------------------------------

loc_1620:				; CODE XREF: __UTF16BEOpen+2Aj
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 1

loc_1629:				; CODE XREF: __UTF16BEOpen+3Aj
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__UTF16BEOpen	endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1640h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16BEGetName proc near		; DATA XREF: .rdata:00000038o

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		jnz	short loc_1672
		mov	eax, offset ??_C@_08NLKHJAFK@UTF?916BE?$AA@ ; "UTF-16BE"
		jmp	short loc_1677
; ---------------------------------------------------------------------------
		jmp	short loc_1677
; ---------------------------------------------------------------------------

loc_1672:				; CODE XREF: __UTF16BEGetName+27j
		mov	eax, offset ??_C@_0BD@DKLBNCKF@UTF?916BE?0version?$DN1?$AA@ ; "UTF-16BE,version=1"

loc_1677:				; CODE XREF: __UTF16BEGetName+2Ej
					; __UTF16BEGetName+30j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__UTF16BEGetName endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 1680h
		public ??_C@_0BD@DKLBNCKF@UTF?916BE?0version?$DN1?$AA@
; `string'
??_C@_0BD@DKLBNCKF@UTF?916BE?0version?$DN1?$AA@	db 'UTF-16BE,version=1',0
					; DATA XREF: __UTF16BEGetName:loc_1672o
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 1694h
		public ??_C@_08NLKHJAFK@UTF?916BE?$AA@
; `string'
??_C@_08NLKHJAFK@UTF?916BE?$AA@	db 'UTF-16BE',0 ; DATA XREF: __UTF16BEGetName+29o
		align 10h
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 16A0h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16LEFromUnicodeWithOffsets	proc near ; DATA XREF: .rdata:000001C0o
					; .rdata:000001C4o ...

var_148		= dword	ptr -148h
var_80		= dword	ptr -80h
var_74		= byte ptr -74h
var_73		= byte ptr -73h
var_72		= byte ptr -72h
var_71		= byte ptr -71h
var_68		= word ptr -68h
var_5C		= word ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 148h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_148]
		mov	ecx, 52h ; 'R'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		sub	ecx, [ebp+var_14]
		sar	ecx, 1
		mov	[ebp+var_44], ecx
		jnz	short loc_16DC
		jmp	loc_1C83
; ---------------------------------------------------------------------------

loc_16DC:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+35j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+34h], 1
		jnz	short loc_1726
		mov	eax, [ebp+arg_4]
		push	eax
		push	0FFFFFFFFh
		mov	ecx, [ebp+arg_0]
		add	ecx, 18h
		push	ecx
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+14h]
		push	eax
		mov	ecx, [ebp+arg_0]
		add	ecx, 10h
		push	ecx
		push	2
		push	offset ?bom@?3??_UTF16LEFromUnicodeWithOffsets@@9@9 ; `_UTF16LEFromUnicodeWithOffsets'::`4'::bom
		mov	edx, [ebp+var_8]
		push	edx
		call	_ucnv_fromUWriteBytes_56
		add	esp, 20h
		mov	eax, [ebp+var_8]
		mov	dword ptr [eax+34h], 0

loc_1726:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+4Cj
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		cmp	ecx, [eax+14h]
		jb	short loc_1748
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh
		jmp	loc_1C83
; ---------------------------------------------------------------------------

loc_1748:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+98j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+14h]
		sub	edx, [ecx+10h]
		mov	[ebp+var_38], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+18h]
		mov	[ebp+var_2C], ecx
		mov	[ebp+var_50], 0
		mov	eax, [ebp+var_8]
		mov	cx, [eax+38h]
		mov	[ebp+var_5C], cx
		movzx	edx, [ebp+var_5C]
		test	edx, edx
		jz	loc_185C
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_68], cx
		movzx	edx, [ebp+var_68]
		and	edx, 0FFFFFC00h
		cmp	edx, 0DC00h
		jnz	loc_185C
		cmp	[ebp+var_38], 4
		jb	loc_185C
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_44]
		sub	eax, 1
		mov	[ebp+var_44], eax
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_5C]
		mov	[eax], cl
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+1], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_68]
		mov	[eax+2], cl
		movzx	eax, [ebp+var_68]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+3], al
		mov	eax, [ebp+var_20]
		add	eax, 4
		mov	[ebp+var_20], eax
		mov	eax, [ebp+var_38]
		sub	eax, 4
		mov	[ebp+var_38], eax
		cmp	[ebp+var_2C], 0
		jz	short loc_1845
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx

loc_1845:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+15Bj
		mov	[ebp+var_50], 1
		xor	eax, eax
		mov	[ebp+var_5C], ax
		movzx	ecx, [ebp+var_5C]
		mov	edx, [ebp+var_8]
		mov	[edx+38h], ecx

loc_185C:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+D8j
					; __UTF16LEFromUnicodeWithOffsets+F8j ...
		movzx	eax, [ebp+var_5C]
		test	eax, eax
		jnz	loc_1B67
		mov	eax, [ebp+var_44]
		shl	eax, 1
		mov	[ebp+var_80], eax
		mov	eax, [ebp+var_80]
		cmp	eax, [ebp+var_38]
		jbe	short loc_1881
		mov	eax, [ebp+var_38]
		and	eax, 0FFFFFFFEh
		mov	[ebp+var_80], eax

loc_1881:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+1D6j
		mov	eax, [ebp+var_38]
		sub	eax, [ebp+var_80]
		mov	[ebp+var_38], eax
		mov	eax, [ebp+var_80]
		shr	eax, 1
		mov	[ebp+var_80], eax
		mov	eax, [ebp+var_44]
		sub	eax, [ebp+var_80]
		mov	[ebp+var_44], eax
		cmp	[ebp+var_2C], 0
		jnz	loc_197C

loc_18A5:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+2D2j
		cmp	[ebp+var_80], 0
		jbe	loc_1977
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_5C], cx
		mov	edx, [ebp+var_14]
		add	edx, 2
		mov	[ebp+var_14], edx
		movzx	eax, [ebp+var_5C]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_18F2
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_5C]
		mov	[eax], cl
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+1], al
		mov	eax, [ebp+var_20]
		add	eax, 2
		mov	[ebp+var_20], eax
		jmp	short loc_1969
; ---------------------------------------------------------------------------

loc_18F2:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+230j
		movzx	eax, [ebp+var_5C]
		and	eax, 400h
		jnz	short loc_1967
		cmp	[ebp+var_80], 2
		jb	short loc_1967
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_68], cx
		movzx	edx, [ebp+var_68]
		and	edx, 0FFFFFC00h
		cmp	edx, 0DC00h
		jnz	short loc_1967
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_80]
		sub	eax, 1
		mov	[ebp+var_80], eax
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_5C]
		mov	[eax], cl
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+1], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_68]
		mov	[eax+2], cl
		movzx	eax, [ebp+var_68]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+3], al
		mov	eax, [ebp+var_20]
		add	eax, 4
		mov	[ebp+var_20], eax
		jmp	short loc_1969
; ---------------------------------------------------------------------------

loc_1967:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+25Bj
					; __UTF16LEFromUnicodeWithOffsets+261j	...
		jmp	short loc_1977
; ---------------------------------------------------------------------------

loc_1969:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+250j
					; __UTF16LEFromUnicodeWithOffsets+2C5j
		mov	eax, [ebp+var_80]
		sub	eax, 1
		mov	[ebp+var_80], eax
		jmp	loc_18A5
; ---------------------------------------------------------------------------

loc_1977:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+209j
					; __UTF16LEFromUnicodeWithOffsets:loc_1967j
		jmp	loc_1AD5
; ---------------------------------------------------------------------------

loc_197C:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+1FFj
					; __UTF16LEFromUnicodeWithOffsets+430j
		cmp	[ebp+var_80], 0
		jbe	loc_1AD5
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_5C], cx
		mov	edx, [ebp+var_14]
		add	edx, 2
		mov	[ebp+var_14], edx
		movzx	eax, [ebp+var_5C]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_19F7
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_5C]
		mov	[eax], cl
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+1], al
		mov	eax, [ebp+var_20]
		add	eax, 2
		mov	[ebp+var_20], eax
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_50]
		add	eax, 1
		mov	[ebp+var_50], eax
		jmp	loc_1AC7
; ---------------------------------------------------------------------------

loc_19F7:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+307j
		movzx	eax, [ebp+var_5C]
		and	eax, 400h
		jnz	loc_1AC5
		cmp	[ebp+var_80], 2
		jb	loc_1AC5
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_68], cx
		movzx	edx, [ebp+var_68]
		and	edx, 0FFFFFC00h
		cmp	edx, 0DC00h
		jnz	loc_1AC5
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_80]
		sub	eax, 1
		mov	[ebp+var_80], eax
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_5C]
		mov	[eax], cl
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+1], al
		mov	eax, [ebp+var_20]
		mov	cl, byte ptr [ebp+var_68]
		mov	[eax+2], cl
		movzx	eax, [ebp+var_68]
		sar	eax, 8
		mov	ecx, [ebp+var_20]
		mov	[ecx+3], al
		mov	eax, [ebp+var_20]
		add	eax, 4
		mov	[ebp+var_20], eax
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_50]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_50]
		add	eax, 2
		mov	[ebp+var_50], eax
		jmp	short loc_1AC7
; ---------------------------------------------------------------------------

loc_1AC5:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+360j
					; __UTF16LEFromUnicodeWithOffsets+36Aj	...
		jmp	short loc_1AD5
; ---------------------------------------------------------------------------

loc_1AC7:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+352j
					; __UTF16LEFromUnicodeWithOffsets+423j
		mov	eax, [ebp+var_80]
		sub	eax, 1
		mov	[ebp+var_80], eax
		jmp	loc_197C
; ---------------------------------------------------------------------------

loc_1AD5:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets:loc_1977j
					; __UTF16LEFromUnicodeWithOffsets+2E0j	...
		cmp	[ebp+var_80], 0
		jnz	short loc_1B59
		cmp	[ebp+var_44], 0
		jbe	short loc_1B4A
		cmp	[ebp+var_38], 0
		jbe	short loc_1B4A
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_5C], cx
		movzx	edx, [ebp+var_5C]
		and	edx, 0FFFFF800h
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		cmp	edx, 0D800h
		jnz	short loc_1B18
		mov	[ebp+var_148], 1
		jmp	short loc_1B22
; ---------------------------------------------------------------------------

loc_1B18:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+46Aj
		mov	[ebp+var_148], 0

loc_1B22:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+476j
		cmp	[ebp+var_148], 0
		jnz	short loc_1B48
		mov	al, byte ptr [ebp+var_5C]
		mov	[ebp+var_74], al
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	[ebp+var_73], al
		mov	[ebp+var_44], 2
		xor	eax, eax
		mov	[ebp+var_5C], ax

loc_1B48:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+489j
		jmp	short loc_1B57
; ---------------------------------------------------------------------------

loc_1B4A:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+43Fj
					; __UTF16LEFromUnicodeWithOffsets+445j
		mov	[ebp+var_44], 0
		xor	eax, eax
		mov	[ebp+var_5C], ax

loc_1B57:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets:loc_1B48j
		jmp	short loc_1B65
; ---------------------------------------------------------------------------

loc_1B59:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+439j
		mov	eax, [ebp+var_80]
		mov	ecx, [ebp+var_38]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_38], edx

loc_1B65:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets:loc_1B57j
		jmp	short loc_1B6E
; ---------------------------------------------------------------------------

loc_1B67:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+1C2j
		mov	[ebp+var_44], 0

loc_1B6E:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets:loc_1B65j
		movzx	eax, [ebp+var_5C]
		test	eax, eax
		jz	loc_1C09
		mov	[ebp+var_44], 0
		movzx	eax, [ebp+var_5C]
		and	eax, 400h
		jnz	short loc_1BF6
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		cmp	ecx, [eax+0Ch]
		jnb	short loc_1BF4
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_68], cx
		movzx	edx, [ebp+var_68]
		and	edx, 0FFFFFC00h
		cmp	edx, 0DC00h
		jnz	short loc_1BEB
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	al, byte ptr [ebp+var_5C]
		mov	[ebp+var_74], al
		movzx	eax, [ebp+var_5C]
		sar	eax, 8
		mov	[ebp+var_73], al
		mov	al, byte ptr [ebp+var_68]
		mov	[ebp+var_72], al
		movzx	eax, [ebp+var_68]
		sar	eax, 8
		mov	[ebp+var_71], al
		mov	[ebp+var_44], 4
		xor	eax, eax
		mov	[ebp+var_5C], ax
		jmp	short loc_1BF4
; ---------------------------------------------------------------------------

loc_1BEB:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+511j
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch

loc_1BF4:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+4F5j
					; __UTF16LEFromUnicodeWithOffsets+549j
		jmp	short loc_1BFF
; ---------------------------------------------------------------------------

loc_1BF6:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+4EAj
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch

loc_1BFF:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets:loc_1BF4j
		movzx	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8]
		mov	[ecx+38h], eax

loc_1C09:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+4D4j
		cmp	[ebp+var_44], 0
		jbe	short loc_1C46
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+var_50]
		push	ecx
		lea	edx, [ebp+var_2C]
		push	edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+14h]
		push	ecx
		lea	edx, [ebp+var_20]
		push	edx
		mov	eax, [ebp+var_44]
		push	eax
		lea	ecx, [ebp+var_74]
		push	ecx
		mov	edx, [ebp+var_8]
		push	edx
		call	_ucnv_fromUWriteBytes_56
		add	esp, 20h
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+14h]
		sub	ecx, [ebp+var_20]
		mov	[ebp+var_38], ecx

loc_1C46:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+56Dj
		mov	eax, [ebp+arg_4]
		cmp	dword ptr [eax], 0
		jg	short loc_1C68
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		cmp	ecx, [eax+0Ch]
		jnb	short loc_1C68
		cmp	[ebp+var_38], 0
		jnz	short loc_1C68
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh

loc_1C68:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+5ACj
					; __UTF16LEFromUnicodeWithOffsets+5B7j	...
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		mov	[eax+10h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+18h], ecx

loc_1C83:				; CODE XREF: __UTF16LEFromUnicodeWithOffsets+37j
					; __UTF16LEFromUnicodeWithOffsets+A3j
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN45_0
		call	@_RTC_CheckStackVars@8 ; _RTC_CheckStackVars(x,x)
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 148h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__UTF16LEFromUnicodeWithOffsets	endp

; ---------------------------------------------------------------------------
$LN45_0		dd 3			; DATA XREF: __UTF16LEFromUnicodeWithOffsets+5E7o
		dd offset $LN44_0
$LN44_0		dd 0FFFFFFE0h, 4	; DATA XREF: .text:00001CACo
		dd offset $LN41_0	; "target"
		dd 0FFFFFFD4h, 4
		dd offset $LN42_0	; "offsets"
		dd 0FFFFFF8Ch, 4
		dd offset $LN43_0	; "overflow"
$LN43_0		db 'overflow',0         ; DATA XREF: .text:00001CD0o
$LN42_0		db 'offsets',0          ; DATA XREF: .text:00001CC4o
$LN41_0		db 'target',0           ; DATA XREF: .text:00001CB8o
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1CECh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16LEToUnicodeWithOffsets proc near	; CODE XREF: __UTF16ToUnicodeWithOffsets+23Cp
					; __UTF16ToUnicodeWithOffsets+2DCp
					; DATA XREF: ...

var_144		= byte ptr -144h
var_80		= dword	ptr -80h
var_74		= word ptr -74h
var_68		= word ptr -68h
var_5C		= dword	ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 144h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_144]
		mov	ecx, 51h ; 'Q'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		cmp	dword ptr [ecx+30h], 8
		jge	short loc_1D2B
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	__UTF16ToUnicodeWithOffsets
		add	esp, 8
		jmp	loc_23A1
; ---------------------------------------------------------------------------

loc_1D2B:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+28j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		sub	ecx, [ebp+var_14]
		mov	[ebp+var_44], ecx
		jnz	short loc_1D59
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+2Ch], 0
		jnz	short loc_1D59
		jmp	loc_23A1
; ---------------------------------------------------------------------------

loc_1D59:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+5Dj
					; __UTF16LEToUnicodeWithOffsets+66j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		cmp	ecx, [eax+14h]
		jb	short loc_1D7B
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh
		jmp	loc_23A1
; ---------------------------------------------------------------------------

loc_1D7B:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+7Fj
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+14h]
		sub	edx, [ecx+10h]
		sar	edx, 1
		mov	[ebp+var_38], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+18h]
		mov	[ebp+var_2C], ecx
		mov	[ebp+var_5C], 0
		xor	eax, eax
		mov	[ebp+var_68], ax
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+2Ch], 0
		jz	short loc_1DC8
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx+2Ch]
		mov	[eax+25h], dl
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 1
		mov	eax, [ebp+var_8]
		mov	dword ptr [eax+2Ch], 0

loc_1DC8:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+BDj
		mov	eax, [ebp+var_8]
		movsx	ecx, byte ptr [eax+24h]
		mov	[ebp+var_50], ecx
		cmp	[ebp+var_50], 0
		jz	loc_2002
		mov	eax, [ebp+var_8]
		add	eax, 25h ; '%'
		mov	[ebp+var_80], eax

loc_1DE5:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+307j
		mov	eax, [ebp+var_80]
		add	eax, [ebp+var_50]
		mov	ecx, [ebp+var_14]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_50]
		add	eax, 1
		mov	[ebp+var_50], eax
		mov	ecx, [ebp+var_14]
		add	ecx, 1
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_5C]
		add	eax, 1
		mov	[ebp+var_5C], eax
		mov	eax, [ebp+var_44]
		sub	eax, 1
		mov	[ebp+var_44], eax
		cmp	[ebp+var_50], 2
		jnz	loc_1EAB
		mov	eax, [ebp+var_80]
		movzx	ecx, byte ptr [eax+1]
		shl	ecx, 8
		mov	edx, [ebp+var_80]
		movzx	eax, byte ptr [edx]
		or	ecx, eax
		mov	[ebp+var_68], cx
		movzx	eax, [ebp+var_68]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_1E8E
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		cmp	[ebp+var_2C], 0
		jz	short loc_1E71
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx

loc_1E71:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+171j
		mov	eax, [ebp+var_38]
		sub	eax, 1
		mov	[ebp+var_38], eax
		mov	[ebp+var_50], 0
		xor	eax, eax
		mov	[ebp+var_68], ax
		jmp	loc_1FF9
; ---------------------------------------------------------------------------
		jmp	short loc_1EA6
; ---------------------------------------------------------------------------

loc_1E8E:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+158j
		movzx	eax, [ebp+var_68]
		and	eax, 400h
		jnz	short loc_1EA1
		xor	eax, eax
		mov	[ebp+var_68], ax
		jmp	short loc_1EA6
; ---------------------------------------------------------------------------

loc_1EA1:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+1ABj
		jmp	loc_1FF9
; ---------------------------------------------------------------------------

loc_1EA6:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+1A0j
					; __UTF16LEToUnicodeWithOffsets+1B3j
		jmp	loc_1FEF
; ---------------------------------------------------------------------------

loc_1EAB:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+12Ej
		cmp	[ebp+var_50], 4
		jnz	loc_1FEF
		mov	eax, [ebp+var_80]
		movzx	ecx, byte ptr [eax+1]
		shl	ecx, 8
		mov	edx, [ebp+var_80]
		movzx	eax, byte ptr [edx]
		or	ecx, eax
		mov	[ebp+var_68], cx
		mov	eax, [ebp+var_80]
		movzx	ecx, byte ptr [eax+3]
		shl	ecx, 8
		mov	edx, [ebp+var_80]
		movzx	eax, byte ptr [edx+2]
		or	ecx, eax
		mov	[ebp+var_74], cx
		movzx	eax, [ebp+var_74]
		and	eax, 0FFFFFC00h
		cmp	eax, 0DC00h
		jnz	loc_1F8A
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		cmp	[ebp+var_38], 2
		jb	short loc_1F57
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_74]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		cmp	[ebp+var_2C], 0
		jz	short loc_1F4C
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+var_2C]
		mov	dword ptr [eax], 0FFFFFFFFh
		mov	ecx, [ebp+var_2C]
		add	ecx, 4
		mov	[ebp+var_2C], ecx

loc_1F4C:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+23Aj
		mov	eax, [ebp+var_38]
		sub	eax, 2
		mov	[ebp+var_38], eax
		jmp	short loc_1F79
; ---------------------------------------------------------------------------

loc_1F57:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+221j
		mov	[ebp+var_38], 0
		mov	eax, [ebp+var_8]
		mov	cx, [ebp+var_74]
		mov	[eax+74h], cx
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+41h], 1
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh

loc_1F79:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+269j
		mov	[ebp+var_50], 0
		xor	eax, eax
		mov	[ebp+var_68], ax
		jmp	short loc_1FF9
; ---------------------------------------------------------------------------
		jmp	short loc_1FEF
; ---------------------------------------------------------------------------

loc_1F8A:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+204j
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		sub	ecx, [ebp+var_14]
		cmp	ecx, 2
		jl	short loc_1FAC
		mov	eax, [ebp+var_14]
		sub	eax, 2
		mov	[ebp+var_14], eax
		jmp	short loc_1FC8
; ---------------------------------------------------------------------------

loc_1FAC:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+2B3j
		mov	eax, [ebp+var_80]
		movzx	ecx, byte ptr [eax+2]
		or	ecx, 100h
		mov	edx, [ebp+var_8]
		mov	[edx+2Ch], ecx
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	[ebp+var_14], eax

loc_1FC8:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+2BEj
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 2
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		mov	[eax+10h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+18h], ecx
		jmp	loc_23A1
; ---------------------------------------------------------------------------

loc_1FEF:				; CODE XREF: __UTF16LEToUnicodeWithOffsets:loc_1EA6j
					; __UTF16LEToUnicodeWithOffsets+1C3j ...
		cmp	[ebp+var_44], 0
		ja	loc_1DE5

loc_1FF9:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+19Bj
					; __UTF16LEToUnicodeWithOffsets:loc_1EA1j ...
		mov	eax, [ebp+var_8]
		mov	cl, byte ptr [ebp+var_50]
		mov	[eax+24h], cl

loc_2002:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+EAj
		mov	eax, [ebp+var_38]
		shl	eax, 1
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_50]
		cmp	eax, [ebp+var_44]
		jbe	short loc_201B
		mov	eax, [ebp+var_44]
		and	eax, 0FFFFFFFEh
		mov	[ebp+var_50], eax

loc_201B:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+324j
		movzx	eax, [ebp+var_68]
		test	eax, eax
		jnz	loc_225E
		cmp	[ebp+var_50], 0
		jbe	loc_225E
		mov	eax, [ebp+var_44]
		sub	eax, [ebp+var_50]
		mov	[ebp+var_44], eax
		mov	eax, [ebp+var_50]
		shr	eax, 1
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_38]
		sub	eax, [ebp+var_50]
		mov	[ebp+var_38], eax
		cmp	[ebp+var_2C], 0
		jnz	loc_2122

loc_2055:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+42Bj
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax+1]
		shl	ecx, 8
		mov	edx, [ebp+var_14]
		movzx	eax, byte ptr [edx]
		or	ecx, eax
		mov	[ebp+var_68], cx
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		movzx	eax, [ebp+var_68]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_2099
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		jmp	short loc_210E
; ---------------------------------------------------------------------------

loc_2099:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+396j
		movzx	eax, [ebp+var_68]
		and	eax, 400h
		jnz	short loc_210C
		cmp	[ebp+var_50], 2
		jb	short loc_210C
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax+1]
		shl	ecx, 8
		mov	edx, [ebp+var_14]
		movzx	eax, byte ptr [edx]
		or	ecx, eax
		mov	[ebp+var_74], cx
		movzx	ecx, [ebp+var_74]
		and	ecx, 0FFFFFC00h
		cmp	ecx, 0DC00h
		jnz	short loc_210C
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_74]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		jmp	short loc_210E
; ---------------------------------------------------------------------------

loc_210C:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+3B6j
					; __UTF16LEToUnicodeWithOffsets+3BCj ...
		jmp	short loc_211D
; ---------------------------------------------------------------------------

loc_210E:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+3ABj
					; __UTF16LEToUnicodeWithOffsets+41Ej
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		jnz	loc_2055

loc_211D:				; CODE XREF: __UTF16LEToUnicodeWithOffsets:loc_210Cj
		jmp	loc_223A
; ---------------------------------------------------------------------------

loc_2122:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+363j
					; __UTF16LEToUnicodeWithOffsets+548j
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax+1]
		shl	ecx, 8
		mov	edx, [ebp+var_14]
		movzx	eax, byte ptr [edx]
		or	ecx, eax
		mov	[ebp+var_68], cx
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		movzx	eax, [ebp+var_68]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_2183
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_5C]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_5C]
		add	eax, 2
		mov	[ebp+var_5C], eax
		jmp	loc_222B
; ---------------------------------------------------------------------------

loc_2183:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+463j
		movzx	eax, [ebp+var_68]
		and	eax, 400h
		jnz	loc_2229
		cmp	[ebp+var_50], 2
		jb	loc_2229
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax+1]
		shl	ecx, 8
		mov	edx, [ebp+var_14]
		movzx	eax, byte ptr [edx]
		or	ecx, eax
		mov	[ebp+var_74], cx
		movzx	ecx, [ebp+var_74]
		and	ecx, 0FFFFFC00h
		cmp	ecx, 0DC00h
		jnz	short loc_2229
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_74]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_5C]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_5C]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_5C]
		add	eax, 4
		mov	[ebp+var_5C], eax
		jmp	short loc_222B
; ---------------------------------------------------------------------------

loc_2229:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+4A0j
					; __UTF16LEToUnicodeWithOffsets+4AAj ...
		jmp	short loc_223A
; ---------------------------------------------------------------------------

loc_222B:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+492j
					; __UTF16LEToUnicodeWithOffsets+53Bj
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		jnz	loc_2122

loc_223A:				; CODE XREF: __UTF16LEToUnicodeWithOffsets:loc_211Dj
					; __UTF16LEToUnicodeWithOffsets:loc_2229j
		cmp	[ebp+var_50], 0
		jnz	short loc_2248
		xor	eax, eax
		mov	[ebp+var_68], ax
		jmp	short loc_225E
; ---------------------------------------------------------------------------

loc_2248:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+552j
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_44]
		lea	edx, [ecx+eax*2-2]
		mov	[ebp+var_44], edx
		mov	eax, [ebp+var_38]
		add	eax, [ebp+var_50]
		mov	[ebp+var_38], eax

loc_225E:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+335j
					; __UTF16LEToUnicodeWithOffsets+33Fj ...
		movzx	eax, [ebp+var_68]
		test	eax, eax
		jz	loc_233C
		mov	eax, [ebp+var_8]
		mov	cl, byte ptr [ebp+var_68]
		mov	[eax+25h], cl
		movzx	eax, [ebp+var_68]
		sar	eax, 8
		mov	ecx, [ebp+var_8]
		mov	[ecx+26h], al
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 2
		movzx	eax, [ebp+var_68]
		and	eax, 400h
		jnz	loc_2333
		cmp	[ebp+var_44], 2
		jb	loc_2331
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax+1]
		shl	ecx, 8
		mov	edx, [ebp+var_14]
		movzx	eax, byte ptr [edx]
		or	ecx, eax
		mov	[ebp+var_74], cx
		movzx	ecx, [ebp+var_74]
		and	ecx, 0FFFFFC00h
		cmp	ecx, 0DC00h
		jnz	short loc_2328
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_44]
		sub	eax, 2
		mov	[ebp+var_44], eax
		mov	eax, [ebp+var_20]
		mov	cx, [ebp+var_68]
		mov	[eax], cx
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		cmp	[ebp+var_2C], 0
		jz	short loc_2304
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+var_5C]
		mov	[eax], ecx
		mov	edx, [ebp+var_2C]
		add	edx, 4
		mov	[ebp+var_2C], edx

loc_2304:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+605j
		mov	eax, [ebp+var_8]
		mov	cx, [ebp+var_74]
		mov	[eax+74h], cx
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+41h], 1
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 0
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh
		jmp	short loc_2331
; ---------------------------------------------------------------------------

loc_2328:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+5DAj
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch

loc_2331:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+5AEj
					; __UTF16LEToUnicodeWithOffsets+63Aj
		jmp	short loc_233C
; ---------------------------------------------------------------------------

loc_2333:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+5A4j
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch

loc_233C:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+578j
					; __UTF16LEToUnicodeWithOffsets:loc_2331j
		mov	eax, [ebp+arg_4]
		cmp	dword ptr [eax], 0
		jg	short loc_2386
		cmp	[ebp+var_44], 0
		jbe	short loc_2386
		cmp	[ebp+var_38], 0
		jnz	short loc_235B
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh
		jmp	short loc_2386
; ---------------------------------------------------------------------------

loc_235B:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+662j
		mov	eax, [ebp+var_8]
		movsx	ecx, byte ptr [eax+24h]
		mov	edx, [ebp+var_8]
		mov	eax, [ebp+var_14]
		mov	al, [eax]
		mov	[edx+ecx+25h], al
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx+24h]
		add	dl, 1
		mov	eax, [ebp+var_8]
		mov	[eax+24h], dl
		mov	ecx, [ebp+var_14]
		add	ecx, 1
		mov	[ebp+var_14], ecx

loc_2386:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+656j
					; __UTF16LEToUnicodeWithOffsets+65Cj ...
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		mov	[eax+10h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+18h], ecx

loc_23A1:				; CODE XREF: __UTF16LEToUnicodeWithOffsets+3Aj
					; __UTF16LEToUnicodeWithOffsets+68j ...
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 144h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__UTF16LEToUnicodeWithOffsets endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 23B8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16LEGetNextUChar proc near		; CODE XREF: __UTF16GetNextUChar+5Bp
					; DATA XREF: .rdata:000001C8o

var_108		= byte ptr -108h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= word ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 108h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_108]
		mov	ecx, 42h ; 'B'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		cmp	dword ptr [ecx+30h], 8
		jge	short loc_23EC
		mov	eax, 0FFFFFFF7h
		jmp	loc_25A9
; ---------------------------------------------------------------------------

loc_23EC:				; CODE XREF: __UTF16LEGetNextUChar+28j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+var_14]
		jb	short loc_2419
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 8
		mov	eax, 0FFFFh
		jmp	loc_25A9
; ---------------------------------------------------------------------------

loc_2419:				; CODE XREF: __UTF16LEGetNextUChar+4Cj
		mov	eax, [ebp+var_8]
		add	eax, 2
		cmp	eax, [ebp+var_14]
		jbe	short loc_2461
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	edx, [ebp+var_8]
		mov	al, [edx]
		mov	[ecx+25h], al
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	byte ptr [ecx+24h], 1
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_8]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Bh
		mov	eax, 0FFFFh
		jmp	loc_25A9
; ---------------------------------------------------------------------------

loc_2461:				; CODE XREF: __UTF16LEGetNextUChar+6Aj
		mov	eax, [ebp+var_8]
		movzx	ecx, byte ptr [eax+1]
		shl	ecx, 8
		mov	edx, [ebp+var_8]
		movzx	eax, byte ptr [edx]
		or	ecx, eax
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+var_8]
		add	eax, 2
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_20]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jnz	loc_259D
		mov	eax, [ebp+var_20]
		and	eax, 400h
		jnz	loc_2553
		mov	eax, [ebp+var_8]
		add	eax, 2
		cmp	eax, [ebp+var_14]
		ja	short loc_24F9
		mov	eax, [ebp+var_8]
		movzx	ecx, byte ptr [eax+1]
		shl	ecx, 8
		mov	edx, [ebp+var_8]
		movzx	eax, byte ptr [edx]
		or	ecx, eax
		mov	[ebp+var_2C], cx
		movzx	eax, [ebp+var_2C]
		and	eax, 0FFFFFC00h
		cmp	eax, 0DC00h
		jnz	short loc_24F0
		mov	eax, [ebp+var_20]
		shl	eax, 0Ah
		movzx	ecx, [ebp+var_2C]
		lea	edx, [eax+ecx-35FDC00h]
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_8]
		add	eax, 2
		mov	[ebp+var_8], eax
		jmp	short loc_24F7
; ---------------------------------------------------------------------------

loc_24F0:				; CODE XREF: __UTF16LEGetNextUChar+117j
		mov	[ebp+var_20], 0FFFFFFFEh

loc_24F7:				; CODE XREF: __UTF16LEGetNextUChar+136j
		jmp	short loc_2551
; ---------------------------------------------------------------------------

loc_24F9:				; CODE XREF: __UTF16LEGetNextUChar+F1j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		add	ecx, 25h ; '%'
		mov	[ebp+var_38], ecx
		mov	eax, [ebp+var_8]
		sub	eax, 2
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_14]
		sub	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+4]
		mov	[edx+24h], al

loc_251D:				; CODE XREF: __UTF16LEGetNextUChar+187j
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_38]
		add	eax, 1
		mov	[ebp+var_38], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+var_14]
		jb	short loc_251D
		mov	[ebp+var_20], 0FFFFh
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Bh

loc_2551:				; CODE XREF: __UTF16LEGetNextUChar:loc_24F7j
		jmp	short loc_255A
; ---------------------------------------------------------------------------

loc_2553:				; CODE XREF: __UTF16LEGetNextUChar+E2j
		mov	[ebp+var_20], 0FFFFFFFEh

loc_255A:				; CODE XREF: __UTF16LEGetNextUChar:loc_2551j
		cmp	[ebp+var_20], 0
		jge	short loc_259D
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		add	ecx, 25h ; '%'
		mov	[ebp+var_44], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	byte ptr [ecx+24h], 2
		mov	eax, [ebp+var_44]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx-2]
		mov	[eax], dl
		mov	eax, [ebp+var_44]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx-1]
		mov	[eax+1], dl
		mov	[ebp+var_20], 0FFFFh
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch

loc_259D:				; CODE XREF: __UTF16LEGetNextUChar+D4j
					; __UTF16LEGetNextUChar+1A6j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_8]
		mov	[eax+8], ecx
		mov	eax, [ebp+var_20]

loc_25A9:				; CODE XREF: __UTF16LEGetNextUChar+2Fj
					; __UTF16LEGetNextUChar+5Cj ...
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__UTF16LEGetNextUChar endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 25B0h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16LEReset	proc near		; CODE XREF: __UTF16LEOpen+32p
					; DATA XREF: .rdata:000001B4o

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_4], 1
		jg	short loc_25F5
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		jnz	short loc_25EB
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+30h], 8
		jmp	short loc_25F5
; ---------------------------------------------------------------------------

loc_25EB:				; CODE XREF: __UTF16LEReset+2Dj
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+30h], 0

loc_25F5:				; CODE XREF: __UTF16LEReset+22j
					; __UTF16LEReset+39j
		cmp	[ebp+arg_4], 1
		jz	short loc_2613
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		cmp	ecx, 1
		jnz	short loc_2613
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+34h], 1

loc_2613:				; CODE XREF: __UTF16LEReset+49j
					; __UTF16LEReset+57j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__UTF16LEReset	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 261Ch
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16LEOpen	proc near		; DATA XREF: .rdata:000001ACo

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		cmp	ecx, 1
		ja	short loc_2658
		push	0
		mov	eax, [ebp+arg_0]
		push	eax
		call	__UTF16LEReset
		add	esp, 8
		jmp	short loc_2661
; ---------------------------------------------------------------------------

loc_2658:				; CODE XREF: __UTF16LEOpen+2Aj
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 1

loc_2661:				; CODE XREF: __UTF16LEOpen+3Aj
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__UTF16LEOpen	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 2678h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16LEGetName proc near		; DATA XREF: .rdata:000001D0o

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		jnz	short loc_26AA
		mov	eax, offset ??_C@_08NBDJLNFA@UTF?916LE?$AA@ ; "UTF-16LE"
		jmp	short loc_26AF
; ---------------------------------------------------------------------------
		jmp	short loc_26AF
; ---------------------------------------------------------------------------

loc_26AA:				; CODE XREF: __UTF16LEGetName+27j
		mov	eax, offset ??_C@_0BD@MAFHNOBF@UTF?916LE?0version?$DN1?$AA@ ; "UTF-16LE,version=1"

loc_26AF:				; CODE XREF: __UTF16LEGetName+2Ej
					; __UTF16LEGetName+30j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__UTF16LEGetName endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 26B8h
		public ??_C@_0BD@MAFHNOBF@UTF?916LE?0version?$DN1?$AA@
; `string'
??_C@_0BD@MAFHNOBF@UTF?916LE?0version?$DN1?$AA@	db 'UTF-16LE,version=1',0
					; DATA XREF: __UTF16LEGetName:loc_26AAo
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 26CCh
		public ??_C@_08NBDJLNFA@UTF?916LE?$AA@
; `string'
??_C@_08NBDJLNFA@UTF?916LE?$AA@	db 'UTF-16LE',0 ; DATA XREF: __UTF16LEGetName+29o
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 26D8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16Reset	proc near		; CODE XREF: __UTF16Open+83p
					; DATA XREF: .rdata:0000034Co ...

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_4], 1
		jg	short loc_2706
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+30h], 0

loc_2706:				; CODE XREF: __UTF16Reset+22j
		cmp	[ebp+arg_4], 1
		jz	short loc_2716
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+34h], 1

loc_2716:				; CODE XREF: __UTF16Reset+32j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__UTF16Reset	endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 2720h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16Open	proc near		; DATA XREF: .rdata:00000344o
					; .rdata:000004DCo

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		cmp	ecx, 2
		ja	short loc_27AD
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		cmp	ecx, 2
		jnz	short loc_279D
		mov	eax, [ebp+arg_4]
		movsx	ecx, byte ptr [eax+8]
		test	ecx, ecx
		jnz	short loc_279D
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+18h], offset __UTF16v2Data
		push	1
		mov	eax, off_58C
		add	eax, 48h ; 'H'
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		push	4		; Size
		mov	ecx, off_58C
		add	ecx, 48h ; 'H'
		push	ecx		; Src
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+14h]
		push	eax		; Dst
		call	_memcpy
		add	esp, 0Ch

loc_279D:				; CODE XREF: __UTF16Open+38j
					; __UTF16Open+43j
		push	0
		mov	eax, [ebp+arg_0]
		push	eax
		call	__UTF16Reset
		add	esp, 8
		jmp	short loc_27B6
; ---------------------------------------------------------------------------

loc_27AD:				; CODE XREF: __UTF16Open+2Aj
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 1

loc_27B6:				; CODE XREF: __UTF16Open+8Bj
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__UTF16Open	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 27CCh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16GetName	proc near		; DATA XREF: .rdata:00000368o
					; .rdata:00000500o

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		jnz	short loc_27FE
		mov	eax, offset ??_C@_06KNDPGIKI@UTF?916?$AA@ ; "UTF-16"
		jmp	short loc_281A
; ---------------------------------------------------------------------------
		jmp	short loc_281A
; ---------------------------------------------------------------------------

loc_27FE:				; CODE XREF: __UTF16GetName+27j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		cmp	ecx, 1
		jnz	short loc_2815
		mov	eax, offset ??_C@_0BB@HAPLKFNG@UTF?916?0version?$DN1?$AA@ ; "UTF-16,version=1"
		jmp	short loc_281A
; ---------------------------------------------------------------------------
		jmp	short loc_281A
; ---------------------------------------------------------------------------

loc_2815:				; CODE XREF: __UTF16GetName+3Ej
		mov	eax, offset ??_C@_0BB@FLNGPGBF@UTF?916?0version?$DN2?$AA@ ; "UTF-16,version=2"

loc_281A:				; CODE XREF: __UTF16GetName+2Ej
					; __UTF16GetName+30j ...
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__UTF16GetName	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 2824h
		public ??_C@_0BB@FLNGPGBF@UTF?916?0version?$DN2?$AA@
; `string'
??_C@_0BB@FLNGPGBF@UTF?916?0version?$DN2?$AA@ db 'UTF-16,version=2',0
					; DATA XREF: __UTF16GetName:loc_2815o
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 2838h
		public ??_C@_0BB@HAPLKFNG@UTF?916?0version?$DN1?$AA@
; `string'
??_C@_0BB@HAPLKFNG@UTF?916?0version?$DN1?$AA@ db 'UTF-16,version=1',0
					; DATA XREF: __UTF16GetName+40o
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 284Ch
		public ??_C@_06KNDPGIKI@UTF?916?$AA@
; `string'
??_C@_06KNDPGIKI@UTF?916?$AA@ db 'UTF-16',0 ; DATA XREF: __UTF16GetName+29o
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 2854h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16ToUnicodeWithOffsets proc near	; CODE XREF: __UTF16BEToUnicodeWithOffsets+32p
					; __UTF16LEToUnicodeWithOffsets+32p
					; DATA XREF: ...

var_124		= dword	ptr -124h
var_5C		= dword	ptr -5Ch
var_4D		= byte ptr -4Dh
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 124h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_124]
		mov	ecx, 49h ; 'I'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+18h]
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+var_8]
		mov	ecx, [eax+30h]
		mov	[ebp+var_38], ecx
		mov	[ebp+var_44], 0

loc_28A6:				; CODE XREF: __UTF16ToUnicodeWithOffsets+202j
					; __UTF16ToUnicodeWithOffsets:$LN33j
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+var_20]
		jnb	loc_2AA6
		mov	eax, [ebp+arg_4]
		cmp	dword ptr [eax], 0
		jg	loc_2AA6
		mov	eax, [ebp+var_38]
		mov	[ebp+var_124], eax
		cmp	[ebp+var_124], 9 ; switch 10 cases
		ja	$LN33		; jumptable 000028E1 default case
		mov	ecx, [ebp+var_124]
		movzx	edx, ds:$LN40[ecx]
		jmp	ds:$LN41_1[edx*4] ; switch jump
; ---------------------------------------------------------------------------

$LN32:					; CODE XREF: __UTF16ToUnicodeWithOffsets+8Dj
					; DATA XREF: .text:$LN41_1o
		mov	eax, [ebp+var_8] ; jumptable 000028E1 case 0
		mov	ecx, [ebp+var_14]
		mov	dl, [ecx]
		mov	[eax+25h], dl
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 1
		mov	[ebp+var_38], 1
		jmp	$LN33		; jumptable 000028E1 default case
; ---------------------------------------------------------------------------

$LN31:					; CODE XREF: __UTF16ToUnicodeWithOffsets+8Dj
					; DATA XREF: .text:$LN41_1o
		mov	eax, [ebp+var_14] ; jumptable 000028E1 case 1
		mov	cl, [eax]
		mov	[ebp+var_4D], cl
		mov	eax, [ebp+var_8]
		movzx	ecx, byte ptr [eax+25h]
		cmp	ecx, 0FEh ; ''
		jnz	short loc_294F
		movzx	eax, [ebp+var_4D]
		cmp	eax, 0FFh
		jnz	short loc_294F
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+18h], offset __UTF16LEData_56
		jnz	short loc_2946
		mov	[ebp+var_38], 7
		jmp	short loc_294D
; ---------------------------------------------------------------------------

loc_2946:				; CODE XREF: __UTF16ToUnicodeWithOffsets+E7j
		mov	[ebp+var_38], 8

loc_294D:				; CODE XREF: __UTF16ToUnicodeWithOffsets+F0j
		jmp	short loc_29B4
; ---------------------------------------------------------------------------

loc_294F:				; CODE XREF: __UTF16ToUnicodeWithOffsets+D0j
					; __UTF16ToUnicodeWithOffsets+DBj
		mov	eax, [ebp+var_8]
		movzx	ecx, byte ptr [eax+25h]
		cmp	ecx, 0FFh
		jnz	short loc_2987
		movzx	eax, [ebp+var_4D]
		cmp	eax, 0FEh ; ''
		jnz	short loc_2987
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+18h], offset __UTF16BEData_56
		jnz	short loc_297E
		mov	[ebp+var_38], 6
		jmp	short loc_2985
; ---------------------------------------------------------------------------

loc_297E:				; CODE XREF: __UTF16ToUnicodeWithOffsets+11Fj
		mov	[ebp+var_38], 9

loc_2985:				; CODE XREF: __UTF16ToUnicodeWithOffsets+128j
		jmp	short loc_29B4
; ---------------------------------------------------------------------------

loc_2987:				; CODE XREF: __UTF16ToUnicodeWithOffsets+108j
					; __UTF16ToUnicodeWithOffsets+113j
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+18h], offset __UTF16Data_56
		jz	short loc_299F
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+18h], offset __UTF16v2Data
		jnz	short loc_29B4

loc_299F:				; CODE XREF: __UTF16ToUnicodeWithOffsets+13Dj
		mov	eax, [ebp+var_8]
		mov	ecx, [eax+1Ch]
		and	ecx, 0Fh
		cmp	ecx, 1
		jnz	short loc_29B4
		mov	[ebp+var_38], 6

loc_29B4:				; CODE XREF: __UTF16ToUnicodeWithOffsets:loc_294Dj
					; __UTF16ToUnicodeWithOffsets:loc_2985j ...
		cmp	[ebp+var_38], 8
		jl	short loc_29D8
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 0
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		sub	ecx, [eax+8]
		mov	[ebp+var_44], ecx
		jmp	short loc_2A4D
; ---------------------------------------------------------------------------

loc_29D8:				; CODE XREF: __UTF16ToUnicodeWithOffsets+164j
		cmp	[ebp+var_38], 6
		jge	short loc_2A17
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		cmp	ecx, [eax+8]
		jz	short loc_29F9
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 0

loc_29F9:				; CODE XREF: __UTF16ToUnicodeWithOffsets+193j
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+18h], offset __UTF16LEData_56
		jnz	short loc_2A0E
		mov	[ebp+var_38], 9
		jmp	short loc_2A15
; ---------------------------------------------------------------------------

loc_2A0E:				; CODE XREF: __UTF16ToUnicodeWithOffsets+1AFj
		mov	[ebp+var_38], 8

loc_2A15:				; CODE XREF: __UTF16ToUnicodeWithOffsets+1B8j
		jmp	short loc_2A4D
; ---------------------------------------------------------------------------

loc_2A17:				; CODE XREF: __UTF16ToUnicodeWithOffsets+188j
		mov	eax, [ebp+var_8]
		mov	cl, [ebp+var_4D]
		mov	[eax+26h], cl
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 2
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	ecx, [ebp+arg_0]
		mov	[ecx+8], eax
		mov	eax, [ebp+var_38]
		add	eax, 2
		mov	ecx, [ebp+var_8]
		mov	[ecx+30h], eax
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 12h
		jmp	loc_2B41
; ---------------------------------------------------------------------------

loc_2A4D:				; CODE XREF: __UTF16ToUnicodeWithOffsets+182j
					; __UTF16ToUnicodeWithOffsets:loc_2A15j
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+var_38]
		mov	[eax+30h], ecx
		jmp	loc_28A6
; ---------------------------------------------------------------------------

$LN13:					; CODE XREF: __UTF16ToUnicodeWithOffsets+8Dj
					; DATA XREF: .text:$LN41_1o
		mov	eax, [ebp+arg_0] ; jumptable 000028E1 case 8
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	__UTF16BEToUnicodeWithOffsets
		add	esp, 8
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_14], ecx
		jmp	short $LN33	; jumptable 000028E1 default case
; ---------------------------------------------------------------------------

$LN12:					; CODE XREF: __UTF16ToUnicodeWithOffsets+8Dj
					; DATA XREF: .text:$LN41_1o
		mov	eax, [ebp+arg_0] ; jumptable 000028E1 case 9
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	__UTF16LEToUnicodeWithOffsets
		add	esp, 8
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_14], ecx

$LN33:					; CODE XREF: __UTF16ToUnicodeWithOffsets+7Aj
					; __UTF16ToUnicodeWithOffsets+8Dj ...
		jmp	loc_28A6	; jumptable 000028E1 default case
; ---------------------------------------------------------------------------

loc_2AA6:				; CODE XREF: __UTF16ToUnicodeWithOffsets+58j
					; __UTF16ToUnicodeWithOffsets+64j
		cmp	[ebp+var_2C], 0
		jz	short loc_2ADB
		cmp	[ebp+var_44], 0
		jz	short loc_2ADB
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+18h]
		mov	[ebp+var_5C], ecx

loc_2ABB:				; CODE XREF: __UTF16ToUnicodeWithOffsets+285j
		mov	eax, [ebp+var_2C]
		cmp	eax, [ebp+var_5C]
		jnb	short loc_2ADB
		mov	eax, [ebp+var_2C]
		mov	ecx, [eax]
		add	ecx, [ebp+var_44]
		mov	edx, [ebp+var_2C]
		mov	[edx], ecx
		mov	eax, [ebp+var_2C]
		add	eax, 4
		mov	[ebp+var_2C], eax
		jmp	short loc_2ABB
; ---------------------------------------------------------------------------

loc_2ADB:				; CODE XREF: __UTF16ToUnicodeWithOffsets+256j
					; __UTF16ToUnicodeWithOffsets+25Cj ...
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+var_20]
		jnz	short loc_2B38
		mov	eax, [ebp+arg_0]
		movsx	ecx, byte ptr [eax+2]
		test	ecx, ecx
		jz	short loc_2B38
		mov	eax, [ebp+var_38]
		mov	[ebp+var_124], eax
		cmp	[ebp+var_124], 8
		jz	short loc_2B16
		cmp	[ebp+var_124], 9
		jz	short loc_2B28
		jmp	short loc_2B38
; ---------------------------------------------------------------------------
		jmp	short loc_2B38
; ---------------------------------------------------------------------------

loc_2B16:				; CODE XREF: __UTF16ToUnicodeWithOffsets+2B3j
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	__UTF16BEToUnicodeWithOffsets
		add	esp, 8
		jmp	short loc_2B38
; ---------------------------------------------------------------------------

loc_2B28:				; CODE XREF: __UTF16ToUnicodeWithOffsets+2BCj
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	__UTF16LEToUnicodeWithOffsets
		add	esp, 8

loc_2B38:				; CODE XREF: __UTF16ToUnicodeWithOffsets+296j
					; __UTF16ToUnicodeWithOffsets+2A1j ...
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+var_38]
		mov	[eax+30h], ecx

loc_2B41:				; CODE XREF: __UTF16ToUnicodeWithOffsets+1F4j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 124h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__UTF16ToUnicodeWithOffsets endp

; ---------------------------------------------------------------------------
		align 4
$LN41_1		dd offset $LN32		; DATA XREF: __UTF16ToUnicodeWithOffsets+8Dr
		dd offset $LN31		; jump table for switch	statement
		dd offset $LN13
		dd offset $LN12
		dd offset $LN33
$LN40		db	0,     1,     4,     4 ; DATA XREF: __UTF16ToUnicodeWithOffsets+86r
		db	4,     4,     4,     4 ; indirect table	for switch statement
		db	2,     3
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 2B78h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__UTF16GetNextUChar proc near		; DATA XREF: .rdata:00000360o
					; .rdata:000004F8o

var_C4		= dword	ptr -0C4h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0C4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C4]
		mov	ecx, 31h ; '1'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	edx, [ecx+30h]
		mov	[ebp+var_C4], edx
		cmp	[ebp+var_C4], 8
		jz	short loc_2BB9
		cmp	[ebp+var_C4], 9
		jz	short loc_2BCB
		jmp	short loc_2BDD
; ---------------------------------------------------------------------------

loc_2BB9:				; CODE XREF: __UTF16GetNextUChar+34j
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	__UTF16BEGetNextUChar
		add	esp, 8
		jmp	short loc_2BE2
; ---------------------------------------------------------------------------

loc_2BCB:				; CODE XREF: __UTF16GetNextUChar+3Dj
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+arg_0]
		push	ecx
		call	__UTF16LEGetNextUChar
		add	esp, 8
		jmp	short loc_2BE2
; ---------------------------------------------------------------------------

loc_2BDD:				; CODE XREF: __UTF16GetNextUChar+3Fj
		mov	eax, 0FFFFFFF7h

loc_2BE2:				; CODE XREF: __UTF16GetNextUChar+51j
					; __UTF16GetNextUChar+63j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C4h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__UTF16GetNextUChar endp

_text		ends

; ===========================================================================

; Segment type:	Externs
; UNDEF
		extrn _ucnv_getNonSurrogateUnicodeSet_56:near ;	DATA XREF: .rdata:00000044o
					; .rdata:000001DCo ...
		extrn _ucnv_fromUWriteBytes_56:near
					; CODE XREF: __UTF16BEFromUnicodeWithOffsets+74p
					; __UTF16BEFromUnicodeWithOffsets+58Fp	...
		extrn __RTC_CheckEsp:near ; CODE XREF: __UTF16BEFromUnicodeWithOffsets+5FCp
					; __UTF16BEToUnicodeWithOffsets+6BDp ...
; __fastcall _RTC_CheckStackVars(x, x)
		extrn @_RTC_CheckStackVars@8:near
					; CODE XREF: __UTF16BEFromUnicodeWithOffsets+5EAp
					; __UTF16LEFromUnicodeWithOffsets+5EDp
		extrn __RTC_Shutdown:near ; DATA XREF: .rtc$TMZ:__RTC_Shutdown_rtc$TMZo
		extrn __RTC_InitBase:near ; DATA XREF: .rtc$IMZ:__RTC_InitBase_rtc$IMZo
; void *__cdecl	memcpy(void *Dst, const	void *Src, size_t Size)
		extrn _memcpy:near	; CODE XREF: __UTF16Open+75p
		extrn _uprv_checkValidMemory:near ; CODE XREF: __UTF16Open+5Ap


		end
