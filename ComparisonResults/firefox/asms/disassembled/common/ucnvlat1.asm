;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2015 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-3677-7074-51			    |
; |		Michalis Polychronakis,	Stony Brook University		    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	57C9FED0AEFC41790BEEC64E81F21B89
; Input	CRC32 :	D1D6EC4F

; File Name   :	D:\compspace\objfiles\firefox\common\ucnvlat1.obj
; Format      :	COFF (X386MAGIC)
; includelib "msvcprtd"
; includelib "MSVCRTD"
; includelib "OLDNAMES"

		.686p
		.mmx
		.model flat
.intel_syntax noprefix

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
; Segment alignment 'qword' can not be represented in assembly
_rdata		segment	para public 'DATA' use32
		assume cs:_rdata
__Latin1Impl	dd 3, 5	dup(0)		; DATA XREF: .rdata:000000C4o
		dd offset __Latin1ToUnicodeWithOffsets
		dd offset __Latin1ToUnicodeWithOffsets
		dd offset __Latin1FromUnicodeWithOffsets
		dd offset __Latin1FromUnicodeWithOffsets
		dd offset __Latin1GetNextUChar
		dd 4 dup(0)
		dd offset __Latin1GetUnicodeSet
		dd 0
		dd offset _ucnv_Latin1FromUTF8
__Latin1StaticData dd offset dword_64	; DATA XREF: .rdata:000000BCo
aIso88591	db 'ISO-8859-1',0
		align 4
		dd 3 dup(0)
dword_64	dd 9 dup(0)		; DATA XREF: .rdata:__Latin1StaticDatao
					; .rdata:__ASCIIStaticDatao
		dd offset loc_32F+4
		dd 1010300h, 1Ah, 1, 6 dup(0)
		public __Latin1Data_56
__Latin1Data_56	dd offset dword_E4	; DATA XREF: __Latin1FromUnicodeWithOffsets+63o
		dd 0FFFFFFFFh, 0
		dd offset __Latin1StaticData
		dd 0
		dd offset __Latin1Impl
		dd 7 dup(0)
dword_E4	dd 2Dh dup(0)		; DATA XREF: .rdata:__Latin1Data_56o
					; .rdata:__ASCIIData_56o
__ASCIIImpl	dd 1Ah,	5 dup(0)	; DATA XREF: .rdata:0000025Co
		dd offset __ASCIIToUnicodeWithOffsets
		dd offset __ASCIIToUnicodeWithOffsets
		dd offset __Latin1FromUnicodeWithOffsets
		dd offset __Latin1FromUnicodeWithOffsets
		dd offset __ASCIIGetNextUChar
		dd 4 dup(0)
		dd offset __ASCIIGetUnicodeSet
		dd 0
		dd offset _ucnv_ASCIIFromUTF8
__ASCIIStaticData dd offset dword_64	; DATA XREF: .rdata:00000254o
aUsAscii	db 'US-ASCII',0
		align 10h
		dd 0Ch dup(0)
		dd offset dword_E4+8Bh
		dd 1011A00h, 1Ah, 1, 6 dup(0)
		public __ASCIIData_56
__ASCIIData_56	dd offset dword_E4
		dd 0FFFFFFFFh, 0
		dd offset __ASCIIStaticData
		dd 0
		dd offset __ASCIIImpl
		dd 33h dup(0)
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 32Ch
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__Latin1ToUnicodeWithOffsets proc near	; DATA XREF: .rdata:00000018o
					; .rdata:0000001Co

var_120		= byte ptr -120h
var_5C		= dword	ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp

loc_32F:				; DATA XREF: .rdata:00000088o
		sub	esp, 120h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_120]
		mov	ecx, 48h ; 'H'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+14h]
		sub	edx, [ecx+10h]
		sar	edx, 1
		mov	[ebp+var_20], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+18h]
		mov	[ebp+var_38], ecx
		mov	[ebp+var_44], 0
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		sub	ecx, [ebp+var_8]
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+var_2C]
		cmp	eax, [ebp+var_20]
		jg	short loc_399
		mov	eax, [ebp+var_2C]
		mov	[ebp+var_20], eax
		jmp	short loc_3A8
; ---------------------------------------------------------------------------

loc_399:				; CODE XREF: __Latin1ToUnicodeWithOffsets+63j
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh
		mov	eax, [ebp+var_20]
		mov	[ebp+var_2C], eax

loc_3A8:				; CODE XREF: __Latin1ToUnicodeWithOffsets+6Bj
		cmp	[ebp+var_20], 8
		jl	loc_520
		mov	eax, [ebp+var_20]
		sar	eax, 3
		mov	[ebp+var_50], eax
		mov	ecx, [ebp+var_50]
		mov	[ebp+var_5C], ecx
		mov	eax, [ebp+var_20]
		and	eax, 7
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_20]
		mov	[ebp+var_2C], ecx

loc_3D0:				; CODE XREF: __Latin1ToUnicodeWithOffsets+139j
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax]
		mov	edx, [ebp+var_14]
		mov	[edx], cx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+1]
		mov	edx, [ebp+var_14]
		mov	[edx+2], cx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+2]
		mov	edx, [ebp+var_14]
		mov	[edx+4], cx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+3]
		mov	edx, [ebp+var_14]
		mov	[edx+6], cx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+4]
		mov	edx, [ebp+var_14]
		mov	[edx+8], cx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+5]
		mov	edx, [ebp+var_14]
		mov	[edx+0Ah], cx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+6]
		mov	edx, [ebp+var_14]
		mov	[edx+0Ch], cx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+7]
		mov	edx, [ebp+var_14]
		mov	[edx+0Eh], cx
		mov	eax, [ebp+var_14]
		add	eax, 10h
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_8]
		add	eax, 8
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		cmp	[ebp+var_50], 0
		jg	loc_3D0
		cmp	[ebp+var_38], 0
		jz	loc_520

loc_475:				; CODE XREF: __Latin1ToUnicodeWithOffsets+1EEj
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_44]
		mov	[eax], ecx
		mov	edx, [ebp+var_44]
		add	edx, 1
		mov	[ebp+var_44], edx
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_44]
		mov	[eax+4], ecx
		mov	edx, [ebp+var_44]
		add	edx, 1
		mov	[ebp+var_44], edx
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_44]
		mov	[eax+8], ecx
		mov	edx, [ebp+var_44]
		add	edx, 1
		mov	[ebp+var_44], edx
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_44]
		mov	[eax+0Ch], ecx
		mov	edx, [ebp+var_44]
		add	edx, 1
		mov	[ebp+var_44], edx
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_44]
		mov	[eax+10h], ecx
		mov	edx, [ebp+var_44]
		add	edx, 1
		mov	[ebp+var_44], edx
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_44]
		mov	[eax+14h], ecx
		mov	edx, [ebp+var_44]
		add	edx, 1
		mov	[ebp+var_44], edx
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_44]
		mov	[eax+18h], ecx
		mov	edx, [ebp+var_44]
		add	edx, 1
		mov	[ebp+var_44], edx
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_44]
		mov	[eax+1Ch], ecx
		mov	edx, [ebp+var_44]
		add	edx, 1
		mov	[ebp+var_44], edx
		mov	eax, [ebp+var_38]
		add	eax, 20h ; ' '
		mov	[ebp+var_38], eax
		mov	eax, [ebp+var_5C]
		sub	eax, 1
		mov	[ebp+var_5C], eax
		cmp	[ebp+var_5C], 0
		jg	loc_475

loc_520:				; CODE XREF: __Latin1ToUnicodeWithOffsets+80j
					; __Latin1ToUnicodeWithOffsets+143j ...
		cmp	[ebp+var_20], 0
		jle	short loc_550
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax]
		mov	edx, [ebp+var_14]
		mov	[edx], cx
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		sub	eax, 1
		mov	[ebp+var_20], eax
		jmp	short loc_520
; ---------------------------------------------------------------------------

loc_550:				; CODE XREF: __Latin1ToUnicodeWithOffsets+1F8j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_8]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		mov	[eax+10h], ecx
		cmp	[ebp+var_38], 0
		jz	short loc_59C

loc_568:				; CODE XREF: __Latin1ToUnicodeWithOffsets+265j
		cmp	[ebp+var_2C], 0
		jle	short loc_593
		mov	eax, [ebp+var_38]
		mov	ecx, [ebp+var_44]
		mov	[eax], ecx
		mov	edx, [ebp+var_38]
		add	edx, 4
		mov	[ebp+var_38], edx
		mov	eax, [ebp+var_44]
		add	eax, 1
		mov	[ebp+var_44], eax
		mov	eax, [ebp+var_2C]
		sub	eax, 1
		mov	[ebp+var_2C], eax
		jmp	short loc_568
; ---------------------------------------------------------------------------

loc_593:				; CODE XREF: __Latin1ToUnicodeWithOffsets+240j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_38]
		mov	[eax+18h], ecx

loc_59C:				; CODE XREF: __Latin1ToUnicodeWithOffsets+23Aj
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__Latin1ToUnicodeWithOffsets endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$TMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$TMZ
		;org 5A4h
__RTC_Shutdown_rtc$TMZ dd offset __RTC_Shutdown
_rtc$TMZ	ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$IMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$IMZ
		;org 5A8h
__RTC_InitBase_rtc$IMZ dd offset __RTC_InitBase
_rtc$IMZ	ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 5ACh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__Latin1GetNextUChar proc near		; DATA XREF: .rdata:00000028o

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_8]
		cmp	ecx, [eax+0Ch]
		jnb	short loc_5F2
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	ecx, [ebp+arg_0]
		mov	[ecx+8], eax
		mov	eax, [ebp+var_8]
		movzx	eax, byte ptr [eax]
		jmp	short loc_600
; ---------------------------------------------------------------------------

loc_5F2:				; CODE XREF: __Latin1GetNextUChar+30j
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 8
		mov	eax, 0FFFFh

loc_600:				; CODE XREF: __Latin1GetNextUChar+44j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__Latin1GetNextUChar endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 608h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__Latin1FromUnicodeWithOffsets proc near ; DATA	XREF: .rdata:00000020o
					; .rdata:00000024o ...

var_19C		= dword	ptr -19Ch
var_D4		= dword	ptr -0D4h
var_C8		= word ptr -0C8h
var_BC		= word ptr -0BCh
var_B0		= word ptr -0B0h
var_A4		= dword	ptr -0A4h
var_98		= dword	ptr -98h
var_8C		= dword	ptr -8Ch
var_80		= word ptr -80h
var_74		= word ptr -74h
var_68		= dword	ptr -68h
var_5C		= dword	ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 19Ch
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_19C]
		mov	ecx, 67h ; 'g'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		mov	[ebp+var_38], ecx
		mov	edx, [ebp+var_38]
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+14h]
		sub	edx, [ecx+10h]
		mov	[ebp+var_44], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+18h]
		mov	[ebp+var_5C], ecx
		mov	eax, [ebp+var_8]
		cmp	dword ptr [eax+18h], offset __Latin1Data_56
		jnz	short loc_67F
		mov	eax, 0FFh
		mov	[ebp+var_80], ax
		jmp	short loc_688
; ---------------------------------------------------------------------------

loc_67F:				; CODE XREF: __Latin1FromUnicodeWithOffsets+6Aj
		mov	eax, 7Fh ; ''
		mov	[ebp+var_80], ax

loc_688:				; CODE XREF: __Latin1FromUnicodeWithOffsets+75j
		mov	eax, [ebp+var_8]
		mov	ecx, [eax+38h]
		mov	[ebp+var_68], ecx
		mov	eax, [ebp+var_68]
		neg	eax
		sbb	eax, eax
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_20]
		sub	eax, [ebp+var_14]
		sar	eax, 1
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_50]
		cmp	eax, [ebp+var_44]
		jge	short loc_6B7
		mov	eax, [ebp+var_50]
		mov	[ebp+var_44], eax

loc_6B7:				; CODE XREF: __Latin1FromUnicodeWithOffsets+A7j
		cmp	[ebp+var_68], 0
		jz	short loc_6C8
		cmp	[ebp+var_44], 0
		jle	short loc_6C8
		jmp	$getTrail$7814
; ---------------------------------------------------------------------------

loc_6C8:				; CODE XREF: __Latin1FromUnicodeWithOffsets+B3j
					; __Latin1FromUnicodeWithOffsets+B9j
		cmp	[ebp+var_44], 10h
		jl	loc_DBD
		mov	eax, [ebp+var_44]
		sar	eax, 4
		mov	[ebp+var_98], eax
		mov	ecx, [ebp+var_98]
		mov	[ebp+var_A4], ecx

loc_6EA:				; CODE XREF: __Latin1FromUnicodeWithOffsets+522j
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		mov	dx, [ebp+var_B0]
		mov	[ebp+var_BC], dx
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_B0], cx
		movzx	edx, [ebp+var_B0]
		movzx	eax, [ebp+var_BC]
		or	eax, edx
		mov	[ebp+var_BC], ax
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_B0]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		movzx	eax, [ebp+var_BC]
		movzx	ecx, [ebp+var_80]
		cmp	eax, ecx
		jle	short loc_B14
		mov	eax, [ebp+var_14]
		sub	eax, 20h ; ' '
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_2C]
		sub	eax, 10h
		mov	[ebp+var_2C], eax
		jmp	short loc_B30
; ---------------------------------------------------------------------------

loc_B14:				; CODE XREF: __Latin1FromUnicodeWithOffsets+4F6j
		mov	eax, [ebp+var_98]
		sub	eax, 1
		mov	[ebp+var_98], eax
		cmp	[ebp+var_98], 0
		jg	loc_6EA

loc_B30:				; CODE XREF: __Latin1FromUnicodeWithOffsets+50Aj
		mov	eax, [ebp+var_A4]
		sub	eax, [ebp+var_98]
		mov	[ebp+var_98], eax
		mov	eax, [ebp+var_98]
		shl	eax, 4
		mov	ecx, [ebp+var_44]
		sub	ecx, eax
		mov	[ebp+var_44], ecx
		cmp	[ebp+var_5C], 0
		jz	loc_DBD
		mov	eax, [ebp+var_98]
		shl	eax, 4
		add	eax, [ebp+var_38]
		mov	[ebp+var_38], eax

loc_B6C:				; CODE XREF: __Latin1FromUnicodeWithOffsets+7B0j
		cmp	[ebp+var_98], 0
		jle	loc_DBD
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_98]
		sub	eax, 1
		mov	[ebp+var_98], eax
		jmp	loc_B6C
; ---------------------------------------------------------------------------

loc_DBD:				; CODE XREF: __Latin1FromUnicodeWithOffsets+C4j
					; __Latin1FromUnicodeWithOffsets+54Fj ...
		xor	eax, eax
		mov	[ebp+var_74], ax

loc_DC3:				; CODE XREF: __Latin1FromUnicodeWithOffsets+819j
		cmp	[ebp+var_44], 0
		jle	short loc_E23
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_74], cx
		movzx	edx, [ebp+var_80]
		movzx	eax, [ebp+var_74]
		mov	ecx, [ebp+var_14]
		add	ecx, 2
		mov	[ebp+var_14], ecx
		cmp	eax, edx
		jg	short loc_DF4
		mov	[ebp+var_19C], 1
		jmp	short loc_DFE
; ---------------------------------------------------------------------------

loc_DF4:				; CODE XREF: __Latin1FromUnicodeWithOffsets+7DEj
		mov	[ebp+var_19C], 0

loc_DFE:				; CODE XREF: __Latin1FromUnicodeWithOffsets+7EAj
		cmp	[ebp+var_19C], 0
		jz	short loc_E23
		mov	eax, [ebp+var_2C]
		mov	cl, byte ptr [ebp+var_74]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_44]
		sub	eax, 1
		mov	[ebp+var_44], eax
		jmp	short loc_DC3
; ---------------------------------------------------------------------------

loc_E23:				; CODE XREF: __Latin1FromUnicodeWithOffsets+7BFj
					; __Latin1FromUnicodeWithOffsets+7FDj
		movzx	eax, [ebp+var_74]
		movzx	ecx, [ebp+var_80]
		cmp	eax, ecx
		jle	$noMoreInput$7860
		movzx	eax, [ebp+var_74]
		mov	[ebp+var_68], eax
		mov	eax, [ebp+var_68]
		and	eax, 0FFFFF800h
		cmp	eax, 0D800h
		jz	short loc_E4B
		jmp	short loc_EAA
; ---------------------------------------------------------------------------

loc_E4B:				; CODE XREF: __Latin1FromUnicodeWithOffsets+83Fj
		mov	eax, [ebp+var_68]
		and	eax, 400h
		jnz	short loc_EAA

$getTrail$7814:				; CODE XREF: __Latin1FromUnicodeWithOffsets+BBj
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+var_20]
		jnb	short loc_E9F
		mov	eax, [ebp+var_14]
		mov	cx, [eax]
		mov	[ebp+var_C8], cx
		movzx	eax, [ebp+var_C8]
		and	eax, 0FFFFFC00h
		cmp	eax, 0DC00h
		jnz	short loc_E9D
		mov	eax, [ebp+var_14]
		add	eax, 2
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_68]
		shl	eax, 0Ah
		movzx	ecx, [ebp+var_C8]
		lea	edx, [eax+ecx-35FDC00h]
		mov	[ebp+var_68], edx

loc_E9D:				; CODE XREF: __Latin1FromUnicodeWithOffsets+873j
		jmp	short loc_EAA
; ---------------------------------------------------------------------------

loc_E9F:				; CODE XREF: __Latin1FromUnicodeWithOffsets+853j
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+var_68]
		mov	[eax+38h], ecx
		jmp	short $noMoreInput$7860
; ---------------------------------------------------------------------------

loc_EAA:				; CODE XREF: __Latin1FromUnicodeWithOffsets+841j
					; __Latin1FromUnicodeWithOffsets+84Bj ...
		mov	eax, [ebp+var_68]
		and	eax, 0FFFFF800h
		xor	ecx, ecx
		cmp	eax, 0D800h
		setz	cl
		lea	ecx, [ecx+ecx+0Ah]
		mov	edx, [ebp+arg_4]
		mov	[edx], ecx
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+var_68]
		mov	[eax+38h], ecx

$noMoreInput$7860:			; CODE XREF: __Latin1FromUnicodeWithOffsets+825j
					; __Latin1FromUnicodeWithOffsets+8A0j
		cmp	[ebp+var_5C], 0
		jz	short loc_F1D
		mov	eax, [ebp+var_2C]
		sub	eax, [ebp+var_38]
		mov	[ebp+var_D4], eax

loc_EE0:				; CODE XREF: __Latin1FromUnicodeWithOffsets+913j
		cmp	[ebp+var_D4], 0
		jbe	short loc_F1D
		mov	eax, [ebp+var_5C]
		mov	ecx, [ebp+var_8C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 4
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_8C]
		add	eax, 1
		mov	[ebp+var_8C], eax
		mov	eax, [ebp+var_D4]
		sub	eax, 1
		mov	[ebp+var_D4], eax
		jmp	short loc_EE0
; ---------------------------------------------------------------------------

loc_F1D:				; CODE XREF: __Latin1FromUnicodeWithOffsets+8CAj
					; __Latin1FromUnicodeWithOffsets+8DFj
		mov	eax, [ebp+arg_4]
		cmp	dword ptr [eax], 0
		jg	short loc_F41
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+var_20]
		jnb	short loc_F41
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		cmp	ecx, [eax+14h]
		jb	short loc_F41
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh

loc_F41:				; CODE XREF: __Latin1FromUnicodeWithOffsets+91Bj
					; __Latin1FromUnicodeWithOffsets+923j ...
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+10h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_5C]
		mov	[eax+18h], ecx
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__Latin1FromUnicodeWithOffsets endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 0F64h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_ucnv_Latin1FromUTF8 proc near		; DATA XREF: .rdata:00000044o

var_128		= dword	ptr -128h
var_124		= dword	ptr -124h
var_59		= byte ptr -59h
var_4D		= byte ptr -4Dh
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 128h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_128]
		mov	ecx, 4Ah ; 'J'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+4]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+8]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+0Ch]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		mov	[ebp+var_2C], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+14h]
		sub	edx, [ecx+10h]
		mov	[ebp+var_38], edx
		mov	eax, [ebp+var_8]
		mov	ecx, [eax+2Ch]
		mov	[ebp+var_44], ecx
		cmp	[ebp+var_44], 0
		jz	loc_1064
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+var_20]
		jnb	loc_1064
		cmp	[ebp+var_38], 0
		jnz	short loc_FEA
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 0Fh
		jmp	loc_1257
; ---------------------------------------------------------------------------
		jmp	short loc_1064
; ---------------------------------------------------------------------------

loc_FEA:				; CODE XREF: _ucnv_Latin1FromUTF8+74j
		cmp	[ebp+var_44], 0C2h ; 'Â'
		jl	short loc_1056
		cmp	[ebp+var_44], 0C3h ; 'Ã'
		jg	short loc_1056
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax]
		sub	ecx, 80h ; '€'
		mov	[ebp+var_59], cl
		movzx	edx, [ebp+var_59]
		cmp	edx, 3Fh ; '?'
		jg	short loc_1056
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_44]
		and	eax, 3
		shl	eax, 6
		movzx	ecx, [ebp+var_59]
		or	eax, ecx
		mov	edx, [ebp+var_2C]
		mov	[edx], al
		mov	eax, [ebp+var_2C]
		add	eax, 1
		mov	[ebp+var_2C], eax
		mov	eax, [ebp+var_38]
		sub	eax, 1
		mov	[ebp+var_38], eax
		mov	eax, [ebp+var_8]
		mov	dword ptr [eax+2Ch], 0
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 0
		jmp	short loc_1064
; ---------------------------------------------------------------------------

loc_1056:				; CODE XREF: _ucnv_Latin1FromUTF8+8Dj
					; _ucnv_Latin1FromUTF8+96j ...
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 0FFFFFF81h
		jmp	loc_1257
; ---------------------------------------------------------------------------

loc_1064:				; CODE XREF: _ucnv_Latin1FromUTF8+5Ej
					; _ucnv_Latin1FromUTF8+6Aj ...
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+var_20]
		jnb	short loc_108A
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax-1]
		sub	ecx, 0C0h ; 'À'
		movzx	edx, cl
		cmp	edx, 3Eh ; '>'
		jge	short loc_108A
		mov	eax, [ebp+var_20]
		sub	eax, 1
		mov	[ebp+var_20], eax

loc_108A:				; CODE XREF: _ucnv_Latin1FromUTF8+106j
					; _ucnv_Latin1FromUTF8+11Bj ...
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+var_20]
		jnb	loc_116D
		cmp	[ebp+var_38], 0
		jle	loc_115D
		mov	eax, [ebp+var_14]
		mov	cl, [eax]
		mov	[ebp+var_4D], cl
		mov	edx, [ebp+var_14]
		add	edx, 1
		mov	[ebp+var_14], edx
		movsx	eax, [ebp+var_4D]
		test	eax, eax
		jl	short loc_10D8
		mov	eax, [ebp+var_2C]
		mov	cl, [ebp+var_4D]
		mov	[eax], cl
		mov	edx, [ebp+var_2C]
		add	edx, 1
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_38]
		sub	eax, 1
		mov	[ebp+var_38], eax
		jmp	loc_115B
; ---------------------------------------------------------------------------

loc_10D8:				; CODE XREF: _ucnv_Latin1FromUTF8+153j
		movzx	eax, [ebp+var_4D]
		cmp	eax, 0C2h ; 'Â'
		jl	short loc_1138
		movzx	eax, [ebp+var_4D]
		cmp	eax, 0C3h ; 'Ã'
		jg	short loc_1138
		mov	eax, [ebp+var_14]
		movzx	ecx, byte ptr [eax]
		sub	ecx, 80h ; '€'
		mov	[ebp+var_59], cl
		movzx	edx, [ebp+var_59]
		cmp	edx, 3Fh ; '?'
		jg	short loc_1138
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		movzx	eax, [ebp+var_4D]
		and	eax, 3
		shl	eax, 6
		movzx	ecx, [ebp+var_59]
		or	eax, ecx
		mov	edx, [ebp+var_2C]
		mov	[edx], al
		mov	eax, [ebp+var_2C]
		add	eax, 1
		mov	[ebp+var_2C], eax
		mov	eax, [ebp+var_38]
		sub	eax, 1
		mov	[ebp+var_38], eax
		jmp	short loc_115B
; ---------------------------------------------------------------------------

loc_1138:				; CODE XREF: _ucnv_Latin1FromUTF8+17Dj
					; _ucnv_Latin1FromUTF8+188j ...
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	ecx, [ebp+arg_4]
		mov	[ecx+8], eax
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+10h], ecx
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 0FFFFFF81h
		jmp	loc_1257
; ---------------------------------------------------------------------------

loc_115B:				; CODE XREF: _ucnv_Latin1FromUTF8+16Fj
					; _ucnv_Latin1FromUTF8+1D2j
		jmp	short loc_1168
; ---------------------------------------------------------------------------

loc_115D:				; CODE XREF: _ucnv_Latin1FromUTF8+136j
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 0Fh
		jmp	short loc_116D
; ---------------------------------------------------------------------------

loc_1168:				; CODE XREF: _ucnv_Latin1FromUTF8:loc_115Bj
		jmp	loc_108A
; ---------------------------------------------------------------------------

loc_116D:				; CODE XREF: _ucnv_Latin1FromUTF8+12Cj
					; _ucnv_Latin1FromUTF8+202j
		mov	eax, [ebp+arg_8]
		cmp	dword ptr [eax], 0
		jg	loc_1245
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+0Ch]
		mov	[ebp+var_20], ecx
		mov	edx, [ebp+var_14]
		cmp	edx, [ebp+var_20]
		jnb	loc_1245
		mov	eax, [ebp+var_14]
		mov	cl, [eax]
		mov	[ebp+var_4D], cl
		mov	edx, [ebp+var_8]
		mov	al, [ebp+var_4D]
		mov	[edx+25h], al
		movzx	ecx, [ebp+var_4D]
		mov	edx, [ebp+var_8]
		mov	[edx+2Ch], ecx
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax+24h], 1
		movzx	eax, [ebp+var_4D]
		cmp	eax, 0F0h ; 'ð'
		jge	short loc_11EB
		movzx	ecx, [ebp+var_4D]
		xor	edx, edx
		cmp	ecx, 0C0h ; 'À'
		setnl	dl
		movzx	eax, [ebp+var_4D]
		xor	ecx, ecx
		cmp	eax, 0E0h ; 'à'
		setnl	cl
		add	edx, ecx
		mov	[ebp+var_124], edx
		jmp	short loc_1236
; ---------------------------------------------------------------------------

loc_11EB:				; CODE XREF: _ucnv_Latin1FromUTF8+25Ej
		movzx	edx, [ebp+var_4D]
		cmp	edx, 0FEh ; 'þ'
		jge	short loc_1220
		movzx	eax, [ebp+var_4D]
		xor	ecx, ecx
		cmp	eax, 0F8h ; 'ø'
		setnl	cl
		movzx	edx, [ebp+var_4D]
		xor	eax, eax
		cmp	edx, 0FCh ; 'ü'
		setnl	al
		lea	ecx, [ecx+eax+3]
		mov	[ebp+var_128], ecx
		jmp	short loc_122A
; ---------------------------------------------------------------------------

loc_1220:				; CODE XREF: _ucnv_Latin1FromUTF8+291j
		mov	[ebp+var_128], 0

loc_122A:				; CODE XREF: _ucnv_Latin1FromUTF8+2BAj
		mov	edx, [ebp+var_128]
		mov	[ebp+var_124], edx

loc_1236:				; CODE XREF: _ucnv_Latin1FromUTF8+285j
		mov	eax, [ebp+var_124]
		add	eax, 1
		mov	ecx, [ebp+var_8]
		mov	[ecx+30h], eax

loc_1245:				; CODE XREF: _ucnv_Latin1FromUTF8+20Fj
					; _ucnv_Latin1FromUTF8+224j
		mov	eax, [ebp+arg_4]
		mov	ecx, [ebp+var_14]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+10h], ecx

loc_1257:				; CODE XREF: _ucnv_Latin1FromUTF8+7Fj
					; _ucnv_Latin1FromUTF8+FBj ...
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_ucnv_Latin1FromUTF8 endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1260h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__Latin1GetUnicodeSet proc near		; DATA XREF: .rdata:0000003Co

var_C0		= byte ptr -0C0h
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	esi, esp
		push	0FFh
		push	0
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax]
		push	ecx
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+8]
		call	eax
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__Latin1GetUnicodeSet endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 12B4h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__ASCIIToUnicodeWithOffsets proc near	; DATA XREF: .rdata:000001B0o
					; .rdata:000001B4o

var_16C		= dword	ptr -16Ch
var_A4		= dword	ptr -0A4h
var_98		= dword	ptr -98h
var_8C		= word ptr -8Ch
var_80		= dword	ptr -80h
var_74		= dword	ptr -74h
var_65		= byte ptr -65h
var_5C		= dword	ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 16Ch
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_16C]
		mov	ecx, 5Bh ; '['
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		mov	[ebp+var_2C], ecx
		mov	edx, [ebp+var_2C]
		mov	[ebp+var_20], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+14h]
		sub	edx, [ecx+10h]
		sar	edx, 1
		mov	[ebp+var_38], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+18h]
		mov	[ebp+var_50], ecx
		mov	[ebp+var_5C], 0
		mov	eax, [ebp+var_14]
		sub	eax, [ebp+var_8]
		mov	[ebp+var_44], eax
		mov	eax, [ebp+var_44]
		cmp	eax, [ebp+var_38]
		jge	short loc_132B
		mov	eax, [ebp+var_44]
		mov	[ebp+var_38], eax

loc_132B:				; CODE XREF: __ASCIIToUnicodeWithOffsets+6Fj
		cmp	[ebp+var_38], 8
		jl	loc_15DD
		mov	eax, [ebp+var_38]
		sar	eax, 3
		mov	[ebp+var_74], eax
		mov	ecx, [ebp+var_74]
		mov	[ebp+var_80], ecx

loc_1344:				; CODE XREF: __ASCIIToUnicodeWithOffsets+243j
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax]
		mov	edx, [ebp+var_20]
		mov	[edx], cx
		mov	eax, [ebp+var_20]
		mov	cx, [eax]
		mov	[ebp+var_8C], cx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+1]
		mov	word ptr [ebp+var_16C+2], cx
		mov	edx, [ebp+var_20]
		mov	ax, word ptr [ebp+var_16C+2]
		mov	[edx+2], ax
		movzx	ecx, word ptr [ebp+var_16C+2]
		movzx	edx, [ebp+var_8C]
		or	edx, ecx
		mov	[ebp+var_8C], dx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+2]
		mov	word ptr [ebp+var_16C+2], cx
		mov	edx, [ebp+var_20]
		mov	ax, word ptr [ebp+var_16C+2]
		mov	[edx+4], ax
		movzx	ecx, word ptr [ebp+var_16C+2]
		movzx	edx, [ebp+var_8C]
		or	edx, ecx
		mov	[ebp+var_8C], dx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+3]
		mov	word ptr [ebp+var_16C+2], cx
		mov	edx, [ebp+var_20]
		mov	ax, word ptr [ebp+var_16C+2]
		mov	[edx+6], ax
		movzx	ecx, word ptr [ebp+var_16C+2]
		movzx	edx, [ebp+var_8C]
		or	edx, ecx
		mov	[ebp+var_8C], dx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+4]
		mov	word ptr [ebp+var_16C+2], cx
		mov	edx, [ebp+var_20]
		mov	ax, word ptr [ebp+var_16C+2]
		mov	[edx+8], ax
		movzx	ecx, word ptr [ebp+var_16C+2]
		movzx	edx, [ebp+var_8C]
		or	edx, ecx
		mov	[ebp+var_8C], dx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+5]
		mov	word ptr [ebp+var_16C+2], cx
		mov	edx, [ebp+var_20]
		mov	ax, word ptr [ebp+var_16C+2]
		mov	[edx+0Ah], ax
		movzx	ecx, word ptr [ebp+var_16C+2]
		movzx	edx, [ebp+var_8C]
		or	edx, ecx
		mov	[ebp+var_8C], dx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+6]
		mov	word ptr [ebp+var_16C+2], cx
		mov	edx, [ebp+var_20]
		mov	ax, word ptr [ebp+var_16C+2]
		mov	[edx+0Ch], ax
		movzx	ecx, word ptr [ebp+var_16C+2]
		movzx	edx, [ebp+var_8C]
		or	edx, ecx
		mov	[ebp+var_8C], dx
		mov	eax, [ebp+var_8]
		movzx	cx, byte ptr [eax+7]
		mov	word ptr [ebp+var_16C+2], cx
		mov	edx, [ebp+var_20]
		mov	ax, word ptr [ebp+var_16C+2]
		mov	[edx+0Eh], ax
		movzx	ecx, word ptr [ebp+var_16C+2]
		movzx	edx, [ebp+var_8C]
		or	edx, ecx
		mov	[ebp+var_8C], dx
		movzx	eax, [ebp+var_8C]
		cmp	eax, 7Fh ; ''
		jle	short loc_14D8
		jmp	short loc_14FD
; ---------------------------------------------------------------------------

loc_14D8:				; CODE XREF: __ASCIIToUnicodeWithOffsets+220j
		mov	eax, [ebp+var_8]
		add	eax, 8
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_20]
		add	eax, 10h
		mov	[ebp+var_20], eax
		mov	eax, [ebp+var_74]
		sub	eax, 1
		mov	[ebp+var_74], eax
		cmp	[ebp+var_74], 0
		jg	loc_1344

loc_14FD:				; CODE XREF: __ASCIIToUnicodeWithOffsets+222j
		mov	eax, [ebp+var_80]
		sub	eax, [ebp+var_74]
		mov	[ebp+var_74], eax
		mov	eax, [ebp+var_74]
		shl	eax, 3
		mov	ecx, [ebp+var_38]
		sub	ecx, eax
		mov	[ebp+var_38], ecx
		cmp	[ebp+var_50], 0
		jz	loc_15DD
		mov	eax, [ebp+var_74]
		shl	eax, 3
		mov	ecx, [ebp+var_2C]
		lea	edx, [ecx+eax*2]
		mov	[ebp+var_2C], edx

loc_152D:				; CODE XREF: __ASCIIToUnicodeWithOffsets+324j
		cmp	[ebp+var_74], 0
		jle	loc_15DD
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_5C]
		mov	[eax], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 1
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_5C]
		mov	[eax+4], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 1
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_5C]
		mov	[eax+8], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 1
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_5C]
		mov	[eax+0Ch], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 1
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_5C]
		mov	[eax+10h], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 1
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_5C]
		mov	[eax+14h], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 1
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_5C]
		mov	[eax+18h], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 1
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_5C]
		mov	[eax+1Ch], ecx
		mov	edx, [ebp+var_5C]
		add	edx, 1
		mov	[ebp+var_5C], edx
		mov	eax, [ebp+var_50]
		add	eax, 20h ; ' '
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_74]
		sub	eax, 1
		mov	[ebp+var_74], eax
		jmp	loc_152D
; ---------------------------------------------------------------------------

loc_15DD:				; CODE XREF: __ASCIIToUnicodeWithOffsets+7Bj
					; __ASCIIToUnicodeWithOffsets+264j ...
		mov	[ebp+var_65], 0

loc_15E1:				; CODE XREF: __ASCIIToUnicodeWithOffsets+389j
		cmp	[ebp+var_38], 0
		jle	short loc_163F
		mov	eax, [ebp+var_8]
		mov	cl, [eax]
		mov	[ebp+var_65], cl
		movzx	edx, [ebp+var_65]
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax
		cmp	edx, 7Fh ; ''
		jg	short loc_160D
		mov	[ebp+var_16C], 1
		jmp	short loc_1617
; ---------------------------------------------------------------------------

loc_160D:				; CODE XREF: __ASCIIToUnicodeWithOffsets+34Bj
		mov	[ebp+var_16C], 0

loc_1617:				; CODE XREF: __ASCIIToUnicodeWithOffsets+357j
		cmp	[ebp+var_16C], 0
		jz	short loc_163F
		movzx	ax, [ebp+var_65]
		mov	ecx, [ebp+var_20]
		mov	[ecx], ax
		mov	edx, [ebp+var_20]
		add	edx, 2
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_38]
		sub	eax, 1
		mov	[ebp+var_38], eax
		jmp	short loc_15E1
; ---------------------------------------------------------------------------

loc_163F:				; CODE XREF: __ASCIIToUnicodeWithOffsets+331j
					; __ASCIIToUnicodeWithOffsets+36Aj
		movzx	eax, [ebp+var_65]
		cmp	eax, 7Fh ; ''
		jle	short loc_1675
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	[ebp+var_98], ecx
		mov	eax, [ebp+var_98]
		mov	cl, [ebp+var_65]
		mov	[eax+25h], cl
		mov	eax, [ebp+var_98]
		mov	byte ptr [eax+24h], 1
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch
		jmp	short loc_1691
; ---------------------------------------------------------------------------

loc_1675:				; CODE XREF: __ASCIIToUnicodeWithOffsets+392j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+var_14]
		jnb	short loc_1691
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		cmp	ecx, [eax+14h]
		jb	short loc_1691
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Fh

loc_1691:				; CODE XREF: __ASCIIToUnicodeWithOffsets+3BFj
					; __ASCIIToUnicodeWithOffsets+3C7j ...
		cmp	[ebp+var_50], 0
		jz	short loc_16D9
		mov	eax, [ebp+var_20]
		sub	eax, [ebp+var_2C]
		sar	eax, 1
		mov	[ebp+var_A4], eax

loc_16A5:				; CODE XREF: __ASCIIToUnicodeWithOffsets+423j
		cmp	[ebp+var_A4], 0
		jbe	short loc_16D9
		mov	eax, [ebp+var_50]
		mov	ecx, [ebp+var_5C]
		mov	[eax], ecx
		mov	edx, [ebp+var_50]
		add	edx, 4
		mov	[ebp+var_50], edx
		mov	eax, [ebp+var_5C]
		add	eax, 1
		mov	[ebp+var_5C], eax
		mov	eax, [ebp+var_A4]
		sub	eax, 1
		mov	[ebp+var_A4], eax
		jmp	short loc_16A5
; ---------------------------------------------------------------------------

loc_16D9:				; CODE XREF: __ASCIIToUnicodeWithOffsets+3E1j
					; __ASCIIToUnicodeWithOffsets+3F8j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_8]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		mov	[eax+10h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_50]
		mov	[eax+18h], ecx
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__ASCIIToUnicodeWithOffsets endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 16FCh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__ASCIIGetNextUChar proc near		; DATA XREF: .rdata:000001C0o

var_E4		= byte ptr -0E4h
var_20		= dword	ptr -20h
var_11		= byte ptr -11h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0E4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_E4]
		mov	ecx, 39h ; '9'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+8]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_8]
		cmp	ecx, [eax+0Ch]
		jnb	short loc_1782
		mov	eax, [ebp+var_8]
		mov	cl, [eax]
		mov	[ebp+var_11], cl
		mov	edx, [ebp+var_8]
		add	edx, 1
		mov	[ebp+var_8], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_8]
		mov	[eax+8], ecx
		movzx	eax, [ebp+var_11]
		cmp	eax, 7Fh ; ''
		jg	short loc_1759
		movzx	eax, [ebp+var_11]
		jmp	short loc_1790
; ---------------------------------------------------------------------------
		jmp	short loc_1782
; ---------------------------------------------------------------------------

loc_1759:				; CODE XREF: __ASCIIGetNextUChar+53j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+4]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+var_20]
		mov	cl, [ebp+var_11]
		mov	[eax+25h], cl
		mov	eax, [ebp+var_20]
		mov	byte ptr [eax+24h], 1
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 0Ch
		mov	eax, 0FFFFh
		jmp	short loc_1790
; ---------------------------------------------------------------------------

loc_1782:				; CODE XREF: __ASCIIGetNextUChar+30j
					; __ASCIIGetNextUChar+5Bj
		mov	eax, [ebp+arg_4]
		mov	dword ptr [eax], 8
		mov	eax, 0FFFFh

loc_1790:				; CODE XREF: __ASCIIGetNextUChar+59j
					; __ASCIIGetNextUChar+84j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
__ASCIIGetNextUChar endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1798h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_ucnv_ASCIIFromUTF8 proc near		; DATA XREF: .rdata:000001DCo

var_12C		= byte ptr -12Ch
var_65		= byte ptr -65h
var_5C		= dword	ptr -5Ch
var_50		= dword	ptr -50h
var_41		= byte ptr -41h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 12Ch
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_12C]
		mov	ecx, 4Bh ; 'K'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+4]
		cmp	dword ptr [ecx+2Ch], 0
		jz	short loc_17D0
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 0FFFFFF81h
		jmp	loc_1B9C
; ---------------------------------------------------------------------------

loc_17D0:				; CODE XREF: _ucnv_ASCIIFromUTF8+28j
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+8]
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax+0Ch]
		mov	[ebp+var_14], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+14h]
		sub	edx, [ecx+10h]
		mov	[ebp+var_2C], edx
		mov	eax, [ebp+var_14]
		sub	eax, [ebp+var_8]
		mov	[ebp+var_38], eax
		mov	eax, [ebp+var_38]
		cmp	eax, [ebp+var_2C]
		jge	short loc_1811
		mov	eax, [ebp+var_38]
		mov	[ebp+var_2C], eax

loc_1811:				; CODE XREF: _ucnv_ASCIIFromUTF8+71j
		cmp	[ebp+var_2C], 10h
		jl	loc_1B1A
		mov	eax, [ebp+var_2C]
		sar	eax, 4
		mov	[ebp+var_50], eax
		mov	ecx, [ebp+var_50]
		mov	[ebp+var_5C], ecx

loc_182A:				; CODE XREF: _ucnv_ASCIIFromUTF8+365j
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		mov	cl, [eax]
		mov	[ebp+var_65], cl
		mov	edx, [ebp+var_20]
		add	edx, 1
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	dl, [ecx]
		mov	[eax], dl
		mov	eax, [ebp+var_20]
		movzx	ecx, byte ptr [eax]
		movzx	edx, [ebp+var_65]
		or	edx, ecx
		mov	[ebp+var_65], dl
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	ecx, [ebp+var_8]
		add	ecx, 1
		mov	[ebp+var_8], ecx
		movzx	eax, [ebp+var_65]
		cmp	eax, 7Fh ; ''
		jle	short loc_1AF0
		mov	eax, [ebp+var_8]
		sub	eax, 10h
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_20]
		sub	eax, 10h
		mov	[ebp+var_20], eax
		jmp	short loc_1B03
; ---------------------------------------------------------------------------

loc_1AF0:				; CODE XREF: _ucnv_ASCIIFromUTF8+342j
		mov	eax, [ebp+var_50]
		sub	eax, 1
		mov	[ebp+var_50], eax
		cmp	[ebp+var_50], 0
		jg	loc_182A

loc_1B03:				; CODE XREF: _ucnv_ASCIIFromUTF8+356j
		mov	eax, [ebp+var_5C]
		sub	eax, [ebp+var_50]
		mov	[ebp+var_50], eax
		mov	eax, [ebp+var_50]
		shl	eax, 4
		mov	ecx, [ebp+var_2C]
		sub	ecx, eax
		mov	[ebp+var_2C], ecx

loc_1B1A:				; CODE XREF: _ucnv_ASCIIFromUTF8+7Dj
		mov	[ebp+var_41], 0

loc_1B1E:				; CODE XREF: _ucnv_ASCIIFromUTF8+3C0j
		cmp	[ebp+var_2C], 0
		jle	short loc_1B5A
		mov	eax, [ebp+var_8]
		mov	cl, [eax]
		mov	[ebp+var_41], cl
		movzx	edx, [ebp+var_41]
		cmp	edx, 7Fh ; ''
		jg	short loc_1B5A
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_20]
		mov	cl, [ebp+var_41]
		mov	[eax], cl
		mov	edx, [ebp+var_20]
		add	edx, 1
		mov	[ebp+var_20], edx
		mov	eax, [ebp+var_2C]
		sub	eax, 1
		mov	[ebp+var_2C], eax
		jmp	short loc_1B1E
; ---------------------------------------------------------------------------

loc_1B5A:				; CODE XREF: _ucnv_ASCIIFromUTF8+38Aj
					; _ucnv_ASCIIFromUTF8+39Bj
		movzx	eax, [ebp+var_41]
		cmp	eax, 7Fh ; ''
		jle	short loc_1B6E
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 0FFFFFF81h
		jmp	short loc_1B8A
; ---------------------------------------------------------------------------

loc_1B6E:				; CODE XREF: _ucnv_ASCIIFromUTF8+3C9j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+var_14]
		jnb	short loc_1B8A
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		cmp	ecx, [eax+14h]
		jb	short loc_1B8A
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 0Fh

loc_1B8A:				; CODE XREF: _ucnv_ASCIIFromUTF8+3D4j
					; _ucnv_ASCIIFromUTF8+3DCj ...
		mov	eax, [ebp+arg_4]
		mov	ecx, [ebp+var_8]
		mov	[eax+8], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_20]
		mov	[eax+10h], ecx

loc_1B9C:				; CODE XREF: _ucnv_ASCIIFromUTF8+33j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_ucnv_ASCIIFromUTF8 endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1BA4h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

__ASCIIGetUnicodeSet proc near		; DATA XREF: .rdata:000001D4o

var_C0		= byte ptr -0C0h
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	esi, esp
		push	7Fh ; ''
		push	0
		mov	eax, [ebp+arg_4]
		mov	ecx, [eax]
		push	ecx
		mov	edx, [ebp+arg_4]
		mov	eax, [edx+8]
		call	eax
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
__ASCIIGetUnicodeSet endp

_text		ends

; ===========================================================================

; Segment type:	Externs
; UNDEF
		extrn __RTC_Shutdown:near ; DATA XREF: .rtc$TMZ:__RTC_Shutdown_rtc$TMZo
		extrn __RTC_InitBase:near ; DATA XREF: .rtc$IMZ:__RTC_InitBase_rtc$IMZo
		extrn __RTC_CheckEsp:near ; CODE XREF: __Latin1GetUnicodeSet+3Ap
					; __Latin1GetUnicodeSet+4Ap ...


		end
