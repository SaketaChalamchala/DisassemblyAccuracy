;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2015 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-3677-7074-51			    |
; |		Michalis Polychronakis,	Stony Brook University		    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	CB3C5424E64991868D2E352EB827DB1C
; Input	CRC32 :	C82A60FC

; File Name   :	D:\compspace\objfiles\firefox\common\usc_impl.obj
; Format      :	COFF (X386MAGIC)
; includelib "msvcprtd"
; includelib "MSVCRTD"
; includelib "OLDNAMES"

		.686p
		.mmx
		.model flat
.intel_syntax noprefix

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
; Segment alignment 'qword' can not be represented in assembly
_rdata		segment	para public 'DATA' use32
		assume cs:_rdata
_pairedChars	dd offset byte_28	; DATA XREF: _getPairIndex+5Ar
					; _getPairIndex+80r ...
		dd offset byte_29
		dd offset byte_3C
		dd offset word_3E
		dd offset byte_5B
		dd offset byte_5D
		dd offset byte_7B
		dd offset byte_7D
		dd offset loc_A6+5
		dd offset loc_BB
byte_28		db 18h			; DATA XREF: .rdata:_pairedCharso
byte_29		db 20h,	2 dup(0)	; DATA XREF: .rdata:00000004o
		dd 2019h, 201Ch, 201Dh,	2039h
byte_3C		db 3Ah,	20h		; DATA XREF: .rdata:00000008o
word_3E		dw 0			; DATA XREF: .rdata:0000000Co
		dd 3008h, 3009h, 300Ah,	300Bh, 300Ch, 300Dh
		db 0Eh,	30h, 0
byte_5B		db 0			; DATA XREF: .rdata:00000010o
		db 0Fh
byte_5D		db 30h,	2 dup(0)	; DATA XREF: .rdata:00000014o
		dd 3010h, 3011h, 3014h,	3015h, 3016h, 3017h
		db 18h,	30h, 0
byte_7B		db 0			; DATA XREF: .rdata:00000018o
		db 19h
byte_7D		db 30h,	2 dup(0)	; DATA XREF: .rdata:0000001Co
		dd 301Ah, 301Bh
_rdata		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 88h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _uscript_openRun_56
_uscript_openRun_56 proc near

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd

loc_A6:					; DATA XREF: .rdata:00000020o
		mov	[ebp+var_8], 0
		cmp	[ebp+arg_8], 0
		jz	short loc_BB
		mov	eax, [ebp+arg_8]
		cmp	dword ptr [eax], 0
		jle	short loc_BF

loc_BB:					; CODE XREF: _uscript_openRun_56+29j
					; DATA XREF: .rdata:00000024o
		xor	eax, eax
		jmp	short loc_118
; ---------------------------------------------------------------------------

loc_BF:					; CODE XREF: _uscript_openRun_56+31j
		push	120h
		call	_uprv_malloc_56
		add	esp, 4
		mov	[ebp+var_8], eax
		cmp	[ebp+var_8], 0
		jnz	short loc_E2
		mov	eax, [ebp+arg_8]
		mov	dword ptr [eax], 7
		xor	eax, eax
		jmp	short loc_118
; ---------------------------------------------------------------------------

loc_E2:					; CODE XREF: _uscript_openRun_56+4Bj
		mov	eax, [ebp+arg_8]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		mov	eax, [ebp+var_8]
		push	eax
		call	_uscript_setRunText_56
		add	esp, 10h
		mov	eax, [ebp+arg_8]
		cmp	dword ptr [eax], 0
		jle	short loc_115
		mov	eax, [ebp+var_8]
		push	eax
		call	_uprv_free_56
		add	esp, 4
		mov	[ebp+var_8], 0

loc_115:				; CODE XREF: _uscript_openRun_56+78j
		mov	eax, [ebp+var_8]

loc_118:				; CODE XREF: _uscript_openRun_56+35j
					; _uscript_openRun_56+58j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0CCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_uscript_openRun_56 endp

_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$TMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$TMZ
		;org 12Ch
__RTC_Shutdown_rtc$TMZ dd offset __RTC_Shutdown
_rtc$TMZ	ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$IMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$IMZ
		;org 130h
__RTC_InitBase_rtc$IMZ dd offset __RTC_InitBase
_rtc$IMZ	ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 134h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _uscript_closeRun_56
_uscript_closeRun_56 proc near

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_0], 0
		jz	short loc_164
		mov	eax, [ebp+arg_0]
		push	eax
		call	_uprv_free_56
		add	esp, 4

loc_164:				; CODE XREF: _uscript_closeRun_56+22j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_uscript_closeRun_56 endp

_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 178h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _uscript_resetRun_56
_uscript_resetRun_56 proc near		; CODE XREF: _uscript_setRunText_56+70p

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_0], 0
		jz	short loc_1E1
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+8], 0
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+0Ch], 0
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+10h], 0FFFFFFFFh
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+114h], 0FFFFFFFFh
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+118h], 0
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+11Ch], 0

loc_1E1:				; CODE XREF: _uscript_resetRun_56+22j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_uscript_resetRun_56 endp

_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1E8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _uscript_setRunText_56
_uscript_setRunText_56 proc near	; CODE XREF: _uscript_openRun_56+6Ap

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_C], 0
		jz	short loc_214
		mov	eax, [ebp+arg_C]
		cmp	dword ptr [eax], 0
		jle	short loc_216

loc_214:				; CODE XREF: _uscript_setRunText_56+22j
		jmp	short loc_260
; ---------------------------------------------------------------------------

loc_216:				; CODE XREF: _uscript_setRunText_56+2Aj
		cmp	[ebp+arg_0], 0
		jz	short loc_238
		cmp	[ebp+arg_8], 0
		jl	short loc_238
		xor	eax, eax
		cmp	[ebp+arg_4], 0
		setz	al
		xor	ecx, ecx
		cmp	[ebp+arg_8], 0
		setz	cl
		cmp	eax, ecx
		jz	short loc_243

loc_238:				; CODE XREF: _uscript_setRunText_56+32j
					; _uscript_setRunText_56+38j
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 1
		jmp	short loc_260
; ---------------------------------------------------------------------------

loc_243:				; CODE XREF: _uscript_setRunText_56+4Ej
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_4]
		mov	[eax+4], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_8]
		mov	[eax], ecx
		mov	eax, [ebp+arg_0]
		push	eax
		call	_uscript_resetRun_56
		add	esp, 4

loc_260:				; CODE XREF: _uscript_setRunText_56:loc_214j
					; _uscript_setRunText_56+59j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0C0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_uscript_setRunText_56 endp

_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 274h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

		public _uscript_nextRun_56
_uscript_nextRun_56 proc near

var_114		= byte ptr -114h
var_50		= dword	ptr -50h
var_44		= word ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= word ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h

		push	ebp
		mov	ebp, esp
		sub	esp, 114h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_114]
		mov	ecx, 45h ; 'E'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		cmp	[ebp+arg_0], 0
		jz	short loc_2AC
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+0Ch]
		cmp	edx, [ecx]
		jl	short loc_2B3

loc_2AC:				; CODE XREF: _uscript_nextRun_56+29j
		xor	al, al
		jmp	loc_4E2
; ---------------------------------------------------------------------------

loc_2B3:				; CODE XREF: _uscript_nextRun_56+36j
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+11Ch], 0
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+10h], 0
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+0Ch]
		mov	[eax+8], edx
		jmp	short loc_2E7
; ---------------------------------------------------------------------------

loc_2D8:				; CODE XREF: _uscript_nextRun_56:loc_4A8j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		add	ecx, 1
		mov	edx, [ebp+arg_0]
		mov	[edx+0Ch], ecx

loc_2E7:				; CODE XREF: _uscript_nextRun_56+62j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+arg_0]
		mov	edx, [eax+0Ch]
		cmp	edx, [ecx]
		jge	loc_4AD
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+4]
		mov	cx, [eax+ecx*2]
		mov	[ebp+var_14], cx
		movzx	eax, [ebp+var_14]
		mov	[ebp+var_20], eax
		movzx	eax, [ebp+var_14]
		cmp	eax, 0D800h
		jl	short loc_38D
		movzx	eax, [ebp+var_14]
		cmp	eax, 0DBFFh
		jg	short loc_38D
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax]
		sub	ecx, 1
		mov	edx, [ebp+arg_0]
		cmp	[edx+0Ch], ecx
		jge	short loc_38D
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+4]
		mov	cx, [eax+ecx*2+2]
		mov	[ebp+var_44], cx
		movzx	eax, [ebp+var_44]
		cmp	eax, 0DC00h
		jl	short loc_38D
		movzx	eax, [ebp+var_44]
		cmp	eax, 0DFFFh
		jg	short loc_38D
		movzx	eax, [ebp+var_14]
		sub	eax, 0D800h
		shl	eax, 0Ah
		movzx	ecx, [ebp+var_44]
		lea	edx, [eax+ecx+2400h]
		mov	[ebp+var_20], edx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		add	ecx, 1
		mov	edx, [ebp+arg_0]
		mov	[edx+0Ch], ecx

loc_38D:				; CODE XREF: _uscript_nextRun_56+A8j
					; _uscript_nextRun_56+B3j ...
		lea	eax, [ebp+var_8]
		push	eax
		mov	ecx, [ebp+var_20]
		push	ecx
		call	_uscript_getScript_56
		add	esp, 8
		mov	[ebp+var_2C], eax
		mov	eax, [ebp+var_20]
		push	eax
		call	_getPairIndex
		add	esp, 4
		mov	[ebp+var_38], eax
		cmp	[ebp+var_38], 0
		jl	short loc_42D
		mov	eax, [ebp+var_38]
		and	eax, 1
		jnz	short loc_3D6
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		push	ecx
		mov	edx, [ebp+var_38]
		push	edx
		mov	eax, [ebp+arg_0]
		push	eax
		call	_push
		add	esp, 0Ch
		jmp	short loc_42D
; ---------------------------------------------------------------------------

loc_3D6:				; CODE XREF: _uscript_nextRun_56+147j
		mov	eax, [ebp+var_38]
		and	eax, 0FFFFFFFEh
		mov	[ebp+var_50], eax

loc_3DF:				; CODE XREF: _uscript_nextRun_56+198j
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+118h], 0
		jle	short loc_40E
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+114h]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+ecx*8+14h]
		cmp	eax, [ebp+var_50]
		jz	short loc_40E
		mov	eax, [ebp+arg_0]
		push	eax
		call	_pop
		add	esp, 4
		jmp	short loc_3DF
; ---------------------------------------------------------------------------

loc_40E:				; CODE XREF: _uscript_nextRun_56+175j
					; _uscript_nextRun_56+18Aj
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+118h], 0
		jle	short loc_42D
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+114h]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+ecx*8+18h]
		mov	[ebp+var_2C], eax

loc_42D:				; CODE XREF: _uscript_nextRun_56+13Fj
					; _uscript_nextRun_56+160j ...
		mov	eax, [ebp+var_2C]
		push	eax
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+10h]
		push	edx
		call	_sameScript
		add	esp, 8
		movsx	eax, al
		test	eax, eax
		jz	short loc_48E
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+10h], 1
		jg	short loc_472
		cmp	[ebp+var_2C], 1
		jle	short loc_472
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_2C]
		mov	[eax+10h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+10h]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	_fixup
		add	esp, 8

loc_472:				; CODE XREF: _uscript_nextRun_56+1DAj
					; _uscript_nextRun_56+1E0j
		cmp	[ebp+var_38], 0
		jl	short loc_48C
		mov	eax, [ebp+var_38]
		and	eax, 1
		jz	short loc_48C
		mov	eax, [ebp+arg_0]
		push	eax
		call	_pop
		add	esp, 4

loc_48C:				; CODE XREF: _uscript_nextRun_56+202j
					; _uscript_nextRun_56+20Aj
		jmp	short loc_4A8
; ---------------------------------------------------------------------------

loc_48E:				; CODE XREF: _uscript_nextRun_56+1D1j
		cmp	[ebp+var_20], 10000h
		jl	short loc_4A6
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+0Ch]
		sub	ecx, 1
		mov	edx, [ebp+arg_0]
		mov	[edx+0Ch], ecx

loc_4A6:				; CODE XREF: _uscript_nextRun_56+221j
		jmp	short loc_4AD
; ---------------------------------------------------------------------------

loc_4A8:				; CODE XREF: _uscript_nextRun_56:loc_48Cj
		jmp	loc_2D8
; ---------------------------------------------------------------------------

loc_4AD:				; CODE XREF: _uscript_nextRun_56+7Ej
					; _uscript_nextRun_56:loc_4A6j
		cmp	[ebp+arg_4], 0
		jz	short loc_4BE
		mov	eax, [ebp+arg_4]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+8]
		mov	[eax], edx

loc_4BE:				; CODE XREF: _uscript_nextRun_56+23Dj
		cmp	[ebp+arg_8], 0
		jz	short loc_4CF
		mov	eax, [ebp+arg_8]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+0Ch]
		mov	[eax], edx

loc_4CF:				; CODE XREF: _uscript_nextRun_56+24Ej
		cmp	[ebp+arg_C], 0
		jz	short loc_4E0
		mov	eax, [ebp+arg_C]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+10h]
		mov	[eax], edx

loc_4E0:				; CODE XREF: _uscript_nextRun_56+25Fj
		mov	al, 1

loc_4E2:				; CODE XREF: _uscript_nextRun_56+3Aj
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN26
		call	@_RTC_CheckStackVars@8
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 114h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_uscript_nextRun_56 endp

; ---------------------------------------------------------------------------
		align 4
$LN26		dd 1			; DATA XREF: _uscript_nextRun_56+272o
		dd offset $LN25
$LN25		dd 0FFFFFFF8h, 4	; DATA XREF: .text:0000050Co
		dd offset $LN24		; "error"
$LN24		db 'error',0            ; DATA XREF: .text:00000518o
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 524h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_push		proc near		; CODE XREF: _uscript_nextRun_56+158p

var_C4		= dword	ptr -0C4h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 0C4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C4]
		mov	ecx, 31h ; '1'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+118h], 20h ; ' '
		jge	short loc_562
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+118h]
		add	edx, 1
		mov	[ebp+var_C4], edx
		jmp	short loc_56C
; ---------------------------------------------------------------------------

loc_562:				; CODE XREF: _push+28j
		mov	[ebp+var_C4], 20h ; ' '

loc_56C:				; CODE XREF: _push+3Cj
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_C4]
		mov	[eax+118h], ecx
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+11Ch], 20h ; ' '
		jge	short loc_59B
		mov	ecx, [ebp+arg_0]
		mov	edx, [ecx+11Ch]
		add	edx, 1
		mov	[ebp+var_C4], edx
		jmp	short loc_5A5
; ---------------------------------------------------------------------------

loc_59B:				; CODE XREF: _push+61j
		mov	[ebp+var_C4], 20h ; ' '

loc_5A5:				; CODE XREF: _push+75j
		mov	eax, [ebp+arg_0]
		mov	ecx, [ebp+var_C4]
		mov	[eax+11Ch], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+114h]
		add	ecx, 1
		and	ecx, 8000001Fh
		jns	short loc_5CD
		dec	ecx
		or	ecx, 0FFFFFFE0h
		inc	ecx

loc_5CD:				; CODE XREF: _push+A2j
		mov	edx, [ebp+arg_0]
		mov	[edx+114h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+114h]
		mov	edx, [ebp+arg_0]
		mov	eax, [ebp+arg_4]
		mov	[edx+ecx*8+14h], eax
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+114h]
		mov	edx, [ebp+arg_0]
		mov	eax, [ebp+arg_8]
		mov	[edx+ecx*8+18h], eax
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_push		endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 604h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_pop		proc near		; CODE XREF: _uscript_nextRun_56+190p
					; _uscript_nextRun_56+210p

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+118h], 0
		jg	short loc_630
		jmp	short loc_6A1
; ---------------------------------------------------------------------------

loc_630:				; CODE XREF: _pop+28j
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+11Ch], 0
		jle	short loc_651
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+11Ch]
		sub	ecx, 1
		mov	edx, [ebp+arg_0]
		mov	[edx+11Ch], ecx

loc_651:				; CODE XREF: _pop+36j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+118h]
		sub	ecx, 1
		mov	edx, [ebp+arg_0]
		mov	[edx+118h], ecx
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+114h]
		add	ecx, 1Fh
		and	ecx, 8000001Fh
		jns	short loc_67F
		dec	ecx
		or	ecx, 0FFFFFFE0h
		inc	ecx

loc_67F:				; CODE XREF: _pop+74j
		mov	edx, [ebp+arg_0]
		mov	[edx+114h], ecx
		mov	eax, [ebp+arg_0]
		cmp	dword ptr [eax+118h], 0
		jg	short loc_6A1
		mov	eax, [ebp+arg_0]
		mov	dword ptr [eax+114h], 0FFFFFFFFh

loc_6A1:				; CODE XREF: _pop+2Aj _pop+8Ej
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_pop		endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 6A8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_fixup		proc near		; CODE XREF: _uscript_nextRun_56+1F6p

var_D0		= dword	ptr -0D0h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0D0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_D0]
		mov	ecx, 34h ; '4'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+114h]
		add	ecx, 20h ; ' '
		mov	edx, [ebp+arg_0]
		sub	ecx, [edx+11Ch]
		and	ecx, 8000001Fh
		jns	short loc_6E8
		dec	ecx
		or	ecx, 0FFFFFFE0h
		inc	ecx

loc_6E8:				; CODE XREF: _fixup+39j
		mov	[ebp+var_8], ecx

loc_6EB:				; CODE XREF: _fixup+A6j
		mov	eax, [ebp+arg_0]
		mov	ecx, [eax+11Ch]
		mov	edx, [ebp+arg_0]
		mov	eax, [edx+11Ch]
		sub	eax, 1
		mov	edx, [ebp+arg_0]
		mov	[edx+11Ch], eax
		test	ecx, ecx
		jle	short loc_719
		mov	[ebp+var_D0], 1
		jmp	short loc_723
; ---------------------------------------------------------------------------

loc_719:				; CODE XREF: _fixup+63j
		mov	[ebp+var_D0], 0

loc_723:				; CODE XREF: _fixup+6Fj
		cmp	[ebp+var_D0], 0
		jz	short loc_750
		mov	eax, [ebp+var_8]
		add	eax, 1
		and	eax, 8000001Fh
		jns	short loc_73E
		dec	eax
		or	eax, 0FFFFFFE0h
		inc	eax

loc_73E:				; CODE XREF: _fixup+8Fj
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ebp+arg_4]
		mov	[ecx+eax*8+18h], edx
		jmp	short loc_6EB
; ---------------------------------------------------------------------------

loc_750:				; CODE XREF: _fixup+82j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_fixup		endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 758h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_getPairIndex	proc near		; CODE XREF: _uscript_nextRun_56+130p

var_FC		= byte ptr -0FCh
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0FCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_FC]
		mov	ecx, 3Fh ; '?'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 22h ; '"'
		mov	eax, [ebp+var_8]
		push	eax
		call	_highBit
		add	esp, 4
		movsx	ecx, al
		mov	edx, 1
		shl	edx, cl
		mov	[ebp+var_14], edx
		mov	eax, [ebp+var_8]
		sub	eax, [ebp+var_14]
		mov	[ebp+var_20], eax
		mov	eax, [ebp+var_14]
		mov	[ebp+var_2C], eax
		mov	[ebp+var_38], 0
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+arg_0]
		cmp	ecx, _pairedChars[eax*4]
		jl	short loc_7C1
		mov	eax, [ebp+var_20]
		mov	[ebp+var_38], eax

loc_7C1:				; CODE XREF: _getPairIndex+61j
					; _getPairIndex:loc_7EAj
		cmp	[ebp+var_2C], 1
		jle	short loc_7EC
		mov	eax, [ebp+var_2C]
		sar	eax, 1
		mov	[ebp+var_2C], eax
		mov	eax, [ebp+var_38]
		add	eax, [ebp+var_2C]
		mov	ecx, [ebp+arg_0]
		cmp	ecx, _pairedChars[eax*4]
		jl	short loc_7EA
		mov	eax, [ebp+var_38]
		add	eax, [ebp+var_2C]
		mov	[ebp+var_38], eax

loc_7EA:				; CODE XREF: _getPairIndex+87j
		jmp	short loc_7C1
; ---------------------------------------------------------------------------

loc_7EC:				; CODE XREF: _getPairIndex+6Dj
		mov	eax, [ebp+var_38]
		mov	ecx, _pairedChars[eax*4]
		cmp	ecx, [ebp+arg_0]
		jz	short loc_802
		mov	[ebp+var_38], 0FFFFFFFFh

loc_802:				; CODE XREF: _getPairIndex+A1j
		mov	eax, [ebp+var_38]
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0FCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_getPairIndex	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 81Ch
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_highBit	proc near		; CODE XREF: _getPairIndex+29p

var_CC		= byte ptr -0CCh
var_5		= byte ptr -5
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_5], 0
		cmp	[ebp+arg_0], 0
		jg	short loc_848
		mov	al, 0E0h ; 'à'
		jmp	short loc_8C5
; ---------------------------------------------------------------------------

loc_848:				; CODE XREF: _highBit+26j
		cmp	[ebp+arg_0], 10000h
		jl	short loc_864
		mov	eax, [ebp+arg_0]
		sar	eax, 10h
		mov	[ebp+arg_0], eax
		movsx	eax, [ebp+var_5]
		add	eax, 10h
		mov	[ebp+var_5], al

loc_864:				; CODE XREF: _highBit+33j
		cmp	[ebp+arg_0], 100h
		jl	short loc_880
		mov	eax, [ebp+arg_0]
		sar	eax, 8
		mov	[ebp+arg_0], eax
		movsx	eax, [ebp+var_5]
		add	eax, 8
		mov	[ebp+var_5], al

loc_880:				; CODE XREF: _highBit+4Fj
		cmp	[ebp+arg_0], 10h
		jl	short loc_899
		mov	eax, [ebp+arg_0]
		sar	eax, 4
		mov	[ebp+arg_0], eax
		movsx	eax, [ebp+var_5]
		add	eax, 4
		mov	[ebp+var_5], al

loc_899:				; CODE XREF: _highBit+68j
		cmp	[ebp+arg_0], 4
		jl	short loc_8B2
		mov	eax, [ebp+arg_0]
		sar	eax, 2
		mov	[ebp+arg_0], eax
		movsx	eax, [ebp+var_5]
		add	eax, 2
		mov	[ebp+var_5], al

loc_8B2:				; CODE XREF: _highBit+81j
		cmp	[ebp+arg_0], 2
		jl	short loc_8C2
		movsx	eax, [ebp+var_5]
		add	eax, 1
		mov	[ebp+var_5], al

loc_8C2:				; CODE XREF: _highBit+9Aj
		mov	al, [ebp+var_5]

loc_8C5:				; CODE XREF: _highBit+2Aj
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_highBit	endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 8CCh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

_sameScript	proc near		; CODE XREF: _uscript_nextRun_56+1C4p

var_C4		= dword	ptr -0C4h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0C4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C4]
		mov	ecx, 31h ; '1'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_0], 1
		jle	short loc_90A
		cmp	[ebp+arg_4], 1
		jle	short loc_90A
		mov	eax, [ebp+arg_0]
		cmp	eax, [ebp+arg_4]
		jz	short loc_90A
		mov	[ebp+var_C4], 0
		jmp	short loc_914
; ---------------------------------------------------------------------------

loc_90A:				; CODE XREF: _sameScript+22j
					; _sameScript+28j ...
		mov	[ebp+var_C4], 1

loc_914:				; CODE XREF: _sameScript+3Cj
		mov	al, byte ptr [ebp+var_C4]
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
_sameScript	endp

_text		ends

; ===========================================================================

; Segment type:	Externs
; UNDEF
		extrn _uprv_free_56:near ; CODE	XREF: _uscript_openRun_56+7Ep
					; _uscript_closeRun_56+28p
		extrn _uprv_malloc_56:near ; CODE XREF:	_uscript_openRun_56+3Cp
		extrn __RTC_CheckEsp:near ; CODE XREF: _uscript_openRun_56+9Bp
					; _uscript_closeRun_56+3Bp ...
		extrn __RTC_Shutdown:near ; DATA XREF: .rtc$TMZ:__RTC_Shutdown_rtc$TMZo
		extrn __RTC_InitBase:near ; DATA XREF: .rtc$IMZ:__RTC_InitBase_rtc$IMZo
		extrn _uscript_getScript_56:near ; CODE	XREF: _uscript_nextRun_56+121p
		extrn @_RTC_CheckStackVars@8:near ; CODE XREF: _uscript_nextRun_56+278p


		end
