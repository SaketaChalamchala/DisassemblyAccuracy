;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2015 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-3677-7074-51			    |
; |		Michalis Polychronakis,	Stony Brook University		    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	D655BDB7F6BA2BFAFF260DD3467C6C08
; Input	CRC32 :	CB9D5F8E

; File Name   :	D:\compspace\objfiles\firefox\common\ushape.obj
; Format      :	COFF (X386MAGIC)
; includelib "msvcprtd"
; includelib "MSVCRTD"
; includelib "OLDNAMES"

		include	uni.inc	; see unicode subdir of	ida for	info on	unicode

		.686p
		.mmx
		.model flat

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
; Segment alignment 'qword' can not be represented in assembly
_rdata		segment	para public 'DATA' use32
		assume cs:_rdata
_tailFamilyIsolatedFinal dd offset byte_101
		dd offset byte_101
		dd offset byte_101
		dd offset byte_101
_tashkeelMedial	dd offset byte_100
		dd 1000000h, 2 dup(1000100h)
_yehHamzaToYeh	dd 0FEF0FEEFh
_IrrelevantPos	dd 6040200h, 0E0C0A08h
_convertLamAlef	dd 6220622h, 6230623h, 6250625h, 6270627h, 0
_araLink	dd 13211121h, 17211501h, 1D211903h, 23011F03h, 29032503h
		dd 31032D03h, 39013503h, 3D013B01h, 41033F01h, 49034503h
		dd 51034D03h, 59035503h, 5D03h,	2 dup(0)
		dd 61030003h, 69036503h, 71036D13h, 79037503h, 7F017D01h
		dd 1048103h, 2 dup(1840184h), 3440184h,	7040104h, 8040804h
		dd 104h, 2 dup(0)
		dd 87018501h, 8B018901h, 8 dup(0)
		dd 90604h, 210021h, 210000h, 10001h, 160B0003h,	20B0E0Bh
		dd 30003h, 3060Bh, 30003h
byte_100	db 3			; DATA XREF: .rdata:_tashkeelMedialo
					; .rdata:_presALinko
byte_101	db 0, 3, 0		; DATA XREF: .rdata:_tailFamilyIsolatedFinalo
					; .rdata:00000004o ...
		dd 30003h, 32A0Bh, 13809h, 10001h, 32093409h, 13609h, 3C090001h
		dd 3 dup(10001h), 13A09h, 7 dup(30003h), 3E0B0003h, 2 dup(30003h)
		dd 420B0003h, 5	dup(30003h), 500B4E09h,	30003h,	35A0Bh
		dd 560B5409h, 10001h, 90090001h, 87098909h, 92098B09h
		dd 8E090001h, 1AC0Bh, 30003h, 3940Bh, 60095E09h, 0
_presALink	dd offset byte_100
		dd 1000000h, 302h, 7 dup(0)
		dd 1000000h, 302h, 2 dup(0)
		dd 2 dup(1000000h), 1000302h, 302h, 19h	dup(0)
		dd 3020100h, 17h dup(0)
		dd 4040000h, 40404h, 0
_presBLink	dd 30303h, 3030003h, 2 dup(3030303h), 10000h, 10001h, 2010001h
		dd 10003h, 30201h, 2010001h, 4 dup(2010003h), 10003h, 10001h
		dd 2010001h, 0Eh dup(2010003h),	10003h,	2010001h, 10003h
		dd 10001h, 1
_convertFBto06	dd 6710671h, 2 dup(67B067Bh), 2	dup(67E067Eh), 2 dup(0)
		dd 2 dup(67A067Ah), 2 dup(0)
		dd 2 dup(6790679h)
		db 3 dup(0)
byte_387	db 0			; DATA XREF: .data:?__LINE__Var@?1??expandCompositCharAtBegin@@YAHPA_WHHPAW4UErrorCode@@@Z@4JA@b604b903o
		dd 7 dup(0)
		dd 2 dup(6860686h), 2 dup(0)
		dd 68D068Dh, 68C068Ch, 68E068Eh, 6880688h, 6980698h, 6910691h
		dd 2 dup(6A906A9h), 2 dup(6AF06AFh), 4 dup(0)
		dd 6BA06BAh, 2 dup(6BB06BBh), 6C006C0h,	2 dup(6C106C1h)
		dd 2 dup(6BE06BEh), 6D206D2h, 6D306D3h,	12h dup(0)
		dd 6C70000h, 6C606C7h, 6C806C6h, 6C8h, 6CB06CBh, 6C506C5h
		dd 6C906C9h, 2 dup(6D006D0h), 0Ah dup(0)
		dd 6CC06CCh
		db 0CCh, 6, 0CCh
byte_4AF	db 6			; DATA XREF: .data:?__LINE__Var@?1??shapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z@4JA@b604b903o
_convertFEto06	dd 64B064Bh, 64C064Ch, 64D064Dh, 64E064Eh, 64F064Fh, 6500650h
		dd 6510651h, 6520652h, 6220621h, 6230622h, 6240623h, 6250624h
		dd 6260625h, 6260626h, 6270626h, 6280627h, 6280628h, 6290628h
		dd 62A0629h, 62A062Ah, 62B062Ah, 62B062Bh, 62C062Bh, 62C062Ch
		dd 62D062Ch, 62D062Dh, 62E062Dh, 62E062Eh, 62F062Eh, 630062Fh
		dd 6310630h, 6320631h, 6330632h, 6330633h, 6340633h, 6340634h
		dd 6350634h, 6350635h, 6360635h, 6360636h, 6370636h, 6370637h
		dd 6380637h, 6380638h, 6390638h, 6390639h, 63A0639h, 63A063Ah
		dd 641063Ah, 6410641h, 6420641h, 6420642h, 6430642h, 6430643h
		dd 6440643h, 6440644h, 6450644h, 6450645h, 6460645h, 6460646h
		dd 6470646h, 6470647h, 6480647h, 6490648h, 64A0649h, 64A064Ah
		dd 65C064Ah, 65D065Ch, 65E065Dh, 65F065Eh, 65Fh, 0
_shapeTable	dd 2 dup(0)		; DATA XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+349o
		dd 3000100h, 1000100h, 2020000h, 2010000h, 2010100h, 3010100h
		dd 2 dup(0)
		dd 2 dup(3000100h), 2 dup(2010000h), 2010100h
		db 0, 2	dup(1)
byte_60F	db 3			; DATA XREF: getLink(wchar_t)+38r
					; getLink(wchar_t)+97r	...
_rdata		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 610h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void *__cdecl	operator new(unsigned int)
		public ??2@YAPAXI@Z
??2@YAPAXI@Z	proc near

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax],	5
		mov	eax, [ebp+var_8]
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
??2@YAPAXI@Z	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$TMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$TMZ
		;org 648h
__RTC_Shutdown_rtc$TMZ dd offset __RTC_Shutdown
_rtc$TMZ	ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rtc$IMZ	segment	dword public 'DATA' use32
		assume cs:_rtc$IMZ
		;org 64Ch
__RTC_InitBase_rtc$IMZ dd offset __RTC_InitBase
_rtc$IMZ	ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 650h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void __cdecl operator	delete(void *)
		public ??3@YAXPAX@Z
??3@YAXPAX@Z	proc near

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	eax, [ebp+var_8]
		mov	byte ptr [eax],	5
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
??3@YAXPAX@Z	endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

;
; Exported entry
;
; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 684h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl u_shapeArabic_56(void *Src, int, void *, int, int, int)
		public _u_shapeArabic_56
_u_shapeArabic_56 proc near

var_42C		= dword	ptr -42Ch
var_364		= dword	ptr -364h
var_358		= word ptr -358h
var_34C		= dword	ptr -34Ch
var_340		= word ptr -340h
var_334		= word ptr -334h
var_328		= word ptr -328h
var_31C		= dword	ptr -31Ch
var_310		= dword	ptr -310h
var_304		= dword	ptr -304h
var_2F8		= dword	ptr -2F8h
var_2EC		= dword	ptr -2ECh
var_2E0		= dword	ptr -2E0h
var_2D4		= dword	ptr -2D4h
var_2C8		= dword	ptr -2C8h
var_2BC		= dword	ptr -2BCh
var_2B0		= dword	ptr -2B0h
var_2A4		= dword	ptr -2A4h
Dst		= dword	ptr -298h
var_28C		= byte ptr -28Ch
var_2C		= dword	ptr -2Ch
var_28		= dword	ptr -28h
var_24		= dword	ptr -24h
var_20		= dword	ptr -20h
var_1C		= dword	ptr -1Ch
var_18		= dword	ptr -18h
var_C		= dword	ptr -0Ch
var_4		= dword	ptr -4
Src		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h
arg_14		= dword	ptr  1Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 42Ch
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_42C]
		mov	ecx, 10Bh
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	eax, dword ptr ds:___security_cookie
		xor	eax, ebp
		mov	[ebp+var_4], eax
		mov	eax, 200Bh
		mov	word ptr [ebp+var_2C], ax
		mov	[ebp+var_28], 3
		mov	[ebp+var_24], 2
		mov	[ebp+var_20], 40000h
		mov	[ebp+var_1C], 60000h
		mov	[ebp+var_18], 0
		cmp	[ebp+arg_14], 0
		jz	short loc_6F3
		mov	eax, [ebp+arg_14]
		mov	ecx, [eax]
		push	ecx
		call	?U_FAILURE@@YACW4UErrorCode@@@Z	; U_FAILURE(UErrorCode)
		add	esp, 4
		movsx	edx, al
		test	edx, edx
		jz	short loc_6FA

loc_6F3:				; CODE XREF: _u_shapeArabic_56+58j
		xor	eax, eax
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_6FA:				; CODE XREF: _u_shapeArabic_56+6Dj
		cmp	[ebp+Src], 0
		jz	loc_788
		cmp	[ebp+arg_4], 0FFFFFFFFh
		jl	short loc_788
		cmp	[ebp+arg_8], 0
		jnz	short loc_716
		cmp	[ebp+arg_C], 0
		jnz	short loc_788

loc_716:				; CODE XREF: _u_shapeArabic_56+8Aj
		cmp	[ebp+arg_C], 0
		jl	short loc_788
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		jbe	short loc_731
		mov	eax, [ebp+arg_10]
		and	eax, 18h
		cmp	eax, 18h
		jz	short loc_788

loc_731:				; CODE XREF: _u_shapeArabic_56+A0j
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		jbe	short loc_746
		mov	eax, [ebp+arg_10]
		and	eax, 18h
		cmp	eax, 10h
		jz	short loc_788

loc_746:				; CODE XREF: _u_shapeArabic_56+B5j
		mov	eax, [ebp+arg_10]
		and	eax, 200h
		jnz	short loc_788
		mov	eax, [ebp+arg_10]
		and	eax, 0E0h
		cmp	eax, 0A0h ; ' '
		jz	short loc_788
		mov	eax, [ebp+arg_10]
		and	eax, 10003h
		jz	short loc_773
		mov	eax, [ebp+arg_10]
		and	eax, 4000h
		jnz	short loc_788

loc_773:				; CODE XREF: _u_shapeArabic_56+E3j
		mov	eax, [ebp+arg_10]
		and	eax, 4000h
		jz	short loc_798
		mov	eax, [ebp+arg_10]
		and	eax, 18h
		cmp	eax, 18h
		jz	short loc_798

loc_788:				; CODE XREF: _u_shapeArabic_56+7Aj
					; _u_shapeArabic_56+84j ...
		mov	eax, [ebp+arg_14]
		mov	dword ptr [eax], 1
		xor	eax, eax
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_798:				; CODE XREF: _u_shapeArabic_56+F7j
					; _u_shapeArabic_56+102j
		mov	eax, [ebp+arg_10]
		and	eax, 10003h
		jbe	short loc_7F2
		mov	eax, [ebp+arg_10]
		and	eax, 10003h
		cmp	eax, 3
		jz	short loc_7F2
		mov	eax, [ebp+arg_10]
		and	eax, 10003h
		cmp	eax, 2
		jz	short loc_7F2
		mov	eax, [ebp+arg_10]
		and	eax, 10003h
		jz	short loc_7F2
		mov	eax, [ebp+arg_10]
		and	eax, 10003h
		cmp	eax, 10000h
		jz	short loc_7F2
		mov	eax, [ebp+arg_10]
		and	eax, 10003h
		cmp	eax, 1
		jz	short loc_7F2
		mov	eax, [ebp+arg_14]
		mov	dword ptr [eax], 1
		xor	eax, eax
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_7F2:				; CODE XREF: _u_shapeArabic_56+11Cj
					; _u_shapeArabic_56+129j ...
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		jbe	short loc_848
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		cmp	eax, 40000h
		jz	short loc_848
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		cmp	eax, 60000h
		jz	short loc_848
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		cmp	eax, 80000h
		jz	short loc_848
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		cmp	eax, 0C0000h
		jz	short loc_848
		mov	eax, [ebp+arg_14]
		mov	dword ptr [eax], 1
		xor	eax, eax
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_848:				; CODE XREF: _u_shapeArabic_56+176j
					; _u_shapeArabic_56+185j ...
		cmp	[ebp+arg_4], 0FFFFFFFFh
		jnz	short loc_85D
		mov	eax, [ebp+Src]
		push	eax
		call	_u_strlen_56
		add	esp, 4
		mov	[ebp+arg_4], eax

loc_85D:				; CODE XREF: _u_shapeArabic_56+1C8j
		cmp	[ebp+arg_4], 0
		jg	short loc_87E
		mov	eax, [ebp+arg_14]
		push	eax
		push	0
		mov	ecx, [ebp+arg_C]
		push	ecx
		mov	edx, [ebp+arg_8]
		push	edx
		call	_u_terminateUChars_56
		add	esp, 10h
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_87E:				; CODE XREF: _u_shapeArabic_56+1DDj
		cmp	[ebp+arg_8], 0
		jz	short loc_8C0
		mov	eax, [ebp+Src]
		cmp	eax, [ebp+arg_8]
		ja	short loc_89A
		mov	eax, [ebp+arg_4]
		mov	ecx, [ebp+Src]
		lea	edx, [ecx+eax*2]
		cmp	[ebp+arg_8], edx
		jb	short loc_8B0

loc_89A:				; CODE XREF: _u_shapeArabic_56+206j
		mov	eax, [ebp+arg_8]
		cmp	eax, [ebp+Src]
		ja	short loc_8C0
		mov	eax, [ebp+arg_C]
		mov	ecx, [ebp+arg_8]
		lea	edx, [ecx+eax*2]
		cmp	[ebp+Src], edx
		jnb	short loc_8C0

loc_8B0:				; CODE XREF: _u_shapeArabic_56+214j
		mov	eax, [ebp+arg_14]
		mov	dword ptr [eax], 1
		xor	eax, eax
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_8C0:				; CODE XREF: _u_shapeArabic_56+1FEj
					; _u_shapeArabic_56+21Cj ...
		mov	eax, [ebp+arg_10]
		and	eax, 8000000h
		jz	short loc_8D5
		mov	eax, 0FE73h
		mov	word ptr [ebp+var_2C], ax
		jmp	short loc_8DE
; ---------------------------------------------------------------------------

loc_8D5:				; CODE XREF: _u_shapeArabic_56+244j
		mov	eax, 200Bh
		mov	word ptr [ebp+var_2C], ax

loc_8DE:				; CODE XREF: _u_shapeArabic_56+24Fj
		mov	eax, [ebp+arg_10]
		and	eax, 18h
		jz	loc_1044
		mov	[ebp+var_2A4], 0
		mov	[ebp+var_2BC], 0
		mov	[ebp+var_2C8], 0
		mov	eax, [ebp+arg_10]
		and	eax, 4000h
		jbe	loc_BD6
		mov	eax, [ebp+arg_10]
		and	eax, 4
		neg	eax
		sbb	eax, eax
		add	eax, 1
		mov	[ebp+var_2D4], eax
		mov	eax, [ebp+arg_10]
		and	eax, 4018h
		xor	ecx, ecx
		cmp	eax, 4018h
		setz	cl
		mov	[ebp+var_2E0], ecx
		xor	eax, eax
		cmp	[ebp+var_2D4], 0
		setnz	al
		lea	eax, [eax+eax-1]
		mov	[ebp+var_2EC], eax
		cmp	[ebp+var_2D4], 0
		jz	short loc_96C
		mov	[ebp+var_42C], 0FFFFFFFFh
		jmp	short loc_977
; ---------------------------------------------------------------------------

loc_96C:				; CODE XREF: _u_shapeArabic_56+2DAj
		mov	eax, [ebp+arg_4]
		shl	eax, 1
		mov	[ebp+var_42C], eax

loc_977:				; CODE XREF: _u_shapeArabic_56+2E6j
		mov	ecx, [ebp+var_42C]
		mov	[ebp+var_2F8], ecx
		cmp	[ebp+var_2D4], 0
		jz	short loc_998
		mov	[ebp+var_42C], 0FFFFFFFFh
		jmp	short loc_9A1
; ---------------------------------------------------------------------------

loc_998:				; CODE XREF: _u_shapeArabic_56+306j
		mov	eax, [ebp+arg_4]
		mov	[ebp+var_42C], eax

loc_9A1:				; CODE XREF: _u_shapeArabic_56+312j
		mov	ecx, [ebp+var_42C]
		mov	[ebp+var_304], ecx
		cmp	[ebp+var_2D4], 0
		jz	short loc_9C1
		mov	eax, [ebp+arg_4]
		mov	[ebp+var_42C], eax
		jmp	short loc_9CB
; ---------------------------------------------------------------------------

loc_9C1:				; CODE XREF: _u_shapeArabic_56+330j
		mov	[ebp+var_42C], 0FFFFFFFFh

loc_9CB:				; CODE XREF: _u_shapeArabic_56+33Bj
		mov	ecx, [ebp+var_42C]
		mov	[ebp+var_310], ecx
		mov	[ebp+var_31C], 1
		xor	eax, eax
		mov	[ebp+var_328], ax
		xor	eax, eax
		mov	[ebp+var_340], ax
		mov	[ebp+var_34C], 0
		mov	eax, [ebp+arg_4]
		shl	eax, 1
		shl	eax, 1
		push	eax
		call	_uprv_malloc_56
		add	esp, 4
		mov	[ebp+var_2A4], eax
		cmp	[ebp+var_2A4], 0
		jnz	short loc_A2C
		mov	eax, [ebp+arg_14]
		mov	dword ptr [eax], 7
		xor	eax, eax
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_A2C:				; CODE XREF: _u_shapeArabic_56+396j
					; _u_shapeArabic_56:loc_B95j
		mov	eax, [ebp+var_304]
		add	eax, [ebp+var_2EC]
		mov	[ebp+var_304], eax
		mov	ecx, [ebp+var_304]
		cmp	ecx, [ebp+var_310]
		jz	loc_B9A
		mov	ax, [ebp+var_340]
		mov	[ebp+var_334], ax
		mov	eax, [ebp+var_304]
		mov	ecx, [ebp+Src]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?getLink@@YA_W_W@Z ; getLink(wchar_t)
		add	esp, 4
		mov	[ebp+var_340], ax
		cmp	[ebp+var_2E0], 0
		jz	loc_B39
		movzx	eax, [ebp+var_334]
		movzx	ecx, [ebp+var_340]
		or	eax, ecx
		and	eax, 0C0h
		cmp	eax, 0C0h ; 'À'
		jnz	loc_B39
		cmp	[ebp+var_31C], 0
		jz	loc_B39
		mov	[ebp+var_31C], 0
		movzx	eax, [ebp+var_328]
		mov	ecx, [ebp+var_304]
		mov	edx, [ebp+Src]
		movzx	ecx, word ptr [edx+ecx*2]
		cmp	eax, ecx
		jge	short loc_AE7
		mov	dx, [ebp+var_328]
		mov	word ptr [ebp+var_42C+2], dx
		jmp	short loc_AFB
; ---------------------------------------------------------------------------

loc_AE7:				; CODE XREF: _u_shapeArabic_56+451j
		mov	eax, [ebp+var_304]
		mov	ecx, [ebp+Src]
		mov	dx, [ecx+eax*2]
		mov	word ptr [ebp+var_42C+2], dx

loc_AFB:				; CODE XREF: _u_shapeArabic_56+461j
		movzx	eax, word ptr [ebp+var_42C+2]
		add	eax, 0F612h
		mov	ecx, [ebp+var_2F8]
		mov	edx, [ebp+var_2A4]
		mov	[edx+ecx*2], ax
		mov	eax, [ebp+var_2F8]
		mov	ecx, [ebp+var_2A4]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?getLink@@YA_W_W@Z ; getLink(wchar_t)
		add	esp, 4
		mov	[ebp+var_340], ax
		jmp	short loc_B95
; ---------------------------------------------------------------------------

loc_B39:				; CODE XREF: _u_shapeArabic_56+3FEj
					; _u_shapeArabic_56+41Ej ...
		mov	[ebp+var_31C], 1
		mov	eax, [ebp+var_2F8]
		add	eax, [ebp+var_2EC]
		mov	[ebp+var_2F8], eax
		mov	ecx, [ebp+var_2F8]
		mov	edx, [ebp+var_2A4]
		mov	eax, [ebp+var_304]
		mov	esi, [ebp+Src]
		mov	ax, [esi+eax*2]
		mov	[edx+ecx*2], ax
		mov	eax, [ebp+var_304]
		mov	ecx, [ebp+Src]
		mov	dx, [ecx+eax*2]
		mov	[ebp+var_328], dx
		mov	eax, [ebp+var_34C]
		add	eax, 1
		mov	[ebp+var_34C], eax

loc_B95:				; CODE XREF: _u_shapeArabic_56+4B3j
		jmp	loc_A2C
; ---------------------------------------------------------------------------

loc_B9A:				; CODE XREF: _u_shapeArabic_56+3C6j
		cmp	[ebp+var_2D4], 0
		jz	short loc_BAF
		mov	[ebp+var_42C], 0
		jmp	short loc_BBB
; ---------------------------------------------------------------------------

loc_BAF:				; CODE XREF: _u_shapeArabic_56+51Dj
		mov	eax, [ebp+var_2F8]
		mov	[ebp+var_42C], eax

loc_BBB:				; CODE XREF: _u_shapeArabic_56+529j
		mov	ecx, [ebp+var_42C]
		mov	edx, [ebp+var_2A4]
		lea	eax, [edx+ecx*2]
		mov	[ebp+Src], eax
		mov	eax, [ebp+var_34C]
		mov	[ebp+arg_4], eax

loc_BD6:				; CODE XREF: _u_shapeArabic_56+28Cj
		mov	eax, [ebp+arg_10]
		and	eax, 10003h
		jz	short loc_BEF
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		cmp	eax, 80000h
		jnz	short loc_C0F

loc_BEF:				; CODE XREF: _u_shapeArabic_56+55Aj
		mov	eax, [ebp+arg_10]
		push	eax
		mov	ecx, [ebp+arg_C]
		push	ecx
		mov	edx, [ebp+arg_4]
		push	edx
		mov	eax, [ebp+Src]
		push	eax
		call	?calculateSize@@YAHPB_WHHI@Z ; calculateSize(wchar_t const *,int,int,uint)
		add	esp, 10h
		mov	[ebp+var_2B0], eax
		jmp	short loc_C18
; ---------------------------------------------------------------------------

loc_C0F:				; CODE XREF: _u_shapeArabic_56+569j
		mov	eax, [ebp+arg_4]
		mov	[ebp+var_2B0], eax

loc_C18:				; CODE XREF: _u_shapeArabic_56+589j
		mov	eax, [ebp+var_2B0]
		cmp	eax, [ebp+arg_C]
		jle	short loc_C4F
		mov	eax, [ebp+arg_14]
		mov	dword ptr [eax], 0Fh
		cmp	[ebp+var_2A4], 0
		jz	short loc_C44
		mov	eax, [ebp+var_2A4]
		push	eax
		call	_uprv_free_56
		add	esp, 4

loc_C44:				; CODE XREF: _u_shapeArabic_56+5AFj
		mov	eax, [ebp+var_2B0]
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_C4F:				; CODE XREF: _u_shapeArabic_56+59Dj
		mov	eax, [ebp+arg_4]
		cmp	eax, [ebp+var_2B0]
		jle	short loc_C63
		mov	eax, [ebp+arg_4]
		mov	[ebp+var_2B0], eax

loc_C63:				; CODE XREF: _u_shapeArabic_56+5D4j
		cmp	[ebp+var_2B0], 12Ch
		jg	short loc_C87
		mov	[ebp+var_2B0], 12Ch
		lea	eax, [ebp+var_28C]
		mov	[ebp+Dst], eax
		jmp	short loc_CCF
; ---------------------------------------------------------------------------

loc_C87:				; CODE XREF: _u_shapeArabic_56+5E9j
		mov	eax, [ebp+var_2B0]
		shl	eax, 1
		push	eax
		call	_uprv_malloc_56
		add	esp, 4
		mov	[ebp+Dst], eax
		cmp	[ebp+Dst], 0
		jnz	short loc_CCF
		mov	eax, [ebp+arg_14]
		mov	dword ptr [eax], 7
		cmp	[ebp+var_2A4], 0
		jz	short loc_CC8
		mov	eax, [ebp+var_2A4]
		push	eax
		call	_uprv_free_56
		add	esp, 4

loc_CC8:				; CODE XREF: _u_shapeArabic_56+633j
		xor	eax, eax
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_CCF:				; CODE XREF: _u_shapeArabic_56+601j
					; _u_shapeArabic_56+621j
		push	1
		mov	eax, [ebp+Src]
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	ecx, [ebp+arg_4]
		shl	ecx, 1
		push	ecx		; Size
		mov	edx, [ebp+Src]
		push	edx		; Src
		mov	eax, [ebp+Dst]
		push	eax		; Dst
		call	_memcpy
		add	esp, 0Ch
		cmp	[ebp+var_2A4], 0
		jz	short loc_D0E
		mov	eax, [ebp+var_2A4]
		push	eax
		call	_uprv_free_56
		add	esp, 4

loc_D0E:				; CODE XREF: _u_shapeArabic_56+679j
		mov	eax, [ebp+arg_4]
		cmp	eax, [ebp+var_2B0]
		jge	short loc_D3C
		mov	eax, [ebp+var_2B0]
		sub	eax, [ebp+arg_4]
		shl	eax, 1
		push	eax		; Size
		push	0		; Val
		mov	ecx, [ebp+arg_4]
		mov	edx, [ebp+Dst]
		lea	eax, [edx+ecx*2]
		push	eax		; Dst
		call	_memset
		add	esp, 0Ch

loc_D3C:				; CODE XREF: _u_shapeArabic_56+693j
		mov	eax, [ebp+arg_10]
		and	eax, 4
		jnz	short loc_D8E
		lea	eax, [ebp+var_2C8]
		push	eax
		lea	ecx, [ebp+var_2BC]
		push	ecx
		mov	edx, [ebp+arg_10]
		push	edx
		mov	eax, [ebp+arg_4]
		push	eax
		mov	ecx, [ebp+Dst]
		push	ecx
		call	?countSpaces@@YAXPA_WHIPAH1@Z ;	countSpaces(wchar_t *,int,uint,int *,int *)
		add	esp, 14h
		mov	eax, [ebp+var_2C8]
		push	eax		; int
		mov	ecx, [ebp+var_2BC]
		push	ecx		; int
		mov	edx, [ebp+arg_10]
		push	edx		; int
		mov	eax, [ebp+arg_4]
		push	eax		; int
		mov	ecx, [ebp+Dst]
		push	ecx		; int
		call	?invertBuffer@@YAXPA_WHIHH@Z ; invertBuffer(wchar_t *,int,uint,int,int)
		add	esp, 14h

loc_D8E:				; CODE XREF: _u_shapeArabic_56+6BEj
		mov	eax, [ebp+arg_10]
		and	eax, 4
		jz	short loc_DC3
		mov	eax, [ebp+arg_10]
		and	eax, 4000000h
		jz	short loc_DC3
		mov	[ebp+var_18], 1
		mov	[ebp+var_28], 2
		mov	[ebp+var_24], 3
		mov	[ebp+var_20], 60000h
		mov	[ebp+var_1C], 40000h

loc_DC3:				; CODE XREF: _u_shapeArabic_56+710j
					; _u_shapeArabic_56+71Aj
		mov	eax, [ebp+arg_10]
		and	eax, 18h
		mov	[ebp+var_42C], eax
		cmp	[ebp+var_42C], 8
		jz	short loc_DF7
		cmp	[ebp+var_42C], 10h
		jz	loc_F2E
		cmp	[ebp+var_42C], 18h
		jz	loc_EE0
		jmp	loc_F7A
; ---------------------------------------------------------------------------

loc_DF7:				; CODE XREF: _u_shapeArabic_56+752j
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		jbe	short loc_E5E
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		cmp	eax, 0C0000h
		jz	short loc_E5E
		sub	esp, 18h
		mov	eax, esp
		mov	ecx, [ebp+var_2C]
		mov	[eax], ecx
		mov	edx, [ebp+var_28]
		mov	[eax+4], edx
		mov	ecx, [ebp+var_24]
		mov	[eax+8], ecx
		mov	edx, [ebp+var_20]
		mov	[eax+0Ch], edx
		mov	ecx, [ebp+var_1C]
		mov	[eax+10h], ecx
		mov	edx, [ebp+var_18]
		mov	[eax+14h], edx
		push	2		; int
		mov	eax, [ebp+arg_14]
		push	eax		; int
		mov	ecx, [ebp+arg_10]
		push	ecx		; int
		mov	edx, [ebp+arg_C]
		push	edx		; int
		mov	eax, [ebp+arg_4]
		push	eax		; int
		mov	ecx, [ebp+Dst]
		push	ecx		; void *
		call	?shapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z ; shapeUnicode(wchar_t *,int,int,uint,UErrorCode	*,int,uShapeVariables)
		add	esp, 30h
		mov	[ebp+var_C], eax
		jmp	short loc_EDB
; ---------------------------------------------------------------------------

loc_E5E:				; CODE XREF: _u_shapeArabic_56+77Bj
					; _u_shapeArabic_56+78Aj
		sub	esp, 18h
		mov	eax, esp
		mov	ecx, [ebp+var_2C]
		mov	[eax], ecx
		mov	edx, [ebp+var_28]
		mov	[eax+4], edx
		mov	ecx, [ebp+var_24]
		mov	[eax+8], ecx
		mov	edx, [ebp+var_20]
		mov	[eax+0Ch], edx
		mov	ecx, [ebp+var_1C]
		mov	[eax+10h], ecx
		mov	edx, [ebp+var_18]
		mov	[eax+14h], edx
		push	1		; int
		mov	eax, [ebp+arg_14]
		push	eax		; int
		mov	ecx, [ebp+arg_10]
		push	ecx		; int
		mov	edx, [ebp+arg_C]
		push	edx		; int
		mov	eax, [ebp+arg_4]
		push	eax		; int
		mov	ecx, [ebp+Dst]
		push	ecx		; void *
		call	?shapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z ; shapeUnicode(wchar_t *,int,int,uint,UErrorCode	*,int,uShapeVariables)
		add	esp, 30h
		mov	[ebp+var_C], eax
		mov	eax, [ebp+arg_10]
		and	eax, 0E0000h
		cmp	eax, 0C0000h
		jnz	short loc_EDB
		mov	eax, [ebp+arg_14]
		push	eax
		mov	ecx, [ebp+arg_10]
		push	ecx
		mov	edx, [ebp+arg_C]
		push	edx
		mov	eax, [ebp+var_C]
		push	eax
		mov	ecx, [ebp+Dst]
		push	ecx
		call	?handleTashkeelWithTatweel@@YAHPA_WHHIPAW4UErrorCode@@@Z ; handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *)
		add	esp, 14h
		mov	[ebp+var_C], eax

loc_EDB:				; CODE XREF: _u_shapeArabic_56+7D8j
					; _u_shapeArabic_56+833j
		jmp	loc_F81
; ---------------------------------------------------------------------------

loc_EE0:				; CODE XREF: _u_shapeArabic_56+768j
		sub	esp, 18h
		mov	eax, esp
		mov	ecx, [ebp+var_2C]
		mov	[eax], ecx
		mov	edx, [ebp+var_28]
		mov	[eax+4], edx
		mov	ecx, [ebp+var_24]
		mov	[eax+8], ecx
		mov	edx, [ebp+var_20]
		mov	[eax+0Ch], edx
		mov	ecx, [ebp+var_1C]
		mov	[eax+10h], ecx
		mov	edx, [ebp+var_18]
		mov	[eax+14h], edx
		push	0		; int
		mov	eax, [ebp+arg_14]
		push	eax		; int
		mov	ecx, [ebp+arg_10]
		push	ecx		; int
		mov	edx, [ebp+arg_C]
		push	edx		; int
		mov	eax, [ebp+arg_4]
		push	eax		; int
		mov	ecx, [ebp+Dst]
		push	ecx		; void *
		call	?shapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z ; shapeUnicode(wchar_t *,int,int,uint,UErrorCode	*,int,uShapeVariables)
		add	esp, 30h
		mov	[ebp+var_C], eax
		jmp	short loc_F81
; ---------------------------------------------------------------------------

loc_F2E:				; CODE XREF: _u_shapeArabic_56+75Bj
		sub	esp, 18h
		mov	eax, esp
		mov	ecx, [ebp+var_2C]
		mov	[eax], ecx
		mov	edx, [ebp+var_28]
		mov	[eax+4], edx
		mov	ecx, [ebp+var_24]
		mov	[eax+8], ecx
		mov	edx, [ebp+var_20]
		mov	[eax+0Ch], edx
		mov	ecx, [ebp+var_1C]
		mov	[eax+10h], ecx
		mov	edx, [ebp+var_18]
		mov	[eax+14h], edx
		mov	eax, [ebp+arg_14]
		push	eax		; int
		mov	ecx, [ebp+arg_10]
		push	ecx		; int
		mov	edx, [ebp+arg_C]
		push	edx		; int
		mov	eax, [ebp+arg_4]
		push	eax		; int
		mov	ecx, [ebp+Dst]
		push	ecx		; void *
		call	?deShapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@UuShapeVariables@@@Z	; deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)
		add	esp, 2Ch
		mov	[ebp+var_C], eax
		jmp	short loc_F81
; ---------------------------------------------------------------------------

loc_F7A:				; CODE XREF: _u_shapeArabic_56+76Ej
		mov	[ebp+var_C], 0

loc_F81:				; CODE XREF: _u_shapeArabic_56:loc_EDBj
					; _u_shapeArabic_56+8A8j ...
		mov	eax, [ebp+arg_10]
		and	eax, 4
		jnz	short loc_FD3
		lea	eax, [ebp+var_2C8]
		push	eax
		lea	ecx, [ebp+var_2BC]
		push	ecx
		mov	edx, [ebp+arg_10]
		push	edx
		mov	eax, [ebp+var_C]
		push	eax
		mov	ecx, [ebp+Dst]
		push	ecx
		call	?countSpaces@@YAXPA_WHIPAH1@Z ;	countSpaces(wchar_t *,int,uint,int *,int *)
		add	esp, 14h
		mov	eax, [ebp+var_2C8]
		push	eax
		mov	ecx, [ebp+var_2BC]
		push	ecx
		mov	edx, [ebp+arg_10]
		push	edx
		mov	eax, [ebp+var_C]
		push	eax
		mov	ecx, [ebp+Dst]
		push	ecx
		call	?invertBuffer@@YAXPA_WHIHH@Z ; invertBuffer(wchar_t *,int,uint,int,int)
		add	esp, 14h

loc_FD3:				; CODE XREF: _u_shapeArabic_56+903j
		push	1
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	ecx, [ebp+arg_C]
		push	ecx
		mov	edx, [ebp+var_C]
		push	edx
		call	_uprv_min_56
		add	esp, 8
		shl	eax, 1
		push	eax		; Size
		mov	eax, [ebp+Dst]
		push	eax		; Src
		mov	ecx, [ebp+arg_8]
		push	ecx		; Dst
		call	_memcpy
		add	esp, 0Ch
		mov	eax, [ebp+Dst]
		lea	ecx, [ebp+var_28C]
		cmp	eax, ecx
		jz	short loc_1029
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_free_56
		add	esp, 4

loc_1029:				; CODE XREF: _u_shapeArabic_56+994j
		mov	eax, [ebp+var_C]
		cmp	eax, [ebp+arg_C]
		jle	short loc_1042
		mov	eax, [ebp+arg_14]
		mov	dword ptr [eax], 0Fh
		mov	eax, [ebp+var_C]
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_1042:				; CODE XREF: _u_shapeArabic_56+9ABj
		jmp	short loc_1087
; ---------------------------------------------------------------------------

loc_1044:				; CODE XREF: _u_shapeArabic_56+260j
		mov	eax, [ebp+arg_C]
		cmp	eax, [ebp+arg_4]
		jge	short loc_105D
		mov	eax, [ebp+arg_14]
		mov	dword ptr [eax], 0Fh
		mov	eax, [ebp+arg_4]
		jmp	loc_125F
; ---------------------------------------------------------------------------

loc_105D:				; CODE XREF: _u_shapeArabic_56+9C6j
		push	1
		mov	eax, [ebp+Src]
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	ecx, [ebp+arg_4]
		shl	ecx, 1
		push	ecx		; Size
		mov	edx, [ebp+Src]
		push	edx		; Src
		mov	eax, [ebp+arg_8]
		push	eax		; Dst
		call	_memcpy
		add	esp, 0Ch
		mov	eax, [ebp+arg_4]
		mov	[ebp+var_C], eax

loc_1087:				; CODE XREF: _u_shapeArabic_56:loc_1042j
		mov	eax, [ebp+arg_10]
		and	eax, 0E0h
		jz	$LN21		; jumptable 0000110F default case
		mov	eax, [ebp+arg_10]
		and	eax, 300h
		mov	[ebp+var_42C], eax
		jz	short loc_10B3
		cmp	[ebp+var_42C], 100h
		jz	short loc_10C1
		jmp	short loc_10CF
; ---------------------------------------------------------------------------

loc_10B3:				; CODE XREF: _u_shapeArabic_56+A1Fj
		mov	eax, 660h
		mov	[ebp+var_358], ax
		jmp	short loc_10D8
; ---------------------------------------------------------------------------

loc_10C1:				; CODE XREF: _u_shapeArabic_56+A2Bj
		mov	eax, 6F0h
		mov	[ebp+var_358], ax
		jmp	short loc_10D8
; ---------------------------------------------------------------------------

loc_10CF:				; CODE XREF: _u_shapeArabic_56+A2Dj
		xor	eax, eax
		mov	[ebp+var_358], ax

loc_10D8:				; CODE XREF: _u_shapeArabic_56+A3Bj
					; _u_shapeArabic_56+A49j
		mov	eax, [ebp+arg_10]
		and	eax, 0E0h
		mov	[ebp+var_42C], eax
		mov	ecx, [ebp+var_42C]
		sub	ecx, 20h ; ' '
		mov	[ebp+var_42C], ecx
		cmp	[ebp+var_42C], 60h ; '`' ; switch 97 cases
		ja	$LN21		; jumptable 0000110F default case
		mov	edx, [ebp+var_42C]
		movzx	eax, ds:$LN87[edx]
		jmp	ds:$LN94[eax*4]	; switch jump
; ---------------------------------------------------------------------------

$LN13:					; CODE XREF: _u_shapeArabic_56+A8Bj
					; DATA XREF: .text:$LN94o
		movzx	eax, [ebp+var_358] ; jumptable 0000110F	case 0
		sub	eax, 30h ; '0'
		mov	[ebp+var_358], ax
		mov	[ebp+var_364], 0
		jmp	short loc_1142
; ---------------------------------------------------------------------------

loc_1133:				; CODE XREF: _u_shapeArabic_56:loc_1185j
		mov	eax, [ebp+var_364]
		add	eax, 1
		mov	[ebp+var_364], eax

loc_1142:				; CODE XREF: _u_shapeArabic_56+AADj
		mov	eax, [ebp+var_364]
		cmp	eax, [ebp+var_C]
		jge	short loc_1187
		mov	eax, [ebp+var_364]
		mov	ecx, [ebp+arg_8]
		movzx	edx, word ptr [ecx+eax*2]
		sub	edx, 30h ; '0'
		cmp	edx, 0Ah
		jnb	short loc_1185
		movzx	eax, [ebp+var_358]
		mov	ecx, [ebp+var_364]
		mov	edx, [ebp+arg_8]
		movzx	ecx, word ptr [edx+ecx*2]
		add	ecx, eax
		mov	edx, [ebp+var_364]
		mov	eax, [ebp+arg_8]
		mov	[eax+edx*2], cx

loc_1185:				; CODE XREF: _u_shapeArabic_56+ADCj
		jmp	short loc_1133
; ---------------------------------------------------------------------------

loc_1187:				; CODE XREF: _u_shapeArabic_56+AC7j
		jmp	$LN21		; jumptable 0000110F default case
; ---------------------------------------------------------------------------

$LN8:					; CODE XREF: _u_shapeArabic_56+A8Bj
					; DATA XREF: .text:$LN94o
		mov	[ebp+var_364], 0 ; jumptable 0000110F case 32
		jmp	short loc_11A7
; ---------------------------------------------------------------------------

loc_1198:				; CODE XREF: _u_shapeArabic_56:loc_11F3j
		mov	eax, [ebp+var_364]
		add	eax, 1
		mov	[ebp+var_364], eax

loc_11A7:				; CODE XREF: _u_shapeArabic_56+B12j
		mov	eax, [ebp+var_364]
		cmp	eax, [ebp+var_C]
		jge	short loc_11F5
		mov	eax, [ebp+var_364]
		mov	ecx, [ebp+arg_8]
		movzx	edx, word ptr [ecx+eax*2]
		movzx	eax, [ebp+var_358]
		sub	edx, eax
		cmp	edx, 0Ah
		jnb	short loc_11F3
		movzx	eax, [ebp+var_358]
		sub	eax, 30h ; '0'
		mov	ecx, [ebp+var_364]
		mov	edx, [ebp+arg_8]
		movzx	ecx, word ptr [edx+ecx*2]
		sub	ecx, eax
		mov	edx, [ebp+var_364]
		mov	eax, [ebp+arg_8]
		mov	[eax+edx*2], cx

loc_11F3:				; CODE XREF: _u_shapeArabic_56+B47j
		jmp	short loc_1198
; ---------------------------------------------------------------------------

loc_11F5:				; CODE XREF: _u_shapeArabic_56+B2Cj
		jmp	short $LN21	; jumptable 0000110F default case
; ---------------------------------------------------------------------------

$LN3:					; CODE XREF: _u_shapeArabic_56+A8Bj
					; DATA XREF: .text:$LN94o
		push	0		; jumptable 0000110F case 64
		mov	eax, [ebp+arg_10]
		and	eax, 4
		setz	cl
		movzx	edx, cl
		push	edx
		movzx	eax, [ebp+var_358]
		push	eax
		mov	ecx, [ebp+var_C]
		push	ecx
		mov	edx, [ebp+arg_8]
		push	edx
		call	?_shapeToArabicDigitsWithContext@@YAXPA_WH_WCC@Z ; _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed	char,signed char)
		add	esp, 14h
		jmp	short $LN21	; jumptable 0000110F default case
; ---------------------------------------------------------------------------

$LN2:					; CODE XREF: _u_shapeArabic_56+A8Bj
					; DATA XREF: .text:$LN94o
		push	1		; jumptable 0000110F case 96
		mov	eax, [ebp+arg_10]
		and	eax, 4
		setz	cl
		movzx	edx, cl
		push	edx
		movzx	eax, [ebp+var_358]
		push	eax
		mov	ecx, [ebp+var_C]
		push	ecx
		mov	edx, [ebp+arg_8]
		push	edx
		call	?_shapeToArabicDigitsWithContext@@YAXPA_WH_WCC@Z ; _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed	char,signed char)
		add	esp, 14h

$LN21:					; CODE XREF: _u_shapeArabic_56+A0Bj
					; _u_shapeArabic_56+A78j ...
		mov	eax, [ebp+arg_14] ; jumptable 0000110F default case
		push	eax
		mov	ecx, [ebp+var_C]
		push	ecx
		mov	edx, [ebp+arg_C]
		push	edx
		mov	eax, [ebp+arg_8]
		push	eax
		call	_u_terminateUChars_56
		add	esp, 10h

loc_125F:				; CODE XREF: _u_shapeArabic_56+71j
					; _u_shapeArabic_56+10Fj ...
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN93
		call	@_RTC_CheckStackVars@8 ; _RTC_CheckStackVars(x,x)
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		mov	ecx, [ebp+var_4]
		xor	ecx, ebp
		call	@__security_check_cookie@4 ; __security_check_cookie(x)
		add	esp, 42Ch
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
_u_shapeArabic_56 endp

; ---------------------------------------------------------------------------
		align 10h
$LN93		dd 4			; DATA XREF: _u_shapeArabic_56+BDFo
		dd offset $LN92
$LN92		dd 0FFFFFFD4h, 18h	; DATA XREF: .text:00001294o
		dd offset $LN88		; "shapeVars"
		dd 0FFFFFD74h, 258h
		dd offset $LN89		; "buffer"
		dd 0FFFFFD44h, 4
		dd offset $LN90		; "spacesCountl"
		dd 0FFFFFD38h, 4
		dd offset $LN91		; "spacesCountr"
$LN91		db 'spacesCountr',0     ; DATA XREF: .text:000012C4o
$LN90		db 'spacesCountl',0     ; DATA XREF: .text:000012B8o
$LN89		db 'buffer',0           ; DATA XREF: .text:000012ACo
$LN88		db 'shapeVars',0        ; DATA XREF: .text:000012A0o
		align 4
$LN94		dd offset $LN13, offset	$LN8, offset $LN3, offset $LN2
					; DATA XREF: _u_shapeArabic_56+A8Br
		dd offset $LN21		; jump table for switch	statement
$LN87		db	0,     4,     4,     4 ; DATA XREF: _u_shapeArabic_56+A84r
		db	4,     4,     4,     4 ; indirect table	for switch statement
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	1,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	2,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	4,     4,     4,     4
		db	3
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 136Ch
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; signed char __cdecl U_FAILURE(enum  UErrorCode)
?U_FAILURE@@YACW4UErrorCode@@@Z	proc near ; CODE XREF: _u_shapeArabic_56+60p

var_C0		= byte ptr -0C0h
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		cmp	[ebp+arg_0], 0
		setnle	al
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?U_FAILURE@@YACW4UErrorCode@@@Z	endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1398h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void __cdecl _shapeToArabicDigitsWithContext(wchar_t *, int, wchar_t,	signed char, signed char)
?_shapeToArabicDigitsWithContext@@YAXPA_WH_WCC@Z proc near
					; CODE XREF: _u_shapeArabic_56+B92p
					; _u_shapeArabic_56+BBBp

var_E8		= dword	ptr -0E8h
var_20		= word ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= word ptr  10h
arg_C		= byte ptr  14h
arg_10		= byte ptr  18h

		push	ebp
		mov	ebp, esp
		sub	esp, 0E8h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_E8]
		mov	ecx, 3Ah ; ':'
		mov	eax, 0CCCCCCCCh
		rep stosd
		call	_ubidi_getSingleton_56
		mov	[ebp+var_8], eax
		movzx	eax, [ebp+arg_8]
		sub	eax, 30h ; '0'
		mov	[ebp+arg_8], ax
		movsx	eax, [ebp+arg_C]
		test	eax, eax
		jz	loc_146F
		mov	[ebp+var_14], 0
		jmp	short loc_13E7
; ---------------------------------------------------------------------------

loc_13DE:				; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char):$LN16j
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax

loc_13E7:				; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+44j
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+arg_4]
		jge	short loc_146A
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ecx+eax*2]
		mov	[ebp+var_20], dx
		movzx	eax, [ebp+var_20]
		push	eax
		mov	ecx, [ebp+var_8]
		push	ecx
		call	_ubidi_getClass_56
		add	esp, 8
		mov	[ebp+var_E8], eax
		cmp	[ebp+var_E8], 0Dh ; switch 14 cases
		ja	short $LN16	; jumptable 0000142A default case
		mov	edx, [ebp+var_E8]
		movzx	eax, ds:$LN24[edx]
		jmp	ds:$LN26[eax*4]	; switch jump
; ---------------------------------------------------------------------------

$LN15:					; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+92j
					; DATA XREF: .text:$LN26o
		mov	[ebp+arg_10], 0	; jumptable 0000142A cases 0,1
		jmp	short $LN16	; jumptable 0000142A default case
; ---------------------------------------------------------------------------

$LN14:					; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+92j
					; DATA XREF: .text:$LN26o
		mov	[ebp+arg_10], 1	; jumptable 0000142A case 13
		jmp	short $LN16	; jumptable 0000142A default case
; ---------------------------------------------------------------------------

$LN13_0:				; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+92j
					; DATA XREF: .text:$LN26o
		movsx	eax, [ebp+arg_10] ; jumptable 0000142A case 2
		test	eax, eax
		jz	short $LN16	; jumptable 0000142A default case
		movzx	eax, [ebp+var_20]
		sub	eax, 30h ; '0'
		cmp	eax, 0Ah
		jnb	short $LN16	; jumptable 0000142A default case
		movzx	eax, [ebp+arg_8]
		movzx	ecx, [ebp+var_20]
		add	eax, ecx
		mov	edx, [ebp+var_14]
		mov	ecx, [ebp+arg_0]
		mov	[ecx+edx*2], ax

$LN16:					; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+83j
					; _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+92j ...
		jmp	loc_13DE	; jumptable 0000142A default case
; ---------------------------------------------------------------------------

loc_146A:				; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+55j
		jmp	loc_1503
; ---------------------------------------------------------------------------

loc_146F:				; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+37j
		mov	eax, [ebp+arg_4]
		mov	[ebp+var_14], eax

loc_1475:				; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char):$LN6j
		cmp	[ebp+var_14], 0
		jle	loc_1503
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	[ebp+var_14], eax
		mov	ecx, [ebp+var_14]
		mov	edx, [ebp+arg_0]
		mov	ax, [edx+ecx*2]
		mov	[ebp+var_20], ax
		movzx	eax, [ebp+var_20]
		push	eax
		mov	ecx, [ebp+var_8]
		push	ecx
		call	_ubidi_getClass_56
		add	esp, 8
		mov	[ebp+var_E8], eax
		cmp	[ebp+var_E8], 0Dh ; switch 14 cases
		ja	short $LN6	; jumptable 000014C3 default case
		mov	edx, [ebp+var_E8]
		movzx	eax, ds:$LN25[edx]
		jmp	ds:$LN27[eax*4]	; switch jump
; ---------------------------------------------------------------------------

$LN5:					; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+12Bj
					; DATA XREF: .text:$LN27o
		mov	[ebp+arg_10], 0	; jumptable 000014C3 cases 0,1
		jmp	short $LN6	; jumptable 000014C3 default case
; ---------------------------------------------------------------------------

$LN4:					; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+12Bj
					; DATA XREF: .text:$LN27o
		mov	[ebp+arg_10], 1	; jumptable 000014C3 case 13
		jmp	short $LN6	; jumptable 000014C3 default case
; ---------------------------------------------------------------------------

$LN3_0:					; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+12Bj
					; DATA XREF: .text:$LN27o
		movsx	eax, [ebp+arg_10] ; jumptable 000014C3 case 2
		test	eax, eax
		jz	short $LN6	; jumptable 000014C3 default case
		movzx	eax, [ebp+var_20]
		sub	eax, 30h ; '0'
		cmp	eax, 0Ah
		jnb	short $LN6	; jumptable 000014C3 default case
		movzx	eax, [ebp+arg_8]
		movzx	ecx, [ebp+var_20]
		add	eax, ecx
		mov	edx, [ebp+var_14]
		mov	ecx, [ebp+arg_0]
		mov	[ecx+edx*2], ax

$LN6:					; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+11Cj
					; _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+12Bj ...
		jmp	loc_1475	; jumptable 000014C3 default case
; ---------------------------------------------------------------------------

loc_1503:				; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char):loc_146Aj
					; _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+E1j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0E8h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
?_shapeToArabicDigitsWithContext@@YAXPA_WH_WCC@Z endp

; ---------------------------------------------------------------------------
		align 4
$LN26		dd offset $LN15		; DATA XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+92r
		dd offset $LN13_0	; jump table for switch	statement
		dd offset $LN14
		dd offset $LN16
$LN24		db	0,     0,     1,     3
					; DATA XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+8Br
		db	3,     3,     3,     3 ; indirect table	for switch statement
		db	3,     3,     3,     3
		db	3,     2
		align 4
$LN27		dd offset $LN5		; DATA XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+12Br
		dd offset $LN3_0	; jump table for switch	statement
		dd offset $LN4
		dd offset $LN6
$LN25		db	0,     0,     1,     3
					; DATA XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+124r
		db	3,     3,     3,     3 ; indirect table	for switch statement
		db	3,     3,     3,     3
		db	3,     2
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1558h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void __cdecl invertBuffer(wchar_t *, int, unsigned int, int, int)
?invertBuffer@@YAXPA_WHIHH@Z proc near	; CODE XREF: _u_shapeArabic_56+702p
					; _u_shapeArabic_56+947p

var_E4		= byte ptr -0E4h
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= word ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h

		push	ebp
		mov	ebp, esp
		sub	esp, 0E4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_E4]
		mov	ecx, 39h ; '9'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_14], 0
		mov	[ebp+var_20], 0
		mov	eax, [ebp+arg_C]
		mov	[ebp+var_14], eax
		mov	ecx, [ebp+arg_4]
		sub	ecx, [ebp+arg_10]
		sub	ecx, 1
		mov	[ebp+var_20], ecx
		jmp	short loc_15AA
; ---------------------------------------------------------------------------

loc_1598:				; CODE XREF: invertBuffer(wchar_t *,int,uint,int,int)+8Aj
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		mov	ecx, [ebp+var_20]
		sub	ecx, 1
		mov	[ebp+var_20], ecx

loc_15AA:				; CODE XREF: invertBuffer(wchar_t *,int,uint,int,int)+3Ej
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+var_20]
		jge	short loc_15E4
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ecx+eax*2]
		mov	[ebp+var_8], dx
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+arg_0]
		mov	edx, [ebp+var_20]
		mov	esi, [ebp+arg_0]
		mov	dx, [esi+edx*2]
		mov	[ecx+eax*2], dx
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ebp+var_8]
		mov	[ecx+eax*2], dx
		jmp	short loc_1598
; ---------------------------------------------------------------------------

loc_15E4:				; CODE XREF: invertBuffer(wchar_t *,int,uint,int,int)+58j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?invertBuffer@@YAXPA_WHIHH@Z endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 15ECh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; wchar_t __cdecl getLink(wchar_t)
?getLink@@YA_W_W@Z proc	near		; CODE XREF: _u_shapeArabic_56+3E8p
					; _u_shapeArabic_56+4A4p ...

var_C0		= byte ptr -0C0h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 622h
		jl	short loc_1636
		movzx	eax, [ebp+arg_0]
		cmp	eax, 6D3h
		jg	short loc_1636
		movzx	eax, [ebp+arg_0]
		mov	ax, word ptr (byte_60F-1213h)[eax*2]
		jmp	loc_16B7
; ---------------------------------------------------------------------------
		jmp	loc_16B7
; ---------------------------------------------------------------------------

loc_1636:				; CODE XREF: getLink(wchar_t)+27j
					; getLink(wchar_t)+32j
		movzx	eax, [ebp+arg_0]
		cmp	eax, 200Dh
		jnz	short loc_164A
		mov	eax, 3
		jmp	short loc_16B7
; ---------------------------------------------------------------------------
		jmp	short loc_16B7
; ---------------------------------------------------------------------------

loc_164A:				; CODE XREF: getLink(wchar_t)+53j
		movzx	eax, [ebp+arg_0]
		cmp	eax, 206Dh
		jl	short loc_1669
		movzx	eax, [ebp+arg_0]
		cmp	eax, 206Fh
		jg	short loc_1669
		mov	eax, 4
		jmp	short loc_16B7
; ---------------------------------------------------------------------------
		jmp	short loc_16B7
; ---------------------------------------------------------------------------

loc_1669:				; CODE XREF: getLink(wchar_t)+67j
					; getLink(wchar_t)+72j
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FB50h
		jl	short loc_168F
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FC62h
		jg	short loc_168F
		movzx	eax, [ebp+arg_0]
		movzx	ax, (byte_60F-0FFB7h)[eax]
		jmp	short loc_16B7
; ---------------------------------------------------------------------------
		jmp	short loc_16B7
; ---------------------------------------------------------------------------

loc_168F:				; CODE XREF: getLink(wchar_t)+86j
					; getLink(wchar_t)+91j
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE70h
		jl	short loc_16B5
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FEFCh
		jg	short loc_16B5
		movzx	eax, [ebp+arg_0]
		movzx	ax, (byte_60F-101BFh)[eax]
		jmp	short loc_16B7
; ---------------------------------------------------------------------------
		jmp	short loc_16B7
; ---------------------------------------------------------------------------

loc_16B5:				; CODE XREF: getLink(wchar_t)+ACj
					; getLink(wchar_t)+B7j
		xor	eax, eax

loc_16B7:				; CODE XREF: getLink(wchar_t)+40j
					; getLink(wchar_t)+45j	...
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?getLink@@YA_W_W@Z endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 16C0h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; void __cdecl countSpaces(wchar_t *, int, unsigned int, int *,	int *)
?countSpaces@@YAXPA_WHIPAH1@Z proc near	; CODE XREF: _u_shapeArabic_56+6DDp
					; _u_shapeArabic_56+922p

var_E4		= byte ptr -0E4h
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h

		push	ebp
		mov	ebp, esp
		sub	esp, 0E4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_E4]
		mov	ecx, 39h ; '9'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	[ebp+var_14], 0
		mov	[ebp+var_20], 0

loc_16F3:				; CODE XREF: countSpaces(wchar_t *,int,uint,int	*,int *)+5Cj
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 20h ; ' '
		jnz	short loc_171E
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+arg_4]
		jge	short loc_171E
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax
		jmp	short loc_16F3
; ---------------------------------------------------------------------------

loc_171E:				; CODE XREF: countSpaces(wchar_t *,int,uint,int	*,int *)+40j
					; countSpaces(wchar_t *,int,uint,int *,int *)+48j
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+arg_4]
		jge	short loc_174A

loc_1726:				; CODE XREF: countSpaces(wchar_t *,int,uint,int	*,int *)+88j
		mov	eax, [ebp+arg_4]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2-2]
		cmp	edx, 20h ; ' '
		jnz	short loc_174A
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		mov	[ebp+arg_4], eax
		jmp	short loc_1726
; ---------------------------------------------------------------------------

loc_174A:				; CODE XREF: countSpaces(wchar_t *,int,uint,int	*,int *)+64j
					; countSpaces(wchar_t *,int,uint,int *,int *)+74j
		mov	eax, [ebp+arg_C]
		mov	ecx, [ebp+var_14]
		mov	[eax], ecx
		mov	eax, [ebp+arg_10]
		mov	ecx, [ebp+var_20]
		mov	[eax], ecx
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?countSpaces@@YAXPA_WHIPAH1@Z endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1764h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl calculateSize(wchar_t const *, int, int, unsigned	int)
?calculateSize@@YAHPB_WHHI@Z proc near	; CODE XREF: _u_shapeArabic_56+57Bp
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+28Ap

var_E4		= byte ptr -0E4h
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h

		push	ebp
		mov	ebp, esp
		sub	esp, 0E4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_E4]
		mov	ecx, 39h ; '9'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	[ebp+var_14], 0
		mov	[ebp+var_20], 0
		mov	eax, [ebp+arg_4]
		mov	[ebp+arg_8], eax
		mov	eax, [ebp+arg_C]
		and	eax, 18h
		cmp	eax, 8
		jz	short loc_17B3
		mov	eax, [ebp+arg_C]
		and	eax, 18h
		cmp	eax, 18h
		jnz	short loc_17C4

loc_17B3:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+42j
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		jnz	short loc_17C4
		mov	[ebp+var_14], 1

loc_17C4:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+4Dj
					; calculateSize(wchar_t	const *,int,int,uint)+57j
		mov	eax, [ebp+arg_C]
		and	eax, 18h
		cmp	eax, 8
		jnz	short loc_17E5
		mov	eax, [ebp+arg_C]
		and	eax, 0E0000h
		cmp	eax, 80000h
		jnz	short loc_17E5
		mov	[ebp+var_20], 1

loc_17E5:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+69j
					; calculateSize(wchar_t	const *,int,int,uint)+78j
		cmp	[ebp+var_14], 0
		jnz	short loc_17F5
		cmp	[ebp+var_20], 0
		jz	loc_18E9

loc_17F5:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+85j
		mov	eax, [ebp+arg_C]
		and	eax, 4
		jz	short loc_1870
		mov	[ebp+var_8], 0
		jmp	short loc_180F
; ---------------------------------------------------------------------------

loc_1806:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint):loc_186Cj
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax

loc_180F:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+A0j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+arg_4]
		jge	short loc_186E
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isAlefChar@@YAH_W@Z ; isAlefChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_184C
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		cmp	[ebp+var_8], eax
		jge	short loc_184C
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+2]
		cmp	edx, 644h
		jz	short loc_1863

loc_184C:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+C8j
					; calculateSize(wchar_t	const *,int,int,uint)+D3j
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isTashkeelCharFE@@YAH_W@Z ; isTashkeelCharFE(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_186C

loc_1863:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+E6j
		mov	eax, [ebp+arg_8]
		sub	eax, 1
		mov	[ebp+arg_8], eax

loc_186C:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+FDj
		jmp	short loc_1806
; ---------------------------------------------------------------------------

loc_186E:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+B1j
		jmp	short loc_18E9
; ---------------------------------------------------------------------------

loc_1870:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+97j
		mov	eax, [ebp+arg_C]
		and	eax, 4
		jnz	short loc_18E9
		mov	[ebp+var_8], 0
		jmp	short loc_188A
; ---------------------------------------------------------------------------

loc_1881:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint):loc_18E7j
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax

loc_188A:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+11Bj
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+arg_4]
		jge	short loc_18E9
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 644h
		jnz	short loc_18C7
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		cmp	[ebp+var_8], eax
		jge	short loc_18C7
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+2]
		push	edx
		call	?isAlefChar@@YAH_W@Z ; isAlefChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jnz	short loc_18DE

loc_18C7:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+13Ej
					; calculateSize(wchar_t	const *,int,int,uint)+149j
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isTashkeelCharFE@@YAH_W@Z ; isTashkeelCharFE(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_18E7

loc_18DE:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+161j
		mov	eax, [ebp+arg_8]
		sub	eax, 1
		mov	[ebp+arg_8], eax

loc_18E7:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+178j
		jmp	short loc_1881
; ---------------------------------------------------------------------------

loc_18E9:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+8Bj
					; calculateSize(wchar_t	const *,int,int,uint):loc_186Ej ...
		mov	eax, [ebp+arg_C]
		and	eax, 18h
		cmp	eax, 10h
		jnz	short loc_193A
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		jnz	short loc_193A
		mov	[ebp+var_8], 0
		jmp	short loc_1910
; ---------------------------------------------------------------------------

loc_1907:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint):loc_1938j
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax

loc_1910:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+1A1j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+arg_4]
		jge	short loc_193A
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isLamAlefChar@@YAH_W@Z	; isLamAlefChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_1938
		mov	eax, [ebp+arg_8]
		add	eax, 1
		mov	[ebp+arg_8], eax

loc_1938:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+1C9j
		jmp	short loc_1907
; ---------------------------------------------------------------------------

loc_193A:				; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+18Ej
					; calculateSize(wchar_t	const *,int,int,uint)+198j ...
		mov	eax, [ebp+arg_8]
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0E4h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
?calculateSize@@YAHPB_WHHI@Z endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1954h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isTashkeelCharFE(wchar_t)
?isTashkeelCharFE@@YAH_W@Z proc	near	; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+F3p
					; calculateSize(wchar_t	const *,int,int,uint)+16Ep

var_C4		= dword	ptr -0C4h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C4]
		mov	ecx, 31h ; '1'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE70h
		jl	short loc_1995
		movzx	ecx, [ebp+arg_0]
		cmp	ecx, 0FE7Fh
		jg	short loc_1995
		mov	[ebp+var_C4], 1
		jmp	short loc_199F
; ---------------------------------------------------------------------------

loc_1995:				; CODE XREF: isTashkeelCharFE(wchar_t)+27j
					; isTashkeelCharFE(wchar_t)+33j
		mov	[ebp+var_C4], 0

loc_199F:				; CODE XREF: isTashkeelCharFE(wchar_t)+3Fj
		mov	eax, [ebp+var_C4]
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isTashkeelCharFE@@YAH_W@Z endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 19ACh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isAlefChar(wchar_t)
?isAlefChar@@YAH_W@Z proc near		; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+BEp
					; calculateSize(wchar_t	const *,int,int,uint)+157p

var_C4		= dword	ptr -0C4h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C4]
		mov	ecx, 31h ; '1'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 622h
		jz	short loc_1A04
		movzx	ecx, [ebp+arg_0]
		cmp	ecx, 623h
		jz	short loc_1A04
		movzx	edx, [ebp+arg_0]
		cmp	edx, 625h
		jz	short loc_1A04
		movzx	eax, [ebp+arg_0]
		cmp	eax, 627h
		jz	short loc_1A04
		mov	[ebp+var_C4], 0
		jmp	short loc_1A0E
; ---------------------------------------------------------------------------

loc_1A04:				; CODE XREF: isAlefChar(wchar_t)+27j
					; isAlefChar(wchar_t)+33j ...
		mov	[ebp+var_C4], 1

loc_1A0E:				; CODE XREF: isAlefChar(wchar_t)+56j
		mov	eax, [ebp+var_C4]
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isAlefChar@@YAH_W@Z endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1A1Ch
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isLamAlefChar(wchar_t)
?isLamAlefChar@@YAH_W@Z	proc near	; CODE XREF: calculateSize(wchar_t const *,int,int,uint)+1BFp
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+300p ...

var_C4		= dword	ptr -0C4h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C4]
		mov	ecx, 31h ; '1'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FEF5h
		jl	short loc_1A5D
		movzx	ecx, [ebp+arg_0]
		cmp	ecx, 0FEFCh
		jg	short loc_1A5D
		mov	[ebp+var_C4], 1
		jmp	short loc_1A67
; ---------------------------------------------------------------------------

loc_1A5D:				; CODE XREF: isLamAlefChar(wchar_t)+27j
					; isLamAlefChar(wchar_t)+33j
		mov	[ebp+var_C4], 0

loc_1A67:				; CODE XREF: isLamAlefChar(wchar_t)+3Fj
		mov	eax, [ebp+var_C4]
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isLamAlefChar@@YAH_W@Z	endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1A74h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl handleTashkeelWithTatweel(wchar_t	*, int,	int, unsigned int, enum	 UErrorCode *)
?handleTashkeelWithTatweel@@YAHPA_WHHIPAW4UErrorCode@@@Z proc near
					; CODE XREF: _u_shapeArabic_56+84Cp

var_CC		= byte ptr -0CCh
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 0CCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_CC]
		mov	ecx, 33h ; '3'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		jmp	short loc_1AA4
; ---------------------------------------------------------------------------

loc_1A9B:				; CODE XREF: handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *):loc_1B3Aj
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax

loc_1AA4:				; CODE XREF: handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *)+25j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+arg_4]
		jge	loc_1B3F
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isTashkeelOnTatweelChar@@YAH_W@Z ; isTashkeelOnTatweelChar(wchar_t)
		add	esp, 4
		cmp	eax, 1
		jnz	short loc_1AD9
		mov	eax, 640h
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2], ax
		jmp	short loc_1B3A
; ---------------------------------------------------------------------------

loc_1AD9:				; CODE XREF: handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *)+52j
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isTashkeelOnTatweelChar@@YAH_W@Z ; isTashkeelOnTatweelChar(wchar_t)
		add	esp, 4
		cmp	eax, 2
		jnz	short loc_1B02
		mov	eax, 0FE7Dh
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2], ax
		jmp	short loc_1B3A
; ---------------------------------------------------------------------------

loc_1B02:				; CODE XREF: handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *)+7Bj
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isIsolatedTashkeelChar@@YAH_W@Z ; isIsolatedTashkeelChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_1B3A
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 0FE7Ch
		jz	short loc_1B3A
		mov	eax, 20h ; ' '
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2], ax

loc_1B3A:				; CODE XREF: handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *)+63j
					; handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *)+8Cj ...
		jmp	loc_1A9B
; ---------------------------------------------------------------------------

loc_1B3F:				; CODE XREF: handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *)+36j
		mov	eax, [ebp+arg_4]
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0CCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
?handleTashkeelWithTatweel@@YAHPA_WHHIPAW4UErrorCode@@@Z endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1B58h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isTashkeelOnTatweelChar(wchar_t)
?isTashkeelOnTatweelChar@@YAH_W@Z proc near
					; CODE XREF: handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *)+47p
					; handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *)+70p

var_C0		= byte ptr -0C0h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE70h
		jl	short loc_1BBC
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE7Fh
		jg	short loc_1BBC
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE73h
		jz	short loc_1BBC
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE75h
		jz	short loc_1BBC
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE7Dh
		jz	short loc_1BBC
		movzx	eax, [ebp+arg_0]
		movzx	eax, (byte_60F-1046Fh)[eax]
		jmp	short loc_1BE8
; ---------------------------------------------------------------------------
		jmp	short loc_1BE8
; ---------------------------------------------------------------------------

loc_1BBC:				; CODE XREF: isTashkeelOnTatweelChar(wchar_t)+27j
					; isTashkeelOnTatweelChar(wchar_t)+32j	...
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FCF2h
		jl	short loc_1BD2
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FCF4h
		jle	short loc_1BDD

loc_1BD2:				; CODE XREF: isTashkeelOnTatweelChar(wchar_t)+6Dj
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE7Dh
		jnz	short loc_1BE6

loc_1BDD:				; CODE XREF: isTashkeelOnTatweelChar(wchar_t)+78j
		mov	eax, 2
		jmp	short loc_1BE8
; ---------------------------------------------------------------------------
		jmp	short loc_1BE8
; ---------------------------------------------------------------------------

loc_1BE6:				; CODE XREF: isTashkeelOnTatweelChar(wchar_t)+83j
		xor	eax, eax

loc_1BE8:				; CODE XREF: isTashkeelOnTatweelChar(wchar_t)+60j
					; isTashkeelOnTatweelChar(wchar_t)+62j	...
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isTashkeelOnTatweelChar@@YAH_W@Z endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1BF0h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isIsolatedTashkeelChar(wchar_t)
?isIsolatedTashkeelChar@@YAH_W@Z proc near
					; CODE XREF: handleTashkeelWithTatweel(wchar_t *,int,int,uint,UErrorCode *)+99p

var_C0		= byte ptr -0C0h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE70h
		jl	short loc_1C50
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE7Fh
		jg	short loc_1C50
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE73h
		jz	short loc_1C50
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE75h
		jz	short loc_1C50
		movzx	eax, [ebp+arg_0]
		movzx	ecx, (byte_60F-1046Fh)[eax]
		mov	eax, 1
		sub	eax, ecx
		jmp	short loc_1C71
; ---------------------------------------------------------------------------
		jmp	short loc_1C71
; ---------------------------------------------------------------------------

loc_1C50:				; CODE XREF: isIsolatedTashkeelChar(wchar_t)+27j
					; isIsolatedTashkeelChar(wchar_t)+32j ...
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FC5Eh
		jl	short loc_1C6F
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FC63h
		jg	short loc_1C6F
		mov	eax, 1
		jmp	short loc_1C71
; ---------------------------------------------------------------------------
		jmp	short loc_1C71
; ---------------------------------------------------------------------------

loc_1C6F:				; CODE XREF: isIsolatedTashkeelChar(wchar_t)+69j
					; isIsolatedTashkeelChar(wchar_t)+74j
		xor	eax, eax

loc_1C71:				; CODE XREF: isIsolatedTashkeelChar(wchar_t)+5Cj
					; isIsolatedTashkeelChar(wchar_t)+5Ej ...
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isIsolatedTashkeelChar@@YAH_W@Z endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 1C78h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl shapeUnicode(void	*, int,	int, int, int, int, int, int, int, int,	int, int)
?shapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z proc near
					; CODE XREF: _u_shapeArabic_56+7CDp
					; _u_shapeArabic_56+81Bp ...

var_1A4		= byte ptr -1A4h
var_D4		= word ptr -0D4h
var_C8		= word ptr -0C8h
var_BC		= word ptr -0BCh
var_B0		= word ptr -0B0h
var_A4		= word ptr -0A4h
var_98		= word ptr -98h
var_8C		= word ptr -8Ch
var_80		= dword	ptr -80h
var_74		= dword	ptr -74h
var_68		= dword	ptr -68h
var_5C		= dword	ptr -5Ch
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h
arg_14		= dword	ptr  1Ch
arg_18		= dword	ptr  20h
arg_1C		= dword	ptr  24h
arg_20		= dword	ptr  28h
arg_24		= dword	ptr  2Ch
arg_28		= dword	ptr  30h
arg_2C		= dword	ptr  34h

		push	ebp
		mov	ebp, esp
		sub	esp, 1A4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_1A4]
		mov	ecx, 69h ; 'i'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_5C], 0
		mov	[ebp+var_68], 0
		mov	[ebp+var_74], 0
		mov	[ebp+var_80], 0
		xor	eax, eax
		mov	[ebp+var_8C], ax
		xor	eax, eax
		mov	[ebp+var_98], ax
		xor	eax, eax
		mov	[ebp+var_B0], ax
		mov	eax, [ebp+arg_C]
		and	eax, 8000h
		jnz	loc_1DA7
		mov	[ebp+var_8], 0
		jmp	short loc_1CED
; ---------------------------------------------------------------------------

loc_1CE4:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables):loc_1DA2j
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax

loc_1CED:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+6Aj
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+arg_4]
		jge	loc_1DA7
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ecx+eax*2]
		mov	[ebp+var_C8], dx
		movzx	eax, [ebp+var_C8]
		cmp	eax, 0FB50h
		jl	short loc_1D5A
		movzx	eax, [ebp+var_C8]
		cmp	eax, 0FBFFh
		jg	short loc_1D5A
		movzx	eax, [ebp+var_C8]
		mov	cx, word ptr (byte_60F-1F95Fh)[eax*2]
		mov	[ebp+var_D4], cx
		movzx	eax, [ebp+var_D4]
		test	eax, eax
		jz	short loc_1D58
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ebp+var_D4]
		mov	[ecx+eax*2], dx

loc_1D58:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+CDj
		jmp	short loc_1DA2
; ---------------------------------------------------------------------------

loc_1D5A:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+9Ej
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+ACj
		movzx	eax, [ebp+var_C8]
		cmp	eax, 0FE70h
		jl	short loc_1D91
		movzx	eax, [ebp+var_C8]
		cmp	eax, 0FEFCh
		jg	short loc_1D91
		movzx	eax, [ebp+var_C8]
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	ax, word ptr (byte_60F-1FE3Fh)[eax*2]
		mov	[edx+ecx*2], ax
		jmp	short loc_1DA2
; ---------------------------------------------------------------------------

loc_1D91:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+EEj
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+FCj
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ebp+var_C8]
		mov	[ecx+eax*2], dx

loc_1DA2:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables):loc_1D58j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+117j
		jmp	loc_1CE4
; ---------------------------------------------------------------------------

loc_1DA7:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+5Dj
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+7Bj
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		mov	[ebp+var_8], eax
		mov	[ebp+var_14], 0FFFFFFFFh
		mov	[ebp+var_20], 0FFFFFFFFh
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx		; int
		call	?getLink@@YA_W_W@Z ; getLink(wchar_t)
		add	esp, 4
		mov	[ebp+var_A4], ax
		mov	eax, [ebp+var_8]
		mov	[ebp+var_2C], eax
		mov	[ebp+var_38], 0FFFFFFFEh
		mov	[ebp+var_44], 0

loc_1DEC:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables):loc_2259j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+var_14]
		jz	loc_225E
		movzx	eax, [ebp+var_A4]
		and	eax, 0FF00h
		jg	short loc_1E25
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?getLink@@YA_W_W@Z ; getLink(wchar_t)
		add	esp, 4
		movzx	eax, ax
		and	eax, 4
		jz	loc_21E1

loc_1E25:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+18Cj
		mov	eax, [ebp+var_8]
		add	eax, [ebp+var_20]
		mov	[ebp+var_44], eax

loc_1E2E:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables):loc_1E85j
		cmp	[ebp+var_38], 0
		jge	short loc_1E87
		mov	eax, [ebp+var_44]
		cmp	eax, [ebp+var_14]
		jnz	short loc_1E4E
		xor	eax, eax
		mov	[ebp+var_B0], ax
		mov	[ebp+var_38], 0BB8h
		jmp	short loc_1E85
; ---------------------------------------------------------------------------

loc_1E4E:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+1C2j
		mov	eax, [ebp+var_44]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?getLink@@YA_W_W@Z ; getLink(wchar_t)
		add	esp, 4
		mov	[ebp+var_B0], ax
		movzx	eax, [ebp+var_B0]
		and	eax, 4
		jnz	short loc_1E7C
		mov	eax, [ebp+var_44]
		mov	[ebp+var_38], eax
		jmp	short loc_1E85
; ---------------------------------------------------------------------------

loc_1E7C:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+1FAj
		mov	eax, [ebp+var_44]
		add	eax, [ebp+var_20]
		mov	[ebp+var_44], eax

loc_1E85:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+1D4j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+202j
		jmp	short loc_1E2E
; ---------------------------------------------------------------------------

loc_1E87:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+1BAj
		movzx	eax, [ebp+var_A4]
		and	eax, 20h
		jle	loc_1F1A
		movzx	eax, [ebp+var_98]
		and	eax, 10h
		jle	short loc_1F1A
		mov	[ebp+var_5C], 1
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?changeLamAlef@@YA_W_W@Z ; changeLamAlef(wchar_t)
		add	esp, 4
		mov	[ebp+var_BC], ax
		movzx	eax, [ebp+var_BC]
		test	eax, eax
		jz	short loc_1EF5
		mov	eax, 0FFFFh
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2], ax
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ebp+var_BC]
		mov	[ecx+eax*2], dx
		mov	eax, [ebp+var_2C]
		mov	[ebp+var_8], eax

loc_1EF5:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+255j
		mov	ax, [ebp+var_8C]
		mov	[ebp+var_98], ax
		movzx	eax, [ebp+var_BC]
		push	eax
		call	?getLink@@YA_W_W@Z ; getLink(wchar_t)
		add	esp, 4
		mov	[ebp+var_A4], ax

loc_1F1A:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+219j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+229j
		cmp	[ebp+var_8], 0
		jle	short loc_1F6B
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2-2]
		cmp	edx, 20h ; ' '
		jnz	short loc_1F6B
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isSeenFamilyChar@@YAH_W@Z ; isSeenFamilyChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_1F50
		mov	[ebp+var_68], 1
		jmp	short loc_1F69
; ---------------------------------------------------------------------------

loc_1F50:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+2CDj
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 626h
		jnz	short loc_1F69
		mov	[ebp+var_74], 1

loc_1F69:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+2D6j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+2E8j
		jmp	short loc_1FAA
; ---------------------------------------------------------------------------

loc_1F6B:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+2A6j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+2B6j
		cmp	[ebp+var_8], 0
		jnz	short loc_1FAA
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isSeenFamilyChar@@YAH_W@Z ; isSeenFamilyChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_1F91
		mov	[ebp+var_68], 1
		jmp	short loc_1FAA
; ---------------------------------------------------------------------------

loc_1F91:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+30Ej
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 626h
		jnz	short loc_1FAA
		mov	[ebp+var_74], 1

loc_1FAA:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables):loc_1F69j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+2F7j ...
		movzx	eax, [ebp+var_B0]
		and	eax, 3
		shl	eax, 4
		movzx	ecx, [ebp+var_98]
		and	ecx, 3
		lea	edx, _shapeTable[eax+ecx*4]
		movzx	eax, [ebp+var_A4]
		and	eax, 3
		movzx	ecx, byte ptr [edx+eax]
		mov	[ebp+var_50], ecx
		movzx	eax, [ebp+var_A4]
		and	eax, 3
		cmp	eax, 1
		jnz	short loc_1FF6
		mov	eax, [ebp+var_50]
		and	eax, 1
		mov	[ebp+var_50], eax
		jmp	loc_20A3
; ---------------------------------------------------------------------------

loc_1FF6:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+36Ej
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isTashkeelChar@@YAH_W@Z ; isTashkeelChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	loc_20A3
		movzx	eax, [ebp+var_98]
		and	eax, 2
		jz	short loc_207B
		movzx	eax, [ebp+var_B0]
		and	eax, 1
		jz	short loc_207B
		cmp	[ebp+arg_14], 1
		jnz	short loc_207B
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 64Ch
		jz	short loc_207B
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 64Dh
		jz	short loc_207B
		mov	[ebp+var_50], 1
		movzx	eax, [ebp+var_B0]
		and	eax, 20h
		jz	short loc_2079
		movzx	eax, [ebp+var_98]
		and	eax, 10h
		jz	short loc_2079
		mov	[ebp+var_50], 0

loc_2079:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+3ECj
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+3F8j
		jmp	short loc_20A3
; ---------------------------------------------------------------------------

loc_207B:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+3A3j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+3AFj ...
		cmp	[ebp+arg_14], 2
		jnz	short loc_209C
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 651h
		jnz	short loc_209C
		mov	[ebp+var_50], 1
		jmp	short loc_20A3
; ---------------------------------------------------------------------------

loc_209C:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+407j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+419j
		mov	[ebp+var_50], 0

loc_20A3:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+379j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+393j ...
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		xor	edx, 600h
		cmp	edx, 100h
		jge	loc_21E1
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isTashkeelChar@@YAH_W@Z ; isTashkeelChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	loc_217D
		cmp	[ebp+arg_14], 2
		jnz	short loc_210A
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 651h
		jz	short loc_210A
		mov	eax, 0FFFEh
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2], ax
		mov	[ebp+var_80], 1
		jmp	short loc_217B
; ---------------------------------------------------------------------------

loc_210A:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+466j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+478j
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 64Bh
		jb	short loc_2131
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		sub	edx, 64Bh
		cmp	edx, 8
		jb	short loc_2156

loc_2131:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+4A2j
		mov	eax, ds:?__LINE__Var@?1??shapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z@4JA@b604b903
		add	eax, 7Eh ; '~'
		mov	esi, esp
		push	eax		; Line
		push	offset ??_C@_1FK@PEDOADFO@?$AAd?$AA?3?$AA?2?$AAm?$AAo?$AAz?$AAi?$AAl?$AAl?$AAa?$AA?2?$AAi?$AAn?$AAt?$AAl?$AA?2?$AAi?$AAc?$AAu?$AA?2?$AAs?$AAo?$AAu?$AAr?$AAc?$AAe?$AA?2?$AAc?$AAo?$AAm?$AAm?$AAo@ ; "d:\\mozilla\\intl\\icu\\source\\common\"...
		push	offset ??_C@_1KO@NAEFDFNP@?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?5?$AA?$DO?$AA?$DN?$AA?5?$AA0?$AAx?$AA0?$AA6?$AA4?$AAB?$AAu?$AA?5?$AA?$CG?$AA?$CG?$AA?5?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?9?$AA0?$AAx@ ; "dest[i] >= 0x064Bu && dest[i]-0x064Bu <"...
		call	dword ptr ds:__imp___wassert
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_2156:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+4B7j
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		movzx	eax, (byte_60F-0C36h)[edx]
		mov	ecx, [ebp+var_50]
		lea	edx, [eax+ecx+0FE70h]
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	[ecx+eax*2], dx

loc_217B:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+490j
		jmp	short loc_21E1
; ---------------------------------------------------------------------------

loc_217D:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+45Cj
		movzx	eax, [ebp+var_A4]
		and	eax, 8
		jle	short loc_21A9
		movzx	eax, [ebp+var_A4]
		sar	eax, 8
		mov	ecx, [ebp+var_50]
		lea	edx, [eax+ecx+0FB50h]
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	[ecx+eax*2], dx
		jmp	short loc_21E1
; ---------------------------------------------------------------------------

loc_21A9:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+50Fj
		movzx	eax, [ebp+var_A4]
		sar	eax, 8
		test	eax, eax
		jle	short loc_21E1
		movzx	eax, [ebp+var_A4]
		and	eax, 4
		jnz	short loc_21E1
		movzx	eax, [ebp+var_A4]
		sar	eax, 8
		mov	ecx, [ebp+var_50]
		lea	edx, [eax+ecx+0FE70h]
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	[ecx+eax*2], dx

loc_21E1:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+1A7j
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+441j ...
		movzx	eax, [ebp+var_A4]
		and	eax, 4
		jnz	short loc_220F
		mov	ax, [ebp+var_98]
		mov	[ebp+var_8C], ax
		mov	ax, [ebp+var_A4]
		mov	[ebp+var_98], ax
		mov	eax, [ebp+var_8]
		mov	[ebp+var_2C], eax

loc_220F:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+573j
		mov	eax, [ebp+var_8]
		add	eax, [ebp+var_20]
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+var_38]
		jnz	short loc_2237
		mov	ax, [ebp+var_B0]
		mov	[ebp+var_A4], ax
		mov	[ebp+var_38], 0FFFFFFFEh
		jmp	short loc_2259
; ---------------------------------------------------------------------------

loc_2237:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+5A6j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+var_14]
		jz	short loc_2259
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?getLink@@YA_W_W@Z ; getLink(wchar_t)
		add	esp, 4
		mov	[ebp+var_A4], ax

loc_2259:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+5BDj
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+5C5j
		jmp	loc_1DEC
; ---------------------------------------------------------------------------

loc_225E:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+17Aj
		mov	eax, [ebp+arg_4]
		mov	[ebp+arg_8], eax
		cmp	[ebp+var_5C], 0
		jnz	short loc_2270
		cmp	[ebp+var_80], 0
		jz	short loc_22B7

loc_2270:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+5F0j
		sub	esp, 18h
		mov	eax, esp
		mov	ecx, [ebp+arg_18]
		mov	[eax], ecx
		mov	edx, [ebp+arg_1C]
		mov	[eax+4], edx
		mov	ecx, [ebp+arg_20]
		mov	[eax+8], ecx
		mov	edx, [ebp+arg_24]
		mov	[eax+0Ch], edx
		mov	ecx, [ebp+arg_28]
		mov	[eax+10h], ecx
		mov	edx, [ebp+arg_2C]
		mov	[eax+14h], edx
		mov	eax, [ebp+arg_10]
		push	eax		; int
		mov	ecx, [ebp+arg_C]
		push	ecx		; int
		mov	edx, [ebp+arg_8]
		push	edx		; int
		mov	eax, [ebp+arg_4]
		push	eax		; int
		mov	ecx, [ebp+arg_0]
		push	ecx		; void *
		call	?handleGeneratedSpaces@@YAHPA_WHHIPAW4UErrorCode@@UuShapeVariables@@@Z ; handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)
		add	esp, 2Ch
		mov	[ebp+arg_8], eax

loc_22B7:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+5F6j
		cmp	[ebp+var_68], 0
		jnz	short loc_22C3
		cmp	[ebp+var_74], 0
		jz	short loc_230C

loc_22C3:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+643j
		sub	esp, 18h
		mov	eax, esp
		mov	ecx, [ebp+arg_18]
		mov	[eax], ecx
		mov	edx, [ebp+arg_1C]
		mov	[eax+4], edx
		mov	ecx, [ebp+arg_20]
		mov	[eax+8], ecx
		mov	edx, [ebp+arg_24]
		mov	[eax+0Ch], edx
		mov	ecx, [ebp+arg_28]
		mov	[eax+10h], ecx
		mov	edx, [ebp+arg_2C]
		mov	[eax+14h], edx
		push	0		; int
		mov	eax, [ebp+arg_10]
		push	eax		; int
		mov	ecx, [ebp+arg_C]
		push	ecx		; int
		mov	edx, [ebp+arg_8]
		push	edx		; int
		mov	eax, [ebp+arg_4]
		push	eax		; int
		mov	ecx, [ebp+arg_0]
		push	ecx		; void *
		call	?expandCompositChar@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z ; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)
		add	esp, 30h
		mov	[ebp+arg_8], eax

loc_230C:				; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+649j
		mov	eax, [ebp+arg_8]
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN61
		call	@_RTC_CheckStackVars@8 ; _RTC_CheckStackVars(x,x)
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 1A4h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
?shapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z endp

; ---------------------------------------------------------------------------
$LN61		dd 1			; DATA XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+69Bo
		dd offset $LN60
$LN60		dd 0FFFFFF20h, 4	; DATA XREF: .text:00002338o
		dd offset $LN59		; "_$ArrayPad"
$LN59		db '_$ArrayPad',0       ; DATA XREF: .text:00002344o
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
; Segment alignment 'qword' can not be represented in assembly
_rdata		segment	para public 'DATA' use32
		assume cs:_rdata
		;org 2354h
		public ??_C@_1KO@NAEFDFNP@?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?5?$AA?$DO?$AA?$DN?$AA?5?$AA0?$AAx?$AA0?$AA6?$AA4?$AAB?$AAu?$AA?5?$AA?$CG?$AA?$CG?$AA?5?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?9?$AA0?$AAx@
; wchar_t `string'
??_C@_1KO@NAEFDFNP@?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?5?$AA?$DO?$AA?$DN?$AA?5?$AA0?$AAx?$AA0?$AA6?$AA4?$AAB?$AAu?$AA?5?$AA?$CG?$AA?$CG?$AA?5?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?9?$AA0?$AAx@:
					; DATA XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+4C9o
		unicode	0, <dest[i] >
		dw 3Eh
		unicode	0, <= 0x064Bu && dest[i]-0x064Bu >
		dw 3Ch
		unicode	0, < sizeof(IrrelevantPos)/sizeof(IrrelevantPos[0])>,0
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
; Segment alignment 'qword' can not be represented in assembly
_rdata		segment	para public 'DATA' use32
		assume cs:_rdata
		;org 2404h
		public ??_C@_1FK@PEDOADFO@?$AAd?$AA?3?$AA?2?$AAm?$AAo?$AAz?$AAi?$AAl?$AAl?$AAa?$AA?2?$AAi?$AAn?$AAt?$AAl?$AA?2?$AAi?$AAc?$AAu?$AA?2?$AAs?$AAo?$AAu?$AAr?$AAc?$AAe?$AA?2?$AAc?$AAo?$AAm?$AAm?$AAo@
; wchar_t `string'
??_C@_1FK@PEDOADFO@?$AAd?$AA?3?$AA?2?$AAm?$AAo?$AAz?$AAi?$AAl?$AAl?$AAa?$AA?2?$AAi?$AAn?$AAt?$AAl?$AA?2?$AAi?$AAc?$AAu?$AA?2?$AAs?$AAo?$AAu?$AAr?$AAc?$AAe?$AA?2?$AAc?$AAo?$AAm?$AAm?$AAo@:
					; DATA XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+4C4o
					; expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+12Co
		unicode	0, <d:\mozilla\intl\icu\source\common\ushape.cpp>,0
		align 10h
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read/Write
_data		segment	dword public 'DATA' use32
		assume cs:_data
		;org 2460h
		public ?__LINE__Var@?1??shapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z@4JA@b604b903
?__LINE__Var@?1??shapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z@4JA@b604b903 dd offset byte_4AF
					; DATA XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables):loc_2131r
_data		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 2464h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; wchar_t __cdecl changeLamAlef(wchar_t)
?changeLamAlef@@YA_W_W@Z proc near	; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+23Dp

var_C4		= dword	ptr -0C4h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C4]
		mov	ecx, 31h ; '1'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		mov	[ebp+var_C4], eax
		mov	ecx, [ebp+var_C4]
		sub	ecx, 622h
		mov	[ebp+var_C4], ecx
		cmp	[ebp+var_C4], 5	; switch 6 cases
		ja	short $LN5_0	; jumptable 000024AD default case
		mov	edx, [ebp+var_C4]
		jmp	ds:$LN9[edx*4]	; switch jump
; ---------------------------------------------------------------------------

$LN4_0:					; CODE XREF: changeLamAlef(wchar_t)+49j
					; DATA XREF: .text:$LN9o
		mov	eax, 65Ch	; jumptable 000024AD case 0
		jmp	short loc_24D2
; ---------------------------------------------------------------------------

$LN3_1:					; CODE XREF: changeLamAlef(wchar_t)+49j
					; DATA XREF: .text:$LN9o
		mov	eax, 65Dh	; jumptable 000024AD case 1
		jmp	short loc_24D2
; ---------------------------------------------------------------------------

$LN2_0:					; CODE XREF: changeLamAlef(wchar_t)+49j
					; DATA XREF: .text:$LN9o
		mov	eax, 65Eh	; jumptable 000024AD case 3
		jmp	short loc_24D2
; ---------------------------------------------------------------------------

$LN1:					; CODE XREF: changeLamAlef(wchar_t)+49j
					; DATA XREF: .text:$LN9o
		mov	eax, 65Fh	; jumptable 000024AD case 5
		jmp	short loc_24D2
; ---------------------------------------------------------------------------

$LN5_0:					; CODE XREF: changeLamAlef(wchar_t)+41j
					; changeLamAlef(wchar_t)+49j
					; DATA XREF: ...
		xor	eax, eax	; jumptable 000024AD default case

loc_24D2:				; CODE XREF: changeLamAlef(wchar_t)+55j
					; changeLamAlef(wchar_t)+5Cj ...
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?changeLamAlef@@YA_W_W@Z endp

; ---------------------------------------------------------------------------
		align 4
$LN9		dd offset $LN4_0	; DATA XREF: changeLamAlef(wchar_t)+49r
		dd offset $LN3_1	; jump table for switch	statement
		dd offset $LN5_0
		dd offset $LN2_0
		dd offset $LN5_0
		dd offset $LN1
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 24F4h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isTashkeelChar(wchar_t)
?isTashkeelChar@@YAH_W@Z proc near	; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+389p
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+452p

var_C4		= dword	ptr -0C4h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C4]
		mov	ecx, 31h ; '1'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 64Bh
		jl	short loc_2535
		movzx	ecx, [ebp+arg_0]
		cmp	ecx, 652h
		jg	short loc_2535
		mov	[ebp+var_C4], 1
		jmp	short loc_253F
; ---------------------------------------------------------------------------

loc_2535:				; CODE XREF: isTashkeelChar(wchar_t)+27j
					; isTashkeelChar(wchar_t)+33j
		mov	[ebp+var_C4], 0

loc_253F:				; CODE XREF: isTashkeelChar(wchar_t)+3Fj
		mov	eax, [ebp+var_C4]
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isTashkeelChar@@YAH_W@Z endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 254Ch
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isSeenFamilyChar(wchar_t)
?isSeenFamilyChar@@YAH_W@Z proc	near	; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+2C3p
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+304p

var_C0		= byte ptr -0C0h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 633h
		jl	short loc_2589
		movzx	eax, [ebp+arg_0]
		cmp	eax, 636h
		jg	short loc_2589
		mov	eax, 1
		jmp	short loc_258B
; ---------------------------------------------------------------------------
		jmp	short loc_258B
; ---------------------------------------------------------------------------

loc_2589:				; CODE XREF: isSeenFamilyChar(wchar_t)+27j
					; isSeenFamilyChar(wchar_t)+32j
		xor	eax, eax

loc_258B:				; CODE XREF: isSeenFamilyChar(wchar_t)+39j
					; isSeenFamilyChar(wchar_t)+3Bj
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isSeenFamilyChar@@YAH_W@Z endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 2594h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl handleGeneratedSpaces(void *, int, int, int, int,	int, int, int, int, int, int)
?handleGeneratedSpaces@@YAHPA_WHHIPAW4UErrorCode@@UuShapeVariables@@@Z proc near
					; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+634p

var_120		= byte ptr -120h
var_50		= dword	ptr -50h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
Dst		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h
arg_18		= dword	ptr  20h
arg_1C		= dword	ptr  24h
arg_20		= dword	ptr  28h
arg_24		= dword	ptr  2Ch
arg_28		= dword	ptr  30h

		push	ebp
		mov	ebp, esp
		sub	esp, 120h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_120]
		mov	ecx, 48h ; 'H'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	[ebp+var_14], 0
		mov	[ebp+var_20], 0
		mov	[ebp+Dst], 0
		mov	[ebp+var_38], 0
		mov	[ebp+var_44], 0
		mov	[ebp+var_50], 0
		cmp	[ebp+var_50], 0
		jnz	short loc_2610
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		jnz	short loc_25FA
		mov	[ebp+var_38], 1

loc_25FA:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+5Dj
		mov	eax, [ebp+arg_C]
		and	eax, 0E0000h
		cmp	eax, 80000h
		jnz	short loc_2610
		mov	[ebp+var_44], 1

loc_2610:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+53j
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+73j
		mov	eax, [ebp+arg_4]
		lea	ecx, [eax+eax+2]
		push	ecx
		call	_uprv_malloc_56
		add	esp, 4
		mov	[ebp+Dst], eax
		cmp	[ebp+Dst], 0
		jnz	short loc_2639
		mov	eax, [ebp+arg_10]
		mov	dword ptr [eax], 7
		xor	eax, eax
		jmp	loc_2A66
; ---------------------------------------------------------------------------

loc_2639:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+93j
		cmp	[ebp+var_38], 0
		jnz	short loc_2649
		cmp	[ebp+var_44], 0
		jz	loc_2740

loc_2649:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+A9j
		mov	eax, [ebp+arg_4]
		lea	ecx, [eax+eax+2]
		push	ecx		; Size
		push	0		; Val
		mov	edx, [ebp+Dst]
		push	edx		; Dst
		call	_memset
		add	esp, 0Ch
		mov	[ebp+var_14], 0
		mov	eax, [ebp+var_14]
		mov	[ebp+var_8], eax
		mov	[ebp+var_20], 0

loc_2673:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+151j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+arg_4]
		jge	short loc_26E7
		cmp	[ebp+var_38], 0
		jz	short loc_2693
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 0FFFFh
		jz	short loc_26AB

loc_2693:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+EBj
		cmp	[ebp+var_44], 0
		jz	short loc_26BF
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 0FFFEh
		jnz	short loc_26BF

loc_26AB:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+FDj
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		jmp	short loc_26D3
; ---------------------------------------------------------------------------

loc_26BF:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+103j
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+115j
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+Dst]
		mov	edx, [ebp+var_8]
		mov	esi, [ebp+arg_0]
		mov	dx, [esi+edx*2]
		mov	[ecx+eax*2], dx

loc_26D3:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+129j
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		jmp	short loc_2673
; ---------------------------------------------------------------------------

loc_26E7:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+E5j
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+177j
		cmp	[ebp+var_20], 0
		jl	short loc_270D
		xor	eax, eax
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+Dst]
		mov	[edx+ecx*2], ax
		mov	eax, [ebp+var_8]
		sub	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_20]
		sub	eax, 1
		mov	[ebp+var_20], eax
		jmp	short loc_26E7
; ---------------------------------------------------------------------------

loc_270D:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+157j
		push	1
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	ecx, [ebp+arg_4]
		shl	ecx, 1
		push	ecx		; Size
		mov	edx, [ebp+Dst]
		push	edx		; Src
		mov	eax, [ebp+arg_0]
		push	eax		; Dst
		call	_memcpy
		add	esp, 0Ch
		mov	eax, [ebp+arg_0]
		push	eax
		call	_u_strlen_56
		add	esp, 4
		mov	[ebp+arg_8], eax

loc_2740:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+AFj
		mov	[ebp+var_38], 0
		cmp	[ebp+var_50], 0
		jnz	short loc_2761
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		cmp	eax, 1
		jnz	short loc_2761
		mov	[ebp+var_38], 1

loc_2761:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+1B7j
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+1C4j
		cmp	[ebp+var_38], 0
		jz	short loc_27AE
		mov	[ebp+var_8], 0

loc_276E:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+212j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+arg_4]
		jge	short loc_27A8
		cmp	[ebp+var_38], 0
		jz	short loc_279D
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 0FFFFh
		jnz	short loc_279D
		mov	eax, 20h ; ' '
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2], ax

loc_279D:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+1E6j
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+1F8j
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax
		jmp	short loc_276E
; ---------------------------------------------------------------------------

loc_27A8:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+1E0j
		mov	eax, [ebp+arg_4]
		mov	[ebp+arg_8], eax

loc_27AE:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+1D1j
		mov	[ebp+var_38], 0
		mov	[ebp+var_44], 0
		cmp	[ebp+var_50], 0
		jnz	short loc_27FF
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		cmp	eax, [ebp+arg_18]
		jz	short loc_27E4
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		cmp	eax, 10000h
		jnz	short loc_27EB
		cmp	[ebp+arg_28], 1
		jnz	short loc_27EB

loc_27E4:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+239j
		mov	[ebp+var_38], 1

loc_27EB:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+248j
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+24Ej
		mov	eax, [ebp+arg_C]
		and	eax, 0E0000h
		cmp	eax, [ebp+arg_20]
		jnz	short loc_27FF
		mov	[ebp+var_44], 1

loc_27FF:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+22Cj
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+262j
		cmp	[ebp+var_38], 0
		jnz	short loc_280F
		cmp	[ebp+var_44], 0
		jz	loc_28FF

loc_280F:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+26Fj
		mov	eax, [ebp+arg_4]
		lea	ecx, [eax+eax+2]
		push	ecx		; Size
		push	0		; Val
		mov	edx, [ebp+Dst]
		push	edx		; Dst
		call	_memset
		add	esp, 0Ch
		mov	eax, [ebp+arg_4]
		mov	[ebp+var_14], eax
		mov	ecx, [ebp+var_14]
		mov	[ebp+var_8], ecx
		mov	[ebp+var_20], 0

loc_2838:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+314j
		cmp	[ebp+var_8], 0
		jl	short loc_28AA
		cmp	[ebp+var_38], 0
		jz	short loc_2856
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 0FFFFh
		jz	short loc_286E

loc_2856:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+2AEj
		cmp	[ebp+var_44], 0
		jz	short loc_2882
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 0FFFEh
		jnz	short loc_2882

loc_286E:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+2C0j
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		jmp	short loc_2896
; ---------------------------------------------------------------------------

loc_2882:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+2C6j
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+2D8j
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+Dst]
		mov	edx, [ebp+var_8]
		mov	esi, [ebp+arg_0]
		mov	dx, [esi+edx*2]
		mov	[ecx+eax*2], dx

loc_2896:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+2ECj
		mov	eax, [ebp+var_8]
		sub	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	[ebp+var_14], eax
		jmp	short loc_2838
; ---------------------------------------------------------------------------

loc_28AA:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+2A8j
		mov	[ebp+var_8], 0
		jmp	short loc_28BC
; ---------------------------------------------------------------------------

loc_28B3:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+33Fj
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax

loc_28BC:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+31Dj
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+var_20]
		jge	short loc_28D5
		mov	eax, 20h ; ' '
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+Dst]
		mov	[edx+ecx*2], ax
		jmp	short loc_28B3
; ---------------------------------------------------------------------------

loc_28D5:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+32Ej
		push	1
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	ecx, [ebp+arg_4]
		shl	ecx, 1
		push	ecx		; Size
		mov	edx, [ebp+Dst]
		push	edx		; Src
		mov	eax, [ebp+arg_0]
		push	eax		; Dst
		call	_memcpy
		add	esp, 0Ch
		mov	eax, [ebp+arg_4]
		mov	[ebp+arg_8], eax

loc_28FF:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+275j
		mov	[ebp+var_38], 0
		mov	[ebp+var_44], 0
		cmp	[ebp+var_50], 0
		jnz	short loc_2950
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		cmp	eax, [ebp+arg_1C]
		jz	short loc_2935
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		cmp	eax, 10000h
		jnz	short loc_293C
		cmp	[ebp+arg_28], 0
		jnz	short loc_293C

loc_2935:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+38Aj
		mov	[ebp+var_38], 1

loc_293C:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+399j
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+39Fj
		mov	eax, [ebp+arg_C]
		and	eax, 0E0000h
		cmp	eax, [ebp+arg_24]
		jnz	short loc_2950
		mov	[ebp+var_44], 1

loc_2950:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+37Dj
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+3B3j
		cmp	[ebp+var_38], 0
		jnz	short loc_2960
		cmp	[ebp+var_44], 0
		jz	loc_2A51

loc_2960:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+3C0j
		mov	eax, [ebp+arg_4]
		lea	ecx, [eax+eax+2]
		push	ecx		; Size
		push	0		; Val
		mov	edx, [ebp+Dst]
		push	edx		; Dst
		call	_memset
		add	esp, 0Ch
		mov	[ebp+var_14], 0
		mov	eax, [ebp+var_14]
		mov	[ebp+var_8], eax
		mov	[ebp+var_20], 0

loc_298A:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+468j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+arg_4]
		jge	short loc_29FE
		cmp	[ebp+var_38], 0
		jz	short loc_29AA
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 0FFFFh
		jz	short loc_29C2

loc_29AA:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+402j
		cmp	[ebp+var_44], 0
		jz	short loc_29D6
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 0FFFEh
		jnz	short loc_29D6

loc_29C2:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+414j
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		jmp	short loc_29EA
; ---------------------------------------------------------------------------

loc_29D6:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+41Aj
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+42Cj
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+Dst]
		mov	edx, [ebp+var_8]
		mov	esi, [ebp+arg_0]
		mov	dx, [esi+edx*2]
		mov	[ecx+eax*2], dx

loc_29EA:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+440j
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		jmp	short loc_298A
; ---------------------------------------------------------------------------

loc_29FE:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+3FCj
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+491j
		cmp	[ebp+var_20], 0
		jl	short loc_2A27
		mov	eax, 20h ; ' '
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+Dst]
		mov	[edx+ecx*2], ax
		mov	eax, [ebp+var_8]
		sub	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_20]
		sub	eax, 1
		mov	[ebp+var_20], eax
		jmp	short loc_29FE
; ---------------------------------------------------------------------------

loc_2A27:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+46Ej
		push	1
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	ecx, [ebp+arg_4]
		shl	ecx, 1
		push	ecx		; Size
		mov	edx, [ebp+Dst]
		push	edx		; Src
		mov	eax, [ebp+arg_0]
		push	eax		; Dst
		call	_memcpy
		add	esp, 0Ch
		mov	eax, [ebp+arg_4]
		mov	[ebp+arg_8], eax

loc_2A51:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+3C6j
		cmp	[ebp+Dst], 0
		jz	short loc_2A63
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_free_56
		add	esp, 4

loc_2A63:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+4C1j
		mov	eax, [ebp+arg_8]

loc_2A66:				; CODE XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+A0j
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN55
		call	@_RTC_CheckStackVars@8 ; _RTC_CheckStackVars(x,x)
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 120h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
?handleGeneratedSpaces@@YAHPA_WHHIPAW4UErrorCode@@UuShapeVariables@@@Z endp

; ---------------------------------------------------------------------------
		align 4
$LN55		dd 1			; DATA XREF: handleGeneratedSpaces(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+4D6o
		dd offset $LN54
$LN54		dd 0FFFFFFA4h, 4	; DATA XREF: .text:00002A90o
		dd offset $LN53		; "_$ArrayPad"
$LN53		db '_$ArrayPad',0       ; DATA XREF: .text:00002A9Co
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 2AACh
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl expandCompositChar(void *, int, int, int,	int, int, int, int, int, int, int, int)
?expandCompositChar@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z proc near
					; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+689p
					; deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+228p

var_114		= byte ptr -114h
var_44		= dword	ptr -44h
var_38		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
Dst		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h
arg_14		= dword	ptr  1Ch
arg_18		= dword	ptr  20h
arg_1C		= dword	ptr  24h
arg_20		= dword	ptr  28h
arg_24		= dword	ptr  2Ch
arg_28		= dword	ptr  30h
arg_2C		= dword	ptr  34h

		push	ebp
		mov	ebp, esp
		sub	esp, 114h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_114]
		mov	ecx, 45h ; 'E'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	[ebp+var_14], 0
		mov	[ebp+Dst], 0
		mov	[ebp+var_2C], 0
		mov	[ebp+var_38], 0
		mov	[ebp+var_44], 0
		cmp	[ebp+arg_14], 1
		jnz	loc_2C05
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		cmp	eax, 10000h
		jnz	loc_2C05
		cmp	[ebp+arg_2C], 0
		jnz	short loc_2B60
		mov	eax, [ebp+arg_10]
		push	eax		; int
		mov	ecx, [ebp+arg_8]
		push	ecx		; int
		mov	edx, [ebp+arg_4]
		push	edx		; int
		mov	eax, [ebp+arg_0]
		push	eax		; void *
		call	?expandCompositCharAtEnd@@YAHPA_WHHPAW4UErrorCode@@@Z ;	expandCompositCharAtEnd(wchar_t	*,int,int,UErrorCode *)
		add	esp, 10h
		mov	[ebp+arg_8], eax
		mov	eax, [ebp+arg_10]
		cmp	dword ptr [eax], 14h
		jnz	short loc_2B5E
		mov	eax, [ebp+arg_10]
		mov	dword ptr [eax], 0
		mov	eax, [ebp+arg_10]
		push	eax		; int
		mov	ecx, [ebp+arg_8]
		push	ecx		; int
		mov	edx, [ebp+arg_4]
		push	edx		; int
		mov	eax, [ebp+arg_0]
		push	eax		; void *
		call	?expandCompositCharAtBegin@@YAHPA_WHHPAW4UErrorCode@@@Z	; expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)
		add	esp, 10h
		mov	[ebp+arg_8], eax

loc_2B5E:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+8Cj
		jmp	short loc_2BA7
; ---------------------------------------------------------------------------

loc_2B60:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+69j
		mov	eax, [ebp+arg_10]
		push	eax		; int
		mov	ecx, [ebp+arg_8]
		push	ecx		; int
		mov	edx, [ebp+arg_4]
		push	edx		; int
		mov	eax, [ebp+arg_0]
		push	eax		; void *
		call	?expandCompositCharAtBegin@@YAHPA_WHHPAW4UErrorCode@@@Z	; expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)
		add	esp, 10h
		mov	[ebp+arg_8], eax
		mov	eax, [ebp+arg_10]
		cmp	dword ptr [eax], 14h
		jnz	short loc_2BA7
		mov	eax, [ebp+arg_10]
		mov	dword ptr [eax], 0
		mov	eax, [ebp+arg_10]
		push	eax		; int
		mov	ecx, [ebp+arg_8]
		push	ecx		; int
		mov	edx, [ebp+arg_4]
		push	edx		; int
		mov	eax, [ebp+arg_0]
		push	eax		; void *
		call	?expandCompositCharAtEnd@@YAHPA_WHHPAW4UErrorCode@@@Z ;	expandCompositCharAtEnd(wchar_t	*,int,int,UErrorCode *)
		add	esp, 10h
		mov	[ebp+arg_8], eax

loc_2BA7:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables):loc_2B5Ej
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+D5j
		mov	eax, [ebp+arg_10]
		cmp	dword ptr [eax], 14h
		jnz	short loc_2C05
		mov	eax, [ebp+arg_10]
		mov	dword ptr [eax], 0
		sub	esp, 18h
		mov	eax, esp
		mov	ecx, [ebp+arg_18]
		mov	[eax], ecx
		mov	edx, [ebp+arg_1C]
		mov	[eax+4], edx
		mov	ecx, [ebp+arg_20]
		mov	[eax+8], ecx
		mov	edx, [ebp+arg_24]
		mov	[eax+0Ch], edx
		mov	ecx, [ebp+arg_28]
		mov	[eax+10h], ecx
		mov	edx, [ebp+arg_2C]
		mov	[eax+14h], edx
		push	1
		mov	eax, [ebp+var_38]
		push	eax
		mov	ecx, [ebp+var_2C]
		push	ecx
		mov	edx, [ebp+arg_10]
		push	edx
		mov	eax, [ebp+arg_8]
		push	eax
		mov	ecx, [ebp+arg_4]
		push	ecx
		mov	edx, [ebp+arg_0]
		push	edx
		call	?expandCompositCharAtNear@@YAHPA_WHHPAW4UErrorCode@@HHHUuShapeVariables@@@Z ; expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)
		add	esp, 34h
		mov	[ebp+arg_8], eax

loc_2C05:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+4Cj
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+5Fj ...
		cmp	[ebp+arg_14], 1
		jnz	short loc_2C33
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		cmp	eax, [ebp+arg_20]
		jnz	short loc_2C33
		mov	eax, [ebp+arg_10]
		push	eax		; int
		mov	ecx, [ebp+arg_8]
		push	ecx		; int
		mov	edx, [ebp+arg_4]
		push	edx		; int
		mov	eax, [ebp+arg_0]
		push	eax		; void *
		call	?expandCompositCharAtEnd@@YAHPA_WHHPAW4UErrorCode@@@Z ;	expandCompositCharAtEnd(wchar_t	*,int,int,UErrorCode *)
		add	esp, 10h
		mov	[ebp+arg_8], eax

loc_2C33:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+15Dj
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+16Aj
		cmp	[ebp+arg_14], 1
		jnz	short loc_2C61
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		cmp	eax, [ebp+arg_1C]
		jnz	short loc_2C61
		mov	eax, [ebp+arg_10]
		push	eax		; int
		mov	ecx, [ebp+arg_8]
		push	ecx		; int
		mov	edx, [ebp+arg_4]
		push	edx		; int
		mov	eax, [ebp+arg_0]
		push	eax		; void *
		call	?expandCompositCharAtBegin@@YAHPA_WHHPAW4UErrorCode@@@Z	; expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)
		add	esp, 10h
		mov	[ebp+arg_8], eax

loc_2C61:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+18Bj
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+198j
		cmp	[ebp+arg_14], 0
		jnz	short loc_2C93
		mov	eax, [ebp+arg_C]
		and	eax, 3800000h
		cmp	eax, 1000000h
		jnz	short loc_2C7D
		mov	[ebp+var_2C], 1

loc_2C7D:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+1C8j
		mov	eax, [ebp+arg_C]
		and	eax, 700000h
		cmp	eax, 200000h
		jnz	short loc_2C93
		mov	[ebp+var_38], 1

loc_2C93:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+1B9j
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+1DEj
		cmp	[ebp+arg_14], 1
		jnz	short loc_2CAD
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		cmp	eax, 1
		jnz	short loc_2CAD
		mov	[ebp+var_44], 1

loc_2CAD:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+1EBj
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+1F8j
		cmp	[ebp+var_2C], 0
		jnz	short loc_2CBF
		cmp	[ebp+var_38], 0
		jnz	short loc_2CBF
		cmp	[ebp+var_44], 0
		jz	short loc_2D0E

loc_2CBF:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+205j
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+20Bj
		sub	esp, 18h
		mov	eax, esp
		mov	ecx, [ebp+arg_18]
		mov	[eax], ecx
		mov	edx, [ebp+arg_1C]
		mov	[eax+4], edx
		mov	ecx, [ebp+arg_20]
		mov	[eax+8], ecx
		mov	edx, [ebp+arg_24]
		mov	[eax+0Ch], edx
		mov	ecx, [ebp+arg_28]
		mov	[eax+10h], ecx
		mov	edx, [ebp+arg_2C]
		mov	[eax+14h], edx
		mov	eax, [ebp+var_44]
		push	eax
		mov	ecx, [ebp+var_38]
		push	ecx
		mov	edx, [ebp+var_2C]
		push	edx
		mov	eax, [ebp+arg_10]
		push	eax
		mov	ecx, [ebp+arg_8]
		push	ecx
		mov	edx, [ebp+arg_4]
		push	edx
		mov	eax, [ebp+arg_0]
		push	eax
		call	?expandCompositCharAtNear@@YAHPA_WHHPAW4UErrorCode@@HHHUuShapeVariables@@@Z ; expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)
		add	esp, 34h
		mov	[ebp+arg_8], eax

loc_2D0E:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+211j
		cmp	[ebp+arg_14], 1
		jnz	loc_2E3E
		mov	eax, [ebp+arg_C]
		and	eax, 10003h
		jnz	loc_2E3E
		mov	eax, [ebp+arg_C]
		push	eax
		mov	ecx, [ebp+arg_8]
		push	ecx
		mov	edx, [ebp+arg_4]
		push	edx
		mov	eax, [ebp+arg_0]
		push	eax
		call	?calculateSize@@YAHPB_WHHI@Z ; calculateSize(wchar_t const *,int,int,uint)
		add	esp, 10h
		mov	[ebp+arg_8], eax
		mov	eax, [ebp+arg_8]
		lea	ecx, [eax+eax+2]
		push	ecx
		call	_uprv_malloc_56
		add	esp, 4
		mov	[ebp+Dst], eax
		cmp	[ebp+Dst], 0
		jnz	short loc_2D6A
		mov	eax, [ebp+arg_10]
		mov	dword ptr [eax], 7
		xor	eax, eax
		jmp	loc_2E53
; ---------------------------------------------------------------------------

loc_2D6A:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+2ACj
		mov	eax, [ebp+arg_8]
		lea	ecx, [eax+eax+2]
		push	ecx		; Size
		push	0		; Val
		mov	edx, [ebp+Dst]
		push	edx		; Dst
		call	_memset
		add	esp, 0Ch
		mov	[ebp+var_14], 0
		mov	eax, [ebp+var_14]
		mov	[ebp+var_8], eax

loc_2D8D:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+369j
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+arg_8]
		jge	loc_2E1A
		mov	eax, [ebp+var_14]
		cmp	eax, [ebp+arg_8]
		jge	short loc_2E1A
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isLamAlefChar@@YAH_W@Z	; isLamAlefChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_2DEF
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+Dst]
		mov	dx, word ptr (byte_60F-203CDh)[edx*2]
		mov	[ecx+eax*2], dx
		mov	eax, 644h
		mov	ecx, [ebp+var_14]
		mov	edx, [ebp+Dst]
		mov	[edx+ecx*2+2], ax
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		jmp	short loc_2E03
; ---------------------------------------------------------------------------

loc_2DEF:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+30Aj
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+Dst]
		mov	edx, [ebp+var_8]
		mov	esi, [ebp+arg_0]
		mov	dx, [esi+edx*2]
		mov	[ecx+eax*2], dx

loc_2E03:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+341j
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_14]
		add	eax, 1
		mov	[ebp+var_14], eax
		jmp	loc_2D8D
; ---------------------------------------------------------------------------

loc_2E1A:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+2E7j
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+2F3j
		push	1
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	ecx, [ebp+arg_8]
		shl	ecx, 1
		push	ecx		; Size
		mov	edx, [ebp+Dst]
		push	edx		; Src
		mov	eax, [ebp+arg_0]
		push	eax		; Dst
		call	_memcpy
		add	esp, 0Ch

loc_2E3E:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+266j
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+274j
		cmp	[ebp+Dst], 0
		jz	short loc_2E50
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_free_56
		add	esp, 4

loc_2E50:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+396j
		mov	eax, [ebp+arg_8]

loc_2E53:				; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+2B9j
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN31
		call	@_RTC_CheckStackVars@8 ; _RTC_CheckStackVars(x,x)
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 114h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
?expandCompositChar@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z endp

; ---------------------------------------------------------------------------
$LN31		dd 1			; DATA XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+3ABo
		dd offset $LN30
$LN30		dd 0FFFFFFB0h, 4	; DATA XREF: .text:00002E7Co
		dd offset $LN29		; "_$ArrayPad"
$LN29		db '_$ArrayPad',0       ; DATA XREF: .text:00002E88o
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 2E98h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl expandCompositCharAtBegin(void *,	int, int, int)
?expandCompositCharAtBegin@@YAHPA_WHHPAW4UErrorCode@@@Z	proc near
					; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+A7p
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+C4p ...

var_F0		= byte ptr -0F0h
Dst		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h

		push	ebp
		mov	ebp, esp
		sub	esp, 0F0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_F0]
		mov	ecx, 3Ch ; '<'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	[ebp+var_14], 0
		mov	[ebp+var_20], 0
		mov	[ebp+Dst], 0
		mov	eax, [ebp+arg_4]
		lea	ecx, [eax+eax+2]
		push	ecx
		call	_uprv_malloc_56
		add	esp, 4
		mov	[ebp+Dst], eax
		cmp	[ebp+Dst], 0
		jnz	short loc_2EFB
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 7
		xor	eax, eax
		jmp	loc_3099
; ---------------------------------------------------------------------------

loc_2EFB:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+51j
		mov	eax, [ebp+arg_4]
		lea	ecx, [eax+eax+2]
		push	ecx		; Size
		push	0		; Val
		mov	edx, [ebp+Dst]
		push	edx		; Dst
		call	_memset
		add	esp, 0Ch
		mov	[ebp+var_8], 0

loc_2F18:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+A1j
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 20h ; ' '
		jnz	short loc_2F3B
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax
		jmp	short loc_2F18
; ---------------------------------------------------------------------------

loc_2F3B:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+8Dj
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		mov	[ebp+var_14], eax
		mov	ecx, [ebp+var_14]
		mov	[ebp+var_8], ecx

loc_2F4A:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+1C3j
		cmp	[ebp+var_8], 0
		jl	loc_3060
		cmp	[ebp+var_14], 0
		jl	loc_3060
		cmp	[ebp+var_20], 0
		jle	loc_300F
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isLamAlefChar@@YAH_W@Z	; isLamAlefChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	loc_300F
		mov	eax, 644h
		mov	ecx, [ebp+var_14]
		mov	edx, [ebp+Dst]
		mov	[edx+ecx*2], ax
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 0FEF5h
		jb	short loc_2FB9
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		sub	edx, 0FEF5h
		cmp	edx, 8
		jb	short loc_2FDE

loc_2FB9:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+10Aj
		mov	eax, ds:?__LINE__Var@?1??expandCompositCharAtBegin@@YAHPA_WHHPAW4UErrorCode@@@Z@4JA@b604b903
		add	eax, 1Ch
		mov	esi, esp
		push	eax		; Line
		push	offset ??_C@_1FK@PEDOADFO@?$AAd?$AA?3?$AA?2?$AAm?$AAo?$AAz?$AAi?$AAl?$AAl?$AAa?$AA?2?$AAi?$AAn?$AAt?$AAl?$AA?2?$AAi?$AAc?$AAu?$AA?2?$AAs?$AAo?$AAu?$AAr?$AAc?$AAe?$AA?2?$AAc?$AAo?$AAm?$AAm?$AAo@ ; "d:\\mozilla\\intl\\icu\\source\\common\"...
		push	offset ??_C@_1LC@CBAJJOIB@?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?5?$AA?$DO?$AA?$DN?$AA?5?$AA0?$AAx?$AAF?$AAE?$AAF?$AA5?$AAu?$AA?5?$AA?$CG?$AA?$CG?$AA?5?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?9?$AA0?$AAx@ ; "dest[i] >= 0xFEF5u && dest[i]-0xFEF5u <"...
		call	dword ptr ds:__imp___wassert
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp

loc_2FDE:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+11Fj
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+Dst]
		mov	dx, word ptr (byte_60F-203CDh)[edx*2]
		mov	[ecx+eax*2-2], dx
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_20]
		sub	eax, 1
		mov	[ebp+var_20], eax
		jmp	short loc_3049
; ---------------------------------------------------------------------------

loc_300F:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+CAj
					; expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+E5j
		cmp	[ebp+var_20], 0
		jnz	short loc_3035
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isLamAlefChar@@YAH_W@Z	; isLamAlefChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_3035
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 14h

loc_3035:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+17Bj
					; expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+192j
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+Dst]
		mov	edx, [ebp+var_8]
		mov	esi, [ebp+arg_0]
		mov	dx, [esi+edx*2]
		mov	[ecx+eax*2], dx

loc_3049:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+175j
		mov	eax, [ebp+var_8]
		sub	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	[ebp+var_14], eax
		jmp	loc_2F4A
; ---------------------------------------------------------------------------

loc_3060:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+B6j
					; expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+C0j
		push	1
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	ecx, [ebp+arg_4]
		shl	ecx, 1
		push	ecx		; Size
		mov	edx, [ebp+Dst]
		push	edx		; Src
		mov	eax, [ebp+arg_0]
		push	eax		; Dst
		call	_memcpy
		add	esp, 0Ch
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_free_56
		add	esp, 4
		mov	eax, [ebp+arg_4]
		mov	[ebp+arg_8], eax
		mov	eax, [ebp+arg_8]

loc_3099:				; CODE XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+5Ej
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0F0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
?expandCompositCharAtBegin@@YAHPA_WHHPAW4UErrorCode@@@Z	endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
; Segment alignment 'qword' can not be represented in assembly
_rdata		segment	para public 'DATA' use32
		assume cs:_rdata
		;org 30B0h
		public ??_C@_1LC@CBAJJOIB@?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?5?$AA?$DO?$AA?$DN?$AA?5?$AA0?$AAx?$AAF?$AAE?$AAF?$AA5?$AAu?$AA?5?$AA?$CG?$AA?$CG?$AA?5?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?9?$AA0?$AAx@
; wchar_t `string'
??_C@_1LC@CBAJJOIB@?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?5?$AA?$DO?$AA?$DN?$AA?5?$AA0?$AAx?$AAF?$AAE?$AAF?$AA5?$AAu?$AA?5?$AA?$CG?$AA?$CG?$AA?5?$AAd?$AAe?$AAs?$AAt?$AA?$FL?$AAi?$AA?$FN?$AA?9?$AA0?$AAx@:
					; DATA XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+131o
		unicode	0, <dest[i] >
		dw 3Eh
		unicode	0, <= 0xFEF5u && dest[i]-0xFEF5u >
		dw 3Ch
		unicode	0, < sizeof(convertLamAlef)/sizeof(convertLamAlef[0])>,0
		align 4
_rdata		ends

; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read/Write
_data		segment	dword public 'DATA' use32
		assume cs:_data
		;org 3164h
		public ?__LINE__Var@?1??expandCompositCharAtBegin@@YAHPA_WHHPAW4UErrorCode@@@Z@4JA@b604b903
?__LINE__Var@?1??expandCompositCharAtBegin@@YAHPA_WHHPAW4UErrorCode@@@Z@4JA@b604b903 dd	offset byte_387
					; DATA XREF: expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *):loc_2FB9r
_data		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 3168h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl expandCompositCharAtEnd(void *, int, int,	int)
?expandCompositCharAtEnd@@YAHPA_WHHPAW4UErrorCode@@@Z proc near
					; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+7Bp
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+F0p ...

var_FC		= byte ptr -0FCh
Dst		= dword	ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h

		push	ebp
		mov	ebp, esp
		sub	esp, 0FCh
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_FC]
		mov	ecx, 3Fh ; '?'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	[ebp+var_14], 0
		mov	[ebp+var_20], 0
		mov	eax, [ebp+arg_4]
		mov	[ebp+var_2C], eax
		mov	[ebp+Dst], 0
		mov	eax, [ebp+arg_4]
		lea	ecx, [eax+eax+2]
		push	ecx
		call	_uprv_malloc_56
		add	esp, 4
		mov	[ebp+Dst], eax
		cmp	[ebp+Dst], 0
		jnz	short loc_31D1
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 7
		xor	eax, eax
		jmp	loc_339C
; ---------------------------------------------------------------------------

loc_31D1:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+57j
		mov	eax, [ebp+arg_4]
		lea	ecx, [eax+eax+2]
		push	ecx		; Size
		push	0		; Val
		mov	edx, [ebp+Dst]
		push	edx		; Dst
		call	_memset
		add	esp, 0Ch

loc_31E7:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+A1j
		mov	eax, [ebp+var_2C]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2-2]
		cmp	edx, 20h ; ' '
		jnz	short loc_320B
		mov	eax, [ebp+var_20]
		add	eax, 1
		mov	[ebp+var_20], eax
		mov	eax, [ebp+var_2C]
		sub	eax, 1
		mov	[ebp+var_2C], eax
		jmp	short loc_31E7
; ---------------------------------------------------------------------------

loc_320B:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+8Dj
		mov	eax, [ebp+arg_4]
		sub	eax, [ebp+var_20]
		sub	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		mov	[ebp+var_14], eax

loc_3220:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+175j
		cmp	[ebp+var_8], 0
		jl	loc_32E2
		cmp	[ebp+var_14], 0
		jl	loc_32E2
		cmp	[ebp+var_20], 0
		jle	short loc_3291
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isLamAlefChar@@YAH_W@Z	; isLamAlefChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_3291
		mov	eax, 644h
		mov	ecx, [ebp+var_14]
		mov	edx, [ebp+Dst]
		mov	[edx+ecx*2], ax
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+Dst]
		mov	dx, word ptr (byte_60F-203CDh)[edx*2]
		mov	[ecx+eax*2-2], dx
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_20]
		sub	eax, 1
		mov	[ebp+var_20], eax
		jmp	short loc_32CB
; ---------------------------------------------------------------------------

loc_3291:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+D0j
					; expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+E7j
		cmp	[ebp+var_20], 0
		jnz	short loc_32B7
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isLamAlefChar@@YAH_W@Z	; isLamAlefChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_32B7
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 14h

loc_32B7:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+12Dj
					; expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+144j
		mov	eax, [ebp+var_14]
		mov	ecx, [ebp+Dst]
		mov	edx, [ebp+var_8]
		mov	esi, [ebp+arg_0]
		mov	dx, [esi+edx*2]
		mov	[ecx+eax*2], dx

loc_32CB:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+127j
		mov	eax, [ebp+var_8]
		sub	eax, 1
		mov	[ebp+var_8], eax
		mov	eax, [ebp+var_14]
		sub	eax, 1
		mov	[ebp+var_14], eax
		jmp	loc_3220
; ---------------------------------------------------------------------------

loc_32E2:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+BCj
					; expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+C6j
		cmp	[ebp+var_20], 0
		jle	short loc_3363
		push	1
		mov	eax, [ebp+var_20]
		mov	ecx, [ebp+Dst]
		lea	edx, [ecx+eax*2]
		push	edx
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	eax, [ebp+arg_4]
		shl	eax, 1
		mov	esi, esp
		push	eax		; Size
		mov	ecx, [ebp+var_20]
		mov	edx, [ebp+Dst]
		lea	eax, [edx+ecx*2]
		push	eax		; Src
		mov	ecx, [ebp+Dst]
		push	ecx		; Dst
		call	dword ptr ds:__imp__memmove
		add	esp, 0Ch
		cmp	esi, esp
		call	__RTC_CheckEsp
		mov	eax, [ebp+Dst]
		push	eax
		call	_u_strlen_56
		add	esp, 4
		cmp	eax, [ebp+arg_4]
		jge	short loc_3363
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		mov	[ebp+var_8], eax
		jmp	short loc_3347
; ---------------------------------------------------------------------------

loc_333E:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+1F9j
		mov	eax, [ebp+var_8]
		sub	eax, 1
		mov	[ebp+var_8], eax

loc_3347:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+1D4j
		mov	eax, [ebp+arg_4]
		sub	eax, [ebp+var_20]
		cmp	[ebp+var_8], eax
		jl	short loc_3363
		mov	eax, 20h ; ' '
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+Dst]
		mov	[edx+ecx*2], ax
		jmp	short loc_333E
; ---------------------------------------------------------------------------

loc_3363:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+17Ej
					; expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+1C9j	...
		push	1
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_checkValidMemory
		add	esp, 8
		mov	ecx, [ebp+arg_4]
		shl	ecx, 1
		push	ecx		; Size
		mov	edx, [ebp+Dst]
		push	edx		; Src
		mov	eax, [ebp+arg_0]
		push	eax		; Dst
		call	_memcpy
		add	esp, 0Ch
		mov	eax, [ebp+Dst]
		push	eax
		call	_uprv_free_56
		add	esp, 4
		mov	eax, [ebp+arg_4]
		mov	[ebp+arg_8], eax
		mov	eax, [ebp+arg_8]

loc_339C:				; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+64j
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0FCh
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
?expandCompositCharAtEnd@@YAHPA_WHHPAW4UErrorCode@@@Z endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 33B0h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl expandCompositCharAtNear(wchar_t *, int, int, enum  UErrorCode *,	int, int, int, struct uShapeVariables)
?expandCompositCharAtNear@@YAHPA_WHHPAW4UErrorCode@@HHHUuShapeVariables@@@Z proc near
					; CODE XREF: expandCompositChar(wchar_t	*,int,int,uint,UErrorCode *,int,uShapeVariables)+14Ep
					; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+257p

var_F0		= byte ptr -0F0h
var_20		= word ptr -20h
var_14		= word ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h
arg_14		= dword	ptr  1Ch
arg_18		= dword	ptr  20h
arg_1C		= word ptr  24h

		push	ebp
		mov	ebp, esp
		sub	esp, 0F0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_F0]
		mov	ecx, 3Ch ; '<'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	[ebp+var_8], 0
		jmp	short loc_33E7
; ---------------------------------------------------------------------------

loc_33DE:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables):loc_3529j
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax

loc_33E7:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+2Cj
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		cmp	[ebp+var_8], eax
		jg	loc_352E
		cmp	[ebp+arg_14], 0
		jz	short loc_3448
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isSeenTailFamilyChar@@YAH_W@Z ; isSeenTailFamilyChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_3448
		cmp	[ebp+var_8], 0
		jle	short loc_343A
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2-2]
		cmp	edx, 20h ; ' '
		jnz	short loc_343A
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ebp+arg_1C]
		mov	[ecx+eax*2-2], dx
		jmp	short loc_3443
; ---------------------------------------------------------------------------

loc_343A:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+67j
					; expandCompositCharAtNear(wchar_t *,int,int,UErrorCode	*,int,int,int,uShapeVariables)+77j
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 14h

loc_3443:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+88j
		jmp	loc_3529
; ---------------------------------------------------------------------------

loc_3448:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+4Aj
					; expandCompositCharAtNear(wchar_t *,int,int,UErrorCode	*,int,int,int,uShapeVariables)+61j
		cmp	[ebp+arg_10], 0
		jz	short loc_34BC
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx
		call	?isYehHamzaChar@@YAH_W@Z ; isYehHamzaChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_34BC
		cmp	[ebp+var_8], 0
		jle	short loc_34B1
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2-2]
		cmp	edx, 20h ; ' '
		jnz	short loc_34B1
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ecx+eax*2]
		mov	[ebp+var_20], dx
		movzx	eax, [ebp+var_20]
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	ax, word ptr (byte_60F-20301h)[eax*2]
		mov	[edx+ecx*2], ax
		mov	eax, 0FE80h
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2-2], ax
		jmp	short loc_34BA
; ---------------------------------------------------------------------------

loc_34B1:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+B9j
					; expandCompositCharAtNear(wchar_t *,int,int,UErrorCode	*,int,int,int,uShapeVariables)+C9j
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 14h

loc_34BA:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+FFj
		jmp	short loc_3529
; ---------------------------------------------------------------------------

loc_34BC:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+9Cj
					; expandCompositCharAtNear(wchar_t *,int,int,UErrorCode	*,int,int,int,uShapeVariables)+B3j
		cmp	[ebp+arg_18], 0
		jz	short loc_3529
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+2]
		push	edx
		call	?isLamAlefChar@@YAH_W@Z	; isLamAlefChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_3529
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		cmp	edx, 20h ; ' '
		jnz	short loc_3520
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ecx+eax*2+2]
		mov	[ebp+var_14], dx
		mov	eax, 644h
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2+2], ax
		movzx	eax, [ebp+var_14]
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	ax, word ptr (byte_60F-203CDh)[eax*2]
		mov	[edx+ecx*2], ax
		jmp	short loc_3529
; ---------------------------------------------------------------------------

loc_3520:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+137j
		mov	eax, [ebp+arg_C]
		mov	dword ptr [eax], 14h

loc_3529:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables):loc_3443j
					; expandCompositCharAtNear(wchar_t *,int,int,UErrorCode	*,int,int,int,uShapeVariables):loc_34BAj ...
		jmp	loc_33DE
; ---------------------------------------------------------------------------

loc_352E:				; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+40j
		mov	eax, [ebp+arg_4]
		mov	[ebp+arg_8], eax
		mov	eax, [ebp+arg_8]
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN19
		call	@_RTC_CheckStackVars@8 ; _RTC_CheckStackVars(x,x)
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 0F0h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
?expandCompositCharAtNear@@YAHPA_WHHPAW4UErrorCode@@HHHUuShapeVariables@@@Z endp

; ---------------------------------------------------------------------------
$LN19		dd 1			; DATA XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+18Bo
		dd offset $LN18
$LN18		dd 0FFFFFFD4h, 4	; DATA XREF: .text:00003560o
		dd offset $LN17		; "_$ArrayPad"
$LN17		db '_$ArrayPad',0       ; DATA XREF: .text:0000356Co
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 357Ch
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isSeenTailFamilyChar(wchar_t)
?isSeenTailFamilyChar@@YAH_W@Z proc near
					; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+57p
					; deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+162p

var_C0		= byte ptr -0C0h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FEB1h
		jl	short loc_35BF
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FEBFh
		jge	short loc_35BF
		movzx	eax, [ebp+arg_0]
		movzx	eax, (byte_60F-104C0h)[eax]
		jmp	short loc_35C1
; ---------------------------------------------------------------------------
		jmp	short loc_35C1
; ---------------------------------------------------------------------------

loc_35BF:				; CODE XREF: isSeenTailFamilyChar(wchar_t)+27j
					; isSeenTailFamilyChar(wchar_t)+32j
		xor	eax, eax

loc_35C1:				; CODE XREF: isSeenTailFamilyChar(wchar_t)+3Fj
					; isSeenTailFamilyChar(wchar_t)+41j
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isSeenTailFamilyChar@@YAH_W@Z endp

_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 35C8h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isYehHamzaChar(wchar_t)
?isYehHamzaChar@@YAH_W@Z proc near	; CODE XREF: expandCompositCharAtNear(wchar_t *,int,int,UErrorCode *,int,int,int,uShapeVariables)+A9p

var_C0		= byte ptr -0C0h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE89h
		jz	short loc_35FC
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE8Ah
		jnz	short loc_3605

loc_35FC:				; CODE XREF: isYehHamzaChar(wchar_t)+27j
		mov	eax, 1
		jmp	short loc_3607
; ---------------------------------------------------------------------------
		jmp	short loc_3607
; ---------------------------------------------------------------------------

loc_3605:				; CODE XREF: isYehHamzaChar(wchar_t)+32j
		xor	eax, eax

loc_3607:				; CODE XREF: isYehHamzaChar(wchar_t)+39j
					; isYehHamzaChar(wchar_t)+3Bj
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isYehHamzaChar@@YAH_W@Z endp

; ---------------------------------------------------------------------------
		align 10h
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 3610h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl deShapeUnicode(void *, int, int, int, int, int, int, int,	int, int, int)
?deShapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@UuShapeVariables@@@Z	proc near
					; CODE XREF: _u_shapeArabic_56+8E9p

var_114		= byte ptr -114h
var_44		= word ptr -44h
var_38		= word ptr -38h
var_2C		= dword	ptr -2Ch
var_20		= dword	ptr -20h
var_14		= dword	ptr -14h
var_8		= dword	ptr -8
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h
arg_14		= dword	ptr  1Ch
arg_18		= dword	ptr  20h
arg_1C		= dword	ptr  24h
arg_20		= dword	ptr  28h
arg_24		= dword	ptr  2Ch
arg_28		= dword	ptr  30h

		push	ebp
		mov	ebp, esp
		sub	esp, 114h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_114]
		mov	ecx, 45h ; 'E'
		mov	eax, 0CCCCCCCCh
		rep stosd
		mov	[ebp+var_8], 0
		mov	[ebp+var_14], 0
		mov	[ebp+var_20], 0
		mov	[ebp+var_2C], 0
		mov	eax, [ebp+arg_C]
		and	eax, 3800000h
		xor	ecx, ecx
		cmp	eax, 1000000h
		setz	cl
		mov	[ebp+var_20], ecx
		mov	eax, [ebp+arg_C]
		and	eax, 700000h
		xor	ecx, ecx
		cmp	eax, 200000h
		setz	cl
		mov	[ebp+var_2C], ecx
		mov	[ebp+var_8], 0
		jmp	short loc_3686
; ---------------------------------------------------------------------------

loc_367D:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables):loc_37E9j
		mov	eax, [ebp+var_8]
		add	eax, 1
		mov	[ebp+var_8], eax

loc_3686:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+6Bj
		mov	eax, [ebp+var_8]
		cmp	eax, [ebp+arg_4]
		jge	loc_37EE
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ecx+eax*2]
		mov	[ebp+var_38], dx
		movzx	eax, [ebp+var_38]
		cmp	eax, 0FB50h
		jl	short loc_36E1
		movzx	eax, [ebp+var_38]
		cmp	eax, 0FBFFh
		jg	short loc_36E1
		movzx	eax, [ebp+var_38]
		mov	cx, word ptr (byte_60F-1F95Fh)[eax*2]
		mov	[ebp+var_44], cx
		movzx	eax, [ebp+var_44]
		test	eax, eax
		jz	short loc_36DC
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ebp+var_44]
		mov	[ecx+eax*2], dx

loc_36DC:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+BCj
		jmp	loc_37CB
; ---------------------------------------------------------------------------

loc_36E1:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+99j
					; deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+A4j
		cmp	[ebp+var_20], 1
		jnz	short loc_3744
		movzx	eax, [ebp+var_38]
		cmp	eax, 621h
		jz	short loc_36FD
		movzx	eax, [ebp+var_38]
		cmp	eax, 0FE80h
		jnz	short loc_3744

loc_36FD:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+E0j
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		cmp	[ebp+var_8], eax
		jge	short loc_3744
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+2]
		push	edx
		call	?isAlefMaksouraChar@@YAH_W@Z ; isAlefMaksouraChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_3744
		mov	eax, 20h ; ' '
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2], ax
		mov	eax, 626h
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2+2], ax
		jmp	loc_37CB
; ---------------------------------------------------------------------------

loc_3744:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+D5j
					; deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+EBj ...
		cmp	[ebp+var_2C], 1
		jnz	short loc_378F
		movzx	eax, [ebp+var_38]
		push	eax
		call	?isTailChar@@YAH_W@Z ; isTailChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_378F
		mov	eax, [ebp+arg_4]
		sub	eax, 1
		cmp	[ebp+var_8], eax
		jge	short loc_378F
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2+2]
		push	edx
		call	?isSeenTailFamilyChar@@YAH_W@Z ; isSeenTailFamilyChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_378F
		mov	eax, 20h ; ' '
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	[edx+ecx*2], ax
		jmp	short loc_37CB
; ---------------------------------------------------------------------------

loc_378F:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+138j
					; deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+149j ...
		movzx	eax, [ebp+var_38]
		cmp	eax, 0FE70h
		jl	short loc_37BD
		movzx	eax, [ebp+var_38]
		cmp	eax, 0FEF4h
		jg	short loc_37BD
		movzx	eax, [ebp+var_38]
		mov	ecx, [ebp+var_8]
		mov	edx, [ebp+arg_0]
		mov	ax, word ptr (byte_60F-1FE3Fh)[eax*2]
		mov	[edx+ecx*2], ax
		jmp	short loc_37CB
; ---------------------------------------------------------------------------

loc_37BD:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+188j
					; deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+193j
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		mov	dx, [ebp+var_38]
		mov	[ecx+eax*2], dx

loc_37CB:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables):loc_36DCj
					; deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+12Fj ...
		mov	eax, [ebp+var_8]
		mov	ecx, [ebp+arg_0]
		movzx	edx, word ptr [ecx+eax*2]
		push	edx		; int
		call	?isLamAlefChar@@YAH_W@Z	; isLamAlefChar(wchar_t)
		add	esp, 4
		test	eax, eax
		jz	short loc_37E9
		mov	[ebp+var_14], 1

loc_37E9:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+1D0j
		jmp	loc_367D
; ---------------------------------------------------------------------------

loc_37EE:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+7Cj
		mov	eax, [ebp+arg_4]
		mov	[ebp+arg_8], eax
		cmp	[ebp+var_14], 0
		jz	short loc_3843
		sub	esp, 18h
		mov	eax, esp
		mov	ecx, [ebp+arg_14]
		mov	[eax], ecx
		mov	edx, [ebp+arg_18]
		mov	[eax+4], edx
		mov	ecx, [ebp+arg_1C]
		mov	[eax+8], ecx
		mov	edx, [ebp+arg_20]
		mov	[eax+0Ch], edx
		mov	ecx, [ebp+arg_24]
		mov	[eax+10h], ecx
		mov	edx, [ebp+arg_28]
		mov	[eax+14h], edx
		push	1		; int
		mov	eax, [ebp+arg_10]
		push	eax		; int
		mov	ecx, [ebp+arg_C]
		push	ecx		; int
		mov	edx, [ebp+arg_8]
		push	edx		; int
		mov	eax, [ebp+arg_4]
		push	eax		; int
		mov	ecx, [ebp+arg_0]
		push	ecx		; void *
		call	?expandCompositChar@@YAHPA_WHHIPAW4UErrorCode@@HUuShapeVariables@@@Z ; expandCompositChar(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)
		add	esp, 30h
		mov	[ebp+arg_8], eax

loc_3843:				; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+1E8j
		mov	eax, [ebp+arg_8]
		push	edx
		mov	ecx, ebp
		push	eax
		lea	edx, $LN20
		call	@_RTC_CheckStackVars@8 ; _RTC_CheckStackVars(x,x)
		pop	eax
		pop	edx
		pop	edi
		pop	esi
		pop	ebx
		add	esp, 114h
		cmp	ebp, esp
		call	__RTC_CheckEsp
		mov	esp, ebp
		pop	ebp
		retn
?deShapeUnicode@@YAHPA_WHHIPAW4UErrorCode@@UuShapeVariables@@@Z	endp

; ---------------------------------------------------------------------------
		align 4
$LN20		dd 1			; DATA XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+23Ao
		dd offset $LN19_0
$LN19_0		dd 0FFFFFFB0h, 4	; DATA XREF: .text:00003870o
		dd offset $LN18_0	; "_$ArrayPad"
$LN18_0		db '_$ArrayPad',0       ; DATA XREF: .text:0000387Co
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 388Ch
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isTailChar(wchar_t)
?isTailChar@@YAH_W@Z proc near		; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+13Fp

var_C0		= byte ptr -0C0h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C0h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C0]
		mov	ecx, 30h ; '0'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 200Bh
		jz	short loc_38C0
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FE73h
		jnz	short loc_38C9

loc_38C0:				; CODE XREF: isTailChar(wchar_t)+27j
		mov	eax, 1
		jmp	short loc_38CB
; ---------------------------------------------------------------------------
		jmp	short loc_38CB
; ---------------------------------------------------------------------------

loc_38C9:				; CODE XREF: isTailChar(wchar_t)+32j
		xor	eax, eax

loc_38CB:				; CODE XREF: isTailChar(wchar_t)+39j
					; isTailChar(wchar_t)+3Bj
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isTailChar@@YAH_W@Z endp

; ---------------------------------------------------------------------------
		align 4
_text		ends

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 38D4h
		assume es:nothing, ss:nothing, ds:_rdata, fs:nothing, gs:nothing

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl isAlefMaksouraChar(wchar_t)
?isAlefMaksouraChar@@YAH_W@Z proc near	; CODE XREF: deShapeUnicode(wchar_t *,int,int,uint,UErrorCode *,uShapeVariables)+104p

var_C4		= dword	ptr -0C4h
arg_0		= word ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 0C4h
		push	ebx
		push	esi
		push	edi
		lea	edi, [ebp+var_C4]
		mov	ecx, 31h ; '1'
		mov	eax, 0CCCCCCCCh
		rep stosd
		movzx	eax, [ebp+arg_0]
		cmp	eax, 0FEEFh
		jz	short loc_3921
		movzx	ecx, [ebp+arg_0]
		cmp	ecx, 0FEF0h
		jz	short loc_3921
		movzx	edx, [ebp+arg_0]
		cmp	edx, 649h
		jz	short loc_3921
		mov	[ebp+var_C4], 0
		jmp	short loc_392B
; ---------------------------------------------------------------------------

loc_3921:				; CODE XREF: isAlefMaksouraChar(wchar_t)+27j
					; isAlefMaksouraChar(wchar_t)+33j ...
		mov	[ebp+var_C4], 1

loc_392B:				; CODE XREF: isAlefMaksouraChar(wchar_t)+4Bj
		mov	eax, [ebp+var_C4]
		pop	edi
		pop	esi
		pop	ebx
		mov	esp, ebp
		pop	ebp
		retn
?isAlefMaksouraChar@@YAH_W@Z endp

_text		ends

; ===========================================================================

; Segment type:	Externs
; UNDEF
		extrn __RTC_Shutdown:near ; DATA XREF: .rtc$TMZ:__RTC_Shutdown_rtc$TMZo
		extrn __RTC_InitBase:near ; DATA XREF: .rtc$IMZ:__RTC_InitBase_rtc$IMZo
		extrn _uprv_min_56:near	; CODE XREF: _u_shapeArabic_56+968p
; void *__cdecl	memset(void *Dst, int Val, size_t Size)
		extrn _memset:near	; CODE XREF: _u_shapeArabic_56+6B0p
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+C3p ...
; void *__cdecl	memcpy(void *Dst, const	void *Src, size_t Size)
		extrn _memcpy:near	; CODE XREF: _u_shapeArabic_56+66Ap
					; _u_shapeArabic_56+97Ep ...
		extrn _uprv_checkValidMemory:near ; CODE XREF: _u_shapeArabic_56+651p
					; _u_shapeArabic_56+958p ...
		extrn _uprv_free_56:near ; CODE	XREF: _u_shapeArabic_56+5B8p
					; _u_shapeArabic_56+63Cp ...
		extrn _uprv_malloc_56:near ; CODE XREF:	_u_shapeArabic_56+381p
					; _u_shapeArabic_56+60Cp ...
		extrn _u_terminateUChars_56:near ; CODE	XREF: _u_shapeArabic_56+1EDp
					; _u_shapeArabic_56+BD3p
		extrn _u_strlen_56:near	; CODE XREF: _u_shapeArabic_56+1CEp
					; handleGeneratedSpaces(wchar_t	*,int,int,uint,UErrorCode *,uShapeVariables)+1A1p ...
		extrn ___security_cookie:near ;	DATA XREF: _u_shapeArabic_56+1Er
		extrn __RTC_CheckEsp:near ; CODE XREF: _u_shapeArabic_56+C01p
					; _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+176p ...
; __fastcall __security_check_cookie(x)
		extrn @__security_check_cookie@4:near ;	CODE XREF: _u_shapeArabic_56+BF4p
; __fastcall _RTC_CheckStackVars(x, x)
		extrn @_RTC_CheckStackVars@8:near ; CODE XREF: _u_shapeArabic_56+BE5p
					; shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+6A1p ...
		extrn _ubidi_getClass_56:near
					; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+6Ep
					; _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+107p
		extrn _ubidi_getSingleton_56:near
					; CODE XREF: _shapeToArabicDigitsWithContext(wchar_t *,int,wchar_t,signed char,signed char)+1Ep
; void __cdecl __wassert(const wchar_t *Message, const wchar_t *File, unsigned int Line)
		extrn __imp___wassert:near
					; CODE XREF: shapeUnicode(wchar_t *,int,int,uint,UErrorCode *,int,uShapeVariables)+4CEp
					; expandCompositCharAtBegin(wchar_t *,int,int,UErrorCode *)+136p
					; DATA XREF: ...
; void *__cdecl	_memmove(void *Dst, const void *Src, size_t Size)
		extrn __imp__memmove:near
					; CODE XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+1AAp
					; DATA XREF: expandCompositCharAtEnd(wchar_t *,int,int,UErrorCode *)+1AAr


		end
