;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2015 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-3677-7074-51			    |
; |		Michalis Polychronakis,	Stony Brook University		    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	80E98D775E79E3945AA8C5CB0F36BE53
; Input	CRC32 :	5A3D8BCE

; File Name   :	C:\compspace\compare\gpg\dlls\full\gdk-pixbuf-pixdata.exe
; Format      :	Portable executable for	80386 (PE)
; Imagebase   :	400000
; Section 1. (virtual address 00001000)
; Virtual size			: 00001F34 (   7988.)
; Section size in file		: 00002000 (   8192.)
; Offset to raw	data for section: 00000400
; Flags	60500060: Text Data Executable Readable
; Alignment	: 16 bytes

		include	uni.inc	; see unicode subdir of	ida for	info on	unicode

		.686p
		.mmx
		.model flat

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 401000h
		assume es:nothing, ss:nothing, ds:_data, fs:nothing, gs:nothing
; [00000002 BYTES: COLLAPSED FUNCTION nullsub_1]
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_401010	proc near		; DATA XREF: .CRT:00407004o

var_2C		= dword	ptr -2Ch
var_28		= dword	ptr -28h
var_24		= dword	ptr -24h
var_20		= dword	ptr -20h
var_1C		= dword	ptr -1Ch

		sub	esp, 2Ch
		mov	eax, ds:dword_405024
		mov	[esp+2Ch+var_1C], offset dword_405018
		mov	[esp+2Ch+var_24], offset dword_40500C
		mov	[esp+2Ch+var_28], offset dword_405008
		mov	ds:dword_405018, eax
		mov	eax, ds:dword_405028
		mov	[esp+2Ch+var_2C], offset dword_405004
		mov	[esp+2Ch+var_20], eax
		call	__getmainargs
		mov	ds:dword_40501C, eax
		add	esp, 2Ch
		retn
sub_401010	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_401060	proc near		; DATA XREF: .CRT:00407010o

var_1C		= dword	ptr -1Ch

		sub	esp, 1Ch
		xor	eax, eax
		cmp	word ptr ds:400000h, 5A4Dh
		mov	ds:dword_405034, 1
		mov	ds:dword_405030, 1
		mov	ds:dword_40502C, 1
		mov	ds:dword_405040, 1
		jz	short loc_401100

loc_401098:				; CODE XREF: sub_401060+B6j
					; sub_401060+C8j ...
		mov	ds:dword_405014, eax
		mov	eax, ds:dword_405044
		test	eax, eax
		jz	short loc_4010F0
		mov	[esp+1Ch+var_1C], 2
		call	__set_app_type

loc_4010B2:				; CODE XREF: sub_401060+9Cj
		mov	[esp+1Ch+var_1C], 0FFFFFFFFh
		call	sub_401D30
		mov	edx, ds:dword_405048
		mov	ds:dword_4053FC, eax
		mov	ds:dword_405400, eax
		mov	eax, ds:_fmode
		mov	[eax], edx
		call	sub_402070
		cmp	dword_403014, 1
		jz	short loc_401150
		xor	eax, eax
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_4010F0:				; CODE XREF: sub_401060+44j
		mov	[esp+1Ch+var_1C], 1
		call	__set_app_type
		jmp	short loc_4010B2
; ---------------------------------------------------------------------------
		align 10h

loc_401100:				; CODE XREF: sub_401060+36j
		mov	edx, ds:40003Ch
		cmp	dword ptr [edx+400000h], 4550h
		lea	ecx, [edx+400000h]
		jnz	short loc_401098
		movzx	edx, word ptr [ecx+18h]
		cmp	dx, 10Bh
		jz	short loc_401162
		cmp	dx, 20Bh
		jnz	loc_401098
		cmp	dword ptr [ecx+84h], 0Eh
		jbe	loc_401098
		mov	edx, [ecx+0F8h]
		xor	eax, eax
		test	edx, edx
		setnz	al
		jmp	loc_401098
; ---------------------------------------------------------------------------
		align 10h

loc_401150:				; CODE XREF: sub_401060+81j
		mov	[esp+1Ch+var_1C], offset sub_402010
		call	sub_402000
		xor	eax, eax
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------

loc_401162:				; CODE XREF: sub_401060+C1j
		cmp	dword ptr [ecx+74h], 0Eh
		jbe	loc_401098
		mov	ecx, [ecx+0E8h]
		xor	eax, eax
		test	ecx, ecx
		setnz	al
		jmp	loc_401098
sub_401060	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_401180	proc near		; CODE XREF: .text:004014C5j start+15j

dwMilliseconds	= dword	ptr -88h
lpProcName	= dword	ptr -84h
Size		= dword	ptr -80h
var_6D		= byte ptr -6Dh
var_6C		= dword	ptr -6Ch
var_5C		= byte ptr -5Ch
var_30		= byte ptr -30h
var_2C		= word ptr -2Ch

		push	ebp
		xor	eax, eax
		mov	ebp, esp
		mov	ecx, 11h
		push	edi
		push	esi
		lea	edx, [ebp+var_5C]
		push	ebx
		mov	edi, edx
		sub	esp, 7Ch
		rep stosd
		mov	al, 30h
		call	sub_402DE0
		sub	esp, eax
		lea	eax, [esp+88h+var_6D]
		and	eax, 0FFFFFFF0h
		mov	dword ptr [eax], 0CCCCCCCCh
		mov	dword ptr [eax+4], 0CCCCCCCCh
		mov	dword ptr [eax+8], 0CCCCCCCCh
		mov	dword ptr [eax+0Ch], 0CCCCCCCCh
		mov	dword ptr [eax+10h], 0CCCCCCCCh
		mov	dword ptr [eax+14h], 0CCCCCCCCh
		mov	dword ptr [eax+18h], 0CCCCCCCCh
		mov	dword ptr [eax+1Ch], 0CCCCCCCCh
		and	esp, 0FFFFFFF0h
		mov	eax, ds:dword_405044
		test	eax, eax
		jnz	loc_401473

loc_4011EE:				; CODE XREF: sub_401180+2FFj
		mov	eax, large fs:18h
		mov	esi, ds:Sleep
		mov	ebx, [eax+4]
		jmp	short loc_401214
; ---------------------------------------------------------------------------
		align 10h

loc_401200:				; CODE XREF: sub_401180+B1j
		cmp	eax, ebx
		jz	loc_401420
		mov	[esp+88h+dwMilliseconds], 3E8h ; dwMilliseconds
		call	esi ; Sleep
		sub	esp, 4

loc_401214:				; CODE XREF: sub_401180+7Dj
		mov	[esp+88h+Size],	0
		mov	[esp+88h+lpProcName], ebx
		mov	[esp+88h+dwMilliseconds], offset dword_405404
		call	sub_402E30
		sub	esp, 0Ch
		test	eax, eax
		jnz	short loc_401200
		mov	eax, ds:dword_405408
		xor	ebx, ebx
		cmp	eax, 1
		jz	loc_401433

loc_401243:				; CODE XREF: sub_401180+2ADj
		mov	eax, ds:dword_405408
		test	eax, eax
		jz	loc_401484
		mov	ds:dword_405000, 1

loc_40125A:				; CODE XREF: sub_401180+322j
		mov	eax, ds:dword_405408
		cmp	eax, 1
		jz	loc_401450

loc_401268:				; CODE XREF: sub_401180+2C7j
					; sub_401180+2EEj
		test	ebx, ebx
		jnz	short loc_401273
		lock xchg ebx, ds:dword_405404

loc_401273:				; CODE XREF: sub_401180+EAj
		mov	eax, ds:off_4042F0
		test	eax, eax
		jz	short loc_401298
		mov	[esp+88h+Size],	0
		mov	[esp+88h+lpProcName], 2
		mov	[esp+88h+dwMilliseconds], 0
		call	eax ; TlsCallback_0
		sub	esp, 0Ch

loc_401298:				; CODE XREF: sub_401180+FAj
		call	sub_402320
		mov	[esp+88h+dwMilliseconds], offset TopLevelExceptionFilter ; lpTopLevelExceptionFilter
		call	ds:SetUnhandledExceptionFilter
		sub	esp, 4
		mov	ds:dword_40504C, eax
		call	sub_4028D0
		mov	[esp+88h+lpProcName], offset ProcName ;	"_set_invalid_parameter_handler"
		mov	[esp+88h+dwMilliseconds], eax ;	hModule
		call	ds:GetProcAddress
		sub	esp, 8
		test	eax, eax
		jz	short loc_4012D8
		mov	[esp+88h+dwMilliseconds], offset nullsub_1
		call	eax

loc_4012D8:				; CODE XREF: sub_401180+14Dj
		call	sub_402990
		mov	eax, ds:dword_405044
		test	eax, eax
		jz	short loc_401344
		mov	eax, ds:_acmdln
		xor	ecx, ecx
		mov	eax, [eax]
		jmp	short loc_4012FC
; ---------------------------------------------------------------------------

loc_4012F1:				; CODE XREF: sub_401180+182j
		test	dl, dl
		jz	short loc_401320
		test	cl, cl
		jz	short loc_401315

loc_4012F9:				; CODE XREF: sub_401180+18Fj
		add	eax, 1

loc_4012FC:				; CODE XREF: sub_401180+16Fj
		movzx	edx, byte ptr [eax]
		cmp	dl, 20h
		jle	short loc_4012F1
		mov	ebx, ecx
		xor	ebx, 1
		cmp	dl, 22h
		cmovz	ecx, ebx
		jmp	short loc_4012F9
; ---------------------------------------------------------------------------

loc_401311:				; CODE XREF: sub_401180+19Ej
		test	dl, dl
		jz	short loc_401320

loc_401315:				; CODE XREF: sub_401180+177j
		add	eax, 1
		movzx	edx, byte ptr [eax]
		cmp	dl, 20h
		jle	short loc_401311

loc_401320:				; CODE XREF: sub_401180+173j
					; sub_401180+193j
		movzx	edx, [ebp+var_2C]
		test	[ebp+var_30], 1
		mov	ds:dword_4053E4, eax
		mov	eax, 0Ah
		mov	ds:dword_4053EC, 400000h
		cmovnz	eax, edx
		mov	ds:dword_4053E8, eax

loc_401344:				; CODE XREF: sub_401180+164j
		mov	edx, ds:dword_405004
		xor	ebx, ebx
		lea	eax, ds:4[edx*4]
		mov	[ebp+var_6C], edx
		mov	[esp+88h+dwMilliseconds], eax ;	Size
		call	malloc
		mov	edi, ds:dword_405008
		mov	[ebp-70h], eax
		mov	eax, [ebp+var_6C]
		test	eax, eax
		jle	short loc_4013AA
		xchg	ax, ax

loc_401370:				; CODE XREF: sub_401180+225j
		mov	eax, [edi+ebx*4]
		mov	[esp+88h+dwMilliseconds], eax ;	Str
		call	strlen
		lea	esi, [eax+1]
		mov	[esp+88h+dwMilliseconds], esi ;	Size
		call	malloc
		mov	edx, [ebp-70h]
		mov	[edx+ebx*4], eax
		mov	edx, [edi+ebx*4]
		add	ebx, 1
		mov	[esp+88h+Size],	esi ; Size
		mov	[esp+88h+dwMilliseconds], eax ;	Dst
		mov	[esp+88h+lpProcName], edx ; Src
		call	memcpy
		cmp	ebx, [ebp+var_6C]
		jnz	short loc_401370
		shl	ebx, 2

loc_4013AA:				; CODE XREF: sub_401180+1ECj
		mov	eax, [ebp-70h]
		mov	dword ptr [eax+ebx], 0
		mov	ds:dword_405008, eax
		call	sub_402A20
		mov	eax, ds:__initenv
		mov	edx, ds:dword_40500C
		mov	[eax], edx
		mov	eax, ds:dword_40500C
		mov	[esp+88h+Size],	eax
		mov	eax, ds:dword_405008
		mov	[esp+88h+lpProcName], eax
		mov	eax, ds:dword_405004
		mov	[esp+88h+dwMilliseconds], eax
		call	sub_401550
		mov	esi, ds:dword_405014
		test	esi, esi
		mov	ds:dword_405010, eax
		jz	loc_4014A7
		mov	ebx, ds:dword_405000
		test	ebx, ebx
		jnz	short loc_401411
		call	_cexit
		mov	eax, ds:dword_405010

loc_401411:				; CODE XREF: sub_401180+285j
		lea	esp, [ebp-0Ch]
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_401420:				; CODE XREF: sub_401180+82j
		mov	eax, ds:dword_405408
		mov	ebx, 1
		cmp	eax, 1
		jnz	loc_401243

loc_401433:				; CODE XREF: sub_401180+BDj
		mov	[esp+88h+dwMilliseconds], 1Fh
		call	_amsg_exit
		mov	eax, ds:dword_405408
		cmp	eax, 1
		jnz	loc_401268
		lea	esi, [esi+0]

loc_401450:				; CODE XREF: sub_401180+E2j
		mov	[esp+88h+lpProcName], offset dword_407008
		mov	[esp+88h+dwMilliseconds], offset dword_407000
		call	_initterm
		mov	ds:dword_405408, 2
		jmp	loc_401268
; ---------------------------------------------------------------------------

loc_401473:				; CODE XREF: sub_401180+68j
		mov	[esp+88h+dwMilliseconds], edx ;	lpStartupInfo
		call	ds:GetStartupInfoA
		sub	esp, 4
		jmp	loc_4011EE
; ---------------------------------------------------------------------------

loc_401484:				; CODE XREF: sub_401180+CAj
		mov	ds:dword_405408, 1
		mov	[esp+88h+lpProcName], offset dword_407018
		mov	[esp+88h+dwMilliseconds], offset dword_40700C
		call	_initterm
		jmp	loc_40125A
; ---------------------------------------------------------------------------

loc_4014A7:				; CODE XREF: sub_401180+277j
		mov	[esp+88h+dwMilliseconds], eax ;	Code
		call	exit
sub_401180	endp

; ---------------------------------------------------------------------------
		align 10h
		sub	esp, 0Ch
		mov	ds:dword_405044, 1
		call	sub_402A40
		add	esp, 0Ch
		jmp	sub_401180
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


		public start
start		proc near
		sub	esp, 0Ch
		mov	ds:dword_405044, 0
		call	sub_402A40
		add	esp, 0Ch
		jmp	sub_401180
start		endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4014F0	proc near		; CODE XREF: sub_402F00+6p

lpModuleName	= dword	ptr -18h
lpProcName	= dword	ptr -14h

		push	ebp
		mov	ebp, esp
		sub	esp, 18h
		mov	eax, dword_403020
		test	eax, eax
		jz	short locret_40153B
		mov	[esp+18h+lpModuleName],	offset ModuleName ; "libgcj-12.dll"
		call	ds:GetModuleHandleA
		mov	edx, 0
		sub	esp, 4
		test	eax, eax
		jz	short loc_40152E
		mov	[esp+18h+lpProcName], offset a_jv_registercl ; "_Jv_RegisterClasses"
		mov	[esp+18h+lpModuleName],	eax ; hModule
		call	ds:GetProcAddress
		sub	esp, 8
		mov	edx, eax

loc_40152E:				; CODE XREF: sub_4014F0+26j
		test	edx, edx
		jz	short locret_40153B
		mov	[esp+18h+lpModuleName],	offset dword_403020
		call	edx

locret_40153B:				; CODE XREF: sub_4014F0+Dj
					; sub_4014F0+40j
		leave
		retn
sub_4014F0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl sub_401540()
sub_401540	proc near		; DATA XREF: sub_402F00+Bo
		push	ebp
		mov	ebp, esp
		pop	ebp
		retn
sub_401540	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_401550	proc near		; CODE XREF: sub_401180+265p

var_60		= dword	ptr -60h
var_5C		= dword	ptr -5Ch
var_58		= dword	ptr -58h
var_54		= dword	ptr -54h
var_50		= dword	ptr -50h
var_38		= dword	ptr -38h
var_34		= byte ptr -34h
var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		and	esp, 0FFFFFFF0h
		sub	esp, 60h
		call	sub_402A20
		mov	[esp+60h+var_18], 0
		lea	eax, [ebp+arg_4]
		mov	[esp+60h+var_5C], eax
		lea	eax, [ebp+arg_0]
		mov	[esp+60h+var_60], eax
		call	sub_401724
		mov	eax, [ebp+arg_0]
		cmp	eax, 3
		jz	short loc_4015A2
		mov	eax, ds:_iob
		add	eax, 40h
		mov	[esp+60h+var_5C], 1
		mov	[esp+60h+var_60], eax
		call	sub_4019A5
		mov	eax, 1
		jmp	locret_401722
; ---------------------------------------------------------------------------

loc_4015A2:				; CODE XREF: sub_401550+2Ej
		mov	eax, [ebp+arg_4]
		add	eax, 4
		mov	eax, [eax]
		mov	[esp+60h+var_50], 0
		mov	[esp+60h+var_54], 0
		mov	[esp+60h+var_58], 0
		mov	[esp+60h+var_5C], 0FFFFFFFFh
		mov	[esp+60h+var_60], eax
		call	g_locale_to_utf8
		mov	[esp+60h+var_4], eax
		mov	eax, [ebp+arg_4]
		add	eax, 8
		mov	eax, [eax]
		mov	[esp+60h+var_50], 0
		mov	[esp+60h+var_54], 0
		mov	[esp+60h+var_58], 0
		mov	[esp+60h+var_5C], 0FFFFFFFFh
		mov	[esp+60h+var_60], eax
		call	g_locale_to_utf8
		mov	[esp+60h+var_8], eax
		lea	eax, [esp+60h+var_18]
		mov	[esp+60h+var_5C], eax
		mov	eax, [esp+60h+var_4]
		mov	[esp+60h+var_60], eax
		call	gdk_pixbuf_new_from_file_utf8
		mov	[esp+60h+var_C], eax
		cmp	[esp+60h+var_C], 0
		jnz	short loc_401662
		mov	eax, [esp+60h+var_18]
		mov	edx, [eax+8]
		mov	eax, [ebp+arg_4]
		add	eax, 4
		mov	eax, [eax]
		mov	[esp+60h+var_58], edx
		mov	[esp+60h+var_5C], eax
		mov	[esp+60h+var_60], offset aFailedToLoadSS ; "failed to load \"%s\": %s\n"
		call	g_printerr
		mov	eax, [esp+60h+var_18]
		mov	[esp+60h+var_60], eax
		call	g_error_free
		mov	eax, 1
		jmp	locret_401722
; ---------------------------------------------------------------------------

loc_401662:				; CODE XREF: sub_401550+D7j
		mov	eax, ds:dword_405020
		mov	[esp+60h+var_58], eax
		mov	eax, [esp+60h+var_C]
		mov	[esp+60h+var_5C], eax
		lea	eax, [esp+60h+var_34]
		mov	[esp+60h+var_60], eax
		call	gdk_pixdata_from_pixbuf
		mov	[esp+60h+var_10], eax
		lea	eax, [esp+60h+var_38]
		mov	[esp+60h+var_5C], eax
		lea	eax, [esp+60h+var_34]
		mov	[esp+60h+var_60], eax
		call	gdk_pixdata_serialize
		mov	[esp+60h+var_14], eax
		mov	eax, [esp+60h+var_38]
		lea	edx, [esp+60h+var_18]
		mov	[esp+60h+var_54], edx
		mov	[esp+60h+var_58], eax
		mov	eax, [esp+60h+var_14]
		mov	[esp+60h+var_5C], eax
		mov	eax, [esp+60h+var_8]
		mov	[esp+60h+var_60], eax
		call	g_file_set_contents
		test	eax, eax
		jnz	short loc_4016F9
		mov	eax, [esp+60h+var_18]
		mov	edx, [eax+8]
		mov	eax, [ebp+arg_4]
		add	eax, 4
		mov	eax, [eax]
		mov	[esp+60h+var_58], edx
		mov	[esp+60h+var_5C], eax
		mov	[esp+60h+var_60], offset aFailedToLoadSS ; "failed to load \"%s\": %s\n"
		call	g_printerr
		mov	eax, [esp+60h+var_18]
		mov	[esp+60h+var_60], eax
		call	g_error_free
		mov	eax, 1
		jmp	short locret_401722
; ---------------------------------------------------------------------------

loc_4016F9:				; CODE XREF: sub_401550+171j
		mov	eax, [esp+60h+var_14]
		mov	[esp+60h+var_60], eax
		call	g_free
		mov	eax, [esp+60h+var_10]
		mov	[esp+60h+var_60], eax
		call	g_free
		mov	eax, [esp+60h+var_C]
		mov	[esp+60h+var_60], eax
		call	g_object_unref
		mov	eax, 0

locret_401722:				; CODE XREF: sub_401550+4Dj
					; sub_401550+10Dj ...
		leave
		retn
sub_401550	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_401724	proc near		; CODE XREF: sub_401550+23p

Code		= dword	ptr -38h
var_34		= dword	ptr -34h
var_1C		= dword	ptr -1Ch
var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		push	edi
		push	esi
		sub	esp, 30h
		mov	eax, [ebp+arg_0]
		mov	eax, [eax]
		mov	[ebp+var_14], eax
		mov	eax, [ebp+arg_4]
		mov	eax, [eax]
		mov	[ebp+var_18], eax
		mov	[ebp+var_C], 1
		jmp	loc_401913
; ---------------------------------------------------------------------------

loc_401748:				; CODE XREF: sub_401724+1F5j
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	eax, [eax]
		mov	edx, offset aRle ; "--rle"
		mov	ecx, 6
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	ecx, edx
		sub	cl, al
		mov	eax, ecx
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401794
		mov	ds:dword_405020, 1
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	dword ptr [eax], 0
		jmp	loc_40190F
; ---------------------------------------------------------------------------

loc_401794:				; CODE XREF: sub_401724+50j
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	eax, [eax]
		mov	edx, offset asc_404063 ; "-h"
		mov	ecx, 3
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	ecx, edx
		sub	cl, al
		mov	eax, ecx
		movsx	eax, al
		test	eax, eax
		jz	short loc_4017F0
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	eax, [eax]
		mov	edx, offset aHelp ; "--help"
		mov	ecx, 7
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	ecx, edx
		sub	cl, al
		mov	eax, ecx
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401823

loc_4017F0:				; CODE XREF: sub_401724+9Cj
		mov	eax, ds:_iob
		add	eax, 40h
		mov	[esp+38h+var_34], 1
		mov	[esp+38h+Code],	eax
		call	sub_4019A5
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	dword ptr [eax], 0
		mov	[esp+38h+Code],	0 ; Code
		call	exit
; ---------------------------------------------------------------------------

loc_401823:				; CODE XREF: sub_401724+CAj
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	eax, [eax]
		mov	edx, offset aV	; "-v"
		mov	ecx, 3
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	ecx, edx
		sub	cl, al
		mov	eax, ecx
		movsx	eax, al
		test	eax, eax
		jz	short loc_40187F
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	eax, [eax]
		mov	edx, offset aVersion ; "--version"
		mov	ecx, 0Ah
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	ecx, edx
		sub	cl, al
		mov	eax, ecx
		movsx	eax, al
		test	eax, eax
		jnz	short loc_4018B2

loc_40187F:				; CODE XREF: sub_401724+12Bj
		mov	eax, ds:_iob
		add	eax, 40h
		mov	[esp+38h+var_34], 0
		mov	[esp+38h+Code],	eax
		call	sub_4019A5
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	dword ptr [eax], 0
		mov	[esp+38h+Code],	0 ; Code
		call	exit
; ---------------------------------------------------------------------------

loc_4018B2:				; CODE XREF: sub_401724+159j
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	eax, [eax]
		mov	edx, eax
		mov	eax, offset aGFatalWarnings ; "--g-fatal-warnings"
		mov	ecx, 13h
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	ecx, edx
		sub	cl, al
		mov	eax, ecx
		movsx	eax, al
		test	eax, eax
		jnz	short loc_40190F
		mov	[esp+38h+Code],	5
		call	g_log_set_always_fatal
		mov	[ebp+var_1C], eax
		or	[ebp+var_1C], 18h
		mov	eax, [ebp+var_1C]
		mov	[esp+38h+Code],	eax
		call	g_log_set_always_fatal
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	dword ptr [eax], 0

loc_40190F:				; CODE XREF: sub_401724+6Bj
					; sub_401724+1BCj
		add	[ebp+var_C], 1

loc_401913:				; CODE XREF: sub_401724+1Fj
		mov	eax, [ebp+var_C]
		cmp	eax, [ebp+var_14]
		jb	loc_401748
		mov	[ebp+var_10], 0
		mov	[ebp+var_C], 1
		jmp	short loc_401988
; ---------------------------------------------------------------------------

loc_40192F:				; CODE XREF: sub_401724+26Aj
		cmp	[ebp+var_10], 0
		jz	short loc_40196F
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	eax, [eax]
		test	eax, eax
		jz	short loc_401984
		mov	eax, [ebp+var_10]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	edx, [ebp+var_C]
		shl	edx, 2
		add	edx, [ebp+var_18]
		mov	edx, [edx]
		mov	[eax], edx
		add	[ebp+var_10], 1
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	dword ptr [eax], 0
		jmp	short loc_401984
; ---------------------------------------------------------------------------

loc_40196F:				; CODE XREF: sub_401724+20Fj
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_18]
		mov	eax, [eax]
		test	eax, eax
		jnz	short loc_401984
		mov	eax, [ebp+var_C]
		mov	[ebp+var_10], eax

loc_401984:				; CODE XREF: sub_401724+21Ej
					; sub_401724+249j ...
		add	[ebp+var_C], 1

loc_401988:				; CODE XREF: sub_401724+209j
		mov	eax, [ebp+var_C]
		cmp	eax, [ebp+var_14]
		jb	short loc_40192F
		cmp	[ebp+var_10], 0
		jz	short loc_40199E
		mov	edx, [ebp+var_10]
		mov	eax, [ebp+arg_0]
		mov	[eax], edx

loc_40199E:				; CODE XREF: sub_401724+270j
		add	esp, 30h
		pop	esi
		pop	edi
		pop	ebp
		retn
sub_401724	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4019A5	proc near		; CODE XREF: sub_401550+43p
					; sub_401724+DFp ...

var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 18h
		cmp	[ebp+arg_4], 0
		jnz	loc_401A7F
		mov	[esp+18h+var_10], offset aGdkPixbufPixda ; "gdk-pixbuf-pixdata-3.0"
		mov	[esp+18h+var_14], offset aSVersion ; "%s version "
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		mov	[esp+18h+var_10], offset a2_30_8 ; "2.30.8"
		mov	[esp+18h+var_14], offset aS ; "%s"
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		mov	[esp+18h+var_14], offset asc_4040BA ; "\n"
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		mov	[esp+18h+var_10], offset aGdkPixbufPixda ; "gdk-pixbuf-pixdata-3.0"
		mov	[esp+18h+var_14], offset aSComesWithAbso ; "%s comes with ABSOLUTELY NO	WARRANTY.\n"
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		mov	[esp+18h+var_10], offset aGdkPixbufPixda ; "gdk-pixbuf-pixdata-3.0"
		mov	[esp+18h+var_14], offset aYouMayRedistri ; "You	may redistribute copies	of %s under"...
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		mov	[esp+18h+var_14], offset aTheGnuLesserGe ; "the	GNU Lesser General Public License w"...
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		mov	[esp+18h+var_10], offset aGdkPixbuf ; "gdk-pixbuf"
		mov	[esp+18h+var_14], offset aSSourcePackage ; "%s source package. Sources,	examples an"...
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		mov	[esp+18h+var_10], offset aHttpWww_gtk_or ; "http://www.gtk.org"
		mov	[esp+18h+var_14], offset aInformationAre ; "information	are available at %s\n"
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		jmp	short locret_401AD3
; ---------------------------------------------------------------------------

loc_401A7F:				; CODE XREF: sub_4019A5+Aj
		mov	[esp+18h+var_10], offset aGdkPixbufPixda ; "gdk-pixbuf-pixdata-3.0"
		mov	[esp+18h+var_14], offset aUsageSOptionsI ; "Usage: %s [options]	[input-file] [outpu"...
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		mov	[esp+18h+var_14], offset aHHelpShowThisH ; "  -h, --help		 show this "...
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		mov	[esp+18h+var_14], offset aVVersionPrintV ; "  -v, --version		 print vers"...
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf
		mov	[esp+18h+var_14], offset aGFatalWarnin_0 ; "  --g-fatal-warnings	 make warni"...
		mov	eax, [ebp+arg_0]
		mov	[esp+18h+var_18], eax
		call	g_fprintf

locret_401AD3:				; CODE XREF: sub_4019A5+D8j
		leave
		retn
sub_4019A5	endp

; ---------------------------------------------------------------------------
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION gdk_pixbuf_new_from_file_utf8]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION gdk_pixdata_from_pixbuf]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION gdk_pixdata_serialize]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION g_object_unref]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_locale_to_utf8]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION g_printerr]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_error_free]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION g_file_set_contents]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_free]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION g_log_set_always_fatal]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_fprintf]
		align 10h

; =============== S U B	R O U T	I N E =======================================


		public TlsCallback_1
TlsCallback_1	proc near		; DATA XREF: .CRT:00407024o

var_1C		= dword	ptr -1Ch
var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch

		sub	esp, 1Ch
		mov	eax, [esp+1Ch+arg_4]
		test	eax, eax
		jz	short loc_401B50
		cmp	eax, 3
		jz	short loc_401B50
		mov	eax, 1
		add	esp, 1Ch
		retn	0Ch
; ---------------------------------------------------------------------------
		align 10h

loc_401B50:				; CODE XREF: TlsCallback_1+9j
					; TlsCallback_1+Ej
		mov	edx, [esp+1Ch+arg_8]
		mov	[esp+1Ch+var_18], eax
		mov	eax, [esp+1Ch+arg_0]
		mov	[esp+1Ch+var_14], edx
		mov	[esp+1Ch+var_1C], eax
		call	sub_402D40
		mov	eax, 1
		add	esp, 1Ch
		retn	0Ch
TlsCallback_1	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


		public TlsCallback_0
TlsCallback_0	proc near		; CODE XREF: sub_401180+113p
					; DATA XREF: .rdata:off_4042F0o ...

lpLibFileName	= dword	ptr -1Ch
lpProcName	= dword	ptr -18h
var_14		= dword	ptr -14h
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch

		push	ebx
		sub	esp, 18h
		mov	edx, ds:_winmajor
		mov	eax, [esp+1Ch+arg_4]
		cmp	dword ptr [edx], 3
		jbe	short loc_401BC4
		cmp	dword_403010, 2
		jz	short loc_401BA6
		mov	dword_403010, 2

loc_401BA6:				; CODE XREF: TlsCallback_0+1Aj
		cmp	eax, 2
		jz	loc_401CB3
		cmp	eax, 1
		jz	loc_401C52

loc_401BB8:				; CODE XREF: TlsCallback_0+EEj
					; TlsCallback_0+13Ej
		add	esp, 18h
		mov	eax, 1
		pop	ebx
		retn	0Ch
; ---------------------------------------------------------------------------

loc_401BC4:				; CODE XREF: TlsCallback_0+11j
		mov	ds:dword_4053F8, 1
		mov	[esp+1Ch+lpLibFileName], offset	LibFileName ; "mingwm10.dll"
		call	ds:LoadLibraryA
		sub	esp, 4
		test	eax, eax
		mov	ds:hLibModule, eax
		jz	loc_401CE3
		mov	ebx, ds:GetProcAddress
		mov	[esp+1Ch+lpProcName], offset a__mingwthr_rem ; "__mingwthr_remove_key_dtor"
		mov	[esp+1Ch+lpLibFileName], eax ; hModule
		call	ebx ; GetProcAddress
		mov	ds:dword_4053F4, eax
		mov	eax, ds:hLibModule
		sub	esp, 8
		mov	[esp+1Ch+lpProcName], offset a__mingwthr_key ; "__mingwthr_key_dtor"
		mov	[esp+1Ch+lpLibFileName], eax ; hModule
		call	ebx ; GetProcAddress
		mov	edx, ds:hLibModule
		sub	esp, 8
		test	edx, edx
		mov	ds:dword_4053F0, eax
		jz	loc_401CE3
		mov	ecx, ds:dword_4053F4
		test	ecx, ecx
		jz	short loc_401C73
		test	eax, eax
		jz	short loc_401C73
		mov	dword_403010, 1
		add	esp, 18h
		mov	eax, 1
		pop	ebx
		retn	0Ch
; ---------------------------------------------------------------------------

loc_401C52:				; CODE XREF: TlsCallback_0+32j
		mov	eax, [esp+1Ch+arg_8]
		mov	[esp+1Ch+lpProcName], 1
		mov	[esp+1Ch+var_14], eax
		mov	eax, [esp+1Ch+arg_0]
		mov	[esp+1Ch+lpLibFileName], eax
		call	sub_402D40
		jmp	loc_401BB8
; ---------------------------------------------------------------------------

loc_401C73:				; CODE XREF: TlsCallback_0+B6j
					; TlsCallback_0+BAj
		mov	ds:dword_4053F0, 0
		mov	ds:dword_4053F4, 0
		mov	[esp+1Ch+lpLibFileName], edx ; hLibModule
		call	ds:FreeLibrary
		sub	esp, 4

loc_401C93:				; CODE XREF: TlsCallback_0+177j
		mov	ds:hLibModule, 0
		mov	eax, 1
		mov	dword_403010, 0
		add	esp, 18h
		pop	ebx
		retn	0Ch
; ---------------------------------------------------------------------------

loc_401CB3:				; CODE XREF: TlsCallback_0+29j
		mov	ebx, offset dword_407030
		cmp	ebx, offset dword_407030
		jz	loc_401BB8

loc_401CC4:				; CODE XREF: TlsCallback_0+155j
		mov	eax, [ebx]
		test	eax, eax
		jz	short loc_401CCC
		call	eax

loc_401CCC:				; CODE XREF: TlsCallback_0+148j
		add	ebx, 4
		cmp	ebx, offset dword_407030
		jnz	short loc_401CC4
		add	esp, 18h
		mov	eax, 1
		pop	ebx
		retn	0Ch
; ---------------------------------------------------------------------------

loc_401CE3:				; CODE XREF: TlsCallback_0+65j
					; TlsCallback_0+A8j
		mov	ds:dword_4053F0, 0
		mov	ds:dword_4053F4, 0
		jmp	short loc_401C93
TlsCallback_0	endp

; ---------------------------------------------------------------------------
		align 10h
		xor	eax, eax
		retn
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_401D10	proc near		; DATA XREF: .CRT:00407014o
		mov	eax, ds:__lconv_init
		jmp	eax
sub_401D10	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_401D20	proc near		; CODE XREF: sub_401D40+10p
					; sub_401D40+36p ...

arg_0		= dword	ptr  4

		mov	eax, [esp+arg_0]
		retn
sub_401D20	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_401D30	proc near		; CODE XREF: sub_401060+59p
					; sub_401D40+71p ...

arg_0		= dword	ptr  4

		mov	eax, [esp+arg_0]
		retn
sub_401D30	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


; int __cdecl sub_401D40(_onexit_t)
sub_401D40	proc near		; CODE XREF: sub_401E00+Ap

Func		= dword	ptr -2Ch
var_28		= dword	ptr -28h
var_24		= dword	ptr -24h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
arg_0		= dword	ptr  4

		push	ebx
		sub	esp, 28h
		mov	eax, ds:dword_405400
		mov	ebx, [esp+2Ch+arg_0]
		mov	[esp+2Ch+Func],	eax
		call	sub_401D20
		cmp	eax, 0FFFFFFFFh
		mov	[esp+2Ch+var_14], eax
		jz	loc_401DE0
		mov	[esp+2Ch+Func],	8
		call	_lock
		mov	eax, ds:dword_405400
		mov	[esp+2Ch+Func],	eax
		call	sub_401D20
		mov	[esp+2Ch+var_14], eax
		mov	eax, ds:dword_4053FC
		mov	[esp+2Ch+Func],	eax
		call	sub_401D20
		mov	[esp+2Ch+Func],	ebx
		mov	[esp+2Ch+var_10], eax
		lea	eax, [esp+2Ch+var_10]
		mov	[esp+2Ch+var_24], eax
		lea	eax, [esp+2Ch+var_14]
		mov	[esp+2Ch+var_28], eax
		call	__dllonexit
		mov	ebx, eax
		mov	eax, [esp+2Ch+var_14]
		mov	[esp+2Ch+Func],	eax
		call	sub_401D30
		mov	ds:dword_405400, eax
		mov	eax, [esp+2Ch+var_10]
		mov	[esp+2Ch+Func],	eax
		call	sub_401D30
		mov	[esp+2Ch+Func],	8
		mov	ds:dword_4053FC, eax
		call	_unlock
		add	esp, 28h
		mov	eax, ebx
		pop	ebx
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_401DE0:				; CODE XREF: sub_401D40+1Cj
		mov	[esp+2Ch+Func],	ebx ; Func
		call	ds:_onexit
		add	esp, 28h
		mov	ebx, eax
		mov	eax, ebx
		pop	ebx
		retn
sub_401D40	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


; int __cdecl sub_401E00(_onexit_t)
sub_401E00	proc near		; CODE XREF: sub_402A20-27p
					; sub_402F00+12p

var_1C		= dword	ptr -1Ch
arg_0		= dword	ptr  4

		sub	esp, 1Ch
		mov	eax, [esp+1Ch+arg_0]
		mov	[esp+1Ch+var_1C], eax ;	_onexit_t
		call	sub_401D40
		cmp	eax, 1
		sbb	eax, eax
		add	esp, 1Ch
		retn
sub_401E00	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


; LONG __stdcall TopLevelExceptionFilter(struct	_EXCEPTION_POINTERS *ExceptionInfo)
TopLevelExceptionFilter	proc near	; DATA XREF: sub_401180+11Do

var_2C		= dword	ptr -2Ch
var_28		= dword	ptr -28h
var_10		= dword	ptr -10h
ExceptionInfo	= dword	ptr  4

		push	esi
		push	ebx
		sub	esp, 24h
		mov	ebx, [esp+2Ch+ExceptionInfo]
		mov	eax, [ebx]
		mov	eax, [eax]
		cmp	eax, 0C0000091h
		ja	short loc_401E77
		cmp	eax, 0C000008Dh
		jb	short loc_401EA4

loc_401E3B:				; CODE XREF: TopLevelExceptionFilter+6Aj
		mov	esi, 1

loc_401E40:				; CODE XREF: TopLevelExceptionFilter+C7j
		mov	[esp+2Ch+var_28], 0
		mov	[esp+2Ch+var_2C], 8
		call	signal
		cmp	eax, 1
		jz	loc_401F70
		test	eax, eax
		jz	short loc_401E8C
		mov	[esp+2Ch+var_2C], 8
		call	eax
		mov	eax, 0FFFFFFFFh

loc_401E6F:				; CODE XREF: TopLevelExceptionFilter+120j
					; TopLevelExceptionFilter+13Ej	...
		add	esp, 24h
		pop	ebx
		pop	esi
		retn	4
; ---------------------------------------------------------------------------

loc_401E77:				; CODE XREF: TopLevelExceptionFilter+12j
		cmp	eax, 0C0000094h
		jz	short loc_401EE5
		cmp	eax, 0C0000096h
		jz	short loc_401EB2
		cmp	eax, 0C0000093h
		jz	short loc_401E3B

loc_401E8C:				; CODE XREF: TopLevelExceptionFilter+3Fj
					; TopLevelExceptionFilter+90j ...
		mov	eax, ds:dword_40504C
		test	eax, eax
		jz	loc_401F63
		mov	[esp+2Ch+ExceptionInfo], ebx
		add	esp, 24h
		pop	ebx
		pop	esi
		jmp	eax
; ---------------------------------------------------------------------------

loc_401EA4:				; CODE XREF: TopLevelExceptionFilter+19j
		cmp	eax, 0C0000005h
		jz	short loc_401EF0
		cmp	eax, 0C000001Dh
		jnz	short loc_401E8C

loc_401EB2:				; CODE XREF: TopLevelExceptionFilter+63j
		mov	[esp+2Ch+var_28], 0
		mov	[esp+2Ch+var_2C], 4
		call	signal
		cmp	eax, 1
		jz	short loc_401F27
		test	eax, eax
		jz	short loc_401E8C
		mov	[esp+2Ch+var_2C], 4
		call	eax
		add	esp, 24h
		mov	eax, 0FFFFFFFFh
		pop	ebx
		pop	esi
		retn	4
; ---------------------------------------------------------------------------

loc_401EE5:				; CODE XREF: TopLevelExceptionFilter+5Cj
		xor	esi, esi
		jmp	loc_401E40
; ---------------------------------------------------------------------------
		align 10h

loc_401EF0:				; CODE XREF: TopLevelExceptionFilter+89j
		mov	[esp+2Ch+var_28], 0
		mov	[esp+2Ch+var_2C], 0Bh
		call	signal
		cmp	eax, 1
		jz	short loc_401F45
		test	eax, eax
		jz	loc_401E8C
		mov	[esp+2Ch+var_2C], 0Bh
		call	eax
		add	esp, 24h
		mov	eax, 0FFFFFFFFh
		pop	ebx
		pop	esi
		retn	4
; ---------------------------------------------------------------------------

loc_401F27:				; CODE XREF: TopLevelExceptionFilter+A9j
		mov	[esp+2Ch+var_28], 1
		mov	[esp+2Ch+var_2C], 4
		call	signal
		mov	eax, 0FFFFFFFFh
		jmp	loc_401E6F
; ---------------------------------------------------------------------------

loc_401F45:				; CODE XREF: TopLevelExceptionFilter+E7j
		mov	[esp+2Ch+var_28], 1
		mov	[esp+2Ch+var_2C], 0Bh
		call	signal
		mov	eax, 0FFFFFFFFh
		jmp	loc_401E6F
; ---------------------------------------------------------------------------

loc_401F63:				; CODE XREF: TopLevelExceptionFilter+73j
		xor	eax, eax
		jmp	loc_401E6F
; ---------------------------------------------------------------------------
		align 10h

loc_401F70:				; CODE XREF: TopLevelExceptionFilter+37j
		mov	[esp+2Ch+var_28], 1
		mov	[esp+2Ch+var_2C], 8
		call	signal
		test	esi, esi
		mov	eax, 0FFFFFFFFh
		jz	loc_401E6F
		mov	[esp+2Ch+var_10], eax
		call	sub_402990
		mov	eax, [esp+2Ch+var_10]
		jmp	loc_401E6F
TopLevelExceptionFilter	endp

; ---------------------------------------------------------------------------
		align 10h
		sub	esp, 3Ch
		mov	eax, ds:dword_405050
		fld	qword ptr [esp+48h]
		fld	qword ptr [esp+50h]
		fld	qword ptr [esp+58h]
		test	eax, eax
		jz	short loc_401FF1
		fxch	st(2)
		mov	edx, [esp+40h]
		fstp	qword ptr [esp+18h]
		fstp	qword ptr [esp+20h]
		fstp	qword ptr [esp+28h]
		mov	[esp+10h], edx
		mov	edx, [esp+44h]
		mov	[esp+14h], edx
		lea	edx, [esp+10h]
		mov	[esp], edx
		call	eax ; dword_405050
		jmp	short loc_401FF7
; ---------------------------------------------------------------------------

loc_401FF1:				; CODE XREF: .text:00401FC6j
		fstp	st
		fstp	st
		fstp	st

loc_401FF7:				; CODE XREF: .text:00401FEFj
		add	esp, 3Ch
		retn
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402000	proc near		; CODE XREF: sub_401060+F7p

arg_0		= dword	ptr  4

		mov	eax, [esp+arg_0]
		mov	ds:dword_405050, eax
		jmp	__setusermatherr
sub_402000	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402010	proc near		; DATA XREF: sub_401060:loc_401150o

File		= dword	ptr -3Ch
Format		= dword	ptr -38h
var_34		= dword	ptr -34h
var_30		= dword	ptr -30h
var_2C		= qword	ptr -2Ch
var_24		= qword	ptr -24h
var_1C		= qword	ptr -1Ch
arg_0		= dword	ptr  4

		sub	esp, 3Ch
		mov	edx, offset aUnknownError ; "Unknown error"
		mov	eax, [esp+3Ch+arg_0]
		mov	ecx, [eax]
		sub	ecx, 1
		cmp	ecx, 5
		ja	short loc_40202D
		mov	edx, ds:off_404410[ecx*4]

loc_40202D:				; CODE XREF: sub_402010+14j
		fld	qword ptr [eax+18h]
		fstp	[esp+3Ch+var_1C]
		fld	qword ptr [eax+10h]
		fstp	[esp+3Ch+var_24]
		fld	qword ptr [eax+8]
		fstp	[esp+3Ch+var_2C]
		mov	eax, [eax+4]
		mov	[esp+3Ch+var_34], edx
		mov	[esp+3Ch+Format], offset Format	; "_matherr(): %s in %s(%g, %g)	 (retval=%"...
		mov	[esp+3Ch+var_30], eax
		mov	eax, ds:_iob
		add	eax, 40h
		mov	[esp+3Ch+File],	eax ; File
		call	fprintf
		xor	eax, eax
		add	esp, 3Ch
		retn
sub_402010	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402070	proc near		; CODE XREF: sub_401060+75p
		xor	eax, eax
		retn
sub_402070	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn

; int __cdecl sub_402080(char *Format, char ArgList)
sub_402080	proc near		; CODE XREF: sub_4020E0+1DDp
					; sub_4020E0+204p ...

Str		= dword	ptr -1Ch
Size		= dword	ptr -18h
Count		= dword	ptr -14h
File		= dword	ptr -10h
Format		= dword	ptr  4
ArgList		= byte ptr  8

		push	ebx
		sub	esp, 18h
		mov	eax, ds:_iob
		mov	[esp+1Ch+Count], 1Bh ; Count
		lea	ebx, [esp+1Ch+ArgList]
		mov	[esp+1Ch+Size],	1 ; Size
		mov	[esp+1Ch+Str], offset aMingwW64Runtim ;	"Mingw-w64 runtime failure:\n"
		add	eax, 40h
		mov	[esp+1Ch+File],	eax ; File
		call	fwrite
		mov	eax, [esp+1Ch+Format]
		mov	[esp+1Ch+Count], ebx ; ArgList
		mov	[esp+1Ch+Size],	eax ; Format
		mov	eax, ds:_iob
		add	eax, 40h
		mov	[esp+1Ch+Str], eax ; File
		call	vfprintf
		call	abort
sub_402080	endp

; ---------------------------------------------------------------------------
		jmp	short sub_4020E0
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


; int __thiscall sub_4020E0(size_t Size)
sub_4020E0	proc near		; CODE XREF: .text:004020D1j
					; sub_402320+B8p ...

lpAddress	= dword	ptr -7Ch
lpBuffer	= dword	ptr -78h
dwLength	= dword	ptr -74h
lpflOldProtect	= dword	ptr -70h
var_64		= dword	ptr -64h
Src		= dword	ptr -60h
var_58		= _MEMORY_BASIC_INFORMATION ptr	-58h
Buffer		= _MEMORY_BASIC_INFORMATION ptr	-3Ch
flOldProtect	= dword	ptr -20h

		push	ebp
		mov	ebp, ecx
		push	edi
		push	esi
		push	ebx
		mov	ebx, eax
		sub	esp, 6Ch
		mov	ecx, ds:dword_40505C
		mov	[esp+7Ch+Src], edx
		test	ecx, ecx
		jle	loc_4022C2
		mov	eax, ds:dword_405058
		xor	esi, esi

loc_402104:				; CODE XREF: sub_4020E0+41j
		mov	edx, [eax+4]
		cmp	ebx, edx
		jb	short loc_402119
		mov	edi, [eax+8]
		add	edx, [edi+8]
		cmp	ebx, edx
		jb	loc_4021F0

loc_402119:				; CODE XREF: sub_4020E0+29j
		add	esi, 1
		add	eax, 0Ch
		cmp	esi, ecx
		jnz	short loc_402104

loc_402123:				; CODE XREF: sub_4020E0+1E4j
		mov	[esp+7Ch+lpAddress], ebx
		call	sub_4026E0
		test	eax, eax
		mov	edi, eax
		jz	loc_4022E9
		lea	edx, [esi+esi*2]
		mov	esi, ds:dword_405058
		shl	edx, 2
		add	esi, edx
		mov	[esi+8], eax
		mov	dword ptr [esi], 0
		mov	[esp+7Ch+var_64], edx
		call	sub_4027C0
		mov	edx, [esp+7Ch+var_64]
		add	eax, [edi+0Ch]
		mov	[esi+4], eax
		lea	eax, [esp+7Ch+Buffer]
		mov	esi, ds:VirtualQuery
		mov	[esp+7Ch+lpBuffer], eax	; lpBuffer
		mov	eax, ds:dword_405058
		mov	[esp+7Ch+dwLength], 1Ch	; dwLength
		mov	eax, [eax+edx+4]
		mov	[esp+7Ch+lpAddress], eax ; lpAddress
		call	esi ; VirtualQuery
		sub	esp, 0Ch
		test	eax, eax
		mov	edx, [esp+7Ch+var_64]
		jz	loc_4022C9
		mov	eax, [esp+7Ch+Buffer.Protect]
		cmp	eax, 4
		jnz	loc_402271

loc_40219F:				; CODE XREF: sub_4020E0+194j
					; sub_4020E0+1C6j
		add	ds:dword_40505C, 1

loc_4021A6:				; CODE XREF: sub_4020E0+116j
		lea	eax, [esp+7Ch+var_58]
		mov	[esp+7Ch+dwLength], 1Ch	; dwLength
		mov	[esp+7Ch+lpBuffer], eax	; lpBuffer
		mov	[esp+7Ch+lpAddress], ebx ; lpAddress
		call	esi ; VirtualQuery
		sub	esp, 0Ch
		test	eax, eax
		jz	loc_4022F9
		mov	eax, [esp+7Ch+var_58.Protect]
		cmp	eax, 4
		jnz	short loc_4021F8

loc_4021CF:				; CODE XREF: sub_4020E0+11Bj
		mov	eax, [esp+7Ch+Src]
		mov	[esp+7Ch+dwLength], ebp	; Size
		mov	[esp+7Ch+lpAddress], ebx ; Dst
		mov	[esp+7Ch+lpBuffer], eax	; Src
		call	memcpy

loc_4021E3:				; CODE XREF: sub_4020E0+162j
					; sub_4020E0+167j
		add	esp, 6Ch
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_4021F0:				; CODE XREF: sub_4020E0+33j
		mov	esi, ds:VirtualQuery
		jmp	short loc_4021A6
; ---------------------------------------------------------------------------

loc_4021F8:				; CODE XREF: sub_4020E0+EDj
		cmp	eax, 40h
		jz	short loc_4021CF
		mov	eax, [esp+7Ch+var_58.RegionSize]
		lea	edi, [esp+7Ch+flOldProtect]
		mov	esi, ds:VirtualProtect
		mov	[esp+7Ch+lpflOldProtect], edi ;	lpflOldProtect
		mov	[esp+7Ch+dwLength], 40h	; flNewProtect
		mov	[esp+7Ch+lpBuffer], eax	; dwSize
		mov	eax, [esp+7Ch+var_58.BaseAddress]
		mov	[esp+7Ch+lpAddress], eax ; lpAddress
		call	esi ; VirtualProtect
		sub	esp, 10h
		mov	eax, [esp+7Ch+Src]
		mov	[esp+7Ch+dwLength], ebp	; Size
		mov	[esp+7Ch+lpAddress], ebx ; Dst
		mov	[esp+7Ch+lpBuffer], eax	; Src
		call	memcpy
		mov	eax, [esp+7Ch+var_58.Protect]
		cmp	eax, 40h
		jz	short loc_4021E3
		cmp	eax, 4
		jz	short loc_4021E3
		mov	eax, [esp+7Ch+flOldProtect]
		mov	[esp+7Ch+lpflOldProtect], edi ;	lpflOldProtect
		mov	[esp+7Ch+dwLength], eax	; flNewProtect
		mov	eax, [esp+7Ch+var_58.RegionSize]
		mov	[esp+7Ch+lpBuffer], eax	; dwSize
		mov	eax, [esp+7Ch+var_58.BaseAddress]
		mov	[esp+7Ch+lpAddress], eax ; lpAddress
		call	esi ; VirtualProtect
		sub	esp, 10h
		add	esp, 6Ch
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------

loc_402271:				; CODE XREF: sub_4020E0+B9j
		cmp	eax, 40h
		jz	loc_40219F
		mov	eax, [esp+7Ch+Buffer.RegionSize]
		add	edx, ds:dword_405058
		mov	[esp+7Ch+dwLength], 40h	; flNewProtect
		mov	[esp+7Ch+lpBuffer], eax	; dwSize
		mov	eax, [esp+7Ch+Buffer.BaseAddress]
		mov	[esp+7Ch+lpflOldProtect], edx ;	lpflOldProtect
		mov	[esp+7Ch+lpAddress], eax ; lpAddress
		call	ds:VirtualProtect
		sub	esp, 10h
		test	eax, eax
		jnz	loc_40219F
		call	ds:GetLastError
		mov	[esp+7Ch+lpAddress], offset aVirtualprotect ; "	 VirtualProtect	failed with code 0x%x"
		mov	[esp+7Ch+lpBuffer], eax	; ArgList
		call	sub_402080
; ---------------------------------------------------------------------------

loc_4022C2:				; CODE XREF: sub_4020E0+17j
		xor	esi, esi
		jmp	loc_402123
; ---------------------------------------------------------------------------

loc_4022C9:				; CODE XREF: sub_4020E0+ACj
		mov	eax, ds:dword_405058
		mov	eax, [eax+edx+4]
		mov	[esp+7Ch+dwLength], eax
		mov	eax, [edi+8]
		mov	[esp+7Ch+lpAddress], offset aVirtualqueryFa ; "	 VirtualQuery failed for %d bytes at a"...
		mov	[esp+7Ch+lpBuffer], eax	; ArgList
		call	sub_402080
; ---------------------------------------------------------------------------

loc_4022E9:				; CODE XREF: sub_4020E0+4Fj
		mov	[esp+7Ch+lpBuffer], ebx	; ArgList
		mov	[esp+7Ch+lpAddress], offset aAddressPHasNoI ; "Address %p has no image-section"
		call	sub_402080
; ---------------------------------------------------------------------------

loc_4022F9:				; CODE XREF: sub_4020E0+E0j
		mov	[esp+7Ch+dwLength], ebx
		mov	[esp+7Ch+lpBuffer], 1Ch	; ArgList
		mov	[esp+7Ch+lpAddress], offset aVirtualqueryFa ; "	 VirtualQuery failed for %d bytes at a"...
		call	sub_402080
sub_4020E0	endp

; ---------------------------------------------------------------------------
		db 0EBh	; ë
		db  0Dh
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_402320	proc near		; CODE XREF: sub_401180:loc_401298p

lpAddress	= dword	ptr -58h
lpBuffer	= dword	ptr -54h
dwLength	= dword	ptr -50h
lpflOldProtect	= dword	ptr -4Ch
Buffer		= _MEMORY_BASIC_INFORMATION ptr	-3Ch
var_20		= dword	ptr -20h
flOldProtect	= dword	ptr -1Ch

		push	ebp
		mov	ebp, esp
		push	edi
		push	esi
		push	ebx
		sub	esp, 4Ch
		mov	eax, ds:dword_405054
		test	eax, eax
		jz	short loc_402340

loc_402332:				; CODE XREF: sub_402320+66j
					; sub_402320+96j ...
		lea	esp, [ebp-0Ch]
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_402340:				; CODE XREF: sub_402320+10j
		mov	ds:dword_405054, 1
		call	sub_402720
		lea	eax, [eax+eax*2]
		lea	eax, ds:1Eh[eax*4]
		and	eax, 0FFFFFFF0h
		call	sub_402DE0
		mov	ds:dword_40505C, 0
		sub	esp, eax
		lea	eax, [esp+58h+Buffer.BaseAddress+3]
		and	eax, 0FFFFFFF0h
		mov	ds:dword_405058, eax
		mov	eax, offset dword_404540
		sub	eax, offset dword_404540
		cmp	eax, 7
		jle	short loc_402332
		cmp	eax, 0Bh
		mov	ebx, offset dword_404540
		jle	loc_402480
		mov	eax, ds:dword_404540
		test	eax, eax
		jnz	short loc_4023B0
		mov	eax, ds:dword_404544
		test	eax, eax
		jz	loc_40246C
		lea	esi, [esi+0]

loc_4023B0:				; CODE XREF: sub_402320+7Dj
					; sub_402320+164j ...
		cmp	ebx, offset dword_404540
		jnb	loc_402332
		mov	esi, 400000h

loc_4023C1:				; CODE XREF: sub_402320+C3j
		mov	eax, [ebx+4]
		mov	ecx, 4		; Size
		add	eax, esi
		mov	edx, [eax]
		add	edx, [ebx]
		add	ebx, 8
		mov	[ebp+flOldProtect], edx
		lea	edx, [ebp+flOldProtect]
		call	sub_4020E0
		cmp	ebx, offset dword_404540
		jb	short loc_4023C1

loc_4023E5:				; CODE XREF: sub_402320+24Bj
		mov	ecx, ds:dword_40505C
		test	ecx, ecx
		jle	loc_402332
		xor	ebx, ebx
		xor	esi, esi
		mov	edi, ds:VirtualQuery
		jmp	short loc_402412
; ---------------------------------------------------------------------------
		align 10h

loc_402400:				; CODE XREF: sub_402320+FDj
					; sub_402320+14Aj
		add	esi, 1
		add	ebx, 0Ch
		cmp	esi, ds:dword_40505C
		jge	loc_402332

loc_402412:				; CODE XREF: sub_402320+DDj
		mov	eax, ds:dword_405058
		add	eax, ebx
		mov	edx, [eax]
		test	edx, edx
		jz	short loc_402400
		lea	edx, [ebp+Buffer]
		mov	[esp+58h+dwLength], 1Ch	; dwLength
		mov	[esp+58h+lpBuffer], edx	; lpBuffer
		mov	eax, [eax+4]
		mov	[esp+58h+lpAddress], eax ; lpAddress
		call	edi ; VirtualQuery
		sub	esp, 0Ch
		test	eax, eax
		jz	loc_402592
		lea	eax, [ebp+flOldProtect]
		mov	[esp+58h+lpflOldProtect], eax ;	lpflOldProtect
		mov	eax, ds:dword_405058
		mov	eax, [eax+ebx]
		mov	[esp+58h+dwLength], eax	; flNewProtect
		mov	eax, [ebp+Buffer.RegionSize]
		mov	[esp+58h+lpBuffer], eax	; dwSize
		mov	eax, [ebp+Buffer.BaseAddress]
		mov	[esp+58h+lpAddress], eax ; lpAddress
		call	ds:VirtualProtect
		sub	esp, 10h
		jmp	short loc_402400
; ---------------------------------------------------------------------------

loc_40246C:				; CODE XREF: sub_402320+86j
		mov	eax, ds:dword_404548
		test	eax, eax
		jnz	short loc_402495
		mov	ebx, offset dword_40454C
		lea	esi, [esi+0]

loc_402480:				; CODE XREF: sub_402320+70j
		mov	edi, [ebx]
		test	edi, edi
		jnz	loc_4023B0
		mov	esi, [ebx+4]
		test	esi, esi
		jnz	loc_4023B0

loc_402495:				; CODE XREF: sub_402320+153j
		mov	eax, [ebx+8]
		cmp	eax, 1
		jnz	loc_4025B5
		add	ebx, 0Ch
		cmp	ebx, offset dword_404540
		jnb	loc_402332

loc_4024B0:				; CODE XREF: sub_402320+245j
		movzx	edx, byte ptr [ebx+8]
		mov	eax, 400000h
		mov	ecx, [ebx]
		add	eax, [ebx+4]
		cmp	edx, 10h
		mov	esi, [ecx+400000h]
		jz	short loc_40250A
		cmp	edx, 20h
		jz	short loc_402540
		cmp	edx, 8
		jz	short loc_4024EA
		mov	[esp+58h+lpBuffer], edx	; ArgList
		mov	[esp+58h+lpAddress], offset aUnknownPseudoR ; "	 Unknown pseudo	relocation bit size %d"...
		mov	[ebp+var_20], 0
		call	sub_402080
; ---------------------------------------------------------------------------

loc_4024EA:				; CODE XREF: sub_402320+1B1j
		movzx	edi, byte ptr [eax]
		test	edi, 80h
		jz	short loc_402515
		or	edi, 0FFFFFF00h
		sub	edi, ecx
		sub	edi, 400000h
		add	esi, edi
		mov	[ebp+var_20], esi
		jmp	short loc_402531
; ---------------------------------------------------------------------------

loc_40250A:				; CODE XREF: sub_402320+1A7j
		movzx	edi, word ptr [eax]
		test	edi, 8000h
		jnz	short loc_402570

loc_402515:				; CODE XREF: sub_402320+1D3j
		sub	edi, ecx
		sub	edi, 400000h
		add	esi, edi
		cmp	edx, 10h
		mov	[ebp+var_20], esi
		jz	short loc_402583
		cmp	edx, 20h
		jz	short loc_40254F
		cmp	edx, 8
		jnz	short loc_40255C

loc_402531:				; CODE XREF: sub_402320+1E8j
		mov	ecx, 1		; Size
		lea	edx, [ebp+var_20]
		call	sub_4020E0
		jmp	short loc_40255C
; ---------------------------------------------------------------------------

loc_402540:				; CODE XREF: sub_402320+1ACj
		mov	edx, [eax]
		sub	edx, ecx
		sub	edx, 400000h
		add	edx, esi
		mov	[ebp+var_20], edx

loc_40254F:				; CODE XREF: sub_402320+20Aj
		mov	ecx, 4		; Size
		lea	edx, [ebp+var_20]
		call	sub_4020E0

loc_40255C:				; CODE XREF: sub_402320+20Fj
					; sub_402320+21Ej ...
		add	ebx, 0Ch
		cmp	ebx, offset dword_404540
		jb	loc_4024B0
		jmp	loc_4023E5
; ---------------------------------------------------------------------------

loc_402570:				; CODE XREF: sub_402320+1F3j
		or	edi, 0FFFF0000h
		sub	edi, ecx
		sub	edi, 400000h
		add	esi, edi
		mov	[ebp+var_20], esi

loc_402583:				; CODE XREF: sub_402320+205j
		mov	ecx, 2		; Size
		lea	edx, [ebp+var_20]
		call	sub_4020E0
		jmp	short loc_40255C
; ---------------------------------------------------------------------------

loc_402592:				; CODE XREF: sub_402320+11Bj
		add	ebx, ds:dword_405058
		mov	eax, [ebx+4]
		mov	[esp+58h+dwLength], eax
		mov	eax, [ebx+8]
		mov	eax, [eax+8]
		mov	[esp+58h+lpAddress], offset aVirtualqueryFa ; "	 VirtualQuery failed for %d bytes at a"...
		mov	[esp+58h+lpBuffer], eax	; ArgList
		call	sub_402080
; ---------------------------------------------------------------------------

loc_4025B5:				; CODE XREF: sub_402320+17Bj
		mov	[esp+58h+lpBuffer], eax	; ArgList
		mov	[esp+58h+lpAddress], offset aUnknownPseud_0 ; "	 Unknown pseudo	relocation protocol ve"...
		call	sub_402080
sub_402320	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4025D0	proc near		; CODE XREF: .text:00402671p
					; sub_4026E0+Ap ...

arg_0		= dword	ptr  4

		mov	edx, [esp+arg_0]
		xor	eax, eax
		cmp	word ptr [edx],	5A4Dh
		jz	short loc_4025E0

locret_4025DD:				; CODE XREF: sub_4025D0+19j
		rep retn
; ---------------------------------------------------------------------------
		align 10h

loc_4025E0:				; CODE XREF: sub_4025D0+Bj
		add	edx, [edx+3Ch]
		cmp	dword ptr [edx], 4550h
		jnz	short locret_4025DD
		xor	eax, eax
		cmp	word ptr [edx+18h], 10Bh
		setz	al
		retn
sub_4025D0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402600	proc near		; CODE XREF: sub_4026E0+2Bp
					; .text:00402824p ...

arg_0		= dword	ptr  4
arg_4		= dword	ptr  8

		push	esi
		xor	eax, eax
		push	ebx
		mov	edx, [esp+8+arg_0]
		mov	ebx, [esp+8+arg_4]
		add	edx, [edx+3Ch]
		movzx	esi, word ptr [edx+6]
		movzx	ecx, word ptr [edx+14h]
		test	esi, esi
		jz	short loc_40263E
		movzx	ecx, cx
		lea	eax, [edx+ecx+18h]
		xor	edx, edx

loc_402624:				; CODE XREF: sub_402600+3Aj
		mov	ecx, [eax+0Ch]
		cmp	ecx, ebx
		ja	short loc_402632
		add	ecx, [eax+8]
		cmp	ebx, ecx
		jb	short loc_40263E

loc_402632:				; CODE XREF: sub_402600+29j
		add	edx, 1
		add	eax, 28h
		cmp	edx, esi
		jb	short loc_402624
		xor	eax, eax

loc_40263E:				; CODE XREF: sub_402600+19j
					; sub_402600+30j
		pop	ebx
		pop	esi
		retn
sub_402600	endp

; ---------------------------------------------------------------------------
		jmp	short loc_402650
; ---------------------------------------------------------------------------
		align 10h

loc_402650:				; CODE XREF: .text:00402641j
		push	ebp
		push	edi
		push	esi
		push	ebx
		xor	ebx, ebx
		sub	esp, 1Ch
		mov	edi, [esp+30h]
		mov	[esp], edi
		call	strlen
		cmp	eax, 8
		ja	short loc_4026C3
		mov	dword ptr [esp], 400000h
		call	sub_4025D0
		test	eax, eax
		jz	short loc_4026C3
		mov	eax, ds:40003Ch
		movzx	ebp, word ptr [eax+400006h]
		movzx	edx, word ptr [eax+400014h]
		add	eax, 400000h
		test	ebp, ebp
		jz	short loc_4026C3
		movzx	edx, dx
		xor	esi, esi
		lea	ebx, [eax+edx+18h]
		jmp	short loc_4026AB
; ---------------------------------------------------------------------------

loc_4026A1:				; CODE XREF: .text:004026C1j
		add	esi, 1
		add	ebx, 28h
		cmp	esi, ebp
		jnb	short loc_4026D0

loc_4026AB:				; CODE XREF: .text:0040269Fj
		mov	dword ptr [esp+8], 8
		mov	[esp+4], edi
		mov	[esp], ebx
		call	strncmp
		test	eax, eax
		jnz	short loc_4026A1

loc_4026C3:				; CODE XREF: .text:00402668j
					; .text:00402678j ...
		add	esp, 1Ch
		mov	eax, ebx
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_4026D0:				; CODE XREF: .text:004026A9j
		add	esp, 1Ch
		xor	ebx, ebx
		mov	eax, ebx
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4026E0	proc near		; CODE XREF: sub_4020E0+46p

var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  4

		sub	esp, 8
		mov	[esp+8+var_8], 400000h
		call	sub_4025D0
		mov	edx, eax
		xor	eax, eax
		test	edx, edx
		jz	short loc_402710
		mov	eax, [esp+8+arg_0]
		mov	[esp+8+var_8], 400000h
		sub	eax, 400000h
		mov	[esp+8+var_4], eax
		call	sub_402600

loc_402710:				; CODE XREF: sub_4026E0+15j
		add	esp, 8
		retn
sub_4026E0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402720	proc near		; CODE XREF: sub_402320+2Ap

var_4		= dword	ptr -4

		sub	esp, 4
		mov	[esp+4+var_4], 400000h
		call	sub_4025D0
		xor	edx, edx
		test	eax, eax
		jz	short loc_402741
		mov	eax, ds:40003Ch
		movzx	edx, word ptr [eax+400006h]

loc_402741:				; CODE XREF: sub_402720+13j
		mov	eax, edx
		add	esp, 4
		retn
sub_402720	endp

; ---------------------------------------------------------------------------
		align 10h
		push	esi
		push	ebx
		sub	esp, 4
		mov	dword ptr [esp], 400000h
		mov	ebx, [esp+10h]
		call	sub_4025D0
		xor	edx, edx
		test	eax, eax
		jz	short loc_4027A9
		mov	eax, ds:40003Ch
		movzx	ecx, word ptr [eax+400006h]
		movzx	esi, word ptr [eax+400014h]
		add	eax, 400000h
		test	ecx, ecx
		jz	short loc_4027A9
		movzx	esi, si
		lea	edx, [eax+esi+18h]
		xor	eax, eax

loc_402790:				; CODE XREF: .text:004027A5j
		test	byte ptr [edx+27h], 20h
		jz	short loc_40279D
		test	ebx, ebx
		jz	short loc_4027A9
		sub	ebx, 1

loc_40279D:				; CODE XREF: .text:00402794j
		add	eax, 1
		add	edx, 28h
		cmp	eax, ecx
		jb	short loc_402790
		xor	edx, edx

loc_4027A9:				; CODE XREF: .text:00402769j
					; .text:00402785j ...
		add	esp, 4
		mov	eax, edx
		pop	ebx
		pop	esi
		retn
; ---------------------------------------------------------------------------
		jmp	short sub_4027C0
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4027C0	proc near		; CODE XREF: sub_4020E0+70p
					; .text:004027B1j

var_4		= dword	ptr -4

		sub	esp, 4
		mov	[esp+4+var_4], 400000h
		call	sub_4025D0
		xor	edx, edx
		test	eax, eax
		mov	eax, 400000h
		cmovnz	edx, eax
		add	esp, 4
		mov	eax, edx
		retn
sub_4027C0	endp

; ---------------------------------------------------------------------------
		jmp	short loc_4027F0
; ---------------------------------------------------------------------------
		align 10h

loc_4027F0:				; CODE XREF: .text:004027E1j
		push	ebx
		xor	ebx, ebx
		sub	esp, 8
		mov	dword ptr [esp], 400000h
		call	sub_4025D0
		test	eax, eax
		jnz	short loc_402810

loc_402806:				; CODE XREF: .text:0040282Bj
		add	esp, 8
		mov	eax, ebx
		pop	ebx
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_402810:				; CODE XREF: .text:00402804j
		mov	eax, [esp+10h]
		mov	dword ptr [esp], 400000h
		sub	eax, 400000h
		mov	[esp+4], eax
		call	sub_402600
		test	eax, eax
		jz	short loc_402806
		mov	ebx, [eax+24h]
		add	esp, 8
		not	ebx
		shr	ebx, 1Fh
		mov	eax, ebx
		pop	ebx
		retn
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402840	proc near		; CODE XREF: sub_4028D0+1Ap

var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
arg_0		= dword	ptr  4

		push	edi
		xor	edi, edi
		push	esi
		push	ebx
		sub	esp, 8
		mov	[esp+14h+var_14], 400000h
		mov	ebx, [esp+14h+arg_0]
		call	sub_4025D0
		test	eax, eax
		jz	short loc_4028B1
		mov	eax, ds:40003Ch
		mov	esi, [eax+400080h]
		test	esi, esi
		jz	short loc_4028B1
		mov	[esp+14h+var_10], esi
		mov	[esp+14h+var_14], 400000h
		call	sub_402600
		test	eax, eax
		jz	short loc_4028B1
		add	esi, 400000h
		jnz	short loc_402896
		jmp	short loc_4028B1
; ---------------------------------------------------------------------------
		align 10h

loc_402890:				; CODE XREF: sub_402840+66j
		sub	ebx, 1
		add	esi, 14h

loc_402896:				; CODE XREF: sub_402840+45j
		mov	edx, [esi+4]
		test	edx, edx
		jnz	short loc_4028A4
		mov	eax, [esi+0Ch]
		test	eax, eax
		jz	short loc_4028C0

loc_4028A4:				; CODE XREF: sub_402840+5Bj
		test	ebx, ebx
		jg	short loc_402890
		mov	edi, [esi+0Ch]
		add	edi, 400000h

loc_4028B1:				; CODE XREF: sub_402840+1Aj
					; sub_402840+29j ...
		add	esp, 8
		mov	eax, edi
		pop	ebx
		pop	esi
		pop	edi
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_4028C0:				; CODE XREF: sub_402840+62j
		add	esp, 8
		xor	edi, edi
		mov	eax, edi
		pop	ebx
		pop	esi
		pop	edi
		retn
sub_402840	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4028D0	proc near		; CODE XREF: sub_401180+132p

lpModuleName	= dword	ptr -1Ch

		push	ebx
		sub	esp, 18h
		mov	eax, ds:dword_405060
		test	eax, eax
		jz	short loc_4028E2

loc_4028DD:				; CODE XREF: sub_4028D0+97j
					; sub_4028D0+B5j
		add	esp, 18h
		pop	ebx
		retn
; ---------------------------------------------------------------------------

loc_4028E2:				; CODE XREF: sub_4028D0+Bj
		xor	eax, eax

loc_4028E4:				; CODE XREF: sub_4028D0+82j
		mov	[esp+1Ch+lpModuleName],	eax
		lea	ebx, [eax+1]
		call	sub_402840
		test	eax, eax
		jz	short loc_402970
		movzx	edx, byte ptr [eax]
		cmp	dl, 4Dh
		jz	short loc_402900
		cmp	dl, 6Dh
		jnz	short loc_402950

loc_402900:				; CODE XREF: sub_4028D0+29j
		movzx	edx, byte ptr [eax+1]
		cmp	dl, 53h
		jz	short loc_40290E
		cmp	dl, 73h
		jnz	short loc_402950

loc_40290E:				; CODE XREF: sub_4028D0+37j
		movzx	edx, byte ptr [eax+2]
		cmp	dl, 56h
		jz	short loc_40291C
		cmp	dl, 76h
		jnz	short loc_402950

loc_40291C:				; CODE XREF: sub_4028D0+45j
		movzx	edx, byte ptr [eax+3]
		cmp	dl, 43h
		jz	short loc_40292A
		cmp	dl, 63h
		jnz	short loc_402950

loc_40292A:				; CODE XREF: sub_4028D0+53j
		movzx	edx, byte ptr [eax+4]
		cmp	dl, 52h
		jz	short loc_402938
		cmp	dl, 72h
		jnz	short loc_402950

loc_402938:				; CODE XREF: sub_4028D0+61j
		movzx	edx, byte ptr [eax+5]
		cmp	dl, 54h
		jz	short loc_402954
		cmp	dl, 74h
		jz	short loc_402954
		sub	edx, 30h
		cmp	dl, 9
		jbe	short loc_402954
		xchg	ax, ax

loc_402950:				; CODE XREF: sub_4028D0+2Ej
					; sub_4028D0+3Cj ...
		mov	eax, ebx
		jmp	short loc_4028E4
; ---------------------------------------------------------------------------

loc_402954:				; CODE XREF: sub_4028D0+6Fj
					; sub_4028D0+74j ...
		mov	[esp+1Ch+lpModuleName],	eax ; lpModuleName
		call	ds:GetModuleHandleA
		sub	esp, 4
		test	eax, eax
		mov	ds:dword_405060, eax
		jnz	loc_4028DD
		lea	esi, [esi+0]

loc_402970:				; CODE XREF: sub_4028D0+21j
		mov	[esp+1Ch+lpModuleName],	offset aMsvcrt_dll ; "msvcrt.dll"
		call	ds:LoadLibraryW
		sub	esp, 4
		mov	ds:dword_405060, eax
		jmp	loc_4028DD
sub_4028D0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402990	proc near		; CODE XREF: sub_401180:loc_4012D8p
					; TopLevelExceptionFilter+175p
		fninit
		retn
sub_402990	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


; int __cdecl sub_4029A0()
sub_4029A0	proc near		; DATA XREF: sub_402A20:loc_4029F2o
		sub	esp, 0Ch
		mov	eax, off_40300C
		mov	eax, [eax]
		test	eax, eax
		jz	short loc_4029C7
		xchg	ax, ax

loc_4029B0:				; CODE XREF: sub_4029A0+25j
		call	eax
		mov	eax, off_40300C
		lea	edx, [eax+4]
		mov	eax, [eax+4]
		mov	off_40300C, edx
		test	eax, eax
		jnz	short loc_4029B0

loc_4029C7:				; CODE XREF: sub_4029A0+Cj
		add	esp, 0Ch
		retn
sub_4029A0	endp

; ---------------------------------------------------------------------------
		align 10h
; START	OF FUNCTION CHUNK FOR sub_402A20

loc_4029D0:				; CODE XREF: sub_402A20+1Aj
		push	ebx
		sub	esp, 18h
		mov	ebx, ds:dword_402F20
		cmp	ebx, 0FFFFFFFFh
		jz	short loc_402A03

loc_4029DF:				; CODE XREF: sub_402A20-9j
		test	ebx, ebx
		jz	short loc_4029F2

loc_4029E3:				; CODE XREF: sub_402A20-30j
		call	ds:dword_402F20[ebx*4]
		sub	ebx, 1
		lea	esi, [esi+0]
		jnz	short loc_4029E3

loc_4029F2:				; CODE XREF: sub_402A20-3Fj
		mov	[esp+1Ch+var_1C], offset sub_4029A0 ; _onexit_t
		call	sub_401E00
		add	esp, 18h
		pop	ebx
		retn
; ---------------------------------------------------------------------------

loc_402A03:				; CODE XREF: sub_402A20-43j
		xor	ebx, ebx
		jmp	short loc_402A09
; ---------------------------------------------------------------------------

loc_402A07:				; CODE XREF: sub_402A20-Bj
		mov	ebx, eax

loc_402A09:				; CODE XREF: sub_402A20-1Bj
		lea	eax, [ebx+1]
		mov	edx, ds:dword_402F20[eax*4]
		test	edx, edx
		jnz	short loc_402A07
		jmp	short loc_4029DF
; END OF FUNCTION CHUNK	FOR sub_402A20
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402A20	proc near		; CODE XREF: sub_401180+239p
					; sub_401550+9p

var_1C		= dword	ptr -1Ch

; FUNCTION CHUNK AT 004029D0 SIZE 00000049 BYTES

		mov	ecx, ds:dword_405064
		test	ecx, ecx
		jz	short loc_402A30
		rep retn
; ---------------------------------------------------------------------------
		align 10h

loc_402A30:				; CODE XREF: sub_402A20+8j
		mov	ds:dword_405064, 1
		jmp	short loc_4029D0
sub_402A20	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402A40	proc near		; CODE XREF: .text:004014BDp start+Dp

lpSystemTimeAsFileTime=	dword ptr -4Ch
var_30		= dword	ptr -30h
SystemTimeAsFileTime= _FILETIME	ptr -2Ch
PerformanceCount= LARGE_INTEGER	ptr -24h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4

		sub	esp, 4Ch
		mov	eax, dword_403018
		mov	[esp+4Ch+var_10], ebx
		mov	[esp+4Ch+var_C], esi
		mov	[esp+4Ch+var_8], edi
		cmp	eax, 0BB40E64Eh
		mov	[esp+4Ch+var_4], ebp
		mov	[esp+4Ch+SystemTimeAsFileTime.dwLowDateTime], 0
		mov	[esp+4Ch+SystemTimeAsFileTime.dwHighDateTime], 0
		jz	short loc_402A90
		not	eax
		mov	dword_40301C, eax

loc_402A76:				; CODE XREF: sub_402A40+BDj
		mov	ebx, [esp+4Ch+var_10]
		mov	esi, [esp+4Ch+var_C]
		mov	edi, [esp+4Ch+var_8]
		mov	ebp, [esp+4Ch+var_4]
		add	esp, 4Ch
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_402A90:				; CODE XREF: sub_402A40+2Dj
		lea	eax, [esp+4Ch+SystemTimeAsFileTime]
		mov	[esp+4Ch+lpSystemTimeAsFileTime], eax ;	lpSystemTimeAsFileTime
		call	ds:GetSystemTimeAsFileTime
		sub	esp, 4
		mov	eax, [esp+4Ch+SystemTimeAsFileTime.dwHighDateTime]
		mov	ebp, [esp+4Ch+SystemTimeAsFileTime.dwLowDateTime]
		mov	[esp+4Ch+var_30], eax
		call	ds:GetCurrentProcessId
		mov	edi, eax
		call	ds:GetCurrentThreadId
		mov	esi, eax
		call	ds:GetTickCount
		mov	ebx, eax
		lea	eax, [esp+4Ch+PerformanceCount]
		mov	[esp+4Ch+lpSystemTimeAsFileTime], eax ;	lpPerformanceCount
		call	ds:QueryPerformanceCounter
		sub	esp, 4
		xor	ebp, [esp+4Ch+var_30]
		xor	ebp, dword ptr [esp+4Ch+PerformanceCount]
		xor	ebp, dword ptr [esp+4Ch+PerformanceCount+4]
		xor	ebp, edi
		xor	ebp, esi
		xor	ebp, ebx
		mov	eax, ebp
		cmp	ebp, 0BB40E64Eh
		not	eax
		jz	short loc_402B02

loc_402AF2:				; CODE XREF: sub_402A40+CCj
		mov	dword_403018, ebp
		mov	dword_40301C, eax
		jmp	loc_402A76
; ---------------------------------------------------------------------------

loc_402B02:				; CODE XREF: sub_402A40+B0j
		mov	eax, 44BF19B0h
		mov	ebp, 0BB40E64Fh
		jmp	short loc_402AF2
sub_402A40	endp

; ---------------------------------------------------------------------------
		align 10h
		push	ebp
		mov	ebp, esp
		sub	esp, 28h
		mov	eax, [ebp+4]
		lea	edx, [ebp+4]
		mov	ds:dword_405144, edx
		mov	ds:dword_405360, 0C0000409h
		mov	ds:dword_405364, 1
		mov	ds:dword_405138, eax
		mov	ds:dword_40536C, eax
		mov	eax, [ebp+8]
		mov	dword ptr [esp], 0
		mov	ds:dword_40512C, eax
		mov	eax, dword_403018
		mov	[ebp-10h], eax
		mov	eax, dword_40301C
		mov	[ebp-0Ch], eax
		call	ds:SetUnhandledExceptionFilter
		sub	esp, 4
		mov	dword ptr [esp], offset	off_404538
		call	ds:UnhandledExceptionFilter
		sub	esp, 4
		call	ds:GetCurrentProcess
		mov	dword ptr [esp+4], 0C0000409h
		mov	[esp], eax
		call	ds:TerminateProcess
		sub	esp, 8
		call	abort
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402BA0	proc near		; CODE XREF: sub_402D40+79p
					; sub_402D40:loc_402DD2p

lpCriticalSection= dword ptr -2Ch

		push	ebp
		push	edi
		push	esi
		push	ebx
		sub	esp, 1Ch
		mov	[esp+2Ch+lpCriticalSection], offset CriticalSection ; lpCriticalSection
		call	ds:EnterCriticalSection
		mov	ebx, ds:dword_4053DC
		sub	esp, 4
		test	ebx, ebx
		jz	short loc_402BF5
		mov	ebp, ds:TlsGetValue
		mov	edi, ds:GetLastError
		lea	esi, [esi+0]

loc_402BD0:				; CODE XREF: sub_402BA0+53j
		mov	eax, [ebx]
		mov	[esp+2Ch+lpCriticalSection], eax ; dwTlsIndex
		call	ebp ; TlsGetValue
		sub	esp, 4
		mov	esi, eax
		call	edi ; GetLastError
		test	eax, eax
		jnz	short loc_402BEE
		test	esi, esi
		jz	short loc_402BEE
		mov	eax, [ebx+4]
		mov	[esp+2Ch+lpCriticalSection], esi
		call	eax

loc_402BEE:				; CODE XREF: sub_402BA0+40j
					; sub_402BA0+44j
		mov	ebx, [ebx+8]
		test	ebx, ebx
		jnz	short loc_402BD0

loc_402BF5:				; CODE XREF: sub_402BA0+1Fj
		mov	[esp+2Ch+lpCriticalSection], offset CriticalSection ; lpCriticalSection
		call	ds:LeaveCriticalSection
		sub	esp, 4
		add	esp, 1Ch
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
sub_402BA0	endp

; ---------------------------------------------------------------------------
		align 10h
		sub	esp, 1Ch
		mov	eax, ds:dword_4053C0
		mov	[esp+14h], ebx
		xor	ebx, ebx
		mov	[esp+18h], esi
		test	eax, eax
		jnz	short loc_402C34

loc_402C26:				; CODE XREF: .text:00402C9Cj
		mov	eax, ebx
		mov	esi, [esp+18h]
		mov	ebx, [esp+14h]
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------

loc_402C34:				; CODE XREF: .text:00402C24j
		mov	dword ptr [esp+4], 0Ch
		mov	dword ptr [esp], 1
		call	calloc
		test	eax, eax
		mov	esi, eax
		jz	short loc_402C97
		mov	eax, [esp+20h]
		mov	dword ptr [esp], offset	CriticalSection
		mov	[esi], eax
		mov	eax, [esp+24h]
		mov	[esi+4], eax
		call	ds:EnterCriticalSection
		mov	eax, ds:dword_4053DC
		mov	ds:dword_4053DC, esi
		mov	[esi+8], eax
		sub	esp, 4
		mov	dword ptr [esp], offset	CriticalSection
		call	ds:LeaveCriticalSection
		mov	eax, ebx
		sub	esp, 4
		mov	ebx, [esp+14h]
		mov	esi, [esp+18h]
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------

loc_402C97:				; CODE XREF: .text:00402C4Cj
		mov	ebx, 0FFFFFFFFh
		jmp	short loc_402C26
; ---------------------------------------------------------------------------
		align 10h
		push	ebx
		sub	esp, 18h
		mov	eax, ds:dword_4053C0
		mov	ebx, [esp+20h]
		test	eax, eax
		jnz	short loc_402CB8
		add	esp, 18h
		xor	eax, eax
		pop	ebx
		retn
; ---------------------------------------------------------------------------

loc_402CB8:				; CODE XREF: .text:00402CAFj
		mov	dword ptr [esp], offset	CriticalSection
		call	ds:EnterCriticalSection
		mov	edx, ds:dword_4053DC
		sub	esp, 4
		test	edx, edx
		jz	short loc_402CEF
		mov	eax, [edx]
		cmp	eax, ebx
		jnz	short loc_402CE8
		jmp	short loc_402D26
; ---------------------------------------------------------------------------
		align 10h

loc_402CE0:				; CODE XREF: .text:00402CEDj
		mov	ecx, [eax]
		cmp	ecx, ebx
		jz	short loc_402D06
		mov	edx, eax

loc_402CE8:				; CODE XREF: .text:00402CD6j
		mov	eax, [edx+8]
		test	eax, eax
		jnz	short loc_402CE0

loc_402CEF:				; CODE XREF: .text:00402CD0j
		mov	dword ptr [esp], offset	CriticalSection
		call	ds:LeaveCriticalSection
		sub	esp, 4

loc_402CFF:				; CODE XREF: .text:00402D24j
		add	esp, 18h
		xor	eax, eax
		pop	ebx
		retn
; ---------------------------------------------------------------------------

loc_402D06:				; CODE XREF: .text:00402CE4j
		mov	ecx, [eax+8]
		mov	[edx+8], ecx

loc_402D0C:				; CODE XREF: .text:00402D30j
		mov	[esp], eax
		call	free
		mov	dword ptr [esp], offset	CriticalSection
		call	ds:LeaveCriticalSection
		sub	esp, 4
		jmp	short loc_402CFF
; ---------------------------------------------------------------------------

loc_402D26:				; CODE XREF: .text:00402CD8j
		mov	eax, [edx+8]
		mov	ds:dword_4053DC, eax
		mov	eax, edx
		jmp	short loc_402D0C
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402D40	proc near		; CODE XREF: TlsCallback_1+33p
					; TlsCallback_0+E9p

lpCriticalSection= dword ptr -1Ch
arg_4		= dword	ptr  8

		sub	esp, 1Ch
		mov	eax, [esp+1Ch+arg_4]
		cmp	eax, 1
		jz	short loc_402D90
		jb	short loc_402D60
		cmp	eax, 3
		jz	short loc_402DB0

loc_402D53:				; CODE XREF: sub_402D40+31j
					; sub_402D40+4Dj ...
		mov	eax, 1
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_402D60:				; CODE XREF: sub_402D40+Cj
		mov	eax, ds:dword_4053C0
		test	eax, eax
		jnz	short loc_402DD2

loc_402D69:				; CODE XREF: sub_402D40+97j
		mov	eax, ds:dword_4053C0
		cmp	eax, 1
		jnz	short loc_402D53
		mov	ds:dword_4053C0, 0
		mov	[esp+1Ch+lpCriticalSection], offset CriticalSection ; lpCriticalSection
		call	ds:DeleteCriticalSection
		sub	esp, 4
		jmp	short loc_402D53
; ---------------------------------------------------------------------------
		align 10h

loc_402D90:				; CODE XREF: sub_402D40+Aj
		mov	eax, ds:dword_4053C0
		test	eax, eax
		jz	short loc_402DC0

loc_402D99:				; CODE XREF: sub_402D40+90j
		mov	ds:dword_4053C0, 1
		mov	eax, 1
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_402DB0:				; CODE XREF: sub_402D40+11j
		mov	eax, ds:dword_4053C0
		test	eax, eax
		jz	short loc_402D53
		call	sub_402BA0
		jmp	short loc_402D53
; ---------------------------------------------------------------------------

loc_402DC0:				; CODE XREF: sub_402D40+57j
		mov	[esp+1Ch+lpCriticalSection], offset CriticalSection ; lpCriticalSection
		call	ds:InitializeCriticalSection
		sub	esp, 4
		jmp	short loc_402D99
; ---------------------------------------------------------------------------

loc_402DD2:				; CODE XREF: sub_402D40+27j
		call	sub_402BA0
		jmp	short loc_402D69
sub_402D40	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402DE0	proc near		; CODE XREF: sub_401180+19p
					; sub_402320+3Cp

arg_0		= byte ptr  4

		push	ecx
		push	eax
		cmp	eax, 1000h
		lea	ecx, [esp+8+arg_0]
		jb	short loc_402E02

loc_402DED:				; CODE XREF: sub_402DE0+20j
		sub	ecx, 1000h
		or	dword ptr [ecx], 0
		sub	eax, 1000h
		cmp	eax, 1000h
		ja	short loc_402DED

loc_402E02:				; CODE XREF: sub_402DE0+Bj
		sub	ecx, eax
		or	dword ptr [ecx], 0
		pop	eax
		pop	ecx
		retn
sub_402DE0	endp

; ---------------------------------------------------------------------------
		align 10h
		mov	eax, [esp+0Ch]
		mov	edx, [esp+8]
		mov	ecx, [esp+4]
		lock cmpxchg [ecx], edx
		retn
; ---------------------------------------------------------------------------
		jmp	short sub_402E30
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402E30	proc near		; CODE XREF: sub_401180+A7p
					; .text:00402E21j

arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch

		mov	eax, [esp+arg_8]
		mov	edx, [esp+arg_4]
		mov	ecx, [esp+arg_0]
		lock cmpxchg [ecx], edx
		retn	0Ch
sub_402E30	endp

; ---------------------------------------------------------------------------
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION __getmainargs]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION __set_app_type]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION memcpy]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION malloc]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION strlen]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION _cexit]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION _amsg_exit]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION _initterm]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION exit]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION _lock]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION __dllonexit]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION _unlock]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION signal]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION __setusermatherr]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION fprintf]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION fwrite]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION vfprintf]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION abort]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION strncmp]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION calloc]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION free]
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_402F00	proc near		; DATA XREF: .text:00402F24o

var_18		= dword	ptr -18h

		push	ebp
		mov	ebp, esp
		sub	esp, 18h
		call	sub_4014F0
		mov	[esp+18h+var_18], offset sub_401540 ; _onexit_t
		call	sub_401E00
		leave
		retn
sub_402F00	endp

; ---------------------------------------------------------------------------
		align 10h
dword_402F20	dd 0FFFFFFFFh		; DATA XREF: sub_402A20-4Cr
					; sub_402A20:loc_4029E3r ...
		dd offset sub_402F00
		dd 0
		dd 0FFFFFFFFh
dword_402F30	dd 34h dup(0)		; DATA XREF: .data:off_40300Co
_text		ends

; Section 2. (virtual address 00003000)
; Virtual size			: 00000024 (	 36.)
; Section size in file		: 00000200 (	512.)
; Offset to raw	data for section: 00002400
; Flags	C0300040: Data Readable	Writable
; Alignment	: 4 bytes
; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read/Write
_data		segment	dword public 'DATA' use32
		assume cs:_data
		;org 403000h
		dd 0FFh, 2 dup(0FFFFFFFFh)
off_40300C	dd offset dword_402F30	; DATA XREF: sub_4029A0+3r
					; sub_4029A0+12r ...
dword_403010	dd 2			; DATA XREF: TlsCallback_0+13r
					; TlsCallback_0+1Cw ...
dword_403014	dd 0FFFFFFFFh		; DATA XREF: sub_401060+7Ar
dword_403018	dd 0BB40E64Eh		; DATA XREF: sub_402A40+3r
					; sub_402A40:loc_402AF2w ...
dword_40301C	dd 44BF19B1h		; DATA XREF: sub_402A40+31w
					; sub_402A40+B8w ...
dword_403020	dd 0			; DATA XREF: sub_4014F0+6r
					; sub_4014F0+42o
		align 1000h
_data		ends

; Section 3. (virtual address 00004000)
; Virtual size			: 00000540 (   1344.)
; Section size in file		: 00000600 (   1536.)
; Offset to raw	data for section: 00002600
; Flags	40300040: Data Readable
; Alignment	: 4 bytes
; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 404000h
; CHAR ProcName[]
ProcName	db '_set_invalid_parameter_handler',0 ; DATA XREF: sub_401180+137o
		align 10h
; CHAR ModuleName[]
ModuleName	db 'libgcj-12.dll',0    ; DATA XREF: sub_4014F0+Fo
; CHAR a_jv_registercl[]
a_jv_registercl	db '_Jv_RegisterClasses',0 ; DATA XREF: sub_4014F0+28o
		align 4
aFailedToLoadSS	db 'failed to load "%s": %s',0Ah,0 ; DATA XREF: sub_401550+F0o
					; sub_401550+18Ao
aRle		db '--rle',0            ; DATA XREF: sub_401724+2Fo
asc_404063	db '-h',0               ; DATA XREF: sub_401724+7Bo
aHelp		db '--help',0           ; DATA XREF: sub_401724+A9o
aV		db '-v',0               ; DATA XREF: sub_401724+10Ao
aVersion	db '--version',0        ; DATA XREF: sub_401724+138o
aGFatalWarnings	db '--g-fatal-warnings',0 ; DATA XREF: sub_401724+19Bo
aGdkPixbufPixda	db 'gdk-pixbuf-pixdata-3.0',0 ; DATA XREF: sub_4019A5+10o
					; sub_4019A5+59o ...
aSVersion	db '%s version ',0      ; DATA XREF: sub_4019A5+18o
a2_30_8		db '2.30.8',0           ; DATA XREF: sub_4019A5+2Bo
aS		db '%s',0               ; DATA XREF: sub_4019A5+33o
asc_4040BA	db 0Ah,0		; DATA XREF: sub_4019A5+46o
aSComesWithAbso	db '%s comes with ABSOLUTELY NO WARRANTY.',0Ah,0 ; DATA XREF: sub_4019A5+61o
		align 4
aYouMayRedistri	db 'You may redistribute copies of %s under the terms of',0Ah,0
					; DATA XREF: sub_4019A5+7Co
		align 4
aTheGnuLesserGe	db 'the GNU Lesser General Public License which can be found in the',0Ah
					; DATA XREF: sub_4019A5+8Fo
		db 0
aGdkPixbuf	db 'gdk-pixbuf',0       ; DATA XREF: sub_4019A5+A2o
aSSourcePackage	db '%s source package. Sources, examples and contact',0Ah,0
					; DATA XREF: sub_4019A5+AAo
aHttpWww_gtk_or	db 'http://www.gtk.org',0 ; DATA XREF: sub_4019A5+BDo
		align 10h
aInformationAre	db 'information are available at %s',0Ah,0 ; DATA XREF: sub_4019A5+C5o
		align 4
aUsageSOptionsI	db 'Usage: %s [options] [input-file] [output-file]',0Ah,0
					; DATA XREF: sub_4019A5+E2o
aHHelpShowThisH	db '  -h, --help                 show this help message',0Ah,0
					; DATA XREF: sub_4019A5+F5o
		align 4
aVVersionPrintV	db '  -v, --version              print version informations',0Ah,0
					; DATA XREF: sub_4019A5+108o
		align 4
aGFatalWarnin_0	db '  --g-fatal-warnings         make warnings fatal (abort)',0Ah,0
					; DATA XREF: sub_4019A5+11Bo
		align 4
; CHAR LibFileName[]
LibFileName	db 'mingwm10.dll',0     ; DATA XREF: TlsCallback_0+4Eo
; CHAR a__mingwthr_rem[]
a__mingwthr_rem	db '__mingwthr_remove_key_dtor',0 ; DATA XREF: TlsCallback_0+71o
; CHAR a__mingwthr_key[]
a__mingwthr_key	db '__mingwthr_key_dtor',0 ; DATA XREF: TlsCallback_0+8Bo
off_4042F0	dd offset TlsCallback_0	; DATA XREF: sub_401180:loc_401273r
aUnknownError	db 'Unknown error',0    ; DATA XREF: sub_402010+3o
		align 4
; char Format[]
Format		db '_matherr(): %s in %s(%g, %g)  (retval=%g)',0Ah,0
					; DATA XREF: sub_402010+39o
		align 10h
aArgumentDomain	db 'Argument domain error (DOMAIN)',0 ; DATA XREF: .rdata:off_404410o
aArgumentSingul	db 'Argument singularity (SIGN)',0 ; DATA XREF: .rdata:00404414o
		align 4
aOverflowRangeE	db 'Overflow range error (OVERFLOW)',0 ; DATA XREF: .rdata:00404418o
aTheResultIsToo	db 'The result is too small to be represented (UNDERFLOW)',0
					; DATA XREF: .rdata:0040441Co
		align 4
aTotalLossOfSig	db 'Total loss of significance (TLOSS)',0 ; DATA XREF: .rdata:00404420o
		align 4
aPartialLossOfS	db 'Partial loss of significance (PLOSS)',0 ; DATA XREF: .rdata:00404424o
		align 10h
off_404410	dd offset aArgumentDomain ; DATA XREF: sub_402010+16r
					; "Argument domain error (DOMAIN)"
		dd offset aArgumentSingul ; "Argument singularity (SIGN)"
		dd offset aOverflowRangeE ; "Overflow range error (OVERFLOW)"
		dd offset aTheResultIsToo ; "The result	is too small to	be represent"...
		dd offset aTotalLossOfSig ; "Total loss	of significance	(TLOSS)"
		dd offset aPartialLossOfS ; "Partial loss of significance (PLOSS)"
aMingwW64Runtim	db 'Mingw-w64 runtime failure:',0Ah,0 ; DATA XREF: sub_402080+1Do
; char aAddressPHasNoI[]
aAddressPHasNoI	db 'Address %p has no image-section',0 ; DATA XREF: sub_4020E0+20Do
; char aVirtualqueryFa[]
aVirtualqueryFa	db '  VirtualQuery failed for %d bytes at address %p',0
					; DATA XREF: sub_4020E0+1F9o
					; sub_4020E0+225o ...
		align 4
; char aVirtualprotect[]
aVirtualprotect	db '  VirtualProtect failed with code 0x%x',0 ; DATA XREF: sub_4020E0+1D2o
		align 10h
; char aUnknownPseud_0[]
aUnknownPseud_0	db '  Unknown pseudo relocation protocol version %d.',0Ah,0
					; DATA XREF: sub_402320+299o
		align 4
; char aUnknownPseudoR[]
aUnknownPseudoR	db '  Unknown pseudo relocation bit size %d.',0Ah,0
					; DATA XREF: sub_402320+1B7o
		align 10h
; const	WCHAR aMsvcrt_dll
aMsvcrt_dll:				; DATA XREF: sub_4028D0:loc_402970o
		unicode	0, <msvcrt.dll>,0
		align 4
off_404538	dd offset dword_405360	; DATA XREF: .text:00402B68o
		dd offset dword_405080
dword_404540	dd 0			; DATA XREF: sub_402320+59o
					; sub_402320+5Eo ...
dword_404544	dd 0			; DATA XREF: sub_402320+7Fr
dword_404548	dd 0			; DATA XREF: sub_402320:loc_40246Cr
dword_40454C	dd 2Dh dup(0)		; DATA XREF: sub_402320+155o
		align 1000h
_rdata		ends

; Section 4. (virtual address 00005000)
; Virtual size			: 0000041C (   1052.)
; Section size in file		: 00000000 (	  0.)
; Offset to raw	data for section: 00000000
; Flags	C0600080: Bss Readable Writable
; Alignment	: 32 bytes
; ===========================================================================

; Segment type:	Uninitialized
; Segment permissions: Read/Write
; Segment alignment '32byte' can not be represented in assembly
_bss		segment	para public 'BSS' use32
		assume cs:_bss
		;org 405000h
		assume es:nothing, ss:nothing, ds:_data, fs:nothing, gs:nothing
dword_405000	dd ?			; DATA XREF: sub_401180+D0w
					; sub_401180+27Dr
dword_405004	dd ?			; DATA XREF: sub_401010+2Ao
					; sub_401180:loc_401344r ...
dword_405008	dd ?			; DATA XREF: sub_401010+18o
					; sub_401180+1DEr ...
dword_40500C	dd ?			; DATA XREF: sub_401010+10o
					; sub_401180+243r ...
dword_405010	dd ?			; DATA XREF: sub_401180+272w
					; sub_401180+28Cr
dword_405014	dd ?			; DATA XREF: sub_401060:loc_401098w
					; sub_401180+26Ar
dword_405018	dd ?			; DATA XREF: sub_401010+8o
					; sub_401010+20w
dword_40501C	dd ?			; DATA XREF: sub_401010+3Aw
dword_405020	dd ?			; DATA XREF: sub_401550:loc_401662r
					; sub_401724+52w
dword_405024	dd ?			; DATA XREF: sub_401010+3r
dword_405028	dd ?			; DATA XREF: sub_401010+25r
dword_40502C	dd ?			; DATA XREF: sub_401060+22w
dword_405030	dd ?			; DATA XREF: sub_401060+18w
dword_405034	dd ?			; DATA XREF: sub_401060+Ew
TlsIndex	dd ?			; DATA XREF: .tls:TlsIndex_ptro
; HMODULE hLibModule
hLibModule	dd ?			; DATA XREF: TlsCallback_0+60w
					; TlsCallback_0+83r ...
dword_405040	dd ?			; DATA XREF: sub_401060+2Cw
dword_405044	dd ?			; DATA XREF: sub_401060+3Dr
					; sub_401180+61r ...
dword_405048	dd ?			; DATA XREF: sub_401060+5Er
dword_40504C	dd ?			; DATA XREF: sub_401180+12Dw
					; TopLevelExceptionFilter:loc_401E8Cr
dword_405050	dd ?			; DATA XREF: .text:00401FB3r
					; sub_402000+4w
dword_405054	dd ?			; DATA XREF: sub_402320+9r
					; sub_402320:loc_402340w
dword_405058	dd ?			; DATA XREF: sub_4020E0+1Dr
					; sub_4020E0+58r ...
dword_40505C	dd ?			; DATA XREF: sub_4020E0+Br
					; sub_4020E0:loc_40219Fw ...
dword_405060	dd ?			; DATA XREF: sub_4028D0+4r
					; sub_4028D0+92w ...
dword_405064	dd ?			; DATA XREF: sub_402A20r
					; sub_402A20:loc_402A30w
		align 20h
dword_405080	dd 2Bh dup(?)		; DATA XREF: .rdata:0040453Co
dword_40512C	dd ?			; DATA XREF: .text:00402B4Aw
		dd 2 dup(?)
dword_405138	dd ?			; DATA XREF: .text:00402B36w
		dd 2 dup(?)
dword_405144	dd ?			; DATA XREF: .text:00402B1Cw
		dd 86h dup(?)
dword_405360	dd ?			; DATA XREF: .text:00402B22w
					; .rdata:off_404538o
dword_405364	dd ?			; DATA XREF: .text:00402B2Cw
		dd ?
dword_40536C	dd ?			; DATA XREF: .text:00402B3Bw
		dd 14h dup(?)
dword_4053C0	dd ?			; DATA XREF: .text:00402C13r
					; .text:00402CA4r ...
; struct _RTL_CRITICAL_SECTION CriticalSection
CriticalSection	_RTL_CRITICAL_SECTION <?> ; DATA XREF: sub_402BA0+7o
					; sub_402BA0:loc_402BF5o ...
dword_4053DC	dd ?			; DATA XREF: sub_402BA0+14r
					; .text:00402C68r ...
		dd ?
dword_4053E4	dd ?			; DATA XREF: sub_401180+1A8w
dword_4053E8	dd ?			; DATA XREF: sub_401180+1BFw
dword_4053EC	dd ?			; DATA XREF: sub_401180+1B2w
dword_4053F0	dd ?			; DATA XREF: TlsCallback_0+A3w
					; TlsCallback_0:loc_401C73w ...
dword_4053F4	dd ?			; DATA XREF: TlsCallback_0+7Ew
					; TlsCallback_0+AEr ...
dword_4053F8	dd ?			; DATA XREF: TlsCallback_0:loc_401BC4w
dword_4053FC	dd ?			; DATA XREF: sub_401060+64w
					; sub_401D40+3Fr ...
dword_405400	dd ?			; DATA XREF: sub_401060+69w
					; sub_401D40+4r ...
dword_405404	dd ?			; DATA XREF: sub_401180+A0o
					; sub_401180+ECw
dword_405408	dd ?			; DATA XREF: sub_401180+B3r
					; sub_401180:loc_401243r ...
		align 1000h
_bss		ends

;
; Imports from libgdk_pixbuf-2.0-0.dll
;
; Section 5. (virtual address 00006000)
; Virtual size			: 000007FC (   2044.)
; Section size in file		: 00000800 (   2048.)
; Offset to raw	data for section: 00002C00
; Flags	C0300040: Data Readable	Writable
; Alignment	: 4 bytes
; ===========================================================================

; Segment type:	Externs
; _idata
		extrn __imp_gdk_pixbuf_new_from_file_utf8:dword
					; DATA XREF: gdk_pixbuf_new_from_file_utf8r
		extrn __imp_gdk_pixdata_from_pixbuf:dword
					; DATA XREF: gdk_pixdata_from_pixbufr
		extrn __imp_gdk_pixdata_serialize:dword	; DATA XREF: gdk_pixdata_serializer

;
; Imports from libglib-2.0-0.dll
;
		extrn __imp_g_error_free:dword ; DATA XREF: g_error_freer
		extrn __imp_g_file_set_contents:dword ;	DATA XREF: g_file_set_contentsr
		extrn __imp_g_fprintf:dword ; DATA XREF: g_fprintfr
		extrn __imp_g_free:dword ; DATA	XREF: g_freer
		extrn __imp_g_locale_to_utf8:dword ; DATA XREF:	g_locale_to_utf8r
		extrn __imp_g_log_set_always_fatal:dword
					; DATA XREF: g_log_set_always_fatalr
		extrn __imp_g_printerr:dword ; DATA XREF: g_printerrr

;
; Imports from libgobject-2.0-0.dll
;
		extrn __imp_g_object_unref:dword ; DATA	XREF: g_object_unrefr

;
; Imports from KERNEL32.dll
;
; void __stdcall DeleteCriticalSection(LPCRITICAL_SECTION lpCriticalSection)
		extrn DeleteCriticalSection:dword ; CODE XREF: sub_402D40+44p
					; DATA XREF: sub_402D40+44r
; void __stdcall EnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection)
		extrn EnterCriticalSection:dword ; CODE	XREF: sub_402BA0+Ep
					; .text:00402C62p ...
; BOOL __stdcall FreeLibrary(HMODULE hLibModule)
		extrn FreeLibrary:dword	; CODE XREF: TlsCallback_0+10Ap
					; DATA XREF: TlsCallback_0+10Ar
; HANDLE __stdcall GetCurrentProcess()
		extrn GetCurrentProcess:dword ;	CODE XREF: .text:00402B78p
					; DATA XREF: .text:00402B78r
; DWORD	__stdcall GetCurrentProcessId()
		extrn GetCurrentProcessId:dword	; CODE XREF: sub_402A40+6Cp
					; DATA XREF: sub_402A40+6Cr
; DWORD	__stdcall GetCurrentThreadId()
		extrn GetCurrentThreadId:dword ; CODE XREF: sub_402A40+74p
					; DATA XREF: sub_402A40+74r
; DWORD	__stdcall GetLastError()
		extrn GetLastError:dword ; CODE	XREF: sub_4020E0+1CCp
					; sub_402BA0+3Cp
					; DATA XREF: ...
; HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName)
		extrn GetModuleHandleA:dword ; CODE XREF: sub_4014F0+16p
					; sub_4028D0+87p
					; DATA XREF: ...
; FARPROC __stdcall GetProcAddress(HMODULE hModule, LPCSTR lpProcName)
		extrn GetProcAddress:dword ; CODE XREF:	sub_401180+142p
					; sub_4014F0+33p ...
; void __stdcall GetStartupInfoA(LPSTARTUPINFOA	lpStartupInfo)
		extrn GetStartupInfoA:dword ; CODE XREF: sub_401180+2F6p
					; DATA XREF: sub_401180+2F6r
; void __stdcall GetSystemTimeAsFileTime(LPFILETIME lpSystemTimeAsFileTime)
		extrn GetSystemTimeAsFileTime:dword ; CODE XREF: sub_402A40+57p
					; DATA XREF: sub_402A40+57r
; DWORD	__stdcall GetTickCount()
		extrn GetTickCount:dword ; CODE	XREF: sub_402A40+7Cp
					; DATA XREF: sub_402A40+7Cr
; void __stdcall InitializeCriticalSection(LPCRITICAL_SECTION lpCriticalSection)
		extrn InitializeCriticalSection:dword ;	CODE XREF: sub_402D40+87p
					; DATA XREF: sub_402D40+87r
; void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection)
		extrn LeaveCriticalSection:dword ; CODE	XREF: sub_402BA0+5Cp
					; .text:00402C80p ...
; HMODULE __stdcall LoadLibraryA(LPCSTR	lpLibFileName)
		extrn LoadLibraryA:dword ; CODE	XREF: TlsCallback_0+55p
					; DATA XREF: TlsCallback_0+55r
; HMODULE __stdcall LoadLibraryW(LPCWSTR lpLibFileName)
		extrn LoadLibraryW:dword ; CODE	XREF: sub_4028D0+A7p
					; DATA XREF: sub_4028D0+A7r
; BOOL __stdcall QueryPerformanceCounter(LARGE_INTEGER *lpPerformanceCount)
		extrn QueryPerformanceCounter:dword ; CODE XREF: sub_402A40+8Bp
					; DATA XREF: sub_402A40+8Br
; LPTOP_LEVEL_EXCEPTION_FILTER __stdcall SetUnhandledExceptionFilter(LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter)
		extrn SetUnhandledExceptionFilter:dword	; CODE XREF: sub_401180+124p
					; .text:00402B5Fp
					; DATA XREF: ...
; void __stdcall Sleep(DWORD dwMilliseconds)
		extrn Sleep:dword	; CODE XREF: sub_401180+8Fp
					; DATA XREF: sub_401180+74r
; BOOL __stdcall TerminateProcess(HANDLE hProcess, UINT	uExitCode)
		extrn TerminateProcess:dword ; CODE XREF: .text:00402B89p
					; DATA XREF: .text:00402B89r
; LPVOID __stdcall TlsGetValue(DWORD dwTlsIndex)
		extrn TlsGetValue:dword	; CODE XREF: sub_402BA0+35p
					; DATA XREF: sub_402BA0+21r
; LONG __stdcall UnhandledExceptionFilter(struct _EXCEPTION_POINTERS *ExceptionInfo)
		extrn UnhandledExceptionFilter:dword ; CODE XREF: .text:00402B6Fp
					; DATA XREF: .text:00402B6Fr
; BOOL __stdcall VirtualProtect(LPVOID lpAddress, SIZE_T dwSize, DWORD flNewProtect, PDWORD lpflOldProtect)
		extrn VirtualProtect:dword ; CODE XREF:	sub_4020E0+142p
					; sub_4020E0+184p ...
; SIZE_T __stdcall VirtualQuery(LPCVOID	lpAddress, PMEMORY_BASIC_INFORMATION lpBuffer, SIZE_T dwLength)
		extrn VirtualQuery:dword ; CODE	XREF: sub_4020E0+A1p
					; sub_4020E0+D9p ...

;
; Imports from msvcrt.dll
;
		extrn __imp___dllonexit:dword ;	DATA XREF: __dllonexitr
		extrn __imp___getmainargs:dword	; DATA XREF: __getmainargsr
		extrn __initenv:dword	; DATA XREF: sub_401180+23Er
		extrn __lconv_init:dword ; DATA	XREF: sub_401D10r
		extrn __imp___set_app_type:dword ; DATA	XREF: __set_app_typer
		extrn __imp___setusermatherr:dword ; DATA XREF:	__setusermatherrr
		extrn _acmdln:dword	; DATA XREF: sub_401180+166r
		extrn __imp__amsg_exit:dword ; DATA XREF: _amsg_exitr
		extrn __imp__cexit:dword ; DATA	XREF: _cexitr
; int fmode
		extrn _fmode:dword	; DATA XREF: sub_401060+6Er
		extrn __imp__initterm:dword ; DATA XREF: _inittermr
		extrn _iob:dword	; DATA XREF: sub_401550+30r
					; sub_401724:loc_4017F0r ...
		extrn __imp__lock:dword	; DATA XREF: _lockr
; _onexit_t __cdecl onexit(_onexit_t Func)
		extrn _onexit:dword	; CODE XREF: sub_401D40+A3p
					; DATA XREF: sub_401D40+A3r
		extrn __imp__unlock:dword ; DATA XREF: _unlockr
		extrn _winmajor:dword	; DATA XREF: TlsCallback_0+4r
; void __cdecl abort()
		extrn __imp_abort:dword	; DATA XREF: abortr
; void *__cdecl	calloc(size_t NumOfElements, size_t SizeOfElements)
		extrn __imp_calloc:dword ; DATA	XREF: callocr
; void __cdecl __noreturn exit(int Code)
		extrn __imp_exit:dword	; DATA XREF: exitr
; int fprintf(FILE *File, const	char *Format, ...)
		extrn __imp_fprintf:dword ; DATA XREF: fprintfr
; void __cdecl free(void *Memory)
		extrn __imp_free:dword	; DATA XREF: freer
; size_t __cdecl fwrite(const void *Str, size_t	Size, size_t Count, FILE *File)
		extrn __imp_fwrite:dword ; DATA	XREF: fwriter
; void *__cdecl	malloc(size_t Size)
		extrn __imp_malloc:dword ; DATA	XREF: mallocr
; void *__cdecl	memcpy(void *Dst, const	void *Src, size_t Size)
		extrn __imp_memcpy:dword ; DATA	XREF: memcpyr
		extrn __imp_signal:dword ; DATA	XREF: signalr
; size_t __cdecl strlen(const char *Str)
		extrn __imp_strlen:dword ; DATA	XREF: strlenr
; int __cdecl strncmp(const char *Str1,	const char *Str2, size_t MaxCount)
		extrn __imp_strncmp:dword ; DATA XREF: strncmpr
; int __cdecl vfprintf(FILE *File, const char *Format, va_list ArgList)
		extrn __imp_vfprintf:dword ; DATA XREF:	vfprintfr


; Section 6. (virtual address 00007000)
; Virtual size			: 00000034 (	 52.)
; Section size in file		: 00000200 (	512.)
; Offset to raw	data for section: 00003400
; Flags	C0300040: Data Readable	Writable
; Alignment	: 4 bytes
; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read/Write
_CRT		segment	dword public 'DATA' use32
		assume cs:_CRT
		;org 407000h
dword_407000	dd 0			; DATA XREF: sub_401180+2D8o
		dd offset sub_401010
dword_407008	dd 0			; DATA XREF: sub_401180:loc_401450o
dword_40700C	dd 0			; DATA XREF: sub_401180+316o
		dd offset sub_401060
		dd offset sub_401D10
dword_407018	dd 2 dup(0)		; DATA XREF: sub_401180+30Eo
TlsCallbacks	dd offset TlsCallback_0	; DATA XREF: .tls:TlsCallbacks_ptro
		dd offset TlsCallback_1
		dd 0
		align 10h
dword_407030	dd 74h dup(0)		; DATA XREF: TlsCallback_0:loc_401CB3o
					; TlsCallback_0+138o ...
		align 1000h
_CRT		ends

; Section 7. (virtual address 00008000)
; Virtual size			: 00000020 (	 32.)
; Section size in file		: 00000200 (	512.)
; Offset to raw	data for section: 00003600
; Flags	C0300040: Data Readable	Writable
; Alignment	: 4 bytes
; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read/Write
_tls		segment	dword public 'DATA' use32
		assume cs:_tls
		;org 408000h
TlsDirectory	dd offset TlsStart
TlsEnd_ptr	dd offset TlsEnd
TlsIndex_ptr	dd offset TlsIndex
TlsCallbacks_ptr dd offset TlsCallbacks
TlsSizeOfZeroFill dd 0
TlsCharacteristics dd 0
		db 0
TlsStart	db 3 dup(0)		; DATA XREF: .tls:TlsDirectoryo
TlsEnd		dd 79h dup(0)		; DATA XREF: .tls:TlsEnd_ptro
		align 1000h
_tls		ends


		end start
