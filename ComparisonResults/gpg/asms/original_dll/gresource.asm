;
; +-------------------------------------------------------------------------+
; |   This file	has been generated by The Interactive Disassembler (IDA)    |
; |	      Copyright	(c) 2015 Hex-Rays, <support@hex-rays.com>	    |
; |			 License info: 48-3677-7074-51			    |
; |		Michalis Polychronakis,	Stony Brook University		    |
; +-------------------------------------------------------------------------+
;
; Input	MD5   :	14708D622D18C7FFC0024642817A438E
; Input	CRC32 :	24AD20F6

; File Name   :	C:\compspace\compare\gpg\dlls\original\gresource.exe
; Format      :	Portable executable for	80386 (PE)
; Imagebase   :	400000
; Section 1. (virtual address 00001000)
; Virtual size			: 000025C4 (   9668.)
; Section size in file		: 00002600 (   9728.)
; Offset to raw	data for section: 00000400
; Flags	60500060: Text Data Executable Readable
; Alignment	: 16 bytes

		include	uni.inc	; see unicode subdir of	ida for	info on	unicode

		.686p
		.mmx
		.model flat

; ===========================================================================

; Segment type:	Pure code
; Segment permissions: Read/Execute
_text		segment	para public 'CODE' use32
		assume cs:_text
		;org 401000h
		assume es:nothing, ss:nothing, ds:_data, fs:nothing, gs:nothing
; [00000002 BYTES: COLLAPSED FUNCTION nullsub_1]
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_401010	proc near		; DATA XREF: .CRT:00408004o

var_2C		= dword	ptr -2Ch
var_28		= dword	ptr -28h
var_24		= dword	ptr -24h
var_20		= dword	ptr -20h
var_1C		= dword	ptr -1Ch

		sub	esp, 2Ch
		mov	eax, ds:dword_406020
		mov	[esp+2Ch+var_1C], offset dword_406018
		mov	[esp+2Ch+var_24], offset dword_40600C
		mov	[esp+2Ch+var_28], offset dword_406008
		mov	ds:dword_406018, eax
		mov	eax, ds:dword_406024
		mov	[esp+2Ch+var_2C], offset dword_406004
		mov	[esp+2Ch+var_20], eax
		call	__getmainargs
		mov	ds:dword_40601C, eax
		add	esp, 2Ch
		retn
sub_401010	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_401060	proc near		; DATA XREF: .CRT:00408010o

var_1C		= dword	ptr -1Ch

		sub	esp, 1Ch
		xor	eax, eax
		cmp	word ptr ds:400000h, 5A4Dh
		mov	ds:dword_406030, 1
		mov	ds:dword_40602C, 1
		mov	ds:dword_406028, 1
		mov	ds:dword_40603C, 1
		jz	short loc_401100

loc_401098:				; CODE XREF: sub_401060+B6j
					; sub_401060+C8j ...
		mov	ds:dword_406014, eax
		mov	eax, ds:dword_406040
		test	eax, eax
		jz	short loc_4010F0
		mov	[esp+1Ch+var_1C], 2
		call	__set_app_type

loc_4010B2:				; CODE XREF: sub_401060+9Cj
		mov	[esp+1Ch+var_1C], 0FFFFFFFFh
		call	sub_4023C0
		mov	edx, ds:dword_406044
		mov	ds:dword_4063FC, eax
		mov	ds:dword_406400, eax
		mov	eax, ds:_fmode
		mov	[eax], edx
		call	sub_402700
		cmp	dword_404014, 1
		jz	short loc_401150
		xor	eax, eax
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_4010F0:				; CODE XREF: sub_401060+44j
		mov	[esp+1Ch+var_1C], 1
		call	__set_app_type
		jmp	short loc_4010B2
; ---------------------------------------------------------------------------
		align 10h

loc_401100:				; CODE XREF: sub_401060+36j
		mov	edx, ds:40003Ch
		cmp	dword ptr [edx+400000h], 4550h
		lea	ecx, [edx+400000h]
		jnz	short loc_401098
		movzx	edx, word ptr [ecx+18h]
		cmp	dx, 10Bh
		jz	short loc_401162
		cmp	dx, 20Bh
		jnz	loc_401098
		cmp	dword ptr [ecx+84h], 0Eh
		jbe	loc_401098
		mov	edx, [ecx+0F8h]
		xor	eax, eax
		test	edx, edx
		setnz	al
		jmp	loc_401098
; ---------------------------------------------------------------------------
		align 10h

loc_401150:				; CODE XREF: sub_401060+81j
		mov	[esp+1Ch+var_1C], offset sub_4026A0
		call	sub_402690
		xor	eax, eax
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------

loc_401162:				; CODE XREF: sub_401060+C1j
		cmp	dword ptr [ecx+74h], 0Eh
		jbe	loc_401098
		mov	ecx, [ecx+0E8h]
		xor	eax, eax
		test	ecx, ecx
		setnz	al
		jmp	loc_401098
sub_401060	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_401180	proc near		; CODE XREF: .text:004014C5j start+15j

dwMilliseconds	= dword	ptr -88h
lpProcName	= dword	ptr -84h
Size		= dword	ptr -80h
var_6D		= byte ptr -6Dh
var_6C		= dword	ptr -6Ch
var_5C		= byte ptr -5Ch
var_30		= byte ptr -30h
var_2C		= word ptr -2Ch

		push	ebp
		xor	eax, eax
		mov	ebp, esp
		mov	ecx, 11h
		push	edi
		push	esi
		lea	edx, [ebp+var_5C]
		push	ebx
		mov	edi, edx
		sub	esp, 7Ch
		rep stosd
		mov	al, 30h
		call	sub_403470
		sub	esp, eax
		lea	eax, [esp+88h+var_6D]
		and	eax, 0FFFFFFF0h
		mov	dword ptr [eax], 0CCCCCCCCh
		mov	dword ptr [eax+4], 0CCCCCCCCh
		mov	dword ptr [eax+8], 0CCCCCCCCh
		mov	dword ptr [eax+0Ch], 0CCCCCCCCh
		mov	dword ptr [eax+10h], 0CCCCCCCCh
		mov	dword ptr [eax+14h], 0CCCCCCCCh
		mov	dword ptr [eax+18h], 0CCCCCCCCh
		mov	dword ptr [eax+1Ch], 0CCCCCCCCh
		and	esp, 0FFFFFFF0h
		mov	eax, ds:dword_406040
		test	eax, eax
		jnz	loc_401473

loc_4011EE:				; CODE XREF: sub_401180+2FFj
		mov	eax, large fs:18h
		mov	esi, ds:Sleep
		mov	ebx, [eax+4]
		jmp	short loc_401214
; ---------------------------------------------------------------------------
		align 10h

loc_401200:				; CODE XREF: sub_401180+B1j
		cmp	eax, ebx
		jz	loc_401420
		mov	[esp+88h+dwMilliseconds], 3E8h ; dwMilliseconds
		call	esi ; Sleep
		sub	esp, 4

loc_401214:				; CODE XREF: sub_401180+7Dj
		mov	[esp+88h+Size],	0
		mov	[esp+88h+lpProcName], ebx
		mov	[esp+88h+dwMilliseconds], offset dword_406404
		call	sub_4034C0
		sub	esp, 0Ch
		test	eax, eax
		jnz	short loc_401200
		mov	eax, ds:dword_406408
		xor	ebx, ebx
		cmp	eax, 1
		jz	loc_401433

loc_401243:				; CODE XREF: sub_401180+2ADj
		mov	eax, ds:dword_406408
		test	eax, eax
		jz	loc_401484
		mov	ds:dword_406000, 1

loc_40125A:				; CODE XREF: sub_401180+322j
		mov	eax, ds:dword_406408
		cmp	eax, 1
		jz	loc_401450

loc_401268:				; CODE XREF: sub_401180+2C7j
					; sub_401180+2EEj
		test	ebx, ebx
		jnz	short loc_401273
		lock xchg ebx, ds:dword_406404

loc_401273:				; CODE XREF: sub_401180+EAj
		mov	eax, ds:off_405630
		test	eax, eax
		jz	short loc_401298
		mov	[esp+88h+Size],	0
		mov	[esp+88h+lpProcName], 2
		mov	[esp+88h+dwMilliseconds], 0
		call	eax ; TlsCallback_0
		sub	esp, 0Ch

loc_401298:				; CODE XREF: sub_401180+FAj
		call	sub_4029B0
		mov	[esp+88h+dwMilliseconds], offset TopLevelExceptionFilter ; lpTopLevelExceptionFilter
		call	ds:SetUnhandledExceptionFilter
		sub	esp, 4
		mov	ds:dword_406048, eax
		call	sub_402F60
		mov	[esp+88h+lpProcName], offset ProcName ;	"_set_invalid_parameter_handler"
		mov	[esp+88h+dwMilliseconds], eax ;	hModule
		call	ds:GetProcAddress
		sub	esp, 8
		test	eax, eax
		jz	short loc_4012D8
		mov	[esp+88h+dwMilliseconds], offset nullsub_1
		call	eax

loc_4012D8:				; CODE XREF: sub_401180+14Dj
		call	sub_403020
		mov	eax, ds:dword_406040
		test	eax, eax
		jz	short loc_401344
		mov	eax, ds:_acmdln
		xor	ecx, ecx
		mov	eax, [eax]
		jmp	short loc_4012FC
; ---------------------------------------------------------------------------

loc_4012F1:				; CODE XREF: sub_401180+182j
		test	dl, dl
		jz	short loc_401320
		test	cl, cl
		jz	short loc_401315

loc_4012F9:				; CODE XREF: sub_401180+18Fj
		add	eax, 1

loc_4012FC:				; CODE XREF: sub_401180+16Fj
		movzx	edx, byte ptr [eax]
		cmp	dl, 20h
		jle	short loc_4012F1
		mov	ebx, ecx
		xor	ebx, 1
		cmp	dl, 22h
		cmovz	ecx, ebx
		jmp	short loc_4012F9
; ---------------------------------------------------------------------------

loc_401311:				; CODE XREF: sub_401180+19Ej
		test	dl, dl
		jz	short loc_401320

loc_401315:				; CODE XREF: sub_401180+177j
		add	eax, 1
		movzx	edx, byte ptr [eax]
		cmp	dl, 20h
		jle	short loc_401311

loc_401320:				; CODE XREF: sub_401180+173j
					; sub_401180+193j
		movzx	edx, [ebp+var_2C]
		test	[ebp+var_30], 1
		mov	ds:dword_4063E4, eax
		mov	eax, 0Ah
		mov	ds:dword_4063EC, 400000h
		cmovnz	eax, edx
		mov	ds:dword_4063E8, eax

loc_401344:				; CODE XREF: sub_401180+164j
		mov	edx, ds:dword_406004
		xor	ebx, ebx
		lea	eax, ds:4[edx*4]
		mov	[ebp+var_6C], edx
		mov	[esp+88h+dwMilliseconds], eax ;	Size
		call	malloc
		mov	edi, ds:dword_406008
		mov	[ebp-70h], eax
		mov	eax, [ebp+var_6C]
		test	eax, eax
		jle	short loc_4013AA
		xchg	ax, ax

loc_401370:				; CODE XREF: sub_401180+225j
		mov	eax, [edi+ebx*4]
		mov	[esp+88h+dwMilliseconds], eax ;	Str
		call	strlen
		lea	esi, [eax+1]
		mov	[esp+88h+dwMilliseconds], esi ;	Size
		call	malloc
		mov	edx, [ebp-70h]
		mov	[edx+ebx*4], eax
		mov	edx, [edi+ebx*4]
		add	ebx, 1
		mov	[esp+88h+Size],	esi ; Size
		mov	[esp+88h+dwMilliseconds], eax ;	Dst
		mov	[esp+88h+lpProcName], edx ; Src
		call	memcpy
		cmp	ebx, [ebp+var_6C]
		jnz	short loc_401370
		shl	ebx, 2

loc_4013AA:				; CODE XREF: sub_401180+1ECj
		mov	eax, [ebp-70h]
		mov	dword ptr [eax+ebx], 0
		mov	ds:dword_406008, eax
		call	sub_4030B0
		mov	eax, ds:__initenv
		mov	edx, ds:dword_40600C
		mov	[eax], edx
		mov	eax, ds:dword_40600C
		mov	[esp+88h+Size],	eax
		mov	eax, ds:dword_406008
		mov	[esp+88h+lpProcName], eax
		mov	eax, ds:dword_406004
		mov	[esp+88h+dwMilliseconds], eax
		call	sub_401E45
		mov	esi, ds:dword_406014
		test	esi, esi
		mov	ds:dword_406010, eax
		jz	loc_4014A7
		mov	ebx, ds:dword_406000
		test	ebx, ebx
		jnz	short loc_401411
		call	_cexit
		mov	eax, ds:dword_406010

loc_401411:				; CODE XREF: sub_401180+285j
		lea	esp, [ebp-0Ch]
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_401420:				; CODE XREF: sub_401180+82j
		mov	eax, ds:dword_406408
		mov	ebx, 1
		cmp	eax, 1
		jnz	loc_401243

loc_401433:				; CODE XREF: sub_401180+BDj
		mov	[esp+88h+dwMilliseconds], 1Fh
		call	_amsg_exit
		mov	eax, ds:dword_406408
		cmp	eax, 1
		jnz	loc_401268
		lea	esi, [esi+0]

loc_401450:				; CODE XREF: sub_401180+E2j
		mov	[esp+88h+lpProcName], offset dword_408008
		mov	[esp+88h+dwMilliseconds], offset dword_408000
		call	_initterm
		mov	ds:dword_406408, 2
		jmp	loc_401268
; ---------------------------------------------------------------------------

loc_401473:				; CODE XREF: sub_401180+68j
		mov	[esp+88h+dwMilliseconds], edx ;	lpStartupInfo
		call	ds:GetStartupInfoA
		sub	esp, 4
		jmp	loc_4011EE
; ---------------------------------------------------------------------------

loc_401484:				; CODE XREF: sub_401180+CAj
		mov	ds:dword_406408, 1
		mov	[esp+88h+lpProcName], offset dword_408018
		mov	[esp+88h+dwMilliseconds], offset dword_40800C
		call	_initterm
		jmp	loc_40125A
; ---------------------------------------------------------------------------

loc_4014A7:				; CODE XREF: sub_401180+277j
		mov	[esp+88h+dwMilliseconds], eax ;	Code
		call	exit
sub_401180	endp

; ---------------------------------------------------------------------------
		align 10h
		sub	esp, 0Ch
		mov	ds:dword_406040, 1
		call	sub_4030D0
		add	esp, 0Ch
		jmp	sub_401180
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


		public start
start		proc near
		sub	esp, 0Ch
		mov	ds:dword_406040, 0
		call	sub_4030D0
		add	esp, 0Ch
		jmp	sub_401180
start		endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4014F0	proc near		; CODE XREF: sub_403590+6p

lpModuleName	= dword	ptr -18h
lpProcName	= dword	ptr -14h

		push	ebp
		mov	ebp, esp
		sub	esp, 18h
		mov	eax, dword_404020
		test	eax, eax
		jz	short locret_40153B
		mov	[esp+18h+lpModuleName],	offset ModuleName ; "libgcj-12.dll"
		call	ds:GetModuleHandleA
		mov	edx, 0
		sub	esp, 4
		test	eax, eax
		jz	short loc_40152E
		mov	[esp+18h+lpProcName], offset a_jv_registercl ; "_Jv_RegisterClasses"
		mov	[esp+18h+lpModuleName],	eax ; hModule
		call	ds:GetProcAddress
		sub	esp, 8
		mov	edx, eax

loc_40152E:				; CODE XREF: sub_4014F0+26j
		test	edx, edx
		jz	short locret_40153B
		mov	[esp+18h+lpModuleName],	offset dword_404020
		call	edx

locret_40153B:				; CODE XREF: sub_4014F0+Dj
					; sub_4014F0+40j
		leave
		retn
sub_4014F0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl sub_401540()
sub_401540	proc near		; DATA XREF: sub_403590+Bo
		push	ebp
		mov	ebp, esp
		pop	ebp
		retn
sub_401540	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_401550	proc near		; CODE XREF: sub_401889+Cp
					; sub_4018D1+Cp ...

var_28		= dword	ptr -28h
var_24		= dword	ptr -24h
var_20		= dword	ptr -20h
var_1C		= dword	ptr -1Ch
var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 28h
		mov	[ebp+var_C], 0
		mov	[esp+28h+var_1C], 0
		lea	eax, [ebp+var_18]
		mov	[esp+28h+var_20], eax
		lea	eax, [ebp+var_14]
		mov	[esp+28h+var_24], eax
		mov	eax, [ebp+arg_0]
		mov	[esp+28h+var_28], eax
		call	g_file_get_contents_utf8
		test	eax, eax
		jz	short loc_4015B8
		mov	edx, [ebp+var_18]
		mov	eax, [ebp+var_14]
		mov	[esp+28h+var_24], edx
		mov	[esp+28h+var_28], eax
		call	g_bytes_new_take
		mov	[ebp+var_10], eax
		mov	[esp+28h+var_24], 0
		mov	eax, [ebp+var_10]
		mov	[esp+28h+var_28], eax
		call	g_resource_new_from_data
		mov	[ebp+var_C], eax
		mov	eax, [ebp+var_10]
		mov	[esp+28h+var_28], eax
		call	g_bytes_unref

loc_4015B8:				; CODE XREF: sub_401550+30j
		mov	eax, [ebp+var_C]
		leave
		retn
sub_401550	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl sub_4015BD(int, int, int,	char *,	int)
sub_4015BD	proc near		; CODE XREF: sub_4015BD+1ECp
					; sub_4018D1+4Bp

Str1		= dword	ptr -58h
Str2		= dword	ptr -54h
MaxCount	= dword	ptr -50h
var_4C		= dword	ptr -4Ch
var_48		= dword	ptr -48h
var_44		= dword	ptr -44h
var_2C		= dword	ptr -2Ch
var_24		= dword	ptr -24h
var_20		= dword	ptr -20h
var_1C		= dword	ptr -1Ch
var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h
arg_10		= dword	ptr  18h

		push	ebp
		mov	ebp, esp
		push	edi
		push	ebx
		sub	esp, 50h
		mov	[ebp+var_24], 0
		lea	eax, [ebp+var_24]
		mov	[esp+58h+var_4C], eax
		mov	[esp+58h+MaxCount], 0
		mov	eax, [ebp+arg_4]
		mov	[esp+58h+Str2],	eax
		mov	eax, [ebp+arg_0]
		mov	[esp+58h+Str1],	eax
		call	g_resource_enumerate_children
		mov	[ebp+var_10], eax
		mov	eax, [ebp+var_24]
		test	eax, eax
		jz	short loc_40161D
		mov	eax, [ebp+var_24]
		mov	eax, [eax+8]
		mov	[esp+58h+Str2],	eax
		mov	[esp+58h+Str1],	offset aS ; "%s\n"
		call	g_printerr
		mov	eax, [ebp+var_24]
		mov	[esp+58h+Str1],	eax
		call	g_error_free
		jmp	loc_4017DD
; ---------------------------------------------------------------------------

loc_40161D:				; CODE XREF: sub_4015BD+38j
		mov	[ebp+var_C], 0
		jmp	loc_4017BF
; ---------------------------------------------------------------------------

loc_401629:				; CODE XREF: sub_4015BD+20Fj
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_10]
		mov	eax, [eax]
		mov	[esp+58h+MaxCount], 0
		mov	[esp+58h+Str2],	eax
		mov	eax, [ebp+arg_4]
		mov	[esp+58h+Str1],	eax
		call	g_strconcat
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_14]
		mov	[ebp+var_2C], 0FFFFFFFFh
		mov	edx, eax
		mov	al, 0
		mov	ecx, [ebp+var_2C]
		mov	edi, edx
		repne scasb
		mov	eax, ecx
		not	eax
		lea	ebx, [eax-1]
		mov	eax, [ebp+arg_C]
		mov	[ebp+var_2C], 0FFFFFFFFh
		mov	edx, eax
		mov	al, 0
		mov	ecx, [ebp+var_2C]
		mov	edi, edx
		repne scasb
		mov	eax, ecx
		not	eax
		dec	eax
		cmp	ebx, eax
		jnb	short loc_4016A4
		mov	eax, [ebp+var_14]
		mov	[ebp+var_2C], 0FFFFFFFFh
		mov	edx, eax
		mov	al, 0
		mov	ecx, [ebp+var_2C]
		mov	edi, edx
		repne scasb
		mov	eax, ecx
		not	eax
		dec	eax
		jmp	short loc_4016BE
; ---------------------------------------------------------------------------

loc_4016A4:				; CODE XREF: sub_4015BD+C9j
		mov	eax, [ebp+arg_C]
		mov	[ebp+var_2C], 0FFFFFFFFh
		mov	edx, eax
		mov	al, 0
		mov	ecx, [ebp+var_2C]
		mov	edi, edx
		repne scasb
		mov	eax, ecx
		not	eax
		dec	eax

loc_4016BE:				; CODE XREF: sub_4015BD+E5j
		mov	[ebp+var_18], eax
		mov	eax, [ebp+var_18]
		mov	[esp+58h+MaxCount], eax	; MaxCount
		mov	eax, [ebp+arg_C]
		mov	[esp+58h+Str2],	eax ; Str2
		mov	eax, [ebp+var_14]
		mov	[esp+58h+Str1],	eax ; Str1
		call	strncmp
		test	eax, eax
		jnz	loc_4017BB
		mov	[esp+58h+var_44], 0
		lea	eax, [ebp+var_20]
		mov	[esp+58h+var_48], eax
		lea	eax, [ebp+var_1C]
		mov	[esp+58h+var_4C], eax
		mov	[esp+58h+MaxCount], 0
		mov	eax, [ebp+var_14]
		mov	[esp+58h+Str2],	eax
		mov	eax, [ebp+arg_0]
		mov	[esp+58h+Str1],	eax
		call	g_resource_get_info
		test	eax, eax
		jz	short loc_401787
		cmp	[ebp+arg_10], 0
		jz	short loc_401772
		mov	eax, [ebp+var_20]
		and	eax, 1
		test	al, al
		jz	short loc_40172D
		mov	edx, offset aCu	; "cu "
		jmp	short loc_401732
; ---------------------------------------------------------------------------

loc_40172D:				; CODE XREF: sub_4015BD+167j
		mov	edx, 40504Ah

loc_401732:				; CODE XREF: sub_4015BD+16Ej
		mov	ecx, [ebp+var_1C]
		mov	eax, [ebp+arg_8]
		mov	al, [eax]
		test	al, al
		jz	short loc_401745
		mov	eax, 40504Ch
		jmp	short loc_40174A
; ---------------------------------------------------------------------------

loc_401745:				; CODE XREF: sub_4015BD+17Fj
		mov	eax, offset byte_40504E

loc_40174A:				; CODE XREF: sub_4015BD+186j
		mov	ebx, [ebp+var_14]
		mov	[esp+58h+var_44], ebx
		mov	[esp+58h+var_48], edx
		mov	[esp+58h+var_4C], ecx
		mov	[esp+58h+MaxCount], eax
		mov	eax, [ebp+arg_8]
		mov	[esp+58h+Str2],	eax
		mov	[esp+58h+Str1],	offset aSS6uSS ; "%s%s%6u %s %s\n"
		call	g_print
		jmp	short loc_4017AE
; ---------------------------------------------------------------------------

loc_401772:				; CODE XREF: sub_4015BD+15Dj
		mov	eax, [ebp+var_14]
		mov	[esp+58h+Str2],	eax
		mov	[esp+58h+Str1],	offset aS ; "%s\n"
		call	g_print
		jmp	short loc_4017AE
; ---------------------------------------------------------------------------

loc_401787:				; CODE XREF: sub_4015BD+157j
		mov	eax, [ebp+arg_10]
		mov	[esp+58h+var_48], eax ;	int
		mov	eax, [ebp+arg_C]
		mov	[esp+58h+var_4C], eax ;	char *
		mov	eax, [ebp+arg_8]
		mov	[esp+58h+MaxCount], eax	; int
		mov	eax, [ebp+var_14]
		mov	[esp+58h+Str2],	eax ; int
		mov	eax, [ebp+arg_0]
		mov	[esp+58h+Str1],	eax ; int
		call	sub_4015BD

loc_4017AE:				; CODE XREF: sub_4015BD+1B3j
					; sub_4015BD+1C8j
		mov	eax, [ebp+var_14]
		mov	[esp+58h+Str1],	eax
		call	g_free
		jmp	short loc_4017BC
; ---------------------------------------------------------------------------

loc_4017BB:				; CODE XREF: sub_4015BD+11Fj
		nop

loc_4017BC:				; CODE XREF: sub_4015BD+1FCj
		inc	[ebp+var_C]

loc_4017BF:				; CODE XREF: sub_4015BD+67j
		mov	eax, [ebp+var_C]
		shl	eax, 2
		add	eax, [ebp+var_10]
		mov	eax, [eax]
		test	eax, eax
		jnz	loc_401629
		mov	eax, [ebp+var_10]
		mov	[esp+58h+Str1],	eax
		call	g_strfreev

loc_4017DD:				; CODE XREF: sub_4015BD+5Bj
		add	esp, 50h
		pop	ebx
		pop	edi
		pop	ebp
		retn
sub_4015BD	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4017E4	proc near		; CODE XREF: sub_40194F+27p

Str		= dword	ptr -28h
Size		= dword	ptr -24h
Count		= dword	ptr -20h
File		= dword	ptr -1Ch
var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		sub	esp, 28h
		mov	[esp+28h+File],	0
		mov	[esp+28h+Count], 0
		mov	eax, [ebp+arg_4]
		mov	[esp+28h+Size],	eax
		mov	eax, [ebp+arg_0]
		mov	[esp+28h+Str], eax
		call	g_resource_lookup_data
		mov	[ebp+var_C], eax
		cmp	[ebp+var_C], 0
		jz	short loc_401874
		lea	eax, [ebp+var_18]
		mov	[esp+28h+Size],	eax
		mov	eax, [ebp+var_C]
		mov	[esp+28h+Str], eax
		call	g_bytes_get_data
		mov	[ebp+var_10], eax
		mov	eax, ds:_iob
		lea	edx, [eax+20h]
		mov	eax, [ebp+var_18]
		mov	[esp+28h+File],	edx ; File
		mov	[esp+28h+Count], eax ; Count
		mov	[esp+28h+Size],	1 ; Size
		mov	eax, [ebp+var_10]
		mov	[esp+28h+Str], eax ; Str
		call	fwrite
		mov	[ebp+var_14], eax
		mov	eax, [ebp+var_18]
		cmp	[ebp+var_14], eax
		jnb	short loc_401867
		mov	[esp+28h+Str], offset aDataTruncated ; "Data truncated\n"
		call	g_printerr

loc_401867:				; CODE XREF: sub_4017E4+75j
		mov	eax, [ebp+var_C]
		mov	[esp+28h+Str], eax
		call	g_bytes_unref
		jmp	short locret_401887
; ---------------------------------------------------------------------------

loc_401874:				; CODE XREF: sub_4017E4+2Fj
		mov	eax, [ebp+arg_4]
		mov	[esp+28h+Size],	eax
		mov	[esp+28h+Str], offset aCanTFindResour ;	"Can't find resource path %s\n"
		call	g_printerr

locret_401887:				; CODE XREF: sub_4017E4+8Ej
		leave
		retn
sub_4017E4	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_401889	proc near		; DATA XREF: sub_401E45+19Eo

var_28		= dword	ptr -28h
var_24		= dword	ptr -24h
var_C		= dword	ptr -0Ch
arg_0		= dword	ptr  8

		push	ebp
		mov	ebp, esp
		sub	esp, 28h
		mov	eax, [ebp+arg_0]
		mov	[esp+28h+var_28], eax
		call	sub_401550
		mov	[ebp+var_C], eax
		cmp	[ebp+var_C], 0
		jz	short loc_4018B0
		mov	eax, [ebp+var_C]
		mov	[esp+28h+var_28], eax
		call	g_resource_unref
		jmp	short locret_4018CF
; ---------------------------------------------------------------------------

loc_4018B0:				; CODE XREF: sub_401889+18j
		mov	eax, [ebp+arg_0]
		mov	[esp+28h+var_24], eax
		mov	[esp+28h+var_28], offset aDonTKnowHowToH ; "Don't know how to handle %s\n"
		call	g_printerr
		mov	[esp+28h+var_28], offset aGresourceIsBui ; "gresource is built without elf support\"...
		call	g_printerr

locret_4018CF:				; CODE XREF: sub_401889+25j
		leave
		retn
sub_401889	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

; int __cdecl sub_4018D1(int, int, char	*, int)
sub_4018D1	proc near		; DATA XREF: sub_401E45+1E4o
					; sub_401E45+22Fo

var_38		= dword	ptr -38h
var_34		= dword	ptr -34h
var_30		= dword	ptr -30h
var_2C		= dword	ptr -2Ch
var_28		= dword	ptr -28h
var_C		= dword	ptr -0Ch
arg_0		= dword	ptr  8
arg_8		= dword	ptr  10h
arg_C		= dword	ptr  14h

		push	ebp
		mov	ebp, esp
		sub	esp, 38h
		mov	eax, [ebp+arg_0]
		mov	[esp+38h+var_38], eax
		call	sub_401550
		mov	[ebp+var_C], eax
		cmp	[ebp+var_C], 0
		jz	short loc_40192E
		cmp	[ebp+arg_8], 0
		jz	short loc_4018F6
		mov	eax, [ebp+arg_8]
		jmp	short loc_4018FB
; ---------------------------------------------------------------------------

loc_4018F6:				; CODE XREF: sub_4018D1+1Ej
		mov	eax, offset byte_40504E

loc_4018FB:				; CODE XREF: sub_4018D1+23j
		mov	edx, [ebp+arg_C]
		mov	[esp+38h+var_28], edx ;	int
		mov	[esp+38h+var_2C], eax ;	char *
		mov	[esp+38h+var_30], offset byte_40504E ; int
		mov	[esp+38h+var_34], offset asc_4050D0 ; "/"
		mov	eax, [ebp+var_C]
		mov	[esp+38h+var_38], eax ;	int
		call	sub_4015BD
		mov	eax, [ebp+var_C]
		mov	[esp+38h+var_38], eax
		call	g_resource_unref
		jmp	short locret_40194D
; ---------------------------------------------------------------------------

loc_40192E:				; CODE XREF: sub_4018D1+18j
		mov	eax, [ebp+arg_0]
		mov	[esp+38h+var_34], eax
		mov	[esp+38h+var_38], offset aDonTKnowHowToH ; "Don't know how to handle %s\n"
		call	g_printerr
		mov	[esp+38h+var_38], offset aGresourceIsBui ; "gresource is built without elf support\"...
		call	g_printerr

locret_40194D:				; CODE XREF: sub_4018D1+5Bj
		leave
		retn
sub_4018D1	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_40194F	proc near		; DATA XREF: sub_401E45+15Eo

var_28		= dword	ptr -28h
var_24		= dword	ptr -24h
var_C		= dword	ptr -0Ch
arg_0		= dword	ptr  8
arg_8		= dword	ptr  10h

		push	ebp
		mov	ebp, esp
		sub	esp, 28h
		mov	eax, [ebp+arg_0]
		mov	[esp+28h+var_28], eax
		call	sub_401550
		mov	[ebp+var_C], eax
		cmp	[ebp+var_C], 0
		jz	short loc_401988
		mov	eax, [ebp+arg_8]
		mov	[esp+28h+var_24], eax
		mov	eax, [ebp+var_C]
		mov	[esp+28h+var_28], eax
		call	sub_4017E4
		mov	eax, [ebp+var_C]
		mov	[esp+28h+var_28], eax
		call	g_resource_unref
		jmp	short locret_4019A7
; ---------------------------------------------------------------------------

loc_401988:				; CODE XREF: sub_40194F+18j
		mov	eax, [ebp+arg_0]
		mov	[esp+28h+var_24], eax
		mov	[esp+28h+var_28], offset aDonTKnowHowToH ; "Don't know how to handle %s\n"
		call	g_printerr
		mov	[esp+28h+var_28], offset aGresourceIsBui ; "gresource is built without elf support\"...
		call	g_printerr

locret_4019A7:				; CODE XREF: sub_40194F+37j
		leave
		retn
sub_40194F	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4019A9	proc near		; CODE XREF: sub_401E45+92p
					; sub_401E45+121p ...

Str		= dword	ptr -48h
SubStr		= dword	ptr -44h
var_40		= dword	ptr -40h
var_3C		= dword	ptr -3Ch
var_38		= dword	ptr -38h
var_34		= dword	ptr -34h
var_30		= dword	ptr -30h
var_28		= dword	ptr -28h
var_24		= dword	ptr -24h
var_20		= dword	ptr -20h
var_1C		= dword	ptr -1Ch
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		push	edi
		push	esi
		push	ebx
		sub	esp, 3Ch
		mov	[ebp+var_24], 0
		mov	[esp+48h+Str], 0
		call	g_string_new
		mov	[ebp+var_28], eax
		cmp	[ebp+arg_4], 0
		jz	loc_401BD3
		mov	eax, [ebp+arg_4]
		mov	edx, eax
		mov	eax, offset aHelp ; "help"
		mov	ecx, 5
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401A1D
		mov	[esp+48h+Str], offset aPrintHelp ; "Print help"
		call	libintl_gettext
		mov	[ebp+var_1C], eax
		mov	[esp+48h+Str], offset aCommand ; "[COMMAND]"
		call	libintl_gettext
		mov	[ebp+var_20], eax
		jmp	loc_401BD3
; ---------------------------------------------------------------------------

loc_401A1D:				; CODE XREF: sub_4019A9+4Fj
		mov	eax, [ebp+arg_4]
		mov	edx, eax
		mov	eax, offset aSections ;	"sections"
		mov	ecx, 9
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401A68
		mov	[esp+48h+Str], offset aListSectionsCo ;	"List sections containing resources in a"...
		call	libintl_gettext
		mov	[ebp+var_1C], eax
		mov	[esp+48h+Str], offset aFile ; "FILE"
		call	libintl_gettext
		mov	[ebp+var_20], eax
		jmp	loc_401BD3
; ---------------------------------------------------------------------------

loc_401A68:				; CODE XREF: sub_4019A9+9Aj
		mov	eax, [ebp+arg_4]
		mov	edx, eax
		mov	eax, offset aList ; "list"
		mov	ecx, 5
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401AD2
		mov	[esp+48h+Str], offset aListResourcesI ;	"List resources\nIf SECTION is given, on"...
		call	libintl_gettext
		mov	[ebp+var_1C], eax
		mov	[esp+48h+Str], offset aFilePath	; "FILE	[PATH]"
		call	libintl_gettext
		mov	[ebp+var_20], eax
		mov	[esp+48h+Str], offset aSection ; "SECTION"
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	[esp+48h+Str], offset aSectionS	; "[--section %s]"
		call	g_strdup_printf
		mov	[ebp+var_24], eax
		jmp	loc_401BD3
; ---------------------------------------------------------------------------

loc_401AD2:				; CODE XREF: sub_4019A9+E5j
		mov	eax, [ebp+arg_4]
		mov	edx, eax
		mov	eax, offset aDetails ; "details"
		mov	ecx, 8
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401B3C
		mov	[esp+48h+Str], offset aListResourcesW ;	"List resources	with details\nIf SECTION"...
		call	libintl_gettext
		mov	[ebp+var_1C], eax
		mov	[esp+48h+Str], offset aFilePath	; "FILE	[PATH]"
		call	libintl_gettext
		mov	[ebp+var_20], eax
		mov	[esp+48h+Str], offset aSection ; "SECTION"
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	[esp+48h+Str], offset aSectionS	; "[--section %s]"
		call	g_strdup_printf
		mov	[ebp+var_24], eax
		jmp	loc_401BD3
; ---------------------------------------------------------------------------

loc_401B3C:				; CODE XREF: sub_4019A9+14Fj
		mov	eax, [ebp+arg_4]
		mov	edx, eax
		mov	eax, offset aExtract ; "extract"
		mov	ecx, 8
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401BA3
		mov	[esp+48h+Str], offset aExtractAResour ;	"Extract a resource file to stdout"
		call	libintl_gettext
		mov	[ebp+var_1C], eax
		mov	[esp+48h+Str], offset aFilePath_0 ; "FILE PATH"
		call	libintl_gettext
		mov	[ebp+var_20], eax
		mov	[esp+48h+Str], offset aSection ; "SECTION"
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	[esp+48h+Str], offset aSectionS	; "[--section %s]"
		call	g_strdup_printf
		mov	[ebp+var_24], eax
		jmp	short loc_401BD3
; ---------------------------------------------------------------------------

loc_401BA3:				; CODE XREF: sub_4019A9+1B9j
		mov	[esp+48h+Str], offset aUnknownCommand ;	"Unknown command %s\n\n"
		call	libintl_gettext
		mov	edx, [ebp+arg_4]
		mov	[esp+48h+var_40], edx
		mov	[esp+48h+SubStr], eax
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_printf
		mov	[ebp+arg_0], 0
		mov	[ebp+arg_4], 0

loc_401BD3:				; CODE XREF: sub_4019A9+23j
					; sub_4019A9+6Fj ...
		cmp	[ebp+arg_4], 0
		jnz	short loc_401BF9
		mov	[esp+48h+Str], offset aUsageGresource ;	"Usage:\n  gresource [--section	SECTION]"...
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_append
		jmp	loc_401DE1
; ---------------------------------------------------------------------------

loc_401BF9:				; CODE XREF: sub_4019A9+22Ej
		mov	eax, [ebp+var_20]
		mov	al, [eax]
		test	al, al
		jz	short loc_401C07
		mov	edi, [ebp+var_20]
		jmp	short loc_401C0C
; ---------------------------------------------------------------------------

loc_401C07:				; CODE XREF: sub_4019A9+257j
		mov	edi, offset byte_40504E

loc_401C0C:				; CODE XREF: sub_4019A9+25Cj
		cmp	[ebp+var_24], 0
		jz	short loc_401C19
		mov	esi, 40504Ch
		jmp	short loc_401C1E
; ---------------------------------------------------------------------------

loc_401C19:				; CODE XREF: sub_4019A9+267j
		mov	esi, offset byte_40504E

loc_401C1E:				; CODE XREF: sub_4019A9+26Ej
		cmp	[ebp+var_24], 0
		jz	short loc_401C29
		mov	ebx, [ebp+var_24]
		jmp	short loc_401C2E
; ---------------------------------------------------------------------------

loc_401C29:				; CODE XREF: sub_4019A9+279j
		mov	ebx, offset byte_40504E

loc_401C2E:				; CODE XREF: sub_4019A9+27Ej
		mov	[esp+48h+Str], offset aUsageGresour_0 ;	"Usage:\n  gresource %s%s%s %s\n\n%s\n\n"
		call	libintl_gettext
		mov	edx, [ebp+var_1C]
		mov	[esp+48h+var_30], edx
		mov	[esp+48h+var_34], edi
		mov	edx, [ebp+arg_4]
		mov	[esp+48h+var_38], edx
		mov	[esp+48h+var_3C], esi
		mov	[esp+48h+var_40], ebx
		mov	[esp+48h+SubStr], eax
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_append_printf
		mov	[esp+48h+Str], offset aArguments ; "Arguments:\n"
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_append
		cmp	[ebp+var_24], 0
		jz	short loc_401C9F
		mov	[esp+48h+Str], offset aSectionAnOptio ;	"  SECTION   An	(optional) elf section n"...
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_append

loc_401C9F:				; CODE XREF: sub_4019A9+2D9j
		mov	[esp+48h+Str], offset aCommand ; "[COMMAND]"
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax ;	SubStr
		mov	eax, [ebp+var_20]
		mov	[esp+48h+Str], eax ; Str
		call	strstr
		test	eax, eax
		jz	short loc_401CD9
		mov	[esp+48h+Str], offset aCommandTheOpti ;	"  COMMAND   The (optional) command to e"...
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_append

loc_401CD9:				; CODE XREF: sub_4019A9+313j
		mov	[esp+48h+Str], offset aFile ; "FILE"
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax ;	SubStr
		mov	eax, [ebp+var_20]
		mov	[esp+48h+Str], eax ; Str
		call	strstr
		test	eax, eax
		jz	short loc_401D58
		mov	eax, [ebp+arg_4]
		mov	edx, eax
		mov	eax, offset aSections ;	"sections"
		mov	ecx, 9
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401D3D
		mov	[esp+48h+Str], offset aFileAnElfFileA ;	"  FILE	     An	elf file (a binary or a	"...
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_append
		jmp	short loc_401D58
; ---------------------------------------------------------------------------

loc_401D3D:				; CODE XREF: sub_4019A9+375j
		mov	[esp+48h+Str], offset aFileAnElfFil_0 ;	"  FILE	     An	elf file (a binary or a	"...
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_append

loc_401D58:				; CODE XREF: sub_4019A9+34Dj
					; sub_4019A9+392j
		mov	[esp+48h+Str], offset aPath ; "[PATH]"
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax ;	SubStr
		mov	eax, [ebp+var_20]
		mov	[esp+48h+Str], eax ; Str
		call	strstr
		test	eax, eax
		jz	short loc_401D94
		mov	[esp+48h+Str], offset aPathAnOptional ;	"  PATH	     An	(optional) resource path"...
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_append
		jmp	short loc_401DCE
; ---------------------------------------------------------------------------

loc_401D94:				; CODE XREF: sub_4019A9+3CCj
		mov	[esp+48h+Str], offset aPath_0 ;	"PATH"
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax ;	SubStr
		mov	eax, [ebp+var_20]
		mov	[esp+48h+Str], eax ; Str
		call	strstr
		test	eax, eax
		jz	short loc_401DCE
		mov	[esp+48h+Str], offset aPathAResourceP ;	"  PATH	     A resource	path\n"
		call	libintl_gettext
		mov	[esp+48h+SubStr], eax
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_append

loc_401DCE:				; CODE XREF: sub_4019A9+3E9j
					; sub_4019A9+408j
		mov	[esp+48h+SubStr], offset asc_4055D8 ; "\n"
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_append

loc_401DE1:				; CODE XREF: sub_4019A9+24Bj
		cmp	[ebp+arg_0], 0
		jz	short loc_401DFE
		mov	eax, [ebp+var_28]
		mov	eax, [eax]
		mov	[esp+48h+SubStr], eax
		mov	[esp+48h+Str], offset aS_0 ; "%s"
		call	g_print
		jmp	short loc_401E13
; ---------------------------------------------------------------------------

loc_401DFE:				; CODE XREF: sub_4019A9+43Cj
		mov	eax, [ebp+var_28]
		mov	eax, [eax]
		mov	[esp+48h+SubStr], eax
		mov	[esp+48h+Str], offset aS ; "%s\n"
		call	g_printerr

loc_401E13:				; CODE XREF: sub_4019A9+453j
		mov	eax, [ebp+var_24]
		mov	[esp+48h+Str], eax
		call	g_free
		mov	[esp+48h+SubStr], 1
		mov	eax, [ebp+var_28]
		mov	[esp+48h+Str], eax
		call	g_string_free
		cmp	[ebp+arg_0], 0
		setz	al
		and	eax, 0FFh
		add	esp, 3Ch
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
sub_4019A9	endp


; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_401E45	proc near		; CODE XREF: sub_401180+265p

var_28		= dword	ptr -28h
var_24		= dword	ptr -24h
var_20		= dword	ptr -20h
var_1C		= dword	ptr -1Ch
var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
arg_0		= dword	ptr  8
arg_4		= dword	ptr  0Ch

		push	ebp
		mov	ebp, esp
		push	edi
		push	esi
		and	esp, 0FFFFFFF0h
		sub	esp, 20h
		call	sub_4030B0
		mov	[esp+28h+var_C], 0
		mov	[esp+28h+var_10], 0
		mov	[esp+28h+var_24], offset byte_40504E
		mov	[esp+28h+var_28], 0
		call	libintl_setlocale
		mov	[esp+28h+var_28], offset aGlib20 ; "glib20"
		call	libintl_textdomain
		call	_glib_get_locale_dir
		mov	[esp+28h+var_18], eax
		mov	eax, [esp+28h+var_18]
		mov	[esp+28h+var_24], eax
		mov	[esp+28h+var_28], offset aGlib20 ; "glib20"
		call	libintl_bindtextdomain
		mov	eax, [esp+28h+var_18]
		mov	[esp+28h+var_28], eax
		call	g_free
		mov	[esp+28h+var_24], offset aUtf8 ; "UTF-8"
		mov	[esp+28h+var_28], offset aGlib20 ; "glib20"
		call	libintl_bind_textdomain_codeset
		cmp	[ebp+arg_0], 1
		jg	short loc_401EE1
		mov	[esp+28h+var_24], 0
		mov	[esp+28h+var_28], 0
		call	sub_4019A9
		jmp	loc_4020DD
; ---------------------------------------------------------------------------

loc_401EE1:				; CODE XREF: sub_401E45+81j
		cmp	[ebp+arg_0], 3
		jle	short loc_401F26
		mov	eax, [ebp+arg_4]
		add	eax, 4
		mov	eax, [eax]
		mov	edx, eax
		mov	eax, offset aSection_0 ; "--section"
		mov	ecx, 0Ah
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401F26
		mov	eax, [ebp+arg_4]
		mov	eax, [eax+8]
		mov	[esp+28h+var_C], eax
		add	[ebp+arg_4], 8
		sub	[ebp+arg_0], 2

loc_401F26:				; CODE XREF: sub_401E45+A0j
					; sub_401E45+CDj
		mov	eax, [ebp+arg_4]
		add	eax, 4
		mov	eax, [eax]
		mov	edx, eax
		mov	eax, offset aHelp ; "help"
		mov	ecx, 5
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401F70
		mov	eax, [ebp+arg_4]
		add	eax, 8
		mov	eax, [eax]
		mov	[esp+28h+var_24], eax
		mov	[esp+28h+var_28], 1
		call	sub_4019A9
		jmp	loc_4020DD
; ---------------------------------------------------------------------------

loc_401F70:				; CODE XREF: sub_401E45+10Cj
		cmp	[ebp+arg_0], 4
		jnz	short loc_401FB0
		mov	eax, [ebp+arg_4]
		add	eax, 4
		mov	eax, [eax]
		mov	edx, eax
		mov	eax, offset aExtract ; "extract"
		mov	ecx, 8
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401FB0
		mov	[esp+28h+var_14], offset sub_40194F
		jmp	loc_4020A0
; ---------------------------------------------------------------------------

loc_401FB0:				; CODE XREF: sub_401E45+12Fj
					; sub_401E45+15Cj
		cmp	[ebp+arg_0], 3
		jnz	short loc_401FF0
		mov	eax, [ebp+arg_4]
		add	eax, 4
		mov	eax, [eax]
		mov	edx, eax
		mov	eax, offset aSections ;	"sections"
		mov	ecx, 9
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_401FF0
		mov	[esp+28h+var_14], offset sub_401889
		jmp	loc_4020A0
; ---------------------------------------------------------------------------

loc_401FF0:				; CODE XREF: sub_401E45+16Fj
					; sub_401E45+19Cj
		cmp	[ebp+arg_0], 3
		jz	short loc_401FFC
		cmp	[ebp+arg_0], 4
		jnz	short loc_40203B

loc_401FFC:				; CODE XREF: sub_401E45+1AFj
		mov	eax, [ebp+arg_4]
		add	eax, 4
		mov	eax, [eax]
		mov	edx, eax
		mov	eax, offset aList ; "list"
		mov	ecx, 5
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_40203B
		mov	[esp+28h+var_14], offset sub_4018D1
		mov	[esp+28h+var_10], 0
		jmp	short loc_4020A0
; ---------------------------------------------------------------------------

loc_40203B:				; CODE XREF: sub_401E45+1B5j
					; sub_401E45+1E2j
		cmp	[ebp+arg_0], 3
		jz	short loc_402047
		cmp	[ebp+arg_0], 4
		jnz	short loc_402086

loc_402047:				; CODE XREF: sub_401E45+1FAj
		mov	eax, [ebp+arg_4]
		add	eax, 4
		mov	eax, [eax]
		mov	edx, eax
		mov	eax, offset aDetails ; "details"
		mov	ecx, 8
		mov	esi, edx
		mov	edi, eax
		repe cmpsb
		setnbe	dl
		setb	al
		mov	cl, dl
		sub	cl, al
		mov	al, cl
		movsx	eax, al
		test	eax, eax
		jnz	short loc_402086
		mov	[esp+28h+var_14], offset sub_4018D1
		mov	[esp+28h+var_10], 1
		jmp	short loc_4020A0
; ---------------------------------------------------------------------------

loc_402086:				; CODE XREF: sub_401E45+200j
					; sub_401E45+22Dj
		mov	eax, [ebp+arg_4]
		add	eax, 4
		mov	eax, [eax]
		mov	[esp+28h+var_24], eax
		mov	[esp+28h+var_28], 0
		call	sub_4019A9
		jmp	short loc_4020DD
; ---------------------------------------------------------------------------

loc_4020A0:				; CODE XREF: sub_401E45+166j
					; sub_401E45+1A6j ...
		cmp	[ebp+arg_0], 3
		jle	short loc_4020AE
		mov	eax, [ebp+arg_4]
		mov	eax, [eax+0Ch]
		jmp	short loc_4020B3
; ---------------------------------------------------------------------------

loc_4020AE:				; CODE XREF: sub_401E45+25Fj
		mov	eax, 0

loc_4020B3:				; CODE XREF: sub_401E45+267j
		mov	edx, [ebp+arg_4]
		add	edx, 8
		mov	edx, [edx]
		mov	ecx, [esp+28h+var_10]
		mov	[esp+28h+var_1C], ecx
		mov	[esp+28h+var_20], eax
		mov	eax, [esp+28h+var_C]
		mov	[esp+28h+var_24], eax
		mov	[esp+28h+var_28], edx
		mov	eax, [esp+28h+var_14]
		call	eax
		mov	eax, 0

loc_4020DD:				; CODE XREF: sub_401E45+97j
					; sub_401E45+126j ...
		lea	esp, [ebp-8]
		pop	esi
		pop	edi
		pop	ebp
		retn
sub_401E45	endp

; [00000006 BYTES: COLLAPSED FUNCTION g_resource_new_from_data]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_resource_enumerate_children]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_resource_get_info]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_resource_lookup_data]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_resource_unref]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_file_get_contents_utf8]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_bytes_new_take]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_bytes_unref]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_printerr]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_error_free]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_strconcat]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_print]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_free]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_strfreev]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_bytes_get_data]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_string_new]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_strdup_printf]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_string_printf]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_string_append]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_string_append_printf]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION g_string_free]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION _glib_get_locale_dir]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION libintl_gettext]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION libintl_setlocale]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION libintl_textdomain]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION libintl_bindtextdomain]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION libintl_bind_textdomain_codeset]
		align 10h

; =============== S U B	R O U T	I N E =======================================


		public TlsCallback_1
TlsCallback_1	proc near		; DATA XREF: .CRT:00408024o

var_1C		= dword	ptr -1Ch
var_18		= dword	ptr -18h
var_14		= dword	ptr -14h
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch

		sub	esp, 1Ch
		mov	eax, [esp+1Ch+arg_4]
		test	eax, eax
		jz	short loc_4021E0
		cmp	eax, 3
		jz	short loc_4021E0
		mov	eax, 1
		add	esp, 1Ch
		retn	0Ch
; ---------------------------------------------------------------------------
		align 10h

loc_4021E0:				; CODE XREF: TlsCallback_1+9j
					; TlsCallback_1+Ej
		mov	edx, [esp+1Ch+arg_8]
		mov	[esp+1Ch+var_18], eax
		mov	eax, [esp+1Ch+arg_0]
		mov	[esp+1Ch+var_14], edx
		mov	[esp+1Ch+var_1C], eax
		call	sub_4033D0
		mov	eax, 1
		add	esp, 1Ch
		retn	0Ch
TlsCallback_1	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


		public TlsCallback_0
TlsCallback_0	proc near		; CODE XREF: sub_401180+113p
					; DATA XREF: .rdata:off_405630o ...

lpLibFileName	= dword	ptr -1Ch
lpProcName	= dword	ptr -18h
var_14		= dword	ptr -14h
arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch

		push	ebx
		sub	esp, 18h
		mov	edx, ds:_winmajor
		mov	eax, [esp+1Ch+arg_4]
		cmp	dword ptr [edx], 3
		jbe	short loc_402254
		cmp	dword_404010, 2
		jz	short loc_402236
		mov	dword_404010, 2

loc_402236:				; CODE XREF: TlsCallback_0+1Aj
		cmp	eax, 2
		jz	loc_402343
		cmp	eax, 1
		jz	loc_4022E2

loc_402248:				; CODE XREF: TlsCallback_0+EEj
					; TlsCallback_0+13Ej
		add	esp, 18h
		mov	eax, 1
		pop	ebx
		retn	0Ch
; ---------------------------------------------------------------------------

loc_402254:				; CODE XREF: TlsCallback_0+11j
		mov	ds:dword_4063F8, 1
		mov	[esp+1Ch+lpLibFileName], offset	LibFileName ; "mingwm10.dll"
		call	ds:LoadLibraryA
		sub	esp, 4
		test	eax, eax
		mov	ds:hLibModule, eax
		jz	loc_402373
		mov	ebx, ds:GetProcAddress
		mov	[esp+1Ch+lpProcName], offset a__mingwthr_rem ; "__mingwthr_remove_key_dtor"
		mov	[esp+1Ch+lpLibFileName], eax ; hModule
		call	ebx ; GetProcAddress
		mov	ds:dword_4063F4, eax
		mov	eax, ds:hLibModule
		sub	esp, 8
		mov	[esp+1Ch+lpProcName], offset a__mingwthr_key ; "__mingwthr_key_dtor"
		mov	[esp+1Ch+lpLibFileName], eax ; hModule
		call	ebx ; GetProcAddress
		mov	edx, ds:hLibModule
		sub	esp, 8
		test	edx, edx
		mov	ds:dword_4063F0, eax
		jz	loc_402373
		mov	ecx, ds:dword_4063F4
		test	ecx, ecx
		jz	short loc_402303
		test	eax, eax
		jz	short loc_402303
		mov	dword_404010, 1
		add	esp, 18h
		mov	eax, 1
		pop	ebx
		retn	0Ch
; ---------------------------------------------------------------------------

loc_4022E2:				; CODE XREF: TlsCallback_0+32j
		mov	eax, [esp+1Ch+arg_8]
		mov	[esp+1Ch+lpProcName], 1
		mov	[esp+1Ch+var_14], eax
		mov	eax, [esp+1Ch+arg_0]
		mov	[esp+1Ch+lpLibFileName], eax
		call	sub_4033D0
		jmp	loc_402248
; ---------------------------------------------------------------------------

loc_402303:				; CODE XREF: TlsCallback_0+B6j
					; TlsCallback_0+BAj
		mov	ds:dword_4063F0, 0
		mov	ds:dword_4063F4, 0
		mov	[esp+1Ch+lpLibFileName], edx ; hLibModule
		call	ds:FreeLibrary
		sub	esp, 4

loc_402323:				; CODE XREF: TlsCallback_0+177j
		mov	ds:hLibModule, 0
		mov	eax, 1
		mov	dword_404010, 0
		add	esp, 18h
		pop	ebx
		retn	0Ch
; ---------------------------------------------------------------------------

loc_402343:				; CODE XREF: TlsCallback_0+29j
		mov	ebx, offset dword_408030
		cmp	ebx, offset dword_408030
		jz	loc_402248

loc_402354:				; CODE XREF: TlsCallback_0+155j
		mov	eax, [ebx]
		test	eax, eax
		jz	short loc_40235C
		call	eax

loc_40235C:				; CODE XREF: TlsCallback_0+148j
		add	ebx, 4
		cmp	ebx, offset dword_408030
		jnz	short loc_402354
		add	esp, 18h
		mov	eax, 1
		pop	ebx
		retn	0Ch
; ---------------------------------------------------------------------------

loc_402373:				; CODE XREF: TlsCallback_0+65j
					; TlsCallback_0+A8j
		mov	ds:dword_4063F0, 0
		mov	ds:dword_4063F4, 0
		jmp	short loc_402323
TlsCallback_0	endp

; ---------------------------------------------------------------------------
		align 10h
		xor	eax, eax
		retn
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4023A0	proc near		; DATA XREF: .CRT:00408014o
		mov	eax, ds:__lconv_init
		jmp	eax
sub_4023A0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4023B0	proc near		; CODE XREF: sub_4023D0+10p
					; sub_4023D0+36p ...

arg_0		= dword	ptr  4

		mov	eax, [esp+arg_0]
		retn
sub_4023B0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4023C0	proc near		; CODE XREF: sub_401060+59p
					; sub_4023D0+71p ...

arg_0		= dword	ptr  4

		mov	eax, [esp+arg_0]
		retn
sub_4023C0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


; int __cdecl sub_4023D0(_onexit_t)
sub_4023D0	proc near		; CODE XREF: sub_402490+Ap

Func		= dword	ptr -2Ch
var_28		= dword	ptr -28h
var_24		= dword	ptr -24h
var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
arg_0		= dword	ptr  4

		push	ebx
		sub	esp, 28h
		mov	eax, ds:dword_406400
		mov	ebx, [esp+2Ch+arg_0]
		mov	[esp+2Ch+Func],	eax
		call	sub_4023B0
		cmp	eax, 0FFFFFFFFh
		mov	[esp+2Ch+var_14], eax
		jz	loc_402470
		mov	[esp+2Ch+Func],	8
		call	_lock
		mov	eax, ds:dword_406400
		mov	[esp+2Ch+Func],	eax
		call	sub_4023B0
		mov	[esp+2Ch+var_14], eax
		mov	eax, ds:dword_4063FC
		mov	[esp+2Ch+Func],	eax
		call	sub_4023B0
		mov	[esp+2Ch+Func],	ebx
		mov	[esp+2Ch+var_10], eax
		lea	eax, [esp+2Ch+var_10]
		mov	[esp+2Ch+var_24], eax
		lea	eax, [esp+2Ch+var_14]
		mov	[esp+2Ch+var_28], eax
		call	__dllonexit
		mov	ebx, eax
		mov	eax, [esp+2Ch+var_14]
		mov	[esp+2Ch+Func],	eax
		call	sub_4023C0
		mov	ds:dword_406400, eax
		mov	eax, [esp+2Ch+var_10]
		mov	[esp+2Ch+Func],	eax
		call	sub_4023C0
		mov	[esp+2Ch+Func],	8
		mov	ds:dword_4063FC, eax
		call	_unlock
		add	esp, 28h
		mov	eax, ebx
		pop	ebx
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_402470:				; CODE XREF: sub_4023D0+1Cj
		mov	[esp+2Ch+Func],	ebx ; Func
		call	ds:_onexit
		add	esp, 28h
		mov	ebx, eax
		mov	eax, ebx
		pop	ebx
		retn
sub_4023D0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


; int __cdecl sub_402490(_onexit_t)
sub_402490	proc near		; CODE XREF: sub_4030B0-27p
					; sub_403590+12p

var_1C		= dword	ptr -1Ch
arg_0		= dword	ptr  4

		sub	esp, 1Ch
		mov	eax, [esp+1Ch+arg_0]
		mov	[esp+1Ch+var_1C], eax ;	_onexit_t
		call	sub_4023D0
		cmp	eax, 1
		sbb	eax, eax
		add	esp, 1Ch
		retn
sub_402490	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


; LONG __stdcall TopLevelExceptionFilter(struct	_EXCEPTION_POINTERS *ExceptionInfo)
TopLevelExceptionFilter	proc near	; DATA XREF: sub_401180+11Do

var_2C		= dword	ptr -2Ch
var_28		= dword	ptr -28h
var_10		= dword	ptr -10h
ExceptionInfo	= dword	ptr  4

		push	esi
		push	ebx
		sub	esp, 24h
		mov	ebx, [esp+2Ch+ExceptionInfo]
		mov	eax, [ebx]
		mov	eax, [eax]
		cmp	eax, 0C0000091h
		ja	short loc_402507
		cmp	eax, 0C000008Dh
		jb	short loc_402534

loc_4024CB:				; CODE XREF: TopLevelExceptionFilter+6Aj
		mov	esi, 1

loc_4024D0:				; CODE XREF: TopLevelExceptionFilter+C7j
		mov	[esp+2Ch+var_28], 0
		mov	[esp+2Ch+var_2C], 8
		call	signal
		cmp	eax, 1
		jz	loc_402600
		test	eax, eax
		jz	short loc_40251C
		mov	[esp+2Ch+var_2C], 8
		call	eax
		mov	eax, 0FFFFFFFFh

loc_4024FF:				; CODE XREF: TopLevelExceptionFilter+120j
					; TopLevelExceptionFilter+13Ej	...
		add	esp, 24h
		pop	ebx
		pop	esi
		retn	4
; ---------------------------------------------------------------------------

loc_402507:				; CODE XREF: TopLevelExceptionFilter+12j
		cmp	eax, 0C0000094h
		jz	short loc_402575
		cmp	eax, 0C0000096h
		jz	short loc_402542
		cmp	eax, 0C0000093h
		jz	short loc_4024CB

loc_40251C:				; CODE XREF: TopLevelExceptionFilter+3Fj
					; TopLevelExceptionFilter+90j ...
		mov	eax, ds:dword_406048
		test	eax, eax
		jz	loc_4025F3
		mov	[esp+2Ch+ExceptionInfo], ebx
		add	esp, 24h
		pop	ebx
		pop	esi
		jmp	eax
; ---------------------------------------------------------------------------

loc_402534:				; CODE XREF: TopLevelExceptionFilter+19j
		cmp	eax, 0C0000005h
		jz	short loc_402580
		cmp	eax, 0C000001Dh
		jnz	short loc_40251C

loc_402542:				; CODE XREF: TopLevelExceptionFilter+63j
		mov	[esp+2Ch+var_28], 0
		mov	[esp+2Ch+var_2C], 4
		call	signal
		cmp	eax, 1
		jz	short loc_4025B7
		test	eax, eax
		jz	short loc_40251C
		mov	[esp+2Ch+var_2C], 4
		call	eax
		add	esp, 24h
		mov	eax, 0FFFFFFFFh
		pop	ebx
		pop	esi
		retn	4
; ---------------------------------------------------------------------------

loc_402575:				; CODE XREF: TopLevelExceptionFilter+5Cj
		xor	esi, esi
		jmp	loc_4024D0
; ---------------------------------------------------------------------------
		align 10h

loc_402580:				; CODE XREF: TopLevelExceptionFilter+89j
		mov	[esp+2Ch+var_28], 0
		mov	[esp+2Ch+var_2C], 0Bh
		call	signal
		cmp	eax, 1
		jz	short loc_4025D5
		test	eax, eax
		jz	loc_40251C
		mov	[esp+2Ch+var_2C], 0Bh
		call	eax
		add	esp, 24h
		mov	eax, 0FFFFFFFFh
		pop	ebx
		pop	esi
		retn	4
; ---------------------------------------------------------------------------

loc_4025B7:				; CODE XREF: TopLevelExceptionFilter+A9j
		mov	[esp+2Ch+var_28], 1
		mov	[esp+2Ch+var_2C], 4
		call	signal
		mov	eax, 0FFFFFFFFh
		jmp	loc_4024FF
; ---------------------------------------------------------------------------

loc_4025D5:				; CODE XREF: TopLevelExceptionFilter+E7j
		mov	[esp+2Ch+var_28], 1
		mov	[esp+2Ch+var_2C], 0Bh
		call	signal
		mov	eax, 0FFFFFFFFh
		jmp	loc_4024FF
; ---------------------------------------------------------------------------

loc_4025F3:				; CODE XREF: TopLevelExceptionFilter+73j
		xor	eax, eax
		jmp	loc_4024FF
; ---------------------------------------------------------------------------
		align 10h

loc_402600:				; CODE XREF: TopLevelExceptionFilter+37j
		mov	[esp+2Ch+var_28], 1
		mov	[esp+2Ch+var_2C], 8
		call	signal
		test	esi, esi
		mov	eax, 0FFFFFFFFh
		jz	loc_4024FF
		mov	[esp+2Ch+var_10], eax
		call	sub_403020
		mov	eax, [esp+2Ch+var_10]
		jmp	loc_4024FF
TopLevelExceptionFilter	endp

; ---------------------------------------------------------------------------
		align 10h
		sub	esp, 3Ch
		mov	eax, ds:dword_40604C
		fld	qword ptr [esp+48h]
		fld	qword ptr [esp+50h]
		fld	qword ptr [esp+58h]
		test	eax, eax
		jz	short loc_402681
		fxch	st(2)
		mov	edx, [esp+40h]
		fstp	qword ptr [esp+18h]
		fstp	qword ptr [esp+20h]
		fstp	qword ptr [esp+28h]
		mov	[esp+10h], edx
		mov	edx, [esp+44h]
		mov	[esp+14h], edx
		lea	edx, [esp+10h]
		mov	[esp], edx
		call	eax ; dword_40604C
		jmp	short loc_402687
; ---------------------------------------------------------------------------

loc_402681:				; CODE XREF: .text:00402656j
		fstp	st
		fstp	st
		fstp	st

loc_402687:				; CODE XREF: .text:0040267Fj
		add	esp, 3Ch
		retn
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402690	proc near		; CODE XREF: sub_401060+F7p

arg_0		= dword	ptr  4

		mov	eax, [esp+arg_0]
		mov	ds:dword_40604C, eax
		jmp	__setusermatherr
sub_402690	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4026A0	proc near		; DATA XREF: sub_401060:loc_401150o

File		= dword	ptr -3Ch
Format		= dword	ptr -38h
var_34		= dword	ptr -34h
var_30		= dword	ptr -30h
var_2C		= qword	ptr -2Ch
var_24		= qword	ptr -24h
var_1C		= qword	ptr -1Ch
arg_0		= dword	ptr  4

		sub	esp, 3Ch
		mov	edx, offset aUnknownError ; "Unknown error"
		mov	eax, [esp+3Ch+arg_0]
		mov	ecx, [eax]
		sub	ecx, 1
		cmp	ecx, 5
		ja	short loc_4026BD
		mov	edx, ds:off_405750[ecx*4]

loc_4026BD:				; CODE XREF: sub_4026A0+14j
		fld	qword ptr [eax+18h]
		fstp	[esp+3Ch+var_1C]
		fld	qword ptr [eax+10h]
		fstp	[esp+3Ch+var_24]
		fld	qword ptr [eax+8]
		fstp	[esp+3Ch+var_2C]
		mov	eax, [eax+4]
		mov	[esp+3Ch+var_34], edx
		mov	[esp+3Ch+Format], offset Format	; "_matherr(): %s in %s(%g, %g)	 (retval=%"...
		mov	[esp+3Ch+var_30], eax
		mov	eax, ds:_iob
		add	eax, 40h
		mov	[esp+3Ch+File],	eax ; File
		call	fprintf
		xor	eax, eax
		add	esp, 3Ch
		retn
sub_4026A0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402700	proc near		; CODE XREF: sub_401060+75p
		xor	eax, eax
		retn
sub_402700	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: noreturn

; int __cdecl sub_402710(char *Format, char ArgList)
sub_402710	proc near		; CODE XREF: sub_402770+1DDp
					; sub_402770+204p ...

Str		= dword	ptr -1Ch
Size		= dword	ptr -18h
Count		= dword	ptr -14h
File		= dword	ptr -10h
Format		= dword	ptr  4
ArgList		= byte ptr  8

		push	ebx
		sub	esp, 18h
		mov	eax, ds:_iob
		mov	[esp+1Ch+Count], 1Bh ; Count
		lea	ebx, [esp+1Ch+ArgList]
		mov	[esp+1Ch+Size],	1 ; Size
		mov	[esp+1Ch+Str], offset aMingwW64Runtim ;	"Mingw-w64 runtime failure:\n"
		add	eax, 40h
		mov	[esp+1Ch+File],	eax ; File
		call	fwrite
		mov	eax, [esp+1Ch+Format]
		mov	[esp+1Ch+Count], ebx ; ArgList
		mov	[esp+1Ch+Size],	eax ; Format
		mov	eax, ds:_iob
		add	eax, 40h
		mov	[esp+1Ch+Str], eax ; File
		call	vfprintf
		call	abort
sub_402710	endp

; ---------------------------------------------------------------------------
		jmp	short sub_402770
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


; int __thiscall sub_402770(size_t Size)
sub_402770	proc near		; CODE XREF: .text:00402761j
					; sub_4029B0+B8p ...

lpAddress	= dword	ptr -7Ch
lpBuffer	= dword	ptr -78h
dwLength	= dword	ptr -74h
lpflOldProtect	= dword	ptr -70h
var_64		= dword	ptr -64h
Src		= dword	ptr -60h
var_58		= _MEMORY_BASIC_INFORMATION ptr	-58h
Buffer		= _MEMORY_BASIC_INFORMATION ptr	-3Ch
flOldProtect	= dword	ptr -20h

		push	ebp
		mov	ebp, ecx
		push	edi
		push	esi
		push	ebx
		mov	ebx, eax
		sub	esp, 6Ch
		mov	ecx, ds:dword_406058
		mov	[esp+7Ch+Src], edx
		test	ecx, ecx
		jle	loc_402952
		mov	eax, ds:dword_406054
		xor	esi, esi

loc_402794:				; CODE XREF: sub_402770+41j
		mov	edx, [eax+4]
		cmp	ebx, edx
		jb	short loc_4027A9
		mov	edi, [eax+8]
		add	edx, [edi+8]
		cmp	ebx, edx
		jb	loc_402880

loc_4027A9:				; CODE XREF: sub_402770+29j
		add	esi, 1
		add	eax, 0Ch
		cmp	esi, ecx
		jnz	short loc_402794

loc_4027B3:				; CODE XREF: sub_402770+1E4j
		mov	[esp+7Ch+lpAddress], ebx
		call	sub_402D70
		test	eax, eax
		mov	edi, eax
		jz	loc_402979
		lea	edx, [esi+esi*2]
		mov	esi, ds:dword_406054
		shl	edx, 2
		add	esi, edx
		mov	[esi+8], eax
		mov	dword ptr [esi], 0
		mov	[esp+7Ch+var_64], edx
		call	sub_402E50
		mov	edx, [esp+7Ch+var_64]
		add	eax, [edi+0Ch]
		mov	[esi+4], eax
		lea	eax, [esp+7Ch+Buffer]
		mov	esi, ds:VirtualQuery
		mov	[esp+7Ch+lpBuffer], eax	; lpBuffer
		mov	eax, ds:dword_406054
		mov	[esp+7Ch+dwLength], 1Ch	; dwLength
		mov	eax, [eax+edx+4]
		mov	[esp+7Ch+lpAddress], eax ; lpAddress
		call	esi ; VirtualQuery
		sub	esp, 0Ch
		test	eax, eax
		mov	edx, [esp+7Ch+var_64]
		jz	loc_402959
		mov	eax, [esp+7Ch+Buffer.Protect]
		cmp	eax, 4
		jnz	loc_402901

loc_40282F:				; CODE XREF: sub_402770+194j
					; sub_402770+1C6j
		add	ds:dword_406058, 1

loc_402836:				; CODE XREF: sub_402770+116j
		lea	eax, [esp+7Ch+var_58]
		mov	[esp+7Ch+dwLength], 1Ch	; dwLength
		mov	[esp+7Ch+lpBuffer], eax	; lpBuffer
		mov	[esp+7Ch+lpAddress], ebx ; lpAddress
		call	esi ; VirtualQuery
		sub	esp, 0Ch
		test	eax, eax
		jz	loc_402989
		mov	eax, [esp+7Ch+var_58.Protect]
		cmp	eax, 4
		jnz	short loc_402888

loc_40285F:				; CODE XREF: sub_402770+11Bj
		mov	eax, [esp+7Ch+Src]
		mov	[esp+7Ch+dwLength], ebp	; Size
		mov	[esp+7Ch+lpAddress], ebx ; Dst
		mov	[esp+7Ch+lpBuffer], eax	; Src
		call	memcpy

loc_402873:				; CODE XREF: sub_402770+162j
					; sub_402770+167j
		add	esp, 6Ch
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_402880:				; CODE XREF: sub_402770+33j
		mov	esi, ds:VirtualQuery
		jmp	short loc_402836
; ---------------------------------------------------------------------------

loc_402888:				; CODE XREF: sub_402770+EDj
		cmp	eax, 40h
		jz	short loc_40285F
		mov	eax, [esp+7Ch+var_58.RegionSize]
		lea	edi, [esp+7Ch+flOldProtect]
		mov	esi, ds:VirtualProtect
		mov	[esp+7Ch+lpflOldProtect], edi ;	lpflOldProtect
		mov	[esp+7Ch+dwLength], 40h	; flNewProtect
		mov	[esp+7Ch+lpBuffer], eax	; dwSize
		mov	eax, [esp+7Ch+var_58.BaseAddress]
		mov	[esp+7Ch+lpAddress], eax ; lpAddress
		call	esi ; VirtualProtect
		sub	esp, 10h
		mov	eax, [esp+7Ch+Src]
		mov	[esp+7Ch+dwLength], ebp	; Size
		mov	[esp+7Ch+lpAddress], ebx ; Dst
		mov	[esp+7Ch+lpBuffer], eax	; Src
		call	memcpy
		mov	eax, [esp+7Ch+var_58.Protect]
		cmp	eax, 40h
		jz	short loc_402873
		cmp	eax, 4
		jz	short loc_402873
		mov	eax, [esp+7Ch+flOldProtect]
		mov	[esp+7Ch+lpflOldProtect], edi ;	lpflOldProtect
		mov	[esp+7Ch+dwLength], eax	; flNewProtect
		mov	eax, [esp+7Ch+var_58.RegionSize]
		mov	[esp+7Ch+lpBuffer], eax	; dwSize
		mov	eax, [esp+7Ch+var_58.BaseAddress]
		mov	[esp+7Ch+lpAddress], eax ; lpAddress
		call	esi ; VirtualProtect
		sub	esp, 10h
		add	esp, 6Ch
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------

loc_402901:				; CODE XREF: sub_402770+B9j
		cmp	eax, 40h
		jz	loc_40282F
		mov	eax, [esp+7Ch+Buffer.RegionSize]
		add	edx, ds:dword_406054
		mov	[esp+7Ch+dwLength], 40h	; flNewProtect
		mov	[esp+7Ch+lpBuffer], eax	; dwSize
		mov	eax, [esp+7Ch+Buffer.BaseAddress]
		mov	[esp+7Ch+lpflOldProtect], edx ;	lpflOldProtect
		mov	[esp+7Ch+lpAddress], eax ; lpAddress
		call	ds:VirtualProtect
		sub	esp, 10h
		test	eax, eax
		jnz	loc_40282F
		call	ds:GetLastError
		mov	[esp+7Ch+lpAddress], offset aVirtualprotect ; "	 VirtualProtect	failed with code 0x%x"
		mov	[esp+7Ch+lpBuffer], eax	; ArgList
		call	sub_402710
; ---------------------------------------------------------------------------

loc_402952:				; CODE XREF: sub_402770+17j
		xor	esi, esi
		jmp	loc_4027B3
; ---------------------------------------------------------------------------

loc_402959:				; CODE XREF: sub_402770+ACj
		mov	eax, ds:dword_406054
		mov	eax, [eax+edx+4]
		mov	[esp+7Ch+dwLength], eax
		mov	eax, [edi+8]
		mov	[esp+7Ch+lpAddress], offset aVirtualqueryFa ; "	 VirtualQuery failed for %d bytes at a"...
		mov	[esp+7Ch+lpBuffer], eax	; ArgList
		call	sub_402710
; ---------------------------------------------------------------------------

loc_402979:				; CODE XREF: sub_402770+4Fj
		mov	[esp+7Ch+lpBuffer], ebx	; ArgList
		mov	[esp+7Ch+lpAddress], offset aAddressPHasNoI ; "Address %p has no image-section"
		call	sub_402710
; ---------------------------------------------------------------------------

loc_402989:				; CODE XREF: sub_402770+E0j
		mov	[esp+7Ch+dwLength], ebx
		mov	[esp+7Ch+lpBuffer], 1Ch	; ArgList
		mov	[esp+7Ch+lpAddress], offset aVirtualqueryFa ; "	 VirtualQuery failed for %d bytes at a"...
		call	sub_402710
sub_402770	endp

; ---------------------------------------------------------------------------
		db 0EBh	; 
		db  0Dh
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_4029B0	proc near		; CODE XREF: sub_401180:loc_401298p

lpAddress	= dword	ptr -58h
lpBuffer	= dword	ptr -54h
dwLength	= dword	ptr -50h
lpflOldProtect	= dword	ptr -4Ch
Buffer		= _MEMORY_BASIC_INFORMATION ptr	-3Ch
var_20		= dword	ptr -20h
flOldProtect	= dword	ptr -1Ch

		push	ebp
		mov	ebp, esp
		push	edi
		push	esi
		push	ebx
		sub	esp, 4Ch
		mov	eax, ds:dword_406050
		test	eax, eax
		jz	short loc_4029D0

loc_4029C2:				; CODE XREF: sub_4029B0+66j
					; sub_4029B0+96j ...
		lea	esp, [ebp-0Ch]
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_4029D0:				; CODE XREF: sub_4029B0+10j
		mov	ds:dword_406050, 1
		call	sub_402DB0
		lea	eax, [eax+eax*2]
		lea	eax, ds:1Eh[eax*4]
		and	eax, 0FFFFFFF0h
		call	sub_403470
		mov	ds:dword_406058, 0
		sub	esp, eax
		lea	eax, [esp+58h+Buffer.BaseAddress+3]
		and	eax, 0FFFFFFF0h
		mov	ds:dword_406054, eax
		mov	eax, offset dword_405880
		sub	eax, offset dword_405880
		cmp	eax, 7
		jle	short loc_4029C2
		cmp	eax, 0Bh
		mov	ebx, offset dword_405880
		jle	loc_402B10
		mov	eax, ds:dword_405880
		test	eax, eax
		jnz	short loc_402A40
		mov	eax, ds:dword_405884
		test	eax, eax
		jz	loc_402AFC
		lea	esi, [esi+0]

loc_402A40:				; CODE XREF: sub_4029B0+7Dj
					; sub_4029B0+164j ...
		cmp	ebx, offset dword_405880
		jnb	loc_4029C2
		mov	esi, 400000h

loc_402A51:				; CODE XREF: sub_4029B0+C3j
		mov	eax, [ebx+4]
		mov	ecx, 4		; Size
		add	eax, esi
		mov	edx, [eax]
		add	edx, [ebx]
		add	ebx, 8
		mov	[ebp+flOldProtect], edx
		lea	edx, [ebp+flOldProtect]
		call	sub_402770
		cmp	ebx, offset dword_405880
		jb	short loc_402A51

loc_402A75:				; CODE XREF: sub_4029B0+24Bj
		mov	ecx, ds:dword_406058
		test	ecx, ecx
		jle	loc_4029C2
		xor	ebx, ebx
		xor	esi, esi
		mov	edi, ds:VirtualQuery
		jmp	short loc_402AA2
; ---------------------------------------------------------------------------
		align 10h

loc_402A90:				; CODE XREF: sub_4029B0+FDj
					; sub_4029B0+14Aj
		add	esi, 1
		add	ebx, 0Ch
		cmp	esi, ds:dword_406058
		jge	loc_4029C2

loc_402AA2:				; CODE XREF: sub_4029B0+DDj
		mov	eax, ds:dword_406054
		add	eax, ebx
		mov	edx, [eax]
		test	edx, edx
		jz	short loc_402A90
		lea	edx, [ebp+Buffer]
		mov	[esp+58h+dwLength], 1Ch	; dwLength
		mov	[esp+58h+lpBuffer], edx	; lpBuffer
		mov	eax, [eax+4]
		mov	[esp+58h+lpAddress], eax ; lpAddress
		call	edi ; VirtualQuery
		sub	esp, 0Ch
		test	eax, eax
		jz	loc_402C22
		lea	eax, [ebp+flOldProtect]
		mov	[esp+58h+lpflOldProtect], eax ;	lpflOldProtect
		mov	eax, ds:dword_406054
		mov	eax, [eax+ebx]
		mov	[esp+58h+dwLength], eax	; flNewProtect
		mov	eax, [ebp+Buffer.RegionSize]
		mov	[esp+58h+lpBuffer], eax	; dwSize
		mov	eax, [ebp+Buffer.BaseAddress]
		mov	[esp+58h+lpAddress], eax ; lpAddress
		call	ds:VirtualProtect
		sub	esp, 10h
		jmp	short loc_402A90
; ---------------------------------------------------------------------------

loc_402AFC:				; CODE XREF: sub_4029B0+86j
		mov	eax, ds:dword_405888
		test	eax, eax
		jnz	short loc_402B25
		mov	ebx, offset dword_40588C
		lea	esi, [esi+0]

loc_402B10:				; CODE XREF: sub_4029B0+70j
		mov	edi, [ebx]
		test	edi, edi
		jnz	loc_402A40
		mov	esi, [ebx+4]
		test	esi, esi
		jnz	loc_402A40

loc_402B25:				; CODE XREF: sub_4029B0+153j
		mov	eax, [ebx+8]
		cmp	eax, 1
		jnz	loc_402C45
		add	ebx, 0Ch
		cmp	ebx, offset dword_405880
		jnb	loc_4029C2

loc_402B40:				; CODE XREF: sub_4029B0+245j
		movzx	edx, byte ptr [ebx+8]
		mov	eax, 400000h
		mov	ecx, [ebx]
		add	eax, [ebx+4]
		cmp	edx, 10h
		mov	esi, [ecx+400000h]
		jz	short loc_402B9A
		cmp	edx, 20h
		jz	short loc_402BD0
		cmp	edx, 8
		jz	short loc_402B7A
		mov	[esp+58h+lpBuffer], edx	; ArgList
		mov	[esp+58h+lpAddress], offset aUnknownPseudoR ; "	 Unknown pseudo	relocation bit size %d"...
		mov	[ebp+var_20], 0
		call	sub_402710
; ---------------------------------------------------------------------------

loc_402B7A:				; CODE XREF: sub_4029B0+1B1j
		movzx	edi, byte ptr [eax]
		test	edi, 80h
		jz	short loc_402BA5
		or	edi, 0FFFFFF00h
		sub	edi, ecx
		sub	edi, 400000h
		add	esi, edi
		mov	[ebp+var_20], esi
		jmp	short loc_402BC1
; ---------------------------------------------------------------------------

loc_402B9A:				; CODE XREF: sub_4029B0+1A7j
		movzx	edi, word ptr [eax]
		test	edi, 8000h
		jnz	short loc_402C00

loc_402BA5:				; CODE XREF: sub_4029B0+1D3j
		sub	edi, ecx
		sub	edi, 400000h
		add	esi, edi
		cmp	edx, 10h
		mov	[ebp+var_20], esi
		jz	short loc_402C13
		cmp	edx, 20h
		jz	short loc_402BDF
		cmp	edx, 8
		jnz	short loc_402BEC

loc_402BC1:				; CODE XREF: sub_4029B0+1E8j
		mov	ecx, 1		; Size
		lea	edx, [ebp+var_20]
		call	sub_402770
		jmp	short loc_402BEC
; ---------------------------------------------------------------------------

loc_402BD0:				; CODE XREF: sub_4029B0+1ACj
		mov	edx, [eax]
		sub	edx, ecx
		sub	edx, 400000h
		add	edx, esi
		mov	[ebp+var_20], edx

loc_402BDF:				; CODE XREF: sub_4029B0+20Aj
		mov	ecx, 4		; Size
		lea	edx, [ebp+var_20]
		call	sub_402770

loc_402BEC:				; CODE XREF: sub_4029B0+20Fj
					; sub_4029B0+21Ej ...
		add	ebx, 0Ch
		cmp	ebx, offset dword_405880
		jb	loc_402B40
		jmp	loc_402A75
; ---------------------------------------------------------------------------

loc_402C00:				; CODE XREF: sub_4029B0+1F3j
		or	edi, 0FFFF0000h
		sub	edi, ecx
		sub	edi, 400000h
		add	esi, edi
		mov	[ebp+var_20], esi

loc_402C13:				; CODE XREF: sub_4029B0+205j
		mov	ecx, 2		; Size
		lea	edx, [ebp+var_20]
		call	sub_402770
		jmp	short loc_402BEC
; ---------------------------------------------------------------------------

loc_402C22:				; CODE XREF: sub_4029B0+11Bj
		add	ebx, ds:dword_406054
		mov	eax, [ebx+4]
		mov	[esp+58h+dwLength], eax
		mov	eax, [ebx+8]
		mov	eax, [eax+8]
		mov	[esp+58h+lpAddress], offset aVirtualqueryFa ; "	 VirtualQuery failed for %d bytes at a"...
		mov	[esp+58h+lpBuffer], eax	; ArgList
		call	sub_402710
; ---------------------------------------------------------------------------

loc_402C45:				; CODE XREF: sub_4029B0+17Bj
		mov	[esp+58h+lpBuffer], eax	; ArgList
		mov	[esp+58h+lpAddress], offset aUnknownPseud_0 ; "	 Unknown pseudo	relocation protocol ve"...
		call	sub_402710
sub_4029B0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402C60	proc near		; CODE XREF: .text:00402D01p
					; sub_402D70+Ap ...

arg_0		= dword	ptr  4

		mov	edx, [esp+arg_0]
		xor	eax, eax
		cmp	word ptr [edx],	5A4Dh
		jz	short loc_402C70

locret_402C6D:				; CODE XREF: sub_402C60+19j
		rep retn
; ---------------------------------------------------------------------------
		align 10h

loc_402C70:				; CODE XREF: sub_402C60+Bj
		add	edx, [edx+3Ch]
		cmp	dword ptr [edx], 4550h
		jnz	short locret_402C6D
		xor	eax, eax
		cmp	word ptr [edx+18h], 10Bh
		setz	al
		retn
sub_402C60	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402C90	proc near		; CODE XREF: sub_402D70+2Bp
					; .text:00402EB4p ...

arg_0		= dword	ptr  4
arg_4		= dword	ptr  8

		push	esi
		xor	eax, eax
		push	ebx
		mov	edx, [esp+8+arg_0]
		mov	ebx, [esp+8+arg_4]
		add	edx, [edx+3Ch]
		movzx	esi, word ptr [edx+6]
		movzx	ecx, word ptr [edx+14h]
		test	esi, esi
		jz	short loc_402CCE
		movzx	ecx, cx
		lea	eax, [edx+ecx+18h]
		xor	edx, edx

loc_402CB4:				; CODE XREF: sub_402C90+3Aj
		mov	ecx, [eax+0Ch]
		cmp	ecx, ebx
		ja	short loc_402CC2
		add	ecx, [eax+8]
		cmp	ebx, ecx
		jb	short loc_402CCE

loc_402CC2:				; CODE XREF: sub_402C90+29j
		add	edx, 1
		add	eax, 28h
		cmp	edx, esi
		jb	short loc_402CB4
		xor	eax, eax

loc_402CCE:				; CODE XREF: sub_402C90+19j
					; sub_402C90+30j
		pop	ebx
		pop	esi
		retn
sub_402C90	endp

; ---------------------------------------------------------------------------
		jmp	short loc_402CE0
; ---------------------------------------------------------------------------
		align 10h

loc_402CE0:				; CODE XREF: .text:00402CD1j
		push	ebp
		push	edi
		push	esi
		push	ebx
		xor	ebx, ebx
		sub	esp, 1Ch
		mov	edi, [esp+30h]
		mov	[esp], edi
		call	strlen
		cmp	eax, 8
		ja	short loc_402D53
		mov	dword ptr [esp], 400000h
		call	sub_402C60
		test	eax, eax
		jz	short loc_402D53
		mov	eax, ds:40003Ch
		movzx	ebp, word ptr [eax+400006h]
		movzx	edx, word ptr [eax+400014h]
		add	eax, 400000h
		test	ebp, ebp
		jz	short loc_402D53
		movzx	edx, dx
		xor	esi, esi
		lea	ebx, [eax+edx+18h]
		jmp	short loc_402D3B
; ---------------------------------------------------------------------------

loc_402D31:				; CODE XREF: .text:00402D51j
		add	esi, 1
		add	ebx, 28h
		cmp	esi, ebp
		jnb	short loc_402D60

loc_402D3B:				; CODE XREF: .text:00402D2Fj
		mov	dword ptr [esp+8], 8
		mov	[esp+4], edi
		mov	[esp], ebx
		call	strncmp
		test	eax, eax
		jnz	short loc_402D31

loc_402D53:				; CODE XREF: .text:00402CF8j
					; .text:00402D08j ...
		add	esp, 1Ch
		mov	eax, ebx
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_402D60:				; CODE XREF: .text:00402D39j
		add	esp, 1Ch
		xor	ebx, ebx
		mov	eax, ebx
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402D70	proc near		; CODE XREF: sub_402770+46p

var_8		= dword	ptr -8
var_4		= dword	ptr -4
arg_0		= dword	ptr  4

		sub	esp, 8
		mov	[esp+8+var_8], 400000h
		call	sub_402C60
		mov	edx, eax
		xor	eax, eax
		test	edx, edx
		jz	short loc_402DA0
		mov	eax, [esp+8+arg_0]
		mov	[esp+8+var_8], 400000h
		sub	eax, 400000h
		mov	[esp+8+var_4], eax
		call	sub_402C90

loc_402DA0:				; CODE XREF: sub_402D70+15j
		add	esp, 8
		retn
sub_402D70	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402DB0	proc near		; CODE XREF: sub_4029B0+2Ap

var_4		= dword	ptr -4

		sub	esp, 4
		mov	[esp+4+var_4], 400000h
		call	sub_402C60
		xor	edx, edx
		test	eax, eax
		jz	short loc_402DD1
		mov	eax, ds:40003Ch
		movzx	edx, word ptr [eax+400006h]

loc_402DD1:				; CODE XREF: sub_402DB0+13j
		mov	eax, edx
		add	esp, 4
		retn
sub_402DB0	endp

; ---------------------------------------------------------------------------
		align 10h
		push	esi
		push	ebx
		sub	esp, 4
		mov	dword ptr [esp], 400000h
		mov	ebx, [esp+10h]
		call	sub_402C60
		xor	edx, edx
		test	eax, eax
		jz	short loc_402E39
		mov	eax, ds:40003Ch
		movzx	ecx, word ptr [eax+400006h]
		movzx	esi, word ptr [eax+400014h]
		add	eax, 400000h
		test	ecx, ecx
		jz	short loc_402E39
		movzx	esi, si
		lea	edx, [eax+esi+18h]
		xor	eax, eax

loc_402E20:				; CODE XREF: .text:00402E35j
		test	byte ptr [edx+27h], 20h
		jz	short loc_402E2D
		test	ebx, ebx
		jz	short loc_402E39
		sub	ebx, 1

loc_402E2D:				; CODE XREF: .text:00402E24j
		add	eax, 1
		add	edx, 28h
		cmp	eax, ecx
		jb	short loc_402E20
		xor	edx, edx

loc_402E39:				; CODE XREF: .text:00402DF9j
					; .text:00402E15j ...
		add	esp, 4
		mov	eax, edx
		pop	ebx
		pop	esi
		retn
; ---------------------------------------------------------------------------
		jmp	short sub_402E50
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402E50	proc near		; CODE XREF: sub_402770+70p
					; .text:00402E41j

var_4		= dword	ptr -4

		sub	esp, 4
		mov	[esp+4+var_4], 400000h
		call	sub_402C60
		xor	edx, edx
		test	eax, eax
		mov	eax, 400000h
		cmovnz	edx, eax
		add	esp, 4
		mov	eax, edx
		retn
sub_402E50	endp

; ---------------------------------------------------------------------------
		jmp	short loc_402E80
; ---------------------------------------------------------------------------
		align 10h

loc_402E80:				; CODE XREF: .text:00402E71j
		push	ebx
		xor	ebx, ebx
		sub	esp, 8
		mov	dword ptr [esp], 400000h
		call	sub_402C60
		test	eax, eax
		jnz	short loc_402EA0

loc_402E96:				; CODE XREF: .text:00402EBBj
		add	esp, 8
		mov	eax, ebx
		pop	ebx
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_402EA0:				; CODE XREF: .text:00402E94j
		mov	eax, [esp+10h]
		mov	dword ptr [esp], 400000h
		sub	eax, 400000h
		mov	[esp+4], eax
		call	sub_402C90
		test	eax, eax
		jz	short loc_402E96
		mov	ebx, [eax+24h]
		add	esp, 8
		not	ebx
		shr	ebx, 1Fh
		mov	eax, ebx
		pop	ebx
		retn
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402ED0	proc near		; CODE XREF: sub_402F60+1Ap

var_14		= dword	ptr -14h
var_10		= dword	ptr -10h
arg_0		= dword	ptr  4

		push	edi
		xor	edi, edi
		push	esi
		push	ebx
		sub	esp, 8
		mov	[esp+14h+var_14], 400000h
		mov	ebx, [esp+14h+arg_0]
		call	sub_402C60
		test	eax, eax
		jz	short loc_402F41
		mov	eax, ds:40003Ch
		mov	esi, [eax+400080h]
		test	esi, esi
		jz	short loc_402F41
		mov	[esp+14h+var_10], esi
		mov	[esp+14h+var_14], 400000h
		call	sub_402C90
		test	eax, eax
		jz	short loc_402F41
		add	esi, 400000h
		jnz	short loc_402F26
		jmp	short loc_402F41
; ---------------------------------------------------------------------------
		align 10h

loc_402F20:				; CODE XREF: sub_402ED0+66j
		sub	ebx, 1
		add	esi, 14h

loc_402F26:				; CODE XREF: sub_402ED0+45j
		mov	edx, [esi+4]
		test	edx, edx
		jnz	short loc_402F34
		mov	eax, [esi+0Ch]
		test	eax, eax
		jz	short loc_402F50

loc_402F34:				; CODE XREF: sub_402ED0+5Bj
		test	ebx, ebx
		jg	short loc_402F20
		mov	edi, [esi+0Ch]
		add	edi, 400000h

loc_402F41:				; CODE XREF: sub_402ED0+1Aj
					; sub_402ED0+29j ...
		add	esp, 8
		mov	eax, edi
		pop	ebx
		pop	esi
		pop	edi
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_402F50:				; CODE XREF: sub_402ED0+62j
		add	esp, 8
		xor	edi, edi
		mov	eax, edi
		pop	ebx
		pop	esi
		pop	edi
		retn
sub_402ED0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_402F60	proc near		; CODE XREF: sub_401180+132p

lpModuleName	= dword	ptr -1Ch

		push	ebx
		sub	esp, 18h
		mov	eax, ds:dword_40605C
		test	eax, eax
		jz	short loc_402F72

loc_402F6D:				; CODE XREF: sub_402F60+97j
					; sub_402F60+B5j
		add	esp, 18h
		pop	ebx
		retn
; ---------------------------------------------------------------------------

loc_402F72:				; CODE XREF: sub_402F60+Bj
		xor	eax, eax

loc_402F74:				; CODE XREF: sub_402F60+82j
		mov	[esp+1Ch+lpModuleName],	eax
		lea	ebx, [eax+1]
		call	sub_402ED0
		test	eax, eax
		jz	short loc_403000
		movzx	edx, byte ptr [eax]
		cmp	dl, 4Dh
		jz	short loc_402F90
		cmp	dl, 6Dh
		jnz	short loc_402FE0

loc_402F90:				; CODE XREF: sub_402F60+29j
		movzx	edx, byte ptr [eax+1]
		cmp	dl, 53h
		jz	short loc_402F9E
		cmp	dl, 73h
		jnz	short loc_402FE0

loc_402F9E:				; CODE XREF: sub_402F60+37j
		movzx	edx, byte ptr [eax+2]
		cmp	dl, 56h
		jz	short loc_402FAC
		cmp	dl, 76h
		jnz	short loc_402FE0

loc_402FAC:				; CODE XREF: sub_402F60+45j
		movzx	edx, byte ptr [eax+3]
		cmp	dl, 43h
		jz	short loc_402FBA
		cmp	dl, 63h
		jnz	short loc_402FE0

loc_402FBA:				; CODE XREF: sub_402F60+53j
		movzx	edx, byte ptr [eax+4]
		cmp	dl, 52h
		jz	short loc_402FC8
		cmp	dl, 72h
		jnz	short loc_402FE0

loc_402FC8:				; CODE XREF: sub_402F60+61j
		movzx	edx, byte ptr [eax+5]
		cmp	dl, 54h
		jz	short loc_402FE4
		cmp	dl, 74h
		jz	short loc_402FE4
		sub	edx, 30h
		cmp	dl, 9
		jbe	short loc_402FE4
		xchg	ax, ax

loc_402FE0:				; CODE XREF: sub_402F60+2Ej
					; sub_402F60+3Cj ...
		mov	eax, ebx
		jmp	short loc_402F74
; ---------------------------------------------------------------------------

loc_402FE4:				; CODE XREF: sub_402F60+6Fj
					; sub_402F60+74j ...
		mov	[esp+1Ch+lpModuleName],	eax ; lpModuleName
		call	ds:GetModuleHandleA
		sub	esp, 4
		test	eax, eax
		mov	ds:dword_40605C, eax
		jnz	loc_402F6D
		lea	esi, [esi+0]

loc_403000:				; CODE XREF: sub_402F60+21j
		mov	[esp+1Ch+lpModuleName],	offset aMsvcrt_dll ; "msvcrt.dll"
		call	ds:LoadLibraryW
		sub	esp, 4
		mov	ds:dword_40605C, eax
		jmp	loc_402F6D
sub_402F60	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_403020	proc near		; CODE XREF: sub_401180:loc_4012D8p
					; TopLevelExceptionFilter+175p
		fninit
		retn
sub_403020	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


; int __cdecl sub_403030()
sub_403030	proc near		; DATA XREF: sub_4030B0:loc_403082o
		sub	esp, 0Ch
		mov	eax, off_40400C
		mov	eax, [eax]
		test	eax, eax
		jz	short loc_403057
		xchg	ax, ax

loc_403040:				; CODE XREF: sub_403030+25j
		call	eax
		mov	eax, off_40400C
		lea	edx, [eax+4]
		mov	eax, [eax+4]
		mov	off_40400C, edx
		test	eax, eax
		jnz	short loc_403040

loc_403057:				; CODE XREF: sub_403030+Cj
		add	esp, 0Ch
		retn
sub_403030	endp

; ---------------------------------------------------------------------------
		align 10h
; START	OF FUNCTION CHUNK FOR sub_4030B0

loc_403060:				; CODE XREF: sub_4030B0+1Aj
		push	ebx
		sub	esp, 18h
		mov	ebx, ds:dword_4035B0
		cmp	ebx, 0FFFFFFFFh
		jz	short loc_403093

loc_40306F:				; CODE XREF: sub_4030B0-9j
		test	ebx, ebx
		jz	short loc_403082

loc_403073:				; CODE XREF: sub_4030B0-30j
		call	ds:dword_4035B0[ebx*4]
		sub	ebx, 1
		lea	esi, [esi+0]
		jnz	short loc_403073

loc_403082:				; CODE XREF: sub_4030B0-3Fj
		mov	[esp+1Ch+var_1C], offset sub_403030 ; _onexit_t
		call	sub_402490
		add	esp, 18h
		pop	ebx
		retn
; ---------------------------------------------------------------------------

loc_403093:				; CODE XREF: sub_4030B0-43j
		xor	ebx, ebx
		jmp	short loc_403099
; ---------------------------------------------------------------------------

loc_403097:				; CODE XREF: sub_4030B0-Bj
		mov	ebx, eax

loc_403099:				; CODE XREF: sub_4030B0-1Bj
		lea	eax, [ebx+1]
		mov	edx, ds:dword_4035B0[eax*4]
		test	edx, edx
		jnz	short loc_403097
		jmp	short loc_40306F
; END OF FUNCTION CHUNK	FOR sub_4030B0
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4030B0	proc near		; CODE XREF: sub_401180+239p
					; sub_401E45+Bp

var_1C		= dword	ptr -1Ch

; FUNCTION CHUNK AT 00403060 SIZE 00000049 BYTES

		mov	ecx, ds:dword_406060
		test	ecx, ecx
		jz	short loc_4030C0
		rep retn
; ---------------------------------------------------------------------------
		align 10h

loc_4030C0:				; CODE XREF: sub_4030B0+8j
		mov	ds:dword_406060, 1
		jmp	short loc_403060
sub_4030B0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4030D0	proc near		; CODE XREF: .text:004014BDp start+Dp

lpSystemTimeAsFileTime=	dword ptr -4Ch
var_30		= dword	ptr -30h
SystemTimeAsFileTime= _FILETIME	ptr -2Ch
PerformanceCount= LARGE_INTEGER	ptr -24h
var_10		= dword	ptr -10h
var_C		= dword	ptr -0Ch
var_8		= dword	ptr -8
var_4		= dword	ptr -4

		sub	esp, 4Ch
		mov	eax, dword_404018
		mov	[esp+4Ch+var_10], ebx
		mov	[esp+4Ch+var_C], esi
		mov	[esp+4Ch+var_8], edi
		cmp	eax, 0BB40E64Eh
		mov	[esp+4Ch+var_4], ebp
		mov	[esp+4Ch+SystemTimeAsFileTime.dwLowDateTime], 0
		mov	[esp+4Ch+SystemTimeAsFileTime.dwHighDateTime], 0
		jz	short loc_403120
		not	eax
		mov	dword_40401C, eax

loc_403106:				; CODE XREF: sub_4030D0+BDj
		mov	ebx, [esp+4Ch+var_10]
		mov	esi, [esp+4Ch+var_C]
		mov	edi, [esp+4Ch+var_8]
		mov	ebp, [esp+4Ch+var_4]
		add	esp, 4Ch
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_403120:				; CODE XREF: sub_4030D0+2Dj
		lea	eax, [esp+4Ch+SystemTimeAsFileTime]
		mov	[esp+4Ch+lpSystemTimeAsFileTime], eax ;	lpSystemTimeAsFileTime
		call	ds:GetSystemTimeAsFileTime
		sub	esp, 4
		mov	eax, [esp+4Ch+SystemTimeAsFileTime.dwHighDateTime]
		mov	ebp, [esp+4Ch+SystemTimeAsFileTime.dwLowDateTime]
		mov	[esp+4Ch+var_30], eax
		call	ds:GetCurrentProcessId
		mov	edi, eax
		call	ds:GetCurrentThreadId
		mov	esi, eax
		call	ds:GetTickCount
		mov	ebx, eax
		lea	eax, [esp+4Ch+PerformanceCount]
		mov	[esp+4Ch+lpSystemTimeAsFileTime], eax ;	lpPerformanceCount
		call	ds:QueryPerformanceCounter
		sub	esp, 4
		xor	ebp, [esp+4Ch+var_30]
		xor	ebp, dword ptr [esp+4Ch+PerformanceCount]
		xor	ebp, dword ptr [esp+4Ch+PerformanceCount+4]
		xor	ebp, edi
		xor	ebp, esi
		xor	ebp, ebx
		mov	eax, ebp
		cmp	ebp, 0BB40E64Eh
		not	eax
		jz	short loc_403192

loc_403182:				; CODE XREF: sub_4030D0+CCj
		mov	dword_404018, ebp
		mov	dword_40401C, eax
		jmp	loc_403106
; ---------------------------------------------------------------------------

loc_403192:				; CODE XREF: sub_4030D0+B0j
		mov	eax, 44BF19B0h
		mov	ebp, 0BB40E64Fh
		jmp	short loc_403182
sub_4030D0	endp

; ---------------------------------------------------------------------------
		align 10h
		push	ebp
		mov	ebp, esp
		sub	esp, 28h
		mov	eax, [ebp+4]
		lea	edx, [ebp+4]
		mov	ds:dword_406144, edx
		mov	ds:dword_406360, 0C0000409h
		mov	ds:dword_406364, 1
		mov	ds:dword_406138, eax
		mov	ds:dword_40636C, eax
		mov	eax, [ebp+8]
		mov	dword ptr [esp], 0
		mov	ds:dword_40612C, eax
		mov	eax, dword_404018
		mov	[ebp-10h], eax
		mov	eax, dword_40401C
		mov	[ebp-0Ch], eax
		call	ds:SetUnhandledExceptionFilter
		sub	esp, 4
		mov	dword ptr [esp], offset	off_405878
		call	ds:UnhandledExceptionFilter
		sub	esp, 4
		call	ds:GetCurrentProcess
		mov	dword ptr [esp+4], 0C0000409h
		mov	[esp], eax
		call	ds:TerminateProcess
		sub	esp, 8
		call	abort
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_403230	proc near		; CODE XREF: sub_4033D0+79p
					; sub_4033D0:loc_403462p

lpCriticalSection= dword ptr -2Ch

		push	ebp
		push	edi
		push	esi
		push	ebx
		sub	esp, 1Ch
		mov	[esp+2Ch+lpCriticalSection], offset CriticalSection ; lpCriticalSection
		call	ds:EnterCriticalSection
		mov	ebx, ds:dword_4063DC
		sub	esp, 4
		test	ebx, ebx
		jz	short loc_403285
		mov	ebp, ds:TlsGetValue
		mov	edi, ds:GetLastError
		lea	esi, [esi+0]

loc_403260:				; CODE XREF: sub_403230+53j
		mov	eax, [ebx]
		mov	[esp+2Ch+lpCriticalSection], eax ; dwTlsIndex
		call	ebp ; TlsGetValue
		sub	esp, 4
		mov	esi, eax
		call	edi ; GetLastError
		test	eax, eax
		jnz	short loc_40327E
		test	esi, esi
		jz	short loc_40327E
		mov	eax, [ebx+4]
		mov	[esp+2Ch+lpCriticalSection], esi
		call	eax

loc_40327E:				; CODE XREF: sub_403230+40j
					; sub_403230+44j
		mov	ebx, [ebx+8]
		test	ebx, ebx
		jnz	short loc_403260

loc_403285:				; CODE XREF: sub_403230+1Fj
		mov	[esp+2Ch+lpCriticalSection], offset CriticalSection ; lpCriticalSection
		call	ds:LeaveCriticalSection
		sub	esp, 4
		add	esp, 1Ch
		pop	ebx
		pop	esi
		pop	edi
		pop	ebp
		retn
sub_403230	endp

; ---------------------------------------------------------------------------
		align 10h
		sub	esp, 1Ch
		mov	eax, ds:dword_4063C0
		mov	[esp+14h], ebx
		xor	ebx, ebx
		mov	[esp+18h], esi
		test	eax, eax
		jnz	short loc_4032C4

loc_4032B6:				; CODE XREF: .text:0040332Cj
		mov	eax, ebx
		mov	esi, [esp+18h]
		mov	ebx, [esp+14h]
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------

loc_4032C4:				; CODE XREF: .text:004032B4j
		mov	dword ptr [esp+4], 0Ch
		mov	dword ptr [esp], 1
		call	calloc
		test	eax, eax
		mov	esi, eax
		jz	short loc_403327
		mov	eax, [esp+20h]
		mov	dword ptr [esp], offset	CriticalSection
		mov	[esi], eax
		mov	eax, [esp+24h]
		mov	[esi+4], eax
		call	ds:EnterCriticalSection
		mov	eax, ds:dword_4063DC
		mov	ds:dword_4063DC, esi
		mov	[esi+8], eax
		sub	esp, 4
		mov	dword ptr [esp], offset	CriticalSection
		call	ds:LeaveCriticalSection
		mov	eax, ebx
		sub	esp, 4
		mov	ebx, [esp+14h]
		mov	esi, [esp+18h]
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------

loc_403327:				; CODE XREF: .text:004032DCj
		mov	ebx, 0FFFFFFFFh
		jmp	short loc_4032B6
; ---------------------------------------------------------------------------
		align 10h
		push	ebx
		sub	esp, 18h
		mov	eax, ds:dword_4063C0
		mov	ebx, [esp+20h]
		test	eax, eax
		jnz	short loc_403348
		add	esp, 18h
		xor	eax, eax
		pop	ebx
		retn
; ---------------------------------------------------------------------------

loc_403348:				; CODE XREF: .text:0040333Fj
		mov	dword ptr [esp], offset	CriticalSection
		call	ds:EnterCriticalSection
		mov	edx, ds:dword_4063DC
		sub	esp, 4
		test	edx, edx
		jz	short loc_40337F
		mov	eax, [edx]
		cmp	eax, ebx
		jnz	short loc_403378
		jmp	short loc_4033B6
; ---------------------------------------------------------------------------
		align 10h

loc_403370:				; CODE XREF: .text:0040337Dj
		mov	ecx, [eax]
		cmp	ecx, ebx
		jz	short loc_403396
		mov	edx, eax

loc_403378:				; CODE XREF: .text:00403366j
		mov	eax, [edx+8]
		test	eax, eax
		jnz	short loc_403370

loc_40337F:				; CODE XREF: .text:00403360j
		mov	dword ptr [esp], offset	CriticalSection
		call	ds:LeaveCriticalSection
		sub	esp, 4

loc_40338F:				; CODE XREF: .text:004033B4j
		add	esp, 18h
		xor	eax, eax
		pop	ebx
		retn
; ---------------------------------------------------------------------------

loc_403396:				; CODE XREF: .text:00403374j
		mov	ecx, [eax+8]
		mov	[edx+8], ecx

loc_40339C:				; CODE XREF: .text:004033C0j
		mov	[esp], eax
		call	free
		mov	dword ptr [esp], offset	CriticalSection
		call	ds:LeaveCriticalSection
		sub	esp, 4
		jmp	short loc_40338F
; ---------------------------------------------------------------------------

loc_4033B6:				; CODE XREF: .text:00403368j
		mov	eax, [edx+8]
		mov	ds:dword_4063DC, eax
		mov	eax, edx
		jmp	short loc_40339C
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4033D0	proc near		; CODE XREF: TlsCallback_1+33p
					; TlsCallback_0+E9p

lpCriticalSection= dword ptr -1Ch
arg_4		= dword	ptr  8

		sub	esp, 1Ch
		mov	eax, [esp+1Ch+arg_4]
		cmp	eax, 1
		jz	short loc_403420
		jb	short loc_4033F0
		cmp	eax, 3
		jz	short loc_403440

loc_4033E3:				; CODE XREF: sub_4033D0+31j
					; sub_4033D0+4Dj ...
		mov	eax, 1
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_4033F0:				; CODE XREF: sub_4033D0+Cj
		mov	eax, ds:dword_4063C0
		test	eax, eax
		jnz	short loc_403462

loc_4033F9:				; CODE XREF: sub_4033D0+97j
		mov	eax, ds:dword_4063C0
		cmp	eax, 1
		jnz	short loc_4033E3
		mov	ds:dword_4063C0, 0
		mov	[esp+1Ch+lpCriticalSection], offset CriticalSection ; lpCriticalSection
		call	ds:DeleteCriticalSection
		sub	esp, 4
		jmp	short loc_4033E3
; ---------------------------------------------------------------------------
		align 10h

loc_403420:				; CODE XREF: sub_4033D0+Aj
		mov	eax, ds:dword_4063C0
		test	eax, eax
		jz	short loc_403450

loc_403429:				; CODE XREF: sub_4033D0+90j
		mov	ds:dword_4063C0, 1
		mov	eax, 1
		add	esp, 1Ch
		retn
; ---------------------------------------------------------------------------
		align 10h

loc_403440:				; CODE XREF: sub_4033D0+11j
		mov	eax, ds:dword_4063C0
		test	eax, eax
		jz	short loc_4033E3
		call	sub_403230
		jmp	short loc_4033E3
; ---------------------------------------------------------------------------

loc_403450:				; CODE XREF: sub_4033D0+57j
		mov	[esp+1Ch+lpCriticalSection], offset CriticalSection ; lpCriticalSection
		call	ds:InitializeCriticalSection
		sub	esp, 4
		jmp	short loc_403429
; ---------------------------------------------------------------------------

loc_403462:				; CODE XREF: sub_4033D0+27j
		call	sub_403230
		jmp	short loc_4033F9
sub_4033D0	endp

; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_403470	proc near		; CODE XREF: sub_401180+19p
					; sub_4029B0+3Cp

arg_0		= byte ptr  4

		push	ecx
		push	eax
		cmp	eax, 1000h
		lea	ecx, [esp+8+arg_0]
		jb	short loc_403492

loc_40347D:				; CODE XREF: sub_403470+20j
		sub	ecx, 1000h
		or	dword ptr [ecx], 0
		sub	eax, 1000h
		cmp	eax, 1000h
		ja	short loc_40347D

loc_403492:				; CODE XREF: sub_403470+Bj
		sub	ecx, eax
		or	dword ptr [ecx], 0
		pop	eax
		pop	ecx
		retn
sub_403470	endp

; ---------------------------------------------------------------------------
		align 10h
		mov	eax, [esp+0Ch]
		mov	edx, [esp+8]
		mov	ecx, [esp+4]
		lock cmpxchg [ecx], edx
		retn
; ---------------------------------------------------------------------------
		jmp	short sub_4034C0
; ---------------------------------------------------------------------------
		align 10h

; =============== S U B	R O U T	I N E =======================================


sub_4034C0	proc near		; CODE XREF: sub_401180+A7p
					; .text:004034B1j

arg_0		= dword	ptr  4
arg_4		= dword	ptr  8
arg_8		= dword	ptr  0Ch

		mov	eax, [esp+arg_8]
		mov	edx, [esp+arg_4]
		mov	ecx, [esp+arg_0]
		lock cmpxchg [ecx], edx
		retn	0Ch
sub_4034C0	endp

; ---------------------------------------------------------------------------
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION __getmainargs]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION __set_app_type]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION memcpy]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION malloc]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION strlen]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION _cexit]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION _amsg_exit]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION _initterm]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION exit]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION strncmp]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION fwrite]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION strstr]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION _lock]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION __dllonexit]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION _unlock]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION signal]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION __setusermatherr]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION fprintf]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION vfprintf]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION abort]
		align 10h
; [00000006 BYTES: COLLAPSED FUNCTION calloc]
		align 4
; [00000006 BYTES: COLLAPSED FUNCTION free]
		align 10h

; =============== S U B	R O U T	I N E =======================================

; Attributes: bp-based frame

sub_403590	proc near		; DATA XREF: .text:004035B4o

var_18		= dword	ptr -18h

		push	ebp
		mov	ebp, esp
		sub	esp, 18h
		call	sub_4014F0
		mov	[esp+18h+var_18], offset sub_401540 ; _onexit_t
		call	sub_402490
		leave
		retn
sub_403590	endp

; ---------------------------------------------------------------------------
		align 10h
dword_4035B0	dd 0FFFFFFFFh		; DATA XREF: sub_4030B0-4Cr
					; sub_4030B0:loc_403073r ...
		dd offset sub_403590
		dd 0
		dd 0FFFFFFFFh
dword_4035C0	dd 10h dup(0)		; DATA XREF: .data:off_40400Co
		dd 280h	dup(?)
_text		ends

; Section 2. (virtual address 00004000)
; Virtual size			: 00000024 (	 36.)
; Section size in file		: 00000200 (	512.)
; Offset to raw	data for section: 00002A00
; Flags	C0300040: Data Readable	Writable
; Alignment	: 4 bytes
; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read/Write
_data		segment	dword public 'DATA' use32
		assume cs:_data
		;org 404000h
		dd 0FFh, 2 dup(0FFFFFFFFh)
off_40400C	dd offset dword_4035C0	; DATA XREF: sub_403030+3r
					; sub_403030+12r ...
dword_404010	dd 2			; DATA XREF: TlsCallback_0+13r
					; TlsCallback_0+1Cw ...
dword_404014	dd 0FFFFFFFFh		; DATA XREF: sub_401060+7Ar
dword_404018	dd 0BB40E64Eh		; DATA XREF: sub_4030D0+3r
					; sub_4030D0:loc_403182w ...
dword_40401C	dd 44BF19B1h		; DATA XREF: sub_4030D0+31w
					; sub_4030D0+B8w ...
dword_404020	dd 0			; DATA XREF: sub_4014F0+6r
					; sub_4014F0+42o
		align 1000h
_data		ends

; Section 3. (virtual address 00005000)
; Virtual size			: 00000880 (   2176.)
; Section size in file		: 00000A00 (   2560.)
; Offset to raw	data for section: 00002C00
; Flags	40300040: Data Readable
; Alignment	: 4 bytes
; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read
_rdata		segment	dword public 'DATA' use32
		assume cs:_rdata
		;org 405000h
; CHAR ProcName[]
ProcName	db '_set_invalid_parameter_handler',0 ; DATA XREF: sub_401180+137o
		align 10h
; CHAR ModuleName[]
ModuleName	db 'libgcj-12.dll',0    ; DATA XREF: sub_4014F0+Fo
; CHAR a_jv_registercl[]
a_jv_registercl	db '_Jv_RegisterClasses',0 ; DATA XREF: sub_4014F0+28o
		align 4
aS		db '%s',0Ah,0           ; DATA XREF: sub_4015BD+44o
					; sub_4015BD+1BCo ...
aCu:					; DATA XREF: sub_4015BD+169o
		unicode	0, <cu >
byte_40504E	db 0			; DATA XREF: sub_4015BD:loc_401745o
					; sub_4018D1:loc_4018F6o ...
aSS6uSS		db '%s%s%6u %s %s',0Ah,0 ; DATA XREF: sub_4015BD+1A7o
aDataTruncated	db 'Data truncated',0Ah,0 ; DATA XREF: sub_4017E4+77o
aCanTFindResour	db 'Can',27h,'t find resource path %s',0Ah,0 ; DATA XREF: sub_4017E4+97o
aDonTKnowHowToH	db 'Don',27h,'t know how to handle %s',0Ah,0 ; DATA XREF: sub_401889+2Eo
					; sub_4018D1+64o ...
aGresourceIsBui	db 'gresource is built without elf support',0Ah,0
					; DATA XREF: sub_401889+3Ao
					; sub_4018D1+70o ...
asc_4050D0	db '/',0                ; DATA XREF: sub_4018D1+3Do
aHelp		db 'help',0             ; DATA XREF: sub_4019A9+2Eo
					; sub_401E45+EBo
aPrintHelp	db 'Print help',0       ; DATA XREF: sub_4019A9+51o
aCommand	db '[COMMAND]',0        ; DATA XREF: sub_4019A9+60o
					; sub_4019A9:loc_401C9Fo
aSections	db 'sections',0         ; DATA XREF: sub_4019A9+79o
					; sub_4019A9+354o ...
		align 4
aListSectionsCo	db 'List sections containing resources in an elf FILE',0
					; DATA XREF: sub_4019A9+9Co
aFile		db 'FILE',0             ; DATA XREF: sub_4019A9+ABo
					; sub_4019A9:loc_401CD9o
aList		db 'list',0             ; DATA XREF: sub_4019A9+C4o
					; sub_401E45+1C1o
aListResourcesI	db 'List resources',0Ah ; DATA XREF: sub_4019A9+E7o
		db 'If SECTION is given, only list resources in this section',0Ah
		db 'If PATH is given, only list matching resources',0
aFilePath	db 'FILE [PATH]',0      ; DATA XREF: sub_4019A9+F6o
					; sub_4019A9+160o
aSection	db 'SECTION',0          ; DATA XREF: sub_4019A9+105o
					; sub_4019A9+16Fo ...
aSectionS	db '[--section %s]',0   ; DATA XREF: sub_4019A9+115o
					; sub_4019A9+17Fo ...
aDetails	db 'details',0          ; DATA XREF: sub_4019A9+12Eo
					; sub_401E45+20Co
		align 4
aListResourcesW	db 'List resources with details',0Ah ; DATA XREF: sub_4019A9+151o
		db 'If SECTION is given, only list resources in this section',0Ah
		db 'If PATH is given, only list matching resources',0Ah
		db 'Details include the section, size and compression',0
aExtract	db 'extract',0          ; DATA XREF: sub_4019A9+198o
					; sub_401E45+13Bo
		align 4
aExtractAResour	db 'Extract a resource file to stdout',0 ; DATA XREF: sub_4019A9+1BBo
aFilePath_0	db 'FILE PATH',0        ; DATA XREF: sub_4019A9+1CAo
aUnknownCommand	db 'Unknown command %s',0Ah ; DATA XREF: sub_4019A9:loc_401BA3o
		db 0Ah,0
		align 4
aUsageGresource	db 'Usage:',0Ah         ; DATA XREF: sub_4019A9+230o
		db '  gresource [--section SECTION] COMMAND [ARGS...]',0Ah
		db 0Ah
		db 'Commands:',0Ah
		db '  help                      Show this information',0Ah
		db '  sections                  List resource sections',0Ah
		db '  list                      List resources',0Ah
		db '  details                   List resources with details',0Ah
		db '  extract                   Extract a resource',0Ah
		db 0Ah
		db 'Use ',27h,'gresource help COMMAND',27h,' to get detailed help.',0Ah
		db 0Ah,0
		align 10h
aUsageGresour_0	db 'Usage:',0Ah         ; DATA XREF: sub_4019A9:loc_401C2Eo
		db '  gresource %s%s%s %s',0Ah
		db 0Ah
		db '%s',0Ah
		db 0Ah,0
aArguments	db 'Arguments:',0Ah,0   ; DATA XREF: sub_4019A9+2BAo
		align 10h
aSectionAnOptio	db '  SECTION   An (optional) elf section name',0Ah,0
					; DATA XREF: sub_4019A9+2DBo
aCommandTheOpti	db '  COMMAND   The (optional) command to explain',0Ah,0
					; DATA XREF: sub_4019A9+315o
		align 4
aFileAnElfFileA	db '  FILE      An elf file (a binary or a shared library)',0Ah,0
					; DATA XREF: sub_4019A9+377o
aFileAnElfFil_0	db '  FILE      An elf file (a binary or a shared library)',0Ah
					; DATA XREF: sub_4019A9:loc_401D3Do
		db '            or a compiled resource file',0Ah,0
aPath		db '[PATH]',0           ; DATA XREF: sub_4019A9:loc_401D58o
		align 4
aPathAnOptional	db '  PATH      An (optional) resource path (may be partial)',0Ah,0
					; DATA XREF: sub_4019A9+3CEo
aPath_0		db 'PATH',0             ; DATA XREF: sub_4019A9:loc_401D94o
aPathAResourceP	db '  PATH      A resource path',0Ah,0 ; DATA XREF: sub_4019A9+40Ao
asc_4055D8	db 0Ah,0		; DATA XREF: sub_4019A9:loc_401DCEo
aS_0		db '%s',0               ; DATA XREF: sub_4019A9+447o
aGlib20		db 'glib20',0           ; DATA XREF: sub_401E45+34o
					; sub_401E45+51o ...
aUtf8		db 'UTF-8',0            ; DATA XREF: sub_401E45+69o
aSection_0	db '--section',0        ; DATA XREF: sub_401E45+ACo
; CHAR LibFileName[]
LibFileName	db 'mingwm10.dll',0     ; DATA XREF: TlsCallback_0+4Eo
; CHAR a__mingwthr_rem[]
a__mingwthr_rem	db '__mingwthr_remove_key_dtor',0 ; DATA XREF: TlsCallback_0+71o
; CHAR a__mingwthr_key[]
a__mingwthr_key	db '__mingwthr_key_dtor',0 ; DATA XREF: TlsCallback_0+8Bo
off_405630	dd offset TlsCallback_0	; DATA XREF: sub_401180:loc_401273r
aUnknownError	db 'Unknown error',0    ; DATA XREF: sub_4026A0+3o
		align 4
; char Format[]
Format		db '_matherr(): %s in %s(%g, %g)  (retval=%g)',0Ah,0
					; DATA XREF: sub_4026A0+39o
		align 10h
aArgumentDomain	db 'Argument domain error (DOMAIN)',0 ; DATA XREF: .rdata:off_405750o
aArgumentSingul	db 'Argument singularity (SIGN)',0 ; DATA XREF: .rdata:00405754o
		align 4
aOverflowRangeE	db 'Overflow range error (OVERFLOW)',0 ; DATA XREF: .rdata:00405758o
aTheResultIsToo	db 'The result is too small to be represented (UNDERFLOW)',0
					; DATA XREF: .rdata:0040575Co
		align 4
aTotalLossOfSig	db 'Total loss of significance (TLOSS)',0 ; DATA XREF: .rdata:00405760o
		align 4
aPartialLossOfS	db 'Partial loss of significance (PLOSS)',0 ; DATA XREF: .rdata:00405764o
		align 10h
off_405750	dd offset aArgumentDomain ; DATA XREF: sub_4026A0+16r
					; "Argument domain error (DOMAIN)"
		dd offset aArgumentSingul ; "Argument singularity (SIGN)"
		dd offset aOverflowRangeE ; "Overflow range error (OVERFLOW)"
		dd offset aTheResultIsToo ; "The result	is too small to	be represent"...
		dd offset aTotalLossOfSig ; "Total loss	of significance	(TLOSS)"
		dd offset aPartialLossOfS ; "Partial loss of significance (PLOSS)"
aMingwW64Runtim	db 'Mingw-w64 runtime failure:',0Ah,0 ; DATA XREF: sub_402710+1Do
; char aAddressPHasNoI[]
aAddressPHasNoI	db 'Address %p has no image-section',0 ; DATA XREF: sub_402770+20Do
; char aVirtualqueryFa[]
aVirtualqueryFa	db '  VirtualQuery failed for %d bytes at address %p',0
					; DATA XREF: sub_402770+1F9o
					; sub_402770+225o ...
		align 4
; char aVirtualprotect[]
aVirtualprotect	db '  VirtualProtect failed with code 0x%x',0 ; DATA XREF: sub_402770+1D2o
		align 10h
; char aUnknownPseud_0[]
aUnknownPseud_0	db '  Unknown pseudo relocation protocol version %d.',0Ah,0
					; DATA XREF: sub_4029B0+299o
		align 4
; char aUnknownPseudoR[]
aUnknownPseudoR	db '  Unknown pseudo relocation bit size %d.',0Ah,0
					; DATA XREF: sub_4029B0+1B7o
		align 10h
; const	WCHAR aMsvcrt_dll
aMsvcrt_dll:				; DATA XREF: sub_402F60:loc_403000o
		unicode	0, <msvcrt.dll>,0
		align 4
off_405878	dd offset dword_406360	; DATA XREF: .text:004031F8o
		dd offset dword_406080
dword_405880	dd 0			; DATA XREF: sub_4029B0+59o
					; sub_4029B0+5Eo ...
dword_405884	dd 0			; DATA XREF: sub_4029B0+7Fr
dword_405888	dd 0			; DATA XREF: sub_4029B0:loc_402AFCr
dword_40588C	dd 5Dh dup(0)		; DATA XREF: sub_4029B0+155o
		align 800h
_rdata		ends

; Section 4. (virtual address 00006000)
; Virtual size			: 0000041C (   1052.)
; Section size in file		: 00000000 (	  0.)
; Offset to raw	data for section: 00000000
; Flags	C0600080: Bss Readable Writable
; Alignment	: 32 bytes
; ===========================================================================

; Segment type:	Uninitialized
; Segment permissions: Read/Write
; Segment alignment '32byte' can not be represented in assembly
_bss		segment	para public 'BSS' use32
		assume cs:_bss
		;org 406000h
		assume es:nothing, ss:nothing, ds:_data, fs:nothing, gs:nothing
dword_406000	dd ?			; DATA XREF: sub_401180+D0w
					; sub_401180+27Dr
dword_406004	dd ?			; DATA XREF: sub_401010+2Ao
					; sub_401180:loc_401344r ...
dword_406008	dd ?			; DATA XREF: sub_401010+18o
					; sub_401180+1DEr ...
dword_40600C	dd ?			; DATA XREF: sub_401010+10o
					; sub_401180+243r ...
dword_406010	dd ?			; DATA XREF: sub_401180+272w
					; sub_401180+28Cr
dword_406014	dd ?			; DATA XREF: sub_401060:loc_401098w
					; sub_401180+26Ar
dword_406018	dd ?			; DATA XREF: sub_401010+8o
					; sub_401010+20w
dword_40601C	dd ?			; DATA XREF: sub_401010+3Aw
dword_406020	dd ?			; DATA XREF: sub_401010+3r
dword_406024	dd ?			; DATA XREF: sub_401010+25r
dword_406028	dd ?			; DATA XREF: sub_401060+22w
dword_40602C	dd ?			; DATA XREF: sub_401060+18w
dword_406030	dd ?			; DATA XREF: sub_401060+Ew
TlsIndex	dd ?			; DATA XREF: .tls:TlsIndex_ptro
; HMODULE hLibModule
hLibModule	dd ?			; DATA XREF: TlsCallback_0+60w
					; TlsCallback_0+83r ...
dword_40603C	dd ?			; DATA XREF: sub_401060+2Cw
dword_406040	dd ?			; DATA XREF: sub_401060+3Dr
					; sub_401180+61r ...
dword_406044	dd ?			; DATA XREF: sub_401060+5Er
dword_406048	dd ?			; DATA XREF: sub_401180+12Dw
					; TopLevelExceptionFilter:loc_40251Cr
dword_40604C	dd ?			; DATA XREF: .text:00402643r
					; sub_402690+4w
dword_406050	dd ?			; DATA XREF: sub_4029B0+9r
					; sub_4029B0:loc_4029D0w
dword_406054	dd ?			; DATA XREF: sub_402770+1Dr
					; sub_402770+58r ...
dword_406058	dd ?			; DATA XREF: sub_402770+Br
					; sub_402770:loc_40282Fw ...
dword_40605C	dd ?			; DATA XREF: sub_402F60+4r
					; sub_402F60+92w ...
dword_406060	dd ?			; DATA XREF: sub_4030B0r
					; sub_4030B0:loc_4030C0w
		align 20h
dword_406080	dd 2Bh dup(?)		; DATA XREF: .rdata:0040587Co
dword_40612C	dd ?			; DATA XREF: .text:004031DAw
		dd 2 dup(?)
dword_406138	dd ?			; DATA XREF: .text:004031C6w
		dd 2 dup(?)
dword_406144	dd ?			; DATA XREF: .text:004031ACw
		dd 86h dup(?)
dword_406360	dd ?			; DATA XREF: .text:004031B2w
					; .rdata:off_405878o
dword_406364	dd ?			; DATA XREF: .text:004031BCw
		dd ?
dword_40636C	dd ?			; DATA XREF: .text:004031CBw
		dd 14h dup(?)
dword_4063C0	dd ?			; DATA XREF: .text:004032A3r
					; .text:00403334r ...
; struct _RTL_CRITICAL_SECTION CriticalSection
CriticalSection	_RTL_CRITICAL_SECTION <?> ; DATA XREF: sub_403230+7o
					; sub_403230:loc_403285o ...
dword_4063DC	dd ?			; DATA XREF: sub_403230+14r
					; .text:004032F8r ...
		dd ?
dword_4063E4	dd ?			; DATA XREF: sub_401180+1A8w
dword_4063E8	dd ?			; DATA XREF: sub_401180+1BFw
dword_4063EC	dd ?			; DATA XREF: sub_401180+1B2w
dword_4063F0	dd ?			; DATA XREF: TlsCallback_0+A3w
					; TlsCallback_0:loc_402303w ...
dword_4063F4	dd ?			; DATA XREF: TlsCallback_0+7Ew
					; TlsCallback_0+AEr ...
dword_4063F8	dd ?			; DATA XREF: TlsCallback_0:loc_402254w
dword_4063FC	dd ?			; DATA XREF: sub_401060+64w
					; sub_4023D0+3Fr ...
dword_406400	dd ?			; DATA XREF: sub_401060+69w
					; sub_4023D0+4r ...
dword_406404	dd ?			; DATA XREF: sub_401180+A0o
					; sub_401180+ECw
dword_406408	dd ?			; DATA XREF: sub_401180+B3r
					; sub_401180:loc_401243r ...
		align 1000h
_bss		ends

;
; Imports from libgio-2.0-0.dll
;
; Section 5. (virtual address 00007000)
; Virtual size			: 00000A20 (   2592.)
; Section size in file		: 00000C00 (   3072.)
; Offset to raw	data for section: 00003600
; Flags	C0300040: Data Readable	Writable
; Alignment	: 4 bytes
; ===========================================================================

; Segment type:	Externs
; _idata
		extrn __imp_g_resource_enumerate_children:dword
					; DATA XREF: g_resource_enumerate_childrenr
		extrn __imp_g_resource_get_info:dword ;	DATA XREF: g_resource_get_infor
		extrn __imp_g_resource_lookup_data:dword
					; DATA XREF: g_resource_lookup_datar
		extrn __imp_g_resource_new_from_data:dword
					; DATA XREF: g_resource_new_from_datar
		extrn __imp_g_resource_unref:dword ; DATA XREF:	g_resource_unrefr

;
; Imports from libglib-2.0-0.dll
;
		extrn __imp__glib_get_locale_dir:dword ; DATA XREF: _glib_get_locale_dirr
		extrn __imp_g_bytes_get_data:dword ; DATA XREF:	g_bytes_get_datar
		extrn __imp_g_bytes_new_take:dword ; DATA XREF:	g_bytes_new_taker
		extrn __imp_g_bytes_unref:dword	; DATA XREF: g_bytes_unrefr
		extrn __imp_g_error_free:dword ; DATA XREF: g_error_freer
		extrn __imp_g_file_get_contents_utf8:dword
					; DATA XREF: g_file_get_contents_utf8r
		extrn __imp_g_free:dword ; DATA	XREF: g_freer
		extrn __imp_g_print:dword ; DATA XREF: g_printr
		extrn __imp_g_printerr:dword ; DATA XREF: g_printerrr
		extrn __imp_g_strconcat:dword ;	DATA XREF: g_strconcatr
		extrn __imp_g_strdup_printf:dword ; DATA XREF: g_strdup_printfr
		extrn __imp_g_strfreev:dword ; DATA XREF: g_strfreevr
		extrn __imp_g_string_append:dword ; DATA XREF: g_string_appendr
		extrn __imp_g_string_append_printf:dword
					; DATA XREF: g_string_append_printfr
		extrn __imp_g_string_free:dword	; DATA XREF: g_string_freer
		extrn __imp_g_string_new:dword ; DATA XREF: g_string_newr
		extrn __imp_g_string_printf:dword ; DATA XREF: g_string_printfr

;
; Imports from libintl-8.dll
;
		extrn __imp_libintl_bind_textdomain_codeset:dword
					; DATA XREF: libintl_bind_textdomain_codesetr
		extrn __imp_libintl_bindtextdomain:dword
					; DATA XREF: libintl_bindtextdomainr
		extrn __imp_libintl_gettext:dword ; DATA XREF: libintl_gettextr
		extrn __imp_libintl_setlocale:dword ; DATA XREF: libintl_setlocaler
		extrn __imp_libintl_textdomain:dword ; DATA XREF: libintl_textdomainr

;
; Imports from KERNEL32.dll
;
; void __stdcall DeleteCriticalSection(LPCRITICAL_SECTION lpCriticalSection)
		extrn DeleteCriticalSection:dword ; CODE XREF: sub_4033D0+44p
					; DATA XREF: sub_4033D0+44r
; void __stdcall EnterCriticalSection(LPCRITICAL_SECTION lpCriticalSection)
		extrn EnterCriticalSection:dword ; CODE	XREF: sub_403230+Ep
					; .text:004032F2p ...
; BOOL __stdcall FreeLibrary(HMODULE hLibModule)
		extrn FreeLibrary:dword	; CODE XREF: TlsCallback_0+10Ap
					; DATA XREF: TlsCallback_0+10Ar
; HANDLE __stdcall GetCurrentProcess()
		extrn GetCurrentProcess:dword ;	CODE XREF: .text:00403208p
					; DATA XREF: .text:00403208r
; DWORD	__stdcall GetCurrentProcessId()
		extrn GetCurrentProcessId:dword	; CODE XREF: sub_4030D0+6Cp
					; DATA XREF: sub_4030D0+6Cr
; DWORD	__stdcall GetCurrentThreadId()
		extrn GetCurrentThreadId:dword ; CODE XREF: sub_4030D0+74p
					; DATA XREF: sub_4030D0+74r
; DWORD	__stdcall GetLastError()
		extrn GetLastError:dword ; CODE	XREF: sub_402770+1CCp
					; sub_403230+3Cp
					; DATA XREF: ...
; HMODULE __stdcall GetModuleHandleA(LPCSTR lpModuleName)
		extrn GetModuleHandleA:dword ; CODE XREF: sub_4014F0+16p
					; sub_402F60+87p
					; DATA XREF: ...
; FARPROC __stdcall GetProcAddress(HMODULE hModule, LPCSTR lpProcName)
		extrn GetProcAddress:dword ; CODE XREF:	sub_401180+142p
					; sub_4014F0+33p ...
; void __stdcall GetStartupInfoA(LPSTARTUPINFOA	lpStartupInfo)
		extrn GetStartupInfoA:dword ; CODE XREF: sub_401180+2F6p
					; DATA XREF: sub_401180+2F6r
; void __stdcall GetSystemTimeAsFileTime(LPFILETIME lpSystemTimeAsFileTime)
		extrn GetSystemTimeAsFileTime:dword ; CODE XREF: sub_4030D0+57p
					; DATA XREF: sub_4030D0+57r
; DWORD	__stdcall GetTickCount()
		extrn GetTickCount:dword ; CODE	XREF: sub_4030D0+7Cp
					; DATA XREF: sub_4030D0+7Cr
; void __stdcall InitializeCriticalSection(LPCRITICAL_SECTION lpCriticalSection)
		extrn InitializeCriticalSection:dword ;	CODE XREF: sub_4033D0+87p
					; DATA XREF: sub_4033D0+87r
; void __stdcall LeaveCriticalSection(LPCRITICAL_SECTION lpCriticalSection)
		extrn LeaveCriticalSection:dword ; CODE	XREF: sub_403230+5Cp
					; .text:00403310p ...
; HMODULE __stdcall LoadLibraryA(LPCSTR	lpLibFileName)
		extrn LoadLibraryA:dword ; CODE	XREF: TlsCallback_0+55p
					; DATA XREF: TlsCallback_0+55r
; HMODULE __stdcall LoadLibraryW(LPCWSTR lpLibFileName)
		extrn LoadLibraryW:dword ; CODE	XREF: sub_402F60+A7p
					; DATA XREF: sub_402F60+A7r
; BOOL __stdcall QueryPerformanceCounter(LARGE_INTEGER *lpPerformanceCount)
		extrn QueryPerformanceCounter:dword ; CODE XREF: sub_4030D0+8Bp
					; DATA XREF: sub_4030D0+8Br
; LPTOP_LEVEL_EXCEPTION_FILTER __stdcall SetUnhandledExceptionFilter(LPTOP_LEVEL_EXCEPTION_FILTER lpTopLevelExceptionFilter)
		extrn SetUnhandledExceptionFilter:dword	; CODE XREF: sub_401180+124p
					; .text:004031EFp
					; DATA XREF: ...
; void __stdcall Sleep(DWORD dwMilliseconds)
		extrn Sleep:dword	; CODE XREF: sub_401180+8Fp
					; DATA XREF: sub_401180+74r
; BOOL __stdcall TerminateProcess(HANDLE hProcess, UINT	uExitCode)
		extrn TerminateProcess:dword ; CODE XREF: .text:00403219p
					; DATA XREF: .text:00403219r
; LPVOID __stdcall TlsGetValue(DWORD dwTlsIndex)
		extrn TlsGetValue:dword	; CODE XREF: sub_403230+35p
					; DATA XREF: sub_403230+21r
; LONG __stdcall UnhandledExceptionFilter(struct _EXCEPTION_POINTERS *ExceptionInfo)
		extrn UnhandledExceptionFilter:dword ; CODE XREF: .text:004031FFp
					; DATA XREF: .text:004031FFr
; BOOL __stdcall VirtualProtect(LPVOID lpAddress, SIZE_T dwSize, DWORD flNewProtect, PDWORD lpflOldProtect)
		extrn VirtualProtect:dword ; CODE XREF:	sub_402770+142p
					; sub_402770+184p ...
; SIZE_T __stdcall VirtualQuery(LPCVOID	lpAddress, PMEMORY_BASIC_INFORMATION lpBuffer, SIZE_T dwLength)
		extrn VirtualQuery:dword ; CODE	XREF: sub_402770+A1p
					; sub_402770+D9p ...

;
; Imports from msvcrt.dll
;
		extrn __imp___dllonexit:dword ;	DATA XREF: __dllonexitr
		extrn __imp___getmainargs:dword	; DATA XREF: __getmainargsr
		extrn __initenv:dword	; DATA XREF: sub_401180+23Er
		extrn __lconv_init:dword ; DATA	XREF: sub_4023A0r
		extrn __imp___set_app_type:dword ; DATA	XREF: __set_app_typer
		extrn __imp___setusermatherr:dword ; DATA XREF:	__setusermatherrr
		extrn _acmdln:dword	; DATA XREF: sub_401180+166r
		extrn __imp__amsg_exit:dword ; DATA XREF: _amsg_exitr
		extrn __imp__cexit:dword ; DATA	XREF: _cexitr
; int fmode
		extrn _fmode:dword	; DATA XREF: sub_401060+6Er
		extrn __imp__initterm:dword ; DATA XREF: _inittermr
		extrn _iob:dword	; DATA XREF: sub_4017E4+46r
					; sub_4026A0+45r ...
		extrn __imp__lock:dword	; DATA XREF: _lockr
; _onexit_t __cdecl onexit(_onexit_t Func)
		extrn _onexit:dword	; CODE XREF: sub_4023D0+A3p
					; DATA XREF: sub_4023D0+A3r
		extrn __imp__unlock:dword ; DATA XREF: _unlockr
		extrn _winmajor:dword	; DATA XREF: TlsCallback_0+4r
; void __cdecl abort()
		extrn __imp_abort:dword	; DATA XREF: abortr
; void *__cdecl	calloc(size_t NumOfElements, size_t SizeOfElements)
		extrn __imp_calloc:dword ; DATA	XREF: callocr
; void __cdecl __noreturn exit(int Code)
		extrn __imp_exit:dword	; DATA XREF: exitr
; int fprintf(FILE *File, const	char *Format, ...)
		extrn __imp_fprintf:dword ; DATA XREF: fprintfr
; void __cdecl free(void *Memory)
		extrn __imp_free:dword	; DATA XREF: freer
; size_t __cdecl fwrite(const void *Str, size_t	Size, size_t Count, FILE *File)
		extrn __imp_fwrite:dword ; DATA	XREF: fwriter
; void *__cdecl	malloc(size_t Size)
		extrn __imp_malloc:dword ; DATA	XREF: mallocr
; void *__cdecl	memcpy(void *Dst, const	void *Src, size_t Size)
		extrn __imp_memcpy:dword ; DATA	XREF: memcpyr
		extrn __imp_signal:dword ; DATA	XREF: signalr
; size_t __cdecl strlen(const char *Str)
		extrn __imp_strlen:dword ; DATA	XREF: strlenr
; int __cdecl strncmp(const char *Str1,	const char *Str2, size_t MaxCount)
		extrn __imp_strncmp:dword ; DATA XREF: strncmpr
; char *__cdecl	strstr(const char *Str,	const char *SubStr)
		extrn __imp_strstr:dword ; DATA	XREF: strstrr
; int __cdecl vfprintf(FILE *File, const char *Format, va_list ArgList)
		extrn __imp_vfprintf:dword ; DATA XREF:	vfprintfr


; Section 6. (virtual address 00008000)
; Virtual size			: 00000034 (	 52.)
; Section size in file		: 00000200 (	512.)
; Offset to raw	data for section: 00004200
; Flags	C0300040: Data Readable	Writable
; Alignment	: 4 bytes
; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read/Write
_CRT		segment	dword public 'DATA' use32
		assume cs:_CRT
		;org 408000h
dword_408000	dd 0			; DATA XREF: sub_401180+2D8o
		dd offset sub_401010
dword_408008	dd 0			; DATA XREF: sub_401180:loc_401450o
dword_40800C	dd 0			; DATA XREF: sub_401180+316o
		dd offset sub_401060
		dd offset sub_4023A0
dword_408018	dd 2 dup(0)		; DATA XREF: sub_401180+30Eo
TlsCallbacks	dd offset TlsCallback_0	; DATA XREF: .tls:TlsCallbacks_ptro
		dd offset TlsCallback_1
		dd 0
		align 10h
dword_408030	dd 74h dup(0)		; DATA XREF: TlsCallback_0:loc_402343o
					; TlsCallback_0+138o ...
		align 1000h
_CRT		ends

; Section 7. (virtual address 00009000)
; Virtual size			: 00000020 (	 32.)
; Section size in file		: 00000200 (	512.)
; Offset to raw	data for section: 00004400
; Flags	C0300040: Data Readable	Writable
; Alignment	: 4 bytes
; ===========================================================================

; Segment type:	Pure data
; Segment permissions: Read/Write
_tls		segment	dword public 'DATA' use32
		assume cs:_tls
		;org 409000h
TlsDirectory	dd offset TlsStart
TlsEnd_ptr	dd offset TlsEnd
TlsIndex_ptr	dd offset TlsIndex
TlsCallbacks_ptr dd offset TlsCallbacks
TlsSizeOfZeroFill dd 0
TlsCharacteristics dd 0
		db 0
TlsStart	db 3 dup(0)		; DATA XREF: .tls:TlsDirectoryo
TlsEnd		dd 79h dup(0)		; DATA XREF: .tls:TlsEnd_ptro
		align 1000h
_tls		ends


		end start
